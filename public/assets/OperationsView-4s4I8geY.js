import{i as H,M as Q,r as v,N as z,O as W,c as ce,U as B,l as y,n as s,b as Be,D as S,H as x,h as t,q as e,G as w,F as g,L as Fe,k as oe,$ as re,m as De,a0 as ye,A as D,x as k,v as R,Q as Ue,y as ee,R as Ye}from"./index-KkjW4uYu.js";import{V as _e,u as Ge}from"./debounce-Dpgzz3hB.js";import{C as Ve,G as we}from"./canDo-Dm6_9zyq.js";import{G as Te}from"./userData-CfPJjo6R.js";import{u as ie}from"./useStoreAPI-BxqlsQCZ.js";import{_ as Z}from"./ModelDialog.vue_vue_type_script_setup_true_lang-BgLhKVYP.js";import{_ as X}from"./UserSelect.vue_vue_type_script_setup_true_lang-BDQwYspK.js";import{V as qe}from"./VAutocomplete-CokAsnKO.js";import{i as ze}from"./index.esm-DP8daZB1.js";import{v as He}from"./v4-CtRu48qb.js";import{V as q,a as f}from"./VRow-C9ln23A3.js";import{V as ne}from"./VContainer-64CPw4JE.js";import{V as de}from"./VTextField-CNlk0i0m.js";import{V as me}from"./VTextarea-CY9_jGht.js";import{V as Ne}from"./VForm-D6hKVa9-.js";import{V as be}from"./VFileInput-BN0rZEMc.js";import{V as Y,d as Se}from"./VGrid-D5Abtzfx.js";import{V as pe}from"./forwardRefs-Dgtbz3oy.js";import{V as fe,a as ae,b as ue,c as se}from"./VExpansionPanels-B0kcOfMH.js";import{V as Ce,a as Ie,c as ge,d as Ee}from"./VList-Ci2f9Vor.js";import{V as ve}from"./VSpacer-DXcUVVkY.js";import{h as Oe}from"./date-DgbCHIwC.js";import{V as Re}from"./VSelect-D7mPxptI.js";import{V as je}from"./VSheet-acrWZtMu.js";import{a as Qe,d as Ae,e as We}from"./VTabs-A1PQTsoG.js";import{V as Ke}from"./VToolbar-DSb-w0he.js";import{e as Pe}from"./VCard-DFdrd_u-.js";import"./VDataTable-ExWGc7rV.js";import"./VChip-ByMAu2Td.js";import"./VTable-BwciKlGa.js";import"./filter-CHlkO286.js";import"./VDivider-CrXER1xn.js";import"./SaveButton.vue_vue_type_script_setup_true_lang-DGRT9k1P.js";import"./VOverlay-DC3afMrS.js";import"./scopeId-BloW2Yk2.js";import"./VDialog-DUfXbxu0.js";import"./form-DEE8Y-qc.js";import"./createSimpleFunctional-DRrQ4mzg.js";var h=(r=>(r.GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE="GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE",r.GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE="GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE",r.GENERIC_ENUM_CATEGORY_LOST_AND_FOUND_STATUS="GENERIC_ENUM_CATEGORY_LOST_AND_FOUND_STATUS",r))(h||{});const te=[{title:"Costume Prop Clearance",value:"GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE"},{title:"Costume Prop Type",value:"GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE"},{title:"Lost and Found Status",value:"GENERIC_ENUM_CATEGORY_LOST_AND_FOUND_STATUS"}],Le=(r,O)=>r===void 0?!1:Ve(r,we.GROUP_TYPE_CONVENTION,O.ConventionUUID,O).EditProps,Me=(r,O)=>r===void 0?!1:Ve(r,we.GROUP_TYPE_CONVENTION,O.ConventionUUID,O).ConfigureProps,ke=H({__name:"GenericEnumSelect",props:Q({category:{},convention:{},label:{default:""},variant:{default:"filled"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const O=W(),C=v([]),n=z(r,"modelValue");O.getConventionGenericEnums(r.convention.ConventionUUID,r.category).then(I=>{I&&(C.value=I)});const c=ce(()=>{const I=C.value.map(E=>E).sort((E,P)=>E.Title>P.Title?1:E.Title==P.Title?0:-1);return I.unshift({ID:0,GenericEnumUUID:B,ConventionID:0,ConventionUUID:B,Category:r.category,Name:"",Title:`- Select ${r.label} -`,Description:""}),I});return(I,E)=>(s(),y(qe,{label:I.label,items:c.value,"item-title":"Title","item-value":"GenericEnumUUID",variant:I.variant,"hide-details":"",modelValue:n.value,"onUpdate:modelValue":E[0]||(E[0]=P=>n.value=P)},null,8,["label","items","variant","modelValue"]))}}),Je=["href"],he=H({__name:"CameraTether",emits:["file"],setup(r,{emit:O}){const C=W(),n=v(!0),c=Fe(),I=ie(),E=O,P=He(),F=()=>{const U=c.resolve({name:"CameraView",params:{session:P}}),a=new URL(location.href);return a.pathname=U.href,a.toString()},V=()=>{n.value&&setTimeout(()=>{C.registerCameraTetherSession(P).then(U=>{U&&U.SessionUUID&&U.FileUUID?E("file",I.GetFormFileURL(U.FileUUID)):V()}).catch(U=>{console.error(U),V()})},4e3)};return V(),Be(()=>{n.value=!1}),(U,a)=>(s(),S(x,null,[t(q,null,{default:e(()=>[t(f,{class:"text-center"},{default:e(()=>a[0]||(a[0]=[w("p",null," Scan the QR Code to begin the camera session. ",-1)])),_:1})]),_:1}),t(q,null,{default:e(()=>[t(f,{class:"text-center"},{default:e(()=>[t(g(ze),{value:F(),width:"200"},null,8,["value"])]),_:1})]),_:1}),t(q,null,{default:e(()=>[t(f,{class:"text-center"},{default:e(()=>[w("a",{href:F(),target:"_blank"},"Open in new tab",8,Je)]),_:1})]),_:1})],64))}}),Xe=["innerHTML"],Ze=["innerHTML"],et=H({__name:"EditCostumeProp",props:Q({convention:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{},costumeProp:{required:!0},costumePropModifiers:{}}),emits:Q(["new","update:costumeProp"],["update:modelValue","update:costumeProp"]),setup(r,{emit:O}){const C=z(r,"modelValue"),n=z(r,"costumeProp"),c=W(),I=ie(),E=O,P=v(oe(n.value)),F=v(`${I.GetCostumePropImageURL(n.value.CostumePropUUID)}?${new Date().getTime()}`),V=re("imageFileInput"),U=re("propImageForm"),a=v([]),d=v(!1),i=v([]);c.getConventionGenericEnums(r.convention.ConventionUUID,h.GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE).then(N=>{N&&(a.value=N)}),c.getConventionGenericEnums(r.convention.ConventionUUID,h.GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE).then(N=>{N&&(i.value=N)});const p=()=>{},T=()=>{n.value=oe(P.value)},$=N=>{c.saveCostumeProp(n.value).then(m=>{m?(N&&N("Saved Costume Prop"),n.value.CostumePropUUID!=m.CostumePropUUID&&E("new",m),n.value=m,E("update:costumeProp",m),F.value?G(m.CostumePropUUID).then(()=>{setTimeout(()=>{C.value=!1},1e3)}).catch(()=>{N("Failed to Save Image")}):setTimeout(()=>{C.value=!1},1e3)):N&&N("Failed to Save Costume Prop")}).catch(()=>{N&&N("Failed to Save Costume Prop")})},M=ce(()=>!1),_=()=>{V.value&&V.value.files&&(F.value=URL.createObjectURL(V.value.files[0]))},G=async N=>{var b;const m=new FormData((b=U.value)==null?void 0:b.$el);if(m.get("Image")&&m.get("Image").size>0)return m.set("ConventionUUID",r.convention.ConventionUUID),m.set("CostumePropUUID",N),await I.SaveCostumePropImage(m)},u=N=>{if(!N)return"";let m=N;return m=m.replaceAll(`
`,"<br>"),m=m.replaceAll(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),m=m.replaceAll(/\[i](.*?)\[\/i]/g,"<em>$1</em>"),m};function L(N){d.value=!1,fetch(N).then(m=>m.blob()).then(m=>{const b=m.type.split("/")[1]||"dat",K=new File([m],`downloaded-image.${b}`,{type:m.type}),J=new DataTransfer;J.items.add(K),V.value&&(V.value.files=J.files,_())}).catch(m=>console.error("Error fetching image:",m))}return(N,m)=>(s(),y(Z,De({modelValue:C.value,"onUpdate:modelValue":m[8]||(m[8]=b=>C.value=b),title:"Add Costume Prop","show-reset-action":!1,"show-save-action":!1,"show-delete-action":!1,"show-close-action":!1,"hide-extension":!0,fullscreen:!0,persistent:!0,scrollable:!0,onReset:T,onSave:$},{[ye(M.value&&"delete")]:p}),{default:e(()=>[t(ne,null,{default:e(()=>[t(q,null,{default:e(()=>[n.value.AddedBy?(s(),y(f,{key:0,cols:"12"},{default:e(()=>[w("strong",null,"Added By: "+k(n.value.AddedBy.DisplayName),1)]),_:1})):D("",!0),t(f,{cols:"12"},{default:e(()=>[t(X,{modelValue:n.value.OwnerUUID,"onUpdate:modelValue":m[0]||(m[0]=b=>n.value.OwnerUUID=b),convention:N.convention,label:"Owner",variant:"outlined","aria-required":"true",clearable:!0},null,8,["modelValue","convention"])]),_:1}),t(f,{cols:"12"},{default:e(()=>[t(ke,{modelValue:n.value.TypeUUID,"onUpdate:modelValue":m[1]||(m[1]=b=>n.value.TypeUUID=b),category:g(h).GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE,convention:N.convention,label:"Type",variant:"outlined"},null,8,["modelValue","category","convention"])]),_:1}),t(f,{cols:"12"},{default:e(()=>[t(de,{modelValue:n.value.Description,"onUpdate:modelValue":m[2]||(m[2]=b=>n.value.Description=b),label:"Description",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"12"},{default:e(()=>[t(ke,{modelValue:n.value.ClearanceUUID,"onUpdate:modelValue":m[3]||(m[3]=b=>n.value.ClearanceUUID=b),category:g(h).GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE,convention:N.convention,label:"Clearance",variant:"outlined"},null,8,["modelValue","category","convention"])]),_:1}),t(f,{cols:"12"},{default:e(()=>[t(me,{modelValue:n.value.Remarks,"onUpdate:modelValue":m[4]||(m[4]=b=>n.value.Remarks=b),label:"Remarks / Information",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"12"},{default:e(()=>[t(Ne,{ref:"propImageForm",enctype:"multipart/form-data"},{default:e(()=>[t(be,{label:"Photograph",name:"Image",variant:"outlined",ref:"imageFileInput","prepend-icon":"mdi:mdi-camera",capture:"environment",accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp",onChange:_,"hide-details":""})]),_:1})]),_:1}),t(f,{cols:"12",class:"text-center"},{default:e(()=>[t(Y,{color:"primary",onClick:m[5]||(m[5]=b=>d.value=!0)},{default:e(()=>m[9]||(m[9]=[R("Use Camera on Another Device")])),_:1}),m[10]||(m[10]=w("br",null,null,-1)),m[11]||(m[11]=w("small",null,"E.g. A mobile phone",-1))]),_:1}),t(f,{cols:"12"},{default:e(()=>[F.value?(s(),y(pe,{key:0,src:F.value,class:"border profileImage my-0 mx-auto","max-height":"400","max-width":"400",cover:!1},null,8,["src"])):D("",!0)]),_:1}),n.value.ClearanceUUID!==""&&n.value.ClearanceUUID!==g(B)?(s(),y(f,{key:1,cols:"12"},{default:e(()=>{var b,K;return[w("div",null,[w("strong",null,k((b=a.value.find(J=>J.GenericEnumUUID===n.value.ClearanceUUID))==null?void 0:b.Title),1)]),w("div",{innerHTML:u((K=a.value.find(J=>J.GenericEnumUUID===n.value.ClearanceUUID))==null?void 0:K.Description)},null,8,Xe)]}),_:1})):D("",!0),n.value.TypeUUID!==""&&n.value.TypeUUID!==g(B)?(s(),y(f,{key:2,cols:"12"},{default:e(()=>{var b;return[w("div",{innerHTML:u((b=i.value.find(K=>K.GenericEnumUUID===n.value.TypeUUID))==null?void 0:b.Description)},null,8,Ze)]}),_:1})):D("",!0)]),_:1}),t(Z,{modelValue:d.value,"onUpdate:modelValue":m[7]||(m[7]=b=>d.value=b),title:"Camera Tether","show-reset-action":!1,"show-save-action":!1,"show-delete-action":!1,"show-close-action":!1,"hide-extension":!0,scrollable:!0},{actions:e(()=>[t(Y,{color:"primary",variant:"text",onClick:m[6]||(m[6]=b=>d.value=!1)},{default:e(()=>m[12]||(m[12]=[R("Close")])),_:1})]),default:e(()=>[t(he,{onFile:L})]),_:1},8,["modelValue"])]),_:1})]),_:1},16,["modelValue"]))}}),xe=H({__name:"EditGenericEnum",props:Q({convention:{},title:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{},genericEnum:{required:!0},genericEnumModifiers:{}}),emits:Q(["delete:genericEnum","new","update:genericEnum"],["update:modelValue","update:genericEnum"]),setup(r,{emit:O}){const C=z(r,"modelValue"),n=z(r,"genericEnum"),c=v(oe(n.value)),I=W(),E=O,P=v([]),F=v([]),V=i=>{I.deleteGenericEnum(c.value.GenericEnumUUID).then(p=>{var T,$;p?(i&&i(`Deleted ${(T=te.find(M=>M.value==c.value.Category))==null?void 0:T.title}`),E("delete:genericEnum",c.value),setTimeout(()=>{C.value=!1},1e3)):i&&i(`Failed to Delete ${($=te.find(M=>M.value==c.value.Category))==null?void 0:$.title}`)}).catch(()=>{var p;i&&i(`Failed to Delete ${(p=te.find(T=>T.value==c.value.Category))==null?void 0:p.title}`)})},U=ce(()=>c.value.GenericEnumUUID!=B),a=i=>{I.saveGenericEnum(c.value).then(p=>{var T,$;p?(i&&i(`Saved ${(T=te.find(M=>M.value==c.value.Category))==null?void 0:T.title}`),E("update:genericEnum",p),setTimeout(()=>{C.value=!1},1e3)):i&&i(`Failed to Save ${($=te.find(M=>M.value==c.value.Category))==null?void 0:$.title}`)}).catch(()=>{var p;i&&i(`Failed to Save ${(p=te.find(T=>T.value==c.value.Category))==null?void 0:p.title}`)})},d=()=>{c.value=oe(n.value)};return I.getConventionGenericEnums(r.convention.ConventionUUID,h.GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE).then(i=>{i&&(P.value=i)}).catch(()=>{}),I.getConventionGenericEnums(r.convention.ConventionUUID,h.GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE).then(i=>{i&&(F.value=i)}).catch(()=>{}),(i,p)=>(s(),y(Z,De({modelValue:C.value,"onUpdate:modelValue":p[3]||(p[3]=T=>C.value=T),title:i.title,"show-reset-action":!1,"show-save-action":!0,"show-delete-action":!1,"show-close-action":!0,"hide-extension":!0,fullscreen:!1,persistent:!0,scrollable:!0,onReset:d,onSave:a},{[ye(U.value&&"delete")]:V}),{default:e(()=>[t(ne,null,{default:e(()=>[t(q,null,{default:e(()=>[t(f,{cols:"12"},{default:e(()=>[t(de,{modelValue:c.value.Name,"onUpdate:modelValue":p[0]||(p[0]=T=>c.value.Name=T),label:"Internal Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"12"},{default:e(()=>[t(de,{modelValue:c.value.Title,"onUpdate:modelValue":p[1]||(p[1]=T=>c.value.Title=T),label:"Display Title",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"12"},{default:e(()=>[t(me,{modelValue:c.value.Description,"onUpdate:modelValue":p[2]||(p[2]=T=>c.value.Description=T),label:"Description",variant:"outlined"},null,8,["modelValue"]),p[4]||(p[4]=w("br",null,null,-1)),p[5]||(p[5]=w("p",null,[w("strong",null,"Description Formatting Guidance")],-1)),p[6]||(p[6]=w("dl",null,[w("dt",{class:"float-left mr-2"}," ** "),w("dd",null,[R(" Surround text with double asterisk to make text bold. E.g. **this is bold** = "),w("strong",null,"this is bold")]),w("dt",{class:"float-left mr-2"}," [i] "),w("dd",null,[R(" Surround text with [i] and [/i] to make text italic. E.g. [i]italic emphasis[/i] = "),w("em",null,"italic emphasis")])],-1))]),_:1})]),_:1})]),_:1})]),_:1},16,["modelValue","title"]))}}),tt=H({__name:"ConfigCostumeProps",props:Q({convention:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const O=z(r,"modelValue"),C=W(),n=v(),c=v([]),I=v(!1),E=v([]),P=a=>{const d=()=>({ID:0,GenericEnumUUID:B,ConventionID:r.convention.ID,ConventionUUID:r.convention.ConventionUUID,Category:a,Name:"",Title:"",Description:""});n.value=d(),I.value=!0},F=a=>{n.value=a,I.value=!0},V=a=>{let d;switch(a.Category){case h.GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE:d=c.value.findIndex(i=>i.GenericEnumUUID==a.GenericEnumUUID),d>=0&&c.value.splice(d,1);break;case h.GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE:d=E.value.findIndex(i=>i.GenericEnumUUID==a.GenericEnumUUID),d>=0&&E.value.splice(d,1);break}},U=a=>{let d;switch(a.Category){case h.GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE:d=c.value.findIndex(i=>i.GenericEnumUUID==a.GenericEnumUUID),d>=0?c.value.splice(d,1,a):c.value.push(n.value);break;case h.GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE:d=E.value.findIndex(i=>i.GenericEnumUUID==a.GenericEnumUUID),d>=0?E.value.splice(d,1,a):E.value.push(n.value);break}};return C.getConventionGenericEnums(r.convention.ConventionUUID,h.GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE).then(a=>{a&&(c.value=a)}),C.getConventionGenericEnums(r.convention.ConventionUUID,h.GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE).then(a=>{a&&(E.value=a)}),(a,d)=>(s(),y(Z,{modelValue:O.value,"onUpdate:modelValue":d[4]||(d[4]=i=>O.value=i),title:"Configure Costume Props","show-reset-action":!1,"show-save-action":!1,"show-delete-action":!1,"show-close-action":!0,"hide-extension":!0,fullscreen:!0,persistent:!0,scrollable:!0},{default:e(()=>{var i;return[t(fe,null,{default:e(()=>[t(ae,null,{default:e(()=>[t(ue,{color:"primary"},{default:e(()=>d[5]||(d[5]=[R(" Clearance Options ")])),_:1}),t(se,null,{default:e(()=>[t(Ce,null,{default:e(()=>[(s(!0),S(x,null,Ue(c.value,p=>(s(),y(Ie,{key:p.GenericEnumUUID},{append:e(()=>[t(Y,{icon:"mdi:mdi-pencil-outline",color:"warning",size:"x-small",onClick:T=>F(p)},null,8,["onClick"])]),default:e(()=>[t(ge,null,{default:e(()=>[w("strong",null,k(p.Name)+" - "+k(p.Title),1)]),_:2},1024),t(Ee,null,{default:e(()=>[R(k(p.Description),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(q,null,{default:e(()=>[t(f,{class:"text-right"},{default:e(()=>[t(Y,{color:"success","prepend-icon":"mdi:mdi-plus",onClick:d[0]||(d[0]=p=>P(g(h).GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE))},{default:e(()=>d[6]||(d[6]=[R(" Add Item ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(ae,null,{default:e(()=>[t(ue,{color:"primary"},{default:e(()=>d[7]||(d[7]=[R(" Item Types ")])),_:1}),t(se,null,{default:e(()=>[t(Ce,null,{default:e(()=>[(s(!0),S(x,null,Ue(E.value,p=>(s(),y(Ie,{key:p.GenericEnumUUID},{append:e(()=>[t(Y,{icon:"mdi:mdi-pencil-outline",color:"warning",size:"x-small",onClick:T=>F(p)},null,8,["onClick"])]),default:e(()=>[t(ge,null,{default:e(()=>[w("strong",null,k(p.Name)+" - "+k(p.Title),1)]),_:2},1024),t(Ee,null,{default:e(()=>[R(k(p.Description),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(q,null,{default:e(()=>[t(f,{class:"text-right"},{default:e(()=>[t(Y,{color:"success","prepend-icon":"mdi:mdi-plus",onClick:d[1]||(d[1]=p=>P(g(h).GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE))},{default:e(()=>d[8]||(d[8]=[R(" Add Item ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),I.value&&n.value?(s(),y(xe,{key:0,convention:a.convention,title:`Edit ${(i=g(te).find(p=>{var T;return p.value==((T=n.value)==null?void 0:T.Category)}))==null?void 0:i.title}`,modelValue:I.value,"onUpdate:modelValue":d[2]||(d[2]=p=>I.value=p),"generic-enum":n.value,"onUpdate:genericEnum":[d[3]||(d[3]=p=>n.value=p),U],"onDelete:genericEnum":V},null,8,["convention","title","modelValue","generic-enum"])):D("",!0)]}),_:1},8,["modelValue"]))}}),lt=["href"],nt=["innerHTML"],ot=["innerHTML"],at=H({__name:"ViewCostumeProp",props:Q({convention:{},title:{default:"View Costume Prop"}},{modelValue:{type:Boolean,required:!0},modelModifiers:{},costumeProp:{required:!0},costumePropModifiers:{}}),emits:["update:modelValue","update:costumeProp"],setup(r){const O=z(r,"modelValue"),C=z(r,"costumeProp"),n=W(),c=ie(),I=v(`${c.GetCostumePropImageURL(C.value.CostumePropUUID)}?${new Date().getTime()}`),E=v([]),P=v([]);n.getConventionGenericEnums(r.convention.ConventionUUID,h.GENERIC_ENUM_CATEGORY_COSTUME_PROP_CLEARANCE).then(V=>{V&&(E.value=V)}),n.getConventionGenericEnums(r.convention.ConventionUUID,h.GENERIC_ENUM_CATEGORY_COSTUME_PROP_TYPE).then(V=>{V&&(P.value=V)});const F=V=>{if(!V)return"";let U=V;return U=U.replaceAll(`
`,"<br>"),U=U.replaceAll(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),U=U.replaceAll(/\[i](.*?)\[\/i]/g,"<em>$1</em>"),U};return(V,U)=>(s(),y(Z,{modelValue:O.value,"onUpdate:modelValue":U[0]||(U[0]=a=>O.value=a),title:V.title,"show-reset-action":!1,"show-save-action":!1,"show-delete-action":!1,"show-close-action":!1,"hide-extension":!0,fullscreen:!1,persistent:!1,scrollable:!0},{default:e(()=>[t(ne,null,{default:e(()=>[t(q,null,{default:e(()=>[t(f,{cols:"12"},{default:e(()=>[I.value?(s(),S("a",{key:0,href:I.value,target:"_blank",style:{cursor:"zoom-in"}},[t(pe,{src:I.value,class:"border my-0 mx-auto","max-height":"400","max-width":"400",cover:!1},null,8,["src"])],8,lt)):D("",!0)]),_:1}),t(f,{cols:"12"},{default:e(()=>[R(k(C.value.Remarks),1)]),_:1}),C.value.AddedBy?(s(),y(f,{key:0,class:"text-right",cols:"12"},{default:e(()=>[w("small",null,"Added By: "+k(C.value.AddedBy.DisplayName),1)]),_:1})):D("",!0),C.value.ClearanceUUID!==""&&C.value.ClearanceUUID!==g(B)?(s(),y(f,{key:1,cols:"12"},{default:e(()=>{var a,d;return[w("div",null,[w("strong",null,k((a=E.value.find(i=>i.GenericEnumUUID===C.value.ClearanceUUID))==null?void 0:a.Title),1)]),w("div",{innerHTML:F((d=E.value.find(i=>i.GenericEnumUUID===C.value.ClearanceUUID))==null?void 0:d.Description)},null,8,nt)]}),_:1})):D("",!0),C.value.TypeUUID!==""&&C.value.TypeUUID!==g(B)?(s(),y(f,{key:2,cols:"12"},{default:e(()=>{var a;return[w("div",{innerHTML:F((a=P.value.find(d=>d.GenericEnumUUID===C.value.TypeUUID))==null?void 0:a.Description)},null,8,ot)]}),_:1})):D("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue","title"]))}}),$e=(r,O)=>r===void 0?!1:Ve(r,we.GROUP_TYPE_CONVENTION,O.ConventionUUID,O).ViewProps,ut=H({__name:"CostumePropsView",props:{convention:{}},setup(r){const O=W(),C=Te(),n=v(),c=v([]),I=v(1),E=v([]),P=v(!0),F=v(10),V=v(0),U=v([]),a=v(""),d=v($e(C,r.convention)),i=v(Le(C,r.convention)),p=v(Me(C,r.convention)),T=v(!1),$=v(!1),M=v(!1),_=v({}),G=Ge(()=>{a.value=Date.now().toString()}),u=()=>{n.value={ID:0,CostumePropUUID:B,ConventionID:r.convention.ID,ConventionUUID:r.convention.ConventionUUID,Description:"",HasPhoto:!1,Remarks:""},T.value=!0},L=A=>{n.value=A,T.value=!0},N=A=>{n.value=A,M.value=!0},m=()=>{$.value=!0},b=v([{key:"owner",title:"Attendee",sortable:!1},{key:"type",title:"Type",sortable:!1},{key:"Clearance.Title",title:"Clearance",sortable:!1},{key:"actions",title:"",sortable:!1}]),K=({page:A,itemsPerPage:o,sortBy:l})=>{P.value=!0,I.value=A,E.value=l;try{_.value.Limit=o,_.value.Offset=(A-1)*o;const j=a.value;O.searchConventionCostumeProps(r.convention.ConventionUUID,_.value).then(le=>{le&&j===a.value&&(V.value=le.Total,c.value=le.CostumeProps,P.value=!1)})}catch(j){console.error(j)}},J=A=>{const o=c.value.findIndex(l=>A.CostumePropUUID==l.CostumePropUUID);o>=0&&c.value.splice(o,1,A)};return(A,o)=>A.convention?(s(),S(x,{key:0},[t(ne,{fluid:!0,class:"px-1"},{default:e(()=>[i.value||p.value?(s(),y(q,{key:0},{default:e(()=>[p.value?(s(),y(f,{key:0,class:"flex-shrink-1 flex-grow-0"},{default:e(()=>[t(Y,{color:"primary","prepend-icon":"mdi:mdi-cog",onClick:m},{default:e(()=>o[12]||(o[12]=[R(" Config ")])),_:1})]),_:1})):D("",!0),t(ve),i.value?(s(),y(f,{key:1,class:"flex-shrink-1 flex-grow-0"},{default:e(()=>[t(Y,{color:"success","prepend-icon":"mdi:mdi-plus",onClick:u},{default:e(()=>o[13]||(o[13]=[R(" Record New Item ")])),_:1})]),_:1})):D("",!0)]),_:1})):D("",!0)]),_:1}),d.value||i.value?(s(),y(_e,{key:0,page:I.value,"onUpdate:page":o[4]||(o[4]=l=>I.value=l),"items-per-page":F.value,"onUpdate:itemsPerPage":o[5]||(o[5]=l=>F.value=l),"sort-by":U.value,"onUpdate:sortBy":o[6]||(o[6]=l=>U.value=l),headers:b.value,"items-length":V.value,items:c.value,"item-value":"key",loading:P.value,search:a.value,"onUpdate:options":K},{top:e(()=>[t(fe,{class:"mb-3"},{default:e(()=>[t(ae,null,{default:e(()=>[t(ue,{color:"secondary",class:"font-weight-bold pb-0 pt-0"},{default:e(()=>[t(f,{class:"pa-0"},{default:e(()=>[o[14]||(o[14]=R(" Search Criteria ")),t(Se,{class:"pl-5",icon:"mdi:mdi-credit-card-search-outline"})]),_:1}),t(f,{class:"d-none d-sm-block pa-0",cols:"0"},{default:e(()=>[t(X,{convention:A.convention,label:"Owner",clearable:!0,"hide-details":"",variant:"plain",modelValue:_.value.OwnerUUID,"onUpdate:modelValue":[o[0]||(o[0]=l=>_.value.OwnerUUID=l),g(G)],onClick:o[1]||(o[1]=ee(()=>{},["stop"])),"onClick:clear":g(G),onInput:g(G)},null,8,["convention","modelValue","onClick:clear","onInput","onUpdate:modelValue"])]),_:1}),t(ve),t(f,{class:"d-none d-md-block pa-0"})]),_:1}),t(se,{class:"pt-2"},{default:e(()=>[t(q,null,{default:e(()=>[t(f,{cols:"12",lg:"6"},{default:e(()=>[t(X,{convention:A.convention,label:"Owner",clearable:!0,"hide-details":"",variant:"outlined",modelValue:_.value.OwnerUUID,"onUpdate:modelValue":[o[2]||(o[2]=l=>_.value.OwnerUUID=l),g(G)],onClick:o[3]||(o[3]=ee(()=>{},["stop"])),"onClick:clear":g(G),onInput:g(G)},null,8,["convention","modelValue","onClick:clear","onInput","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),"item.owner":e(({item:l})=>[l.Owner?(s(),S(x,{key:0},[l.Owner.Registrations&&l.Owner.Registrations.length>0?(s(),S(x,{key:0},[R(" #"+k(l.Owner.Registrations[0].Reference),1)],64)):D("",!0),l.Owner.Generated&&l.Owner.Generated.badge_name?(s(),S(x,{key:1},[R("  "+k(l.Owner.Generated.badge_name),1)],64)):(s(),S(x,{key:2},[R("  "+k(l.Owner.DisplayName),1)],64))],64)):D("",!0)]),"item.type":e(({item:l})=>[l.Type?(s(),S(x,{key:0},[R(k(l.Type.Title)+" ",1),o[15]||(o[15]=w("br",null,null,-1))],64)):D("",!0),w("small",null,k(l.Description),1)]),"item.actions":e(({item:l})=>[d.value?(s(),y(Y,{key:0,icon:"mdi:mdi-magnify",size:"x-small",color:"success",onClick:j=>N(l),class:"mr-2"},null,8,["onClick"])):D("",!0),i.value?(s(),y(Y,{key:1,icon:"mdi:mdi-pencil",size:"x-small",color:"warning",onClick:j=>L(l)},null,8,["onClick"])):D("",!0)]),_:1},8,["page","items-per-page","sort-by","headers","items-length","items","loading","search"])):D("",!0),T.value&&n.value?(s(),y(et,{key:1,convention:A.convention,modelValue:T.value,"onUpdate:modelValue":o[7]||(o[7]=l=>T.value=l),"costume-prop":n.value,"onUpdate:costumeProp":[o[8]||(o[8]=l=>n.value=l),J],onNew:g(G)},null,8,["convention","modelValue","costume-prop","onNew"])):D("",!0),M.value&&n.value?(s(),y(at,{key:2,convention:A.convention,title:n.value.Description,modelValue:M.value,"onUpdate:modelValue":o[9]||(o[9]=l=>M.value=l),"costume-prop":n.value,"onUpdate:costumeProp":o[10]||(o[10]=l=>n.value=l)},null,8,["convention","title","modelValue","costume-prop"])):D("",!0),$.value?(s(),y(tt,{key:3,convention:A.convention,modelValue:$.value,"onUpdate:modelValue":o[11]||(o[11]=l=>$.value=l)},null,8,["convention","modelValue"])):D("",!0)],64)):D("",!0)}}),st={key:0,class:"text-success"},it={key:1,class:"text-warning"},rt={key:2,class:"text-error"},dt={key:3,class:"text-error"},mt=H({__name:"EditLostAndFound",props:Q({convention:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{},lostAndFound:{required:!0},lostAndFoundModifiers:{}}),emits:Q(["new","update:lostAndFound"],["update:modelValue","update:lostAndFound"]),setup(r,{emit:O}){const C=z(r,"modelValue"),n=z(r,"lostAndFound"),c=W(),I=ie(),E=O,P=v(oe(n.value)),F=v(`${I.GetLostAndFoundImageURL(n.value.LostAndFoundUUID)}?${new Date().getTime()}`),V=re("imageFileInput"),U=re("propImageForm"),a=v(!1),d=()=>{},i=()=>{n.value=oe(P.value)},p=G=>{c.saveLostAndFound(n.value).then(u=>{u?(G&&G("Saved Costume Prop"),n.value.LostAndFoundUUID!=u.LostAndFoundUUID&&E("new",u),n.value=u,E("update:lostAndFound",u),F.value?M(u.LostAndFoundUUID).then(()=>{setTimeout(()=>{C.value=!1},1e3)}).catch(()=>{G("Failed to Save Image")}):setTimeout(()=>{C.value=!1},1e3)):G&&G("Failed to Save Costume Prop")}).catch(()=>{G&&G("Failed to Save Costume Prop")})},T=ce(()=>!1),$=()=>{V.value&&V.value.files&&(F.value=URL.createObjectURL(V.value.files[0]))},M=async G=>{var L;const u=new FormData((L=U.value)==null?void 0:L.$el);if(u.get("Image")&&u.get("Image").size>0)return u.set("ConventionUUID",r.convention.ConventionUUID),u.set("LostAndFoundUUID",G),await I.SaveLostAndFoundImage(u)};function _(G){a.value=!1,fetch(G).then(u=>u.blob()).then(u=>{const L=u.type.split("/")[1]||"dat",N=new File([u],`downloaded-image.${L}`,{type:u.type}),m=new DataTransfer;m.items.add(N),V.value&&(V.value.files=m.files,$())}).catch(u=>console.error("Error fetching image:",u))}return(G,u)=>(s(),y(Z,De({modelValue:C.value,"onUpdate:modelValue":u[8]||(u[8]=L=>C.value=L),title:"Report Lost & Found","show-reset-action":!1,"show-save-action":!1,"show-delete-action":!1,"show-close-action":!1,"hide-extension":!0,fullscreen:!0,persistent:!0,scrollable:!0,onReset:i,onSave:p},{[ye(T.value&&"delete")]:d}),{default:e(()=>[t(ne,null,{default:e(()=>[t(q,null,{default:e(()=>[n.value.AddedBy?(s(),y(f,{key:0,cols:"12"},{default:e(()=>[u[9]||(u[9]=w("strong",null,"Added By:",-1)),R(" "+k(n.value.AddedBy.DisplayName),1)]),_:1})):D("",!0),n.value.AddedBy?(s(),y(f,{key:1,cols:"12"},{default:e(()=>[u[10]||(u[10]=w("strong",null,"Status:",-1)),n.value.FoundByUUID&&n.value.OwnerUUID&&n.value.FoundByUUID!==g(B)&&n.value.OwnerUUID!==g(B)?(s(),S("span",st," Returned ")):n.value.FoundByUUID&&n.value.FoundByUUID!==g(B)?(s(),S("span",it," Found ")):n.value.OwnerUUID&&n.value.OwnerUUID!==g(B)?(s(),S("span",rt," Lost ")):(s(),S("span",dt," Unknown "))]),_:1})):D("",!0),t(f,{cols:"12"},{default:e(()=>[t(X,{modelValue:n.value.FoundByUUID,"onUpdate:modelValue":u[0]||(u[0]=L=>n.value.FoundByUUID=L),convention:G.convention,label:"Found By",variant:"outlined","persistent-hint":!0,hint:"If unknown enter yourself",clearable:!0},null,8,["modelValue","convention"])]),_:1}),t(f,{cols:"12"},{default:e(()=>[t(X,{modelValue:n.value.OwnerUUID,"onUpdate:modelValue":u[1]||(u[1]=L=>n.value.OwnerUUID=L),convention:G.convention,label:"Claimant (Owner)",variant:"outlined","persistent-hint":!0,hint:"The person either reporting item missing or claiming it",clearable:!0},null,8,["modelValue","convention"])]),_:1}),t(f,{cols:"12"},{default:e(()=>[t(de,{modelValue:n.value.Title,"onUpdate:modelValue":u[2]||(u[2]=L=>n.value.Title=L),label:"Title",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"12"},{default:e(()=>[t(me,{modelValue:n.value.Description,"onUpdate:modelValue":u[3]||(u[3]=L=>n.value.Description=L),label:"Description",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"12"},{default:e(()=>[t(me,{modelValue:n.value.Comments,"onUpdate:modelValue":u[4]||(u[4]=L=>n.value.Comments=L),label:"Comments",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"12"},{default:e(()=>[t(Ne,{ref:"propImageForm",enctype:"multipart/form-data"},{default:e(()=>[t(be,{label:"Photograph",name:"Image",variant:"outlined",ref:"imageFileInput","prepend-icon":"mdi:mdi-camera",capture:"environment",accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp",onChange:$})]),_:1})]),_:1}),t(f,{cols:"12",class:"text-center"},{default:e(()=>[t(Y,{color:"primary",onClick:u[5]||(u[5]=L=>a.value=!0)},{default:e(()=>u[11]||(u[11]=[R("Use Camera on Another Device")])),_:1}),u[12]||(u[12]=w("br",null,null,-1)),u[13]||(u[13]=w("small",null,"E.g. A mobile phone",-1))]),_:1}),t(f,{cols:"12"},{default:e(()=>[F.value?(s(),y(pe,{key:0,src:F.value,class:"border profileImage my-0 mx-auto","max-height":"400","max-width":"400",cover:!1},null,8,["src"])):D("",!0)]),_:1})]),_:1}),t(Z,{modelValue:a.value,"onUpdate:modelValue":u[7]||(u[7]=L=>a.value=L),title:"Camera Tether","show-reset-action":!1,"show-save-action":!1,"show-delete-action":!1,"show-close-action":!1,"hide-extension":!0,scrollable:!0},{actions:e(()=>[t(Y,{color:"primary",variant:"text",onClick:u[6]||(u[6]=L=>a.value=!1)},{default:e(()=>u[14]||(u[14]=[R("Close")])),_:1})]),default:e(()=>[t(he,{onFile:_})]),_:1},8,["modelValue"])]),_:1})]),_:1},16,["modelValue"]))}}),vt=H({__name:"ConfigLostAndFound",props:Q({convention:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const O=z(r,"modelValue"),C=W(),n=v(),c=v([]),I=v(!1),E=U=>{const a=()=>({ID:0,GenericEnumUUID:B,ConventionID:r.convention.ID,ConventionUUID:r.convention.ConventionUUID,Category:U,Name:"",Title:"",Description:""});n.value=a(),I.value=!0},P=U=>{n.value=U,I.value=!0},F=U=>{let a;switch(U.Category){case h.GENERIC_ENUM_CATEGORY_LOST_AND_FOUND_STATUS:a=c.value.findIndex(d=>d.GenericEnumUUID==U.GenericEnumUUID),a>=0&&c.value.splice(a,1);break}},V=U=>{let a;switch(U.Category){case h.GENERIC_ENUM_CATEGORY_LOST_AND_FOUND_STATUS:a=c.value.findIndex(d=>d.GenericEnumUUID==U.GenericEnumUUID),a>=0?c.value.splice(a,1,U):c.value.push(n.value);break}};return C.getConventionGenericEnums(r.convention.ConventionUUID,h.GENERIC_ENUM_CATEGORY_LOST_AND_FOUND_STATUS).then(U=>{U&&(c.value=U)}),(U,a)=>(s(),y(Z,{modelValue:O.value,"onUpdate:modelValue":a[3]||(a[3]=d=>O.value=d),title:"Configure Costume Props","show-reset-action":!1,"show-save-action":!1,"show-delete-action":!1,"show-close-action":!0,"hide-extension":!0,fullscreen:!0,persistent:!0,scrollable:!0},{default:e(()=>{var d;return[t(fe,null,{default:e(()=>[t(ae,null,{default:e(()=>[t(ue,{color:"primary"},{default:e(()=>a[4]||(a[4]=[R(" Item Status ")])),_:1}),t(se,null,{default:e(()=>[t(Ce,null,{default:e(()=>[(s(!0),S(x,null,Ue(c.value,i=>(s(),y(Ie,{key:i.GenericEnumUUID},{append:e(()=>[t(Y,{icon:"mdi:mdi-pencil-outline",color:"warning",size:"x-small",onClick:p=>P(i)},null,8,["onClick"])]),default:e(()=>[t(ge,null,{default:e(()=>[w("strong",null,k(i.Name)+" - "+k(i.Title),1)]),_:2},1024),t(Ee,null,{default:e(()=>[R(k(i.Description),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(q,null,{default:e(()=>[t(f,{class:"text-right"},{default:e(()=>[t(Y,{color:"success","prepend-icon":"mdi:mdi-plus",onClick:a[0]||(a[0]=i=>E(g(h).GENERIC_ENUM_CATEGORY_LOST_AND_FOUND_STATUS))},{default:e(()=>a[5]||(a[5]=[R(" Add Item ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),I.value&&n.value?(s(),y(xe,{key:0,convention:U.convention,title:`Edit ${(d=g(te).find(i=>{var p;return i.value==((p=n.value)==null?void 0:p.Category)}))==null?void 0:d.title}`,modelValue:I.value,"onUpdate:modelValue":a[1]||(a[1]=i=>I.value=i),"generic-enum":n.value,"onUpdate:genericEnum":[a[2]||(a[2]=i=>n.value=i),V],"onDelete:genericEnum":F},null,8,["convention","title","modelValue","generic-enum"])):D("",!0)]}),_:1},8,["modelValue"]))}}),ct=["href"],pt=H({__name:"ViewLostAndFound",props:Q({title:{default:"View Costume Prop"}},{modelValue:{type:Boolean,required:!0},modelModifiers:{},lostAndFound:{required:!0},lostAndFoundModifiers:{}}),emits:["update:modelValue","update:lostAndFound"],setup(r){const O=z(r,"modelValue"),C=z(r,"lostAndFound"),n=ie(),c=v(`${n.GetLostAndFoundImageURL(C.value.LostAndFoundUUID)}?${new Date().getTime()}`);return(I,E)=>(s(),y(Z,{modelValue:O.value,"onUpdate:modelValue":E[0]||(E[0]=P=>O.value=P),title:I.title,"show-reset-action":!1,"show-save-action":!1,"show-delete-action":!1,"show-close-action":!1,"hide-extension":!0,fullscreen:!1,persistent:!1,scrollable:!0},{default:e(()=>[t(ne,null,{default:e(()=>[t(q,null,{default:e(()=>[t(f,{cols:"12"},{default:e(()=>[c.value?(s(),S("a",{key:0,href:c.value,target:"_blank",style:{cursor:"zoom-in"}},[t(pe,{src:c.value,class:"border my-0 mx-auto","max-height":"400","max-width":"400",cover:!1},null,8,["src"])],8,ct)):D("",!0)]),_:1}),t(f,{cols:"12"},{default:e(()=>[R(k(C.value.Description),1)]),_:1}),t(f,{cols:"12"},{default:e(()=>[R(k(C.value.Comments),1)]),_:1}),C.value.AddedBy?(s(),y(f,{key:0,class:"text-right",cols:"12"},{default:e(()=>[w("small",null,"Added By: "+k(C.value.AddedBy.DisplayName),1)]),_:1})):D("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue","title"]))}}),ft={key:0,class:"text-success"},Ut={key:1,class:"text-warning"},Ct={key:2,class:"text-error"},It={key:3,class:"text-error"},gt=H({__name:"LostAndFoundView",props:{convention:{}},setup(r){const O=W(),C=Te(),n=v(),c=v([]),I=v(1),E=v([]),P=v(!0),F=v(10),V=v(0),U=v([]),a=v(""),d=v($e(C,r.convention)),i=v(Le(C,r.convention)),p=v(Me(C,r.convention)),T=v(!1),$=v(!1),M=v(!1),_=v({}),G=v(""),u=Ge(()=>{a.value=Date.now().toString()}),L=()=>{n.value={ID:0,LostAndFoundUUID:B,ConventionID:r.convention.ID,ConventionUUID:r.convention.ConventionUUID,Title:"",Description:"",HasPhoto:!1,Comments:""},T.value=!0},N=A=>{n.value=A,T.value=!0},m=A=>{n.value=A,M.value=!0},b=v([{key:"owner",title:"Owner",sortable:!1},{key:"finder",title:"Found By",sortable:!1},{key:"title",title:"Title",sortable:!1},{key:"status",title:"Status",sortable:!1},{key:"timestamps",title:"Date",sortable:!1},{key:"actions",title:"",sortable:!1}]),K=({page:A,itemsPerPage:o,sortBy:l})=>{P.value=!0,I.value=A,E.value=l;try{_.value.Limit=o,_.value.Offset=(A-1)*o;const j=a.value;switch(_.value.IsFound=void 0,_.value.IsLost=void 0,_.value.IsReturned=void 0,G.value){case"Found":_.value.IsFound=!0;break;case"Lost":_.value.IsLost=!0;break;case"Lost or Found":_.value.IsReturned=!1;break;case"Returned":_.value.IsReturned=!0;break}O.searchConventionLostAndFound(r.convention.ConventionUUID,_.value).then(le=>{le&&j===a.value&&(V.value=le.Total,c.value=le.LostAndFound,P.value=!1)})}catch(j){console.error(j)}},J=A=>{const o=c.value.findIndex(l=>A.LostAndFoundUUID==l.LostAndFoundUUID);o>=0&&c.value.splice(o,1,A)};return(A,o)=>A.convention?(s(),S(x,{key:0},[t(ne,{fluid:!0,class:"px-1"},{default:e(()=>[i.value||p.value?(s(),y(q,{key:0},{default:e(()=>[t(ve),i.value?(s(),y(f,{key:0,class:"flex-shrink-1 flex-grow-0"},{default:e(()=>[t(Y,{color:"success","prepend-icon":"mdi:mdi-plus",onClick:L},{default:e(()=>o[20]||(o[20]=[R(" Record New Item ")])),_:1})]),_:1})):D("",!0)]),_:1})):D("",!0)]),_:1}),d.value||i.value?(s(),y(_e,{key:0,page:I.value,"onUpdate:page":o[12]||(o[12]=l=>I.value=l),"items-per-page":F.value,"onUpdate:itemsPerPage":o[13]||(o[13]=l=>F.value=l),"sort-by":U.value,"onUpdate:sortBy":o[14]||(o[14]=l=>U.value=l),headers:b.value,"items-length":V.value,items:c.value,"item-value":"key",loading:P.value,search:a.value,"onUpdate:options":K},{top:e(()=>[t(fe,{class:"mb-3"},{default:e(()=>[t(ae,null,{default:e(()=>[t(ue,{color:"secondary",class:"font-weight-bold pb-0 pt-0"},{default:e(()=>[t(f,{class:"pa-0"},{default:e(()=>[o[21]||(o[21]=R(" Search Criteria ")),t(Se,{class:"pl-5",icon:"mdi:mdi-credit-card-search-outline"})]),_:1}),t(f,{class:"d-none d-md-block pa-0 pr-4",cols:"0"},{default:e(()=>[t(X,{convention:A.convention,label:"Owner",clearable:!0,"hide-details":"",variant:"plain",modelValue:_.value.OwnerUUID,"onUpdate:modelValue":[o[0]||(o[0]=l=>_.value.OwnerUUID=l),g(u)],onClick:o[1]||(o[1]=ee(()=>{},["stop"])),"onClick:clear":g(u),onInput:g(u)},null,8,["convention","modelValue","onClick:clear","onInput","onUpdate:modelValue"])]),_:1}),t(f,{class:"d-none d-md-block pa-0 pr-4",cols:"0"},{default:e(()=>[t(X,{convention:A.convention,label:"Finder",clearable:!0,"hide-details":"",variant:"plain",modelValue:_.value.FoundByUUID,"onUpdate:modelValue":[o[2]||(o[2]=l=>_.value.FoundByUUID=l),g(u)],onClick:o[3]||(o[3]=ee(()=>{},["stop"])),"onClick:clear":g(u),onInput:g(u)},null,8,["convention","modelValue","onClick:clear","onInput","onUpdate:modelValue"])]),_:1}),t(f,{class:"d-none d-sm-block pa-0 pr-4",cols:"0"},{default:e(()=>[t(Re,{label:"Status",clearable:!0,"hide-details":"",variant:"plain",modelValue:G.value,"onUpdate:modelValue":[o[4]||(o[4]=l=>G.value=l),g(u)],items:["Found","Lost","Lost or Found","Returned"],onClick:o[5]||(o[5]=ee(()=>{},["stop"])),"onClick:clear":g(u),onInput:g(u)},null,8,["modelValue","onClick:clear","onInput","onUpdate:modelValue"])]),_:1}),t(ve),t(f,{class:"d-none d-md-block pa-0"})]),_:1}),t(se,{class:"pt-2"},{default:e(()=>[t(q,null,{default:e(()=>[t(f,{cols:"12",lg:"6"},{default:e(()=>[t(X,{convention:A.convention,label:"Owner",clearable:!0,"hide-details":"",variant:"outlined",modelValue:_.value.OwnerUUID,"onUpdate:modelValue":[o[6]||(o[6]=l=>_.value.OwnerUUID=l),g(u)],onClick:o[7]||(o[7]=ee(()=>{},["stop"])),"onClick:clear":g(u),onInput:g(u)},null,8,["convention","modelValue","onClick:clear","onInput","onUpdate:modelValue"])]),_:1}),t(f,{cols:"12",lg:"6"},{default:e(()=>[t(X,{convention:A.convention,label:"Finder",clearable:!0,"hide-details":"",variant:"outlined",modelValue:_.value.FoundByUUID,"onUpdate:modelValue":[o[8]||(o[8]=l=>_.value.FoundByUUID=l),g(u)],onClick:o[9]||(o[9]=ee(()=>{},["stop"])),"onClick:clear":g(u),onInput:g(u)},null,8,["convention","modelValue","onClick:clear","onInput","onUpdate:modelValue"])]),_:1}),t(f,{cols:"12",lg:"6"},{default:e(()=>[t(Re,{label:"Status",clearable:!0,"hide-details":"",variant:"outlined",modelValue:G.value,"onUpdate:modelValue":[o[10]||(o[10]=l=>G.value=l),g(u)],items:["Found","Lost","Lost or Found","Returned"],onClick:o[11]||(o[11]=ee(()=>{},["stop"])),"onClick:clear":g(u),onInput:g(u)},null,8,["modelValue","onClick:clear","onInput","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),"item.finder":e(({item:l})=>[l.FoundBy?(s(),S(x,{key:0},[l.FoundBy.Registrations&&l.FoundBy.Registrations.length>0?(s(),S(x,{key:0},[R(" #"+k(l.FoundBy.Registrations[0].Reference),1)],64)):D("",!0),l.FoundBy.Generated&&l.FoundBy.Generated.badge_name?(s(),S(x,{key:1},[R("  "+k(l.FoundBy.Generated.badge_name),1)],64)):(s(),S(x,{key:2},[R("  "+k(l.FoundBy.DisplayName),1)],64))],64)):D("",!0)]),"item.owner":e(({item:l})=>[l.Owner?(s(),S(x,{key:0},[l.Owner.Registrations&&l.Owner.Registrations.length>0?(s(),S(x,{key:0},[R(" #"+k(l.Owner.Registrations[0].Reference),1)],64)):D("",!0),l.Owner.Generated&&l.Owner.Generated.badge_name?(s(),S(x,{key:1},[R("  "+k(l.Owner.Generated.badge_name),1)],64)):(s(),S(x,{key:2},[R("  "+k(l.Owner.DisplayName),1)],64))],64)):D("",!0)]),"item.timestamps":e(({item:l})=>[o[24]||(o[24]=w("strong",null,"Reported:",-1)),R(" "+k(g(Oe)(l.CreatedAt,{withTime:!0,withYear:!0}))+" ",1),l.UpdatedAt!=l.CreatedAt?(s(),S(x,{key:0},[o[22]||(o[22]=w("br",null,null,-1)),o[23]||(o[23]=w("strong",null,"Updated:",-1)),R(" "+k(g(Oe)(l.UpdatedAt,{withTime:!0,withYear:!0})),1)],64)):D("",!0)]),"item.title":e(({item:l})=>[w("strong",null,k(l.Title),1),o[25]||(o[25]=w("br",null,null,-1)),w("small",null,k(l.Description),1)]),"item.status":e(({item:l})=>[l.FoundByUUID&&l.OwnerUUID&&l.FoundByUUID!==g(B)&&l.OwnerUUID!==g(B)?(s(),S("span",ft," Returned ")):l.FoundByUUID&&l.FoundByUUID!==g(B)?(s(),S("span",Ut," Found ")):l.OwnerUUID&&l.OwnerUUID!==g(B)?(s(),S("span",Ct," Lost ")):(s(),S("span",It," Unknown "))]),"item.actions":e(({item:l})=>[d.value?(s(),y(Y,{key:0,icon:"mdi:mdi-magnify",size:"x-small",color:"success",onClick:j=>m(l),class:"mr-2"},null,8,["onClick"])):D("",!0),i.value?(s(),y(Y,{key:1,icon:"mdi:mdi-pencil",size:"x-small",color:"warning",onClick:j=>N(l)},null,8,["onClick"])):D("",!0)]),_:1},8,["page","items-per-page","sort-by","headers","items-length","items","loading","search"])):D("",!0),T.value&&n.value?(s(),y(mt,{key:1,convention:A.convention,modelValue:T.value,"onUpdate:modelValue":o[15]||(o[15]=l=>T.value=l),"lost-and-found":n.value,"onUpdate:lostAndFound":[o[16]||(o[16]=l=>n.value=l),J],onNew:g(u)},null,8,["convention","modelValue","lost-and-found","onNew"])):D("",!0),M.value&&n.value?(s(),y(pt,{key:2,title:n.value.Title,modelValue:M.value,"onUpdate:modelValue":o[17]||(o[17]=l=>M.value=l),"lost-and-found":n.value,"onUpdate:lostAndFound":o[18]||(o[18]=l=>n.value=l)},null,8,["title","modelValue","lost-and-found"])):D("",!0),$.value?(s(),y(vt,{key:3,convention:A.convention,modelValue:$.value,"onUpdate:modelValue":o[19]||(o[19]=l=>$.value=l)},null,8,["convention","modelValue"])):D("",!0)],64)):D("",!0)}}),ol=H({__name:"OperationsView",emits:["pageTitle"],setup(r,{emit:O}){var U;const C=W(),n=O,c=Ye(),I=Fe();Te(),n("pageTitle","Operations");const E=v(),P=v(["Costume Props","Lost and Found"]);let F=((U=c.params.convention)==null?void 0:U.toString())||"";const V=v();return F?C.getConvention(F).then(a=>{a&&(V.value=a)}).catch(()=>{I.push("/")}):I.push("/"),(a,d)=>(s(),y(je,null,{default:e(()=>[t(Ke,{color:"blue-darken-4"},{default:e(()=>[t(Qe,{modelValue:E.value,"onUpdate:modelValue":d[0]||(d[0]=i=>E.value=i),items:P.value,"show-arrows":""},null,8,["modelValue","items"])]),_:1}),t(We,{modelValue:E.value,"onUpdate:modelValue":d[1]||(d[1]=i=>E.value=i),disabled:!0,touch:!1},{default:e(()=>[t(Ae,{value:"Costume Props"},{default:e(()=>[E.value=="Costume Props"?(s(),y(Pe,{key:0,class:"pa-2"},{default:e(()=>[V.value?(s(),y(ut,{key:0,convention:V.value},null,8,["convention"])):D("",!0)]),_:1})):D("",!0)]),_:1}),t(Ae,{value:"Lost and Found"},{default:e(()=>[E.value=="Lost and Found"?(s(),y(Pe,{key:0,class:"pa-2"},{default:e(()=>[V.value?(s(),y(gt,{key:0,convention:V.value},null,8,["convention"])):D("",!0)]),_:1})):D("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{ol as default};
