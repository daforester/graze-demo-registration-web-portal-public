import{i as Ye,M as Fe,N as Ke,r as R,E as Pa,D as J,n as A,l as N,A as ae,q as c,H as fe,Q as Be,h as s,v as re,x as ie,O as Yt,G as ue,F,a1 as Ni,m as cr,k as La,w as Je,X as Ua,c as aa,P as Fa,a2 as xi,a3 as ji,T as Bi,a4 as Yi,b as mr,L as fr,y as dt,o as vr,a5 as Hi,a6 as Gi,a7 as Wi,a8 as qi,Y as zi,$ as Ji,R as Ki,C as Wn,U as et}from"./index-DNQtKlgW.js";import{_ as Qi,D as Xi,a as Zi,b as el,c as tl,d as al,e as nl,f as rl,g as ol,h as il,i as ll,L as pn,M as yn,U as gn,j as kt,A as ut,u as ln,k as sl,P as ul,l as qn,m as pe,n as dl,o as Me,p as cl}from"./runner-CLgzPbCO.js";import{a as pr,b as ml}from"./FormRenderer.vue_vue_type_style_index_0_lang-DkkjVS55.js";import{F as we,a as fl}from"./form-Cqw16b_M.js";import{b as vl,c as yr,d as zn,S as pl}from"./submission-DAi9v6uc.js";import{C as yl}from"./canManageGlobalUsers-B6Ta7BsG.js";import{_ as Ta}from"./ModelDialog.vue_vue_type_script_setup_true_lang-Rjz3Y9tk.js";import{V as hn,a as la,c as gr,b as gl}from"./VList-C7a9fcmD.js";import{V as me,d as Un}from"./VGrid-tdbt1WkI.js";import{V as hr,b as hl}from"./forwardRefs-CEq7Nmr0.js";import{s as Ul}from"./sortSubmissions-BLiX_qgz.js";import{u as Tl}from"./useStoreAPI-B-tAaDdE.js";import{u as Ur}from"./useModel-nZjFzcN4.js";import{a as Tr,V as br,e as Sr,d as Gt}from"./VTabs-ALaXSKBG.js";import{u as bl,P as Sl}from"./useDisplayTransactions-BAbBoQFD.js";import{C as _r,G as Dr}from"./canDo-ByaN1Eh7.js";import{G as xa}from"./userData-LuPBcRO5.js";import{e as na,V as ja,a as Tn,c as ra,d as Ar,b as _l}from"./VCard-Di92G0RH.js";import{V as ge,a as Y}from"./VRow-Cgd7MTzG.js";import{_ as Er}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as un,a as Dl}from"./SaveButton.vue_vue_type_script_setup_true_lang-CayDJfbB.js";import{V as Te}from"./VSelect-C6BPZuPv.js";import{_ as Ir,a as dn,u as Al}from"./useLinkedFields-CYpCEAgY.js";import{V as El,a as Il}from"./VAlert-BWNLu6NZ.js";import{V as ta}from"./VCheckbox-BVUkU098.js";import{V as ct}from"./VContainer-DXKfH0iA.js";import{S as Cl}from"./setupLogin-DjF1z754.js";import{u as Jn,V as wl}from"./debounce-Cd91VxdE.js";import{b as Ol,u as kl}from"./useConventionSlug-CkPdkwqK.js";import{_ as Rl}from"./SelectGroups.vue_vue_type_script_setup_true_lang-C1NscaEi.js";import{_ as Ml}from"./DeleteDialog.vue_vue_type_script_setup_true_lang-CitDxD9G.js";import{v as Rt}from"./v4-CtRu48qb.js";import{u as Vl}from"./useAdvancedMode-KWRZ2Kpl.js";import{V as Ve}from"./VTextField-D5adkz8N.js";import{V as Cr,a as cn,b as mn,c as fn}from"./VExpansionPanels-BIxgZGv5.js";import{V as vn}from"./VDialog-CO_YQro6.js";import{c as $l}from"./copyToClipboard-BtcEYe2-.js";import{u as Pl}from"./useAvatar-DbddWm6w.js";import{i as Ll}from"./index.esm-Cv5ewtKz.js";import{V as ga}from"./VSpacer-DnVOGdft.js";import{a as Fl}from"./VDataTable-CjK1apoI.js";import{_ as Nl}from"./EmailControl.vue_vue_type_script_setup_true_lang-C3-bEdQb.js";import{V as Kn}from"./VSheet-Fxwr9bCM.js";import{V as Qn,a as xl}from"./VToolbar-BlMOyCYd.js";import{V as jl}from"./VTextarea-Bt3ovil7.js";import"./date-DgbCHIwC.js";import"./canEditRegistrations-DYTDIvJz.js";import"./ticket-DqurB3v3.js";import"./VDivider-mDdc0F6j.js";import"./VAutocomplete-Dms5fj_K.js";import"./filter-DxlhUOOB.js";import"./form-bNPpBpUm.js";import"./VChip-5slYjv5V.js";import"./VForm-CXHte2JT.js";import"./VNavigationDrawer-mo7tT0nQ.js";import"./scopeId-CCs9B5Ub.js";import"./index-D_fG9q-s.js";import"./VFileInput-DJIla2og.js";import"./VTooltip-Cdy5eBBq.js";import"./VOverlay-DJlwX4La.js";import"./createSimpleFunctional-C99Tbm-0.js";import"./VToolbarItems-BsHPWuvI.js";import"./useConventionConfig-BTWiHJc4.js";import"./VTable-BqX-6L1S.js";import"./EmailEditor.vue_vue_type_script_setup_true_lang-Bx6ljbDR.js";import"./permission-Ba-8wP-4.js";import"./useConventionForms-S92dhsOi.js";const Bl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Yl(a){return typeof a=="string"&&Bl.test(a)}const Hl=()=>({ID:0,UserUUID:"",DisplayName:"",Handle:"",Credentials:[],Additional:{FirstName:"",LastName:"",DOB:"",Email:""},Data:"",Groups:[],Tags:[]}),Gl=Ye({__name:"DataTableItemPanel",props:Fe({accommodations:{},cardClass:{},convention:{},extras:{},forms:{},interests:{},tickets:{},venues:{},layouts:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:Fe(["openActions","showForm"],["update:modelValue"]),setup(a,{emit:o}){const n=Pa.getInstance(),l=o,m=Ke(a,"modelValue"),y=R(),g=Yt(),u=R(),d=R(!1),f=C=>{const M={AdminLayoutUUID:C.AdminLayoutUUID,Limit:1,RegistrationUUID:m.value.RegistrationUUID};g.searchConventionRegistrations(m.value.ConventionUUID,M).then($=>{$&&$.Total>0&&(y.value=$.Registrations[0],u.value=C,d.value=!0)})},S=C=>{l("openActions",C)},T=(C,M,$)=>{l("showForm",C,M,$)};return n.on("checkin-saved",()=>{d.value=!1}),(C,M)=>(A(),J("div",null,[C.layouts?(A(),N(hn,{key:0},{default:c(()=>[(A(!0),J(fe,null,Be(C.layouts,$=>(A(),N(la,{key:$.AdminLayoutUUID,class:"d-block pa-0 ma-0"},{default:c(()=>[s(gr,{style:{"text-overflow":"inherit"},class:"overflow-visible text-wrap"},{default:c(()=>[s(me,{"prepend-icon":"mdi:mdi-page-layout-body",variant:"flat",onClick:G=>f($)},{default:c(()=>[re(ie($.Name),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):ae("",!0),d.value&&u.value&&y.value?(A(),N(Ta,{key:1,modelValue:d.value,"onUpdate:modelValue":M[2]||(M[2]=$=>d.value=$),"hide-extension":!0,fullscreen:!0,title:`#${y.value.Reference} ${y.value.User.DisplayName} - ${u.value.Name} `,scrollable:!0,"card-class":"pa-0"},{default:c(()=>[s(Qi,{accommodations:C.accommodations,convention:C.convention,extras:C.extras,forms:C.forms,interests:C.interests,tickets:C.tickets,venues:C.venues,layout:u.value,"onUpdate:layout":M[0]||(M[0]=$=>u.value=$),modelValue:y.value,"onUpdate:modelValue":M[1]||(M[1]=$=>y.value=$),onOpenActions:S,onShowForm:T},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","layout","modelValue"])]),_:1},8,["modelValue","title"])):ae("",!0)]))}}),Wl={key:0},ql={class:"text-grey-lighten-1"},zl={key:0,class:"mb-2"},Jl={key:1,class:"mb-2"},Kl={key:0,class:"text-blue text-center"},Ql={key:1,class:"text-red text-center"},Xl={key:2,class:"text-orange text-center"},Zl={key:3,class:"text-orange text-center"},es={key:4,class:"text-orange text-center"},ts={key:5,class:"text-orange text-center"},as={key:6,class:"text-green text-center"},ns={key:0},rs={key:0},os=Ye({__name:"RegListRow",props:Fe({header:{},accommodations:{},convention:{},extras:{},forms:{},interests:{},item:{},tickets:{},user:{},venues:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:Fe(["openActions","openPayments","openTags","reload","showForm","switchUser"],["update:modelValue"]),setup(a,{emit:o}){const n=o,l=Ke(a,"modelValue"),m=(u,d)=>{n("showForm",{registration:u,form:d})},y=u=>{n("openActions",u)},g=u=>{n("switchUser",u)};return(u,d)=>u.header.type==="ACCOMMODATION"&&u.accommodations.length>0&&u.item.raw[u.header.key]?(A(),N(Xi,{key:0,value:u.item.raw[u.header.key].Data,accommodations:u.accommodations,convention:u.convention,forms:u.forms,tickets:u.tickets,venues:u.venues,registration:u.item.raw[u.header.key].Registration},null,8,["value","accommodations","convention","forms","tickets","venues","registration"])):u.header.type==="EXTRAS"&&u.extras.length>0?(A(),N(Zi,{key:1,value:u.item.raw[u.header.key],extras:u.extras},null,8,["value","extras"])):u.header.type==="INTERESTS"&&u.interests.length>0?(A(),N(el,{key:2,value:u.item.raw[u.header.key],interests:u.interests},null,8,["value","interests"])):u.header.type==="TICKET"&&u.tickets.length>0?(A(),N(tl,{key:3,value:u.item.raw[u.header.key],tickets:u.tickets},null,8,["value","tickets"])):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_CHECKIN_STATUS"?(A(),N(al,{key:4,convention:u.convention,"show-controls":!1,modelValue:u.item.raw.registration,"onUpdate:modelValue":d[0]||(d[0]=f=>u.item.raw.registration=f)},null,8,["convention","modelValue"])):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_SUBMISSION_STATUS"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ACCOMMODATION_FORM"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ADDITIONAL_FORM"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ADMIN_FORM"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DEALER_FORM"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_BADGE_FORM"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_FORM"?(A(),J(fe,{key:5},[["LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_SUBMISSION_STATUS","LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ADMIN_FORM"].includes(u.header.type)?(A(),J("ul",Wl,[(A(!0),J(fe,null,Be(u.forms.filter(f=>f.Type===F(we).FORM_TYPE_ADMIN&&u.item.raw[u.header.key].findIndex(S=>S.Form.ID===f.ID)<0),f=>(A(),J("li",{key:f.Heading},[ue("strong",ql,ie(f.Heading),1),s(me,{class:"text-grey-lighten-1",icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:S=>m(u.item.raw.registration,f)},null,8,["onClick"])]))),128))])):ae("",!0),ue("ul",null,[(A(!0),J(fe,null,Be(u.item.raw[u.header.key],f=>(A(),J("li",{key:f.Heading},[ue("strong",null,[re(ie(f.Heading),1),f.Form.Type!==F(we).FORM_TYPE_ADMIN?(A(),J(fe,{key:0},[re(": ")],64)):ae("",!0)]),f.Form.Type!==F(we).FORM_TYPE_ADMIN?(A(),J("span",{key:0,class:Ni(F(vl)(f.Submission.Status))},ie(F(yr)(f.Submission.Status)),3)):ae("",!0),s(me,{icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:S=>m(f.Registration,f.Form)},null,8,["onClick"])]))),128))])],64)):u.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_AVATAR"?(A(),N(hr,{key:6,class:"rounded-circle",src:u.item.raw[u.header.key],height:"32",width:"32"},null,8,["src"])):u.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_CONTACTS"?(A(),J(fe,{key:7},[u.item.raw[u.header.key].email?(A(),J("p",zl,[d[4]||(d[4]=ue("strong",null,"Email",-1)),d[5]||(d[5]=ue("br",null,null,-1)),re(ie(u.item.raw[u.header.key].email),1)])):ae("",!0),u.item.raw[u.header.key].telegram?(A(),J("p",Jl,[d[6]||(d[6]=ue("strong",null,"Telegram",-1)),d[7]||(d[7]=ue("br",null,null,-1)),re(ie(u.item.raw[u.header.key].telegram),1)])):ae("",!0)],64)):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_PAYMENT_STATUS"?(A(),J(fe,{key:8},[u.item.raw[u.header.key]=="NOT_REQUIRED"?(A(),J("div",Kl,"No Payment Requested")):u.item.raw[u.header.key]=="MISSING_REQUIRED"?(A(),J("div",Ql,"Partner Payment Not Requested")):u.item.raw[u.header.key]=="AWAITING_PARTNER"?(A(),J("div",Xl,"Awaiting Partner Payment")):u.item.raw[u.header.key]=="ALL_REQUIRED"?(A(),J("div",Zl,"Awaiting Payments")):u.item.raw[u.header.key]=="REQUIRED"?(A(),J("div",es,"Awaiting Payment")):u.item.raw[u.header.key]=="ADDITIONAL_REQUIRED"?(A(),J("div",ts,"Awaiting Additional Payments")):(A(),J("div",as,"Completed"))],64)):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_ACTIONS"?(A(),J(fe,{key:9},[s(me,{icon:"mdi:mdi-briefcase",variant:"flat",onClick:d[1]||(d[1]=f=>y(u.item.raw[u.header.key]))}),F(yl)(u.user)?(A(),N(me,{key:0,icon:"mdi:mdi-account-switch-outline",variant:"flat",onClick:d[2]||(d[2]=f=>g(u.item.raw[u.header.key]))})):ae("",!0)],64)):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_GROUP"?(A(),J(fe,{key:10},[u.item.raw[u.header.key].length===1?(A(),J("em",ns," Not in a group ")):(A(),J(fe,{key:1},[ue("ul",null,[(A(!0),J(fe,null,Be(u.item.raw[u.header.key],f=>(A(),J("li",{key:f.UUID,class:"ml-0"},[re(" #"+ie(f.Reference)+" : "+ie(f.Name)+" ",1),f.IsLeader?(A(),J("strong",rs,"(Leader)")):ae("",!0)]))),128))]),d[8]||(d[8]=ue("strong",null,"Total:",-1)),re(" "+ie(u.item.raw[u.header.key].length),1)],64))],64)):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_TAGS"?(A(),N(nl,{key:11,registration:u.item.raw.registration,meta:u.header.meta},null,8,["registration","meta"])):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DATA_LAYOUT"?(A(),J(fe,{key:12},[l.value.registration?(A(),N(Gl,{key:0,accommodations:u.accommodations,convention:u.convention,extras:u.extras,forms:u.forms,interests:u.interests,tickets:u.tickets,venues:u.venues,layouts:u.item.raw[u.header.key].Layouts,modelValue:l.value.registration,"onUpdate:modelValue":d[3]||(d[3]=f=>l.value.registration=f),onOpenActions:y,onShowForm:m},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","layouts","modelValue"])):ae("",!0)],64)):(A(),J(fe,{key:13},[re(ie(u.item.raw[u.header.key]),1)],64))}}),Xn=Ye({__name:"RegistrationActionTabs",props:Fe({alignTabs:{},class:{},fixedTabs:{type:Boolean},showArrows:{type:[String,Boolean]},tabs:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=a,n=Ke(a,"modelValue");return(l,m)=>(A(),N(Tr,cr({modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=y=>n.value=y)},o),{default:c(()=>[(A(!0),J(fe,null,Be(l.tabs,y=>(A(),N(br,{value:y.value,key:y.value},{default:c(()=>[re(ie(y.label),1)]),_:2},1032,["value"]))),128))]),_:1},16,["modelValue"]))}}),is=(a=void 0,o)=>a===void 0?!1:_r(a,Dr.GROUP_TYPE_CONVENTION,o.ConventionUUID,o).EditPaymentTransactions,ls={class:"mb-4"},ss={class:"v-row"},us={key:0,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},ds={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},cs={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},ms={class:"v-col v-col-2 align-self-end text-right py-1 text-no-wrap"},fs={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},vs={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},ps={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},ys={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},gs=Ye({__name:"PaymentActions",props:Fe({forms:{},title:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=R(!1),n=R(),l=R([]),m=R(new Date().getTime()),y=R(!1),g=Ke(a,"modelValue"),u=R(La(g.value));Je(g,()=>{u.value=La(g.value)});const d=Yt();d.getConvention(g.value.ConventionUUID).then(C=>{C&&(y.value=is(xa(),C))});const f=()=>{d.generateRegistrationCharges(g.value.RegistrationUUID,!1).then(C=>{C&&(l.value=C.PaymentTransactions,n.value=C.Registration,m.value=new Date().getTime())}).catch(()=>{})};f();const S=()=>{d.generateRegistrationCharges(g.value.RegistrationUUID,!0).then(C=>{C&&(l.value=C.PaymentTransactions,n.value=C.Registration,m.value=new Date().getTime())})},{totalCharges:T}=bl();return(C,M)=>(A(),N(na,null,{default:c(()=>[s(ja,null,{default:c(()=>[s(Tn,null,{default:c(()=>[re(" Payments (#"+ie(g.value.Reference)+" "+ie(g.value.User.DisplayName)+") ",1)]),_:1})]),_:1}),s(ra,null,{default:c(()=>[n.value?(A(),J(fe,{key:0},[ue("h3",ls,"#"+ie(n.value.Reference)+" "+ie(n.value.User.DisplayName),1),ue("dl",ss,[(A(!0),J(fe,null,Be(l.value,$=>(A(),J(fe,{key:$.PaymentTransactionUUID},[$.Type===F(Sl).PAYMENT_TRANSACTION_TYPE_CHARGE?(A(),J("dt",us,[ue("div",ds,ie($.Description.split(":")[0])+": ",1),ue("div",cs,ie($.Description.split(":")[1]),1)])):ae("",!0),ue("dd",ms," £"+ie($.Amount),1)],64))),128)),M[2]||(M[2]=ue("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Total Charges ",-1)),ue("dd",fs," £"+ie(F(T)(l.value)),1),M[3]||(M[3]=ue("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Applied Total ",-1)),ue("dd",vs," £"+ie(n.value.Total),1),M[4]||(M[4]=ue("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Currently Paid ",-1)),ue("dd",ps," £"+ie(n.value.Paid),1),M[5]||(M[5]=ue("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Balance ",-1)),ue("dd",ys," £"+ie(n.value.Total-n.value.Paid),1)]),s(ge,{class:"flex-row-reverse"},{default:c(()=>[s(Y,{class:"text-right"},{default:c(()=>[s(me,{color:"primary",onClick:S},{default:c(()=>M[6]||(M[6]=[re("Apply Charges")])),_:1})]),_:1}),!o.value&&y.value?(A(),N(Y,{key:0},{default:c(()=>[s(me,{color:"secondary",onClick:M[0]||(M[0]=$=>o.value=!0)},{default:c(()=>M[7]||(M[7]=[re("Transaction Entry")])),_:1})]),_:1})):ae("",!0)]),_:1})],64)):ae("",!0),s(rl,{"can-edit":y.value,registration:g.value,"show-editor":o.value,onCloseEditor:M[1]||(M[1]=$=>o.value=!1),updated:m.value,onChange:f},null,8,["can-edit","registration","show-editor","updated"])]),_:1})]),_:1}))}}),hs=Er(gs,[["__scopeId","data-v-8af8174d"]]),Us=Ye({__name:"RegistrationFormStatus",props:Fe({forms:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=Yt(),n=Ke(a,"modelValue"),l=(m,y)=>{const g=n.value.Submissions.find(u=>u.SubmissionUUID==y);if(!g){m&&m("Submission not found");return}o.setSubmissionStatus(y,g.Status).then(u=>{u?(n.value.Submissions.forEach((d,f)=>{n.value.Submissions[f].Status=d.Status}),m&&m("Status Saved")):m&&m("Status not saved")}).catch(()=>{m&&m("Status not saved")})};return(m,y)=>(A(),N(na,null,{default:c(()=>[s(ja,null,{default:c(()=>[s(Tn,null,{default:c(()=>[re("Status (#"+ie(n.value.Reference)+" "+ie(n.value.User.DisplayName)+")",1)]),_:1})]),_:1}),s(ra,null,{default:c(()=>[s(hn,null,{default:c(()=>[(A(!0),J(fe,null,Be(n.value.Submissions,g=>(A(),N(la,{key:g.SubmissionUUID,class:"pa-0"},{default:c(()=>[s(ge,{class:"py-2 align-center"},{default:c(()=>[s(Y,{cols:"9",sm:"10",md:"10",lg:"9"},{default:c(()=>{var u;return[s(Te,{modelValue:g.Status,"onUpdate:modelValue":d=>g.Status=d,items:F(zn),"item-text":"title","item-value":"value",variant:"outlined","hide-details":"",label:((u=m.forms.find(d=>d.FormUUID==g.FormUUID))==null?void 0:u.Name)||""},{selection:c(()=>[s(Un,{class:"mr-4 d-none d-sm-inline"},{default:c(()=>{var d;return[re(ie((d=F(zn).find(f=>f.value===g.Status))==null?void 0:d.icon),1)]}),_:2},1024),re(" "+ie(F(yr)(g.Status)),1)]),item:c(({item:d,props:{onClick:f}})=>[s(la,{title:d.title,"prepend-icon":d.raw.icon,onClick:f},null,8,["title","prepend-icon","onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","items","label"])]}),_:2},1024),s(Y,{cols:"3",sm:"2",md:"2",lg:"1"},{default:c(()=>[s(un,{class:"d-none d-sm-inline-flex",title:"Save","prepend-icon":"mdi:mdi-content-save",color:"warning",onClick:u=>l(u.callback,g.SubmissionUUID)},null,8,["onClick"]),s(un,{class:"d-sm-none",size:"35",icon:"mdi:mdi-content-save",color:"warning",onClick:u=>l(u.callback,g.SubmissionUUID)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Ts={class:"mb-4"},bs=Ye({__name:"RegistrationTags",props:Fe({title:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=Yt(),n=Ke(a,"modelValue"),l=R(La(n.value)),m=R(!1),y=R(l.value.Tags);Je(n,()=>{l.value=La(n.value)});const g=({callback:u})=>{const d=[],f=[];l.value.Tags.forEach(S=>{y.value.find(C=>C.TagUUID===S.TagUUID)||d.push(S.TagUUID)}),y.value.forEach(S=>{l.value.Tags.find(C=>S.TagUUID===C.TagUUID)||f.push(S.TagUUID)}),o.updateRegistrationTags(d,f,l.value.RegistrationUUID).then(S=>{S?u&&(u("Tags Saved"),n.value.Tags=S.Tags):u&&u("Error Saving Tags")}).catch(()=>{u&&u("Error Saving Tags")})};return(u,d)=>(A(),N(na,null,{default:c(()=>[s(ja,null,{default:c(()=>[s(Tn,null,{default:c(()=>[re("Tags (#"+ie(l.value.Reference)+" "+ie(l.value.User.DisplayName)+")",1)]),_:1})]),_:1}),s(ra,null,{default:c(()=>[s(El,{class:"my-4"},{default:c(()=>[s(Il,null,{default:c(()=>d[2]||(d[2]=[re("Caution")])),_:1}),d[3]||(d[3]=ue("p",null,"Any tags controlled through registration form fields will be reset when the applicable form is saved. If you don't know what you're doing here, don't touch!",-1))]),_:1}),ue("h3",Ts,"#"+ie(l.value.Reference)+" "+ie(l.value.User.DisplayName),1),s(Ir,{modelValue:l.value.Tags,"onUpdate:modelValue":d[0]||(d[0]=f=>l.value.Tags=f),convention:l.value.ConventionUUID,"show-key":!0,chips:!0,"show-uuid":m.value},null,8,["modelValue","convention","show-uuid"])]),_:1}),s(Ar,{class:"px-4 align-start"},{default:c(()=>[s(ta,{label:"Show UUID",modelValue:m.value,"onUpdate:modelValue":d[1]||(d[1]=f=>m.value=f)},null,8,["modelValue"]),s(un,{onClick:g,variant:"flat"})]),_:1})]),_:1}))}}),Ss=Er(bs,[["__scopeId","data-v-7d39acf0"]]),Zn=Ye({__name:"RegistrationActionWindows",props:Fe({accommodations:{},convention:{},extras:{},forms:{},interests:{},registration:{},tickets:{},venues:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:Fe(["update:registration"],["update:modelValue"]),setup(a,{emit:o}){const n=a,l=Ke(a,"modelValue"),y=Ur(n,o,void 0,void 0,"registration");return(g,u)=>(A(),N(Sr,{modelValue:l.value,"onUpdate:modelValue":u[3]||(u[3]=d=>l.value=d),disabled:!0,touch:!1},{default:c(()=>[s(Gt,{value:"badges"},{default:c(()=>[l.value=="badges"?(A(),N(ct,{key:0,class:"pa-0 mx-0",fluid:!0},{default:c(()=>[s(ol,{convention:g.convention,registration:F(y)},null,8,["convention","registration"])]),_:1})):ae("",!0)]),_:1}),s(Gt,{value:"emails"},{default:c(()=>[l.value=="emails"?(A(),N(ct,{key:0,class:"pa-0 mx-0",fluid:!0},{default:c(()=>[s(il,{registration:F(y)},null,8,["registration"])]),_:1})):ae("",!0)]),_:1}),s(Gt,{value:"notes"},{default:c(()=>[l.value=="notes"?(A(),N(ct,{key:0,class:"pa-0 mx-0",fluid:!0},{default:c(()=>[s(ll,{convention:g.convention,expanded:!1,registration:F(y)},null,8,["convention","registration"])]),_:1})):ae("",!0)]),_:1}),s(Gt,{value:"payments"},{default:c(()=>[l.value=="payments"?(A(),N(ct,{key:0,class:"pa-0 mx-0",fluid:!0},{default:c(()=>[s(hs,{modelValue:F(y),"onUpdate:modelValue":u[0]||(u[0]=d=>Ua(y)?y.value=d:null),forms:g.forms,title:"Registration Payments"},null,8,["modelValue","forms"])]),_:1})):ae("",!0)]),_:1}),s(Gt,{value:"status"},{default:c(()=>[l.value=="status"?(A(),N(ct,{key:0,class:"pa-0 mx-0",fluid:!0},{default:c(()=>[s(Us,{modelValue:F(y),"onUpdate:modelValue":u[1]||(u[1]=d=>Ua(y)?y.value=d:null),forms:g.forms},null,8,["modelValue","forms"])]),_:1})):ae("",!0)]),_:1}),s(Gt,{value:"tags"},{default:c(()=>[l.value=="tags"?(A(),N(ct,{key:0,class:"pa-0 mx-0",fluid:!0},{default:c(()=>[s(Ss,{modelValue:F(y),"onUpdate:modelValue":u[2]||(u[2]=d=>Ua(y)?y.value=d:null),title:"Registration Tags"},null,8,["modelValue"])]),_:1})):ae("",!0)]),_:1})]),_:1},8,["modelValue"]))}}),_s=(a,o)=>a===void 0?!1:_r(a,Dr.GROUP_TYPE_CONVENTION,o.ConventionUUID,o).ViewPaymentTransactions,Ds={key:0},As={key:1},er=Ye({__name:"RegistrationActions",props:Fe({accommodations:{},convention:{},extras:{},forms:{},interests:{},registration:{},tickets:{},title:{},useDialog:{type:Boolean},venues:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:Fe(["update:registration"],["update:modelValue"]),setup(a,{emit:o}){const n=a,l=Ke(a,"modelValue"),y=Ur(n,o,void 0,void 0,"registration"),g=R("notes"),u=xa(),d=[{label:"Badge",value:"badges"},{label:"Emails",value:"emails"},{label:"Notes",value:"notes"},{label:"Status",value:"status"},{label:"Tags",value:"tags"}];return _s(u,n.convention)&&d.splice(2,0,{label:"Payments",value:"payments"}),(f,S)=>f.useDialog?(A(),J("div",Ds,[s(Ta,{modelValue:l.value,"onUpdate:modelValue":S[3]||(S[3]=T=>l.value=T),title:f.title,"show-close-action":!0,color:"primary","close-action-label":"Close",persistent:!0,"retain-focus":!1,scrollable:!0,fullscreen:"","card-class":"ma-0 pa-0"},{extension:c(()=>[s(Xn,{modelValue:g.value,"onUpdate:modelValue":S[0]||(S[0]=T=>g.value=T),tabs:d,"show-arrows":!0},null,8,["modelValue"])]),default:c(()=>[s(Zn,{modelValue:g.value,"onUpdate:modelValue":S[1]||(S[1]=T=>g.value=T),registration:F(y),"onUpdate:registration":S[2]||(S[2]=T=>Ua(y)?y.value=T:null),accommodations:f.accommodations,convention:f.convention,extras:f.extras,forms:f.forms,interests:f.interests,tabs:d,tickets:f.tickets,venues:f.venues},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])]),_:1},8,["modelValue","title"])])):(A(),J("div",As,[s(Xn,{modelValue:g.value,"onUpdate:modelValue":S[4]||(S[4]=T=>g.value=T),tabs:d,"show-arrows":!0},null,8,["modelValue"]),s(Zn,{modelValue:g.value,"onUpdate:modelValue":S[5]||(S[5]=T=>g.value=T),registration:F(y),"onUpdate:registration":S[6]||(S[6]=T=>Ua(y)?y.value=T:null),accommodations:f.accommodations,convention:f.convention,extras:f.extras,forms:f.forms,interests:f.interests,tabs:d,tickets:f.tickets,venues:f.venues},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])]))}}),wr=(a,o)=>{a.forEach(n=>{n.Items.forEach(l=>{(l.SectionField==null||l.SectionField.Field==null)&&o.find(m=>{m.Sections.find(y=>{if(y.Fields){const g=y.Fields.find(u=>u.SectionFieldUUID===l.SectionFieldUUID);if(g)return l.SectionField=g,!0}})})})})},Es={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},Is={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},Cs={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},ws={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},Os={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},ks={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},Rs={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},Ms={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},Vs={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},$s={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},Ps={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},Ls={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},Fs={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},Ns={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},xs={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},js={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},Bs={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},Ys={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},Hs={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},Gs={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},Ws={red:Es,pink:Is,purple:Cs,deepPurple:ws,indigo:Os,blue:ks,lightBlue:Rs,cyan:Ms,teal:Vs,green:$s,lightGreen:Ps,lime:Ls,yellow:Fs,amber:Ns,orange:xs,deepOrange:js,brown:Bs,blueGrey:Ys,grey:Hs,shades:Gs},qs=Ye({__name:"EditAdminLayoutSearch",props:Fe({formOptions:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=a,n=Ke(a,"modelValue");n.value.Search||(n.value.Search=[]);const l=R(o.formOptions),m=()=>{n.value.Search.push({ID:0,LayoutItemUUID:Rt(),LayoutPanelID:n.value.AdminLayoutID,LayoutPanelUUID:n.value.AdminLayoutUUID,Label:"",SourceType:kt.LAYOUT_ITEM_SOURCE_FORM,Align:"",Order:n.value.Search.length,DefaultSort:!1,Meta:{}})},y=u=>{const d=n.value.Search.findIndex(f=>f.LayoutItemUUID===u.LayoutItemUUID);d!=-1&&n.value.Search.splice(d,1)},g=u=>{const d=l.value.find(f=>f.value===u.SectionFieldUUID);d&&(u.SectionFieldID=d.object.ID,u.SectionField=d.object)};return(u,d)=>(A(),J(fe,null,[(A(!0),J(fe,null,Be(n.value.Search,f=>(A(),N(ge,{key:f.LayoutItemUUID},{default:c(()=>[s(Y,{cols:"12",sm:"6"},{default:c(()=>[s(Te,{modelValue:f.SourceType,"onUpdate:modelValue":S=>f.SourceType=S,label:"Source Type",items:F(pn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),s(Y,null,{default:c(()=>[f.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(A(),N(Te,{key:0,modelValue:f.SectionFieldUUID,"onUpdate:modelValue":S=>f.SectionFieldUUID=S,label:"Form Data",items:l.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:S=>g(f)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):f.SourceType==="LAYOUT_ITEM_SOURCE_META"?(A(),N(Te,{key:1,modelValue:f.MetaField,"onUpdate:modelValue":S=>f.MetaField=S,label:"Miscellaneous Data",items:F(yn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):f.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(A(),N(Te,{key:2,modelValue:f.UserField,"onUpdate:modelValue":S=>f.UserField=S,label:"User Profile Data",items:F(gn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):ae("",!0)]),_:2},1024),s(Y,null,{default:c(()=>[s(me,{icon:"mdi:mdi-delete",onClick:S=>y(f)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),s(me,{onClick:m,color:"primary"},{default:c(()=>d[0]||(d[0]=[re(" Add Search Item ")])),_:1})],64))}}),zs=Ye({__name:"EditAdminLayoutFilter",props:Fe({formOptions:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=a,n=Ke(a,"modelValue");n.value.Filter||(n.value.Filter=[]);const l=R(o.formOptions),m=()=>{n.value.Filter.push({ID:0,LayoutItemUUID:Rt(),LayoutPanelID:n.value.AdminLayoutID,LayoutPanelUUID:n.value.AdminLayoutUUID,Label:"",SourceType:kt.LAYOUT_ITEM_SOURCE_FORM,Align:"",Order:n.value.Filter.length,DefaultSort:!1,Meta:{}})},y=u=>{const d=n.value.Filter.findIndex(f=>f.LayoutItemUUID===u.LayoutItemUUID);d!=-1&&n.value.Filter.splice(d,1)},g=u=>{const d=l.value.find(f=>f.value===u.SectionFieldUUID);d&&(u.SectionFieldID=d.object.ID,u.SectionField=d.object)};return(u,d)=>(A(),J(fe,null,[(A(!0),J(fe,null,Be(n.value.Filter,f=>(A(),N(ge,{key:f.LayoutItemUUID},{default:c(()=>[s(Y,{cols:"12",sm:"6"},{default:c(()=>[s(Te,{modelValue:f.SourceType,"onUpdate:modelValue":S=>f.SourceType=S,label:"Source Type",items:F(pn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),s(Y,null,{default:c(()=>[f.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(A(),N(Te,{key:0,modelValue:f.SectionFieldUUID,"onUpdate:modelValue":S=>f.SectionFieldUUID=S,label:"Form Data",items:l.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:S=>g(f)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):f.SourceType==="LAYOUT_ITEM_SOURCE_META"?(A(),N(Te,{key:1,modelValue:f.MetaField,"onUpdate:modelValue":S=>f.MetaField=S,label:"Miscellaneous Data",items:F(yn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):f.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(A(),N(Te,{key:2,modelValue:f.UserField,"onUpdate:modelValue":S=>f.UserField=S,label:"User Profile Data",items:F(gn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):ae("",!0)]),_:2},1024),s(Y,null,{default:c(()=>[s(me,{icon:"mdi:mdi-delete",onClick:S=>y(f)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),s(me,{onClick:m,color:"primary"},{default:c(()=>d[0]||(d[0]=[re(" Add Filter Item ")])),_:1})],64))}}),Js={key:0,class:"text-warning text-right pl-1"},Ks=Ye({__name:"EditAdminLayout",props:Fe({convention:{},layouts:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:Fe(["change","delete"],["update:modelValue"]),setup(a,{emit:o}){const n=Vl(),l=Ke(a,"modelValue"),m=R([]),y=Yt(),g=o,u=R(Object.assign({},...a.layouts.map(x=>x.Panels.map(W=>W.Items.map(O=>{if(!O.Meta)return{};const B={};return Object.entries(O.Meta).forEach(D=>{Array.isArray(D[1])?(B[`${O.LayoutItemUUID}.${D[0]}`]=[],D[1].forEach(oe=>{B[`${O.LayoutItemUUID}.${D[0]}`].push(oe.toString())})):D[1]!==void 0&&D[1]!==null&&(B[`${O.LayoutItemUUID}.${D[0]}`]=[D[1].toString()])}),B}))).flat(2))),d=R(`
Are you sure you wish to delete this layout? All panels relating to it will be
removed and can not be recovered. This action can not be undone once saved.
You will have to create a new layout.
`),f=R(!1),S=R([]);y.getConventionTags(a.convention.ConventionUUID).then(x=>{x&&(S.value=x)}).catch(()=>{});const T=()=>({ID:0,LayoutPanelUUID:Rt(),AdminLayoutID:l.value.ID,AdminLayoutUUID:l.value.AdminLayoutUUID,Name:"",Order:l.value.Panels.length+1,Items:[],Search:[],Filter:[],PanelStyle:qn.PANEL_STYLE_FLEX,RequiredFormType:we.FORM_TYPE_NIL,RequiredGroupMemberships:[],RequiredRegistrationTags:[],Meta:{}}),C=x=>()=>({ID:0,LayoutItemUUID:Rt(),LayoutPanelID:x.ID,LayoutPanelUUID:x.LayoutPanelUUID,Label:"",SourceType:kt.LAYOUT_ITEM_SOURCE_FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:x.Items.length+1,DefaultSort:!1,Meta:{}}),M=(x,W)=>{x.Meta[W]=u.value[`${x.LayoutItemUUID}.${W}`]},$=x=>{const W=m.value.find(O=>O.value===x.SectionFieldUUID);W&&(x.SectionFieldID=W.object.ID,x.SectionField=W.object)};y.getConventionForms(l.value.ConventionUUID).then(x=>{x&&(x.forEach(W=>W.Sections.forEach(O=>O.Fields&&m.value.push(...O.Fields.map(B=>{var oe;return{title:`${W.Name} - ${O.Name} - ${(oe=B.Field)==null?void 0:oe.Name}`,value:B.SectionFieldUUID,object:B}})))),m.value.sort(Ol("title")),wr(l.value.Panels,x))});const G=aa(()=>{switch(l.value.Type){case ut.ADMIN_LAYOUT_PANELS:return"Panels";case ut.ADMIN_LAYOUT_TABLE:return"Tabs"}return"Unknown"});Je(l,()=>{g("change")},{deep:!0});const ee=aa(()=>{const x=/([a-zA-Z]+)(\d+)/;return Object.entries(Ws).map(([W,O])=>Object.entries(O).map(([B,D])=>{const oe=x.exec(B);return!oe||oe.length<3?void 0:{Title:`${ln(W).split(/(?=[A-Z])/).join(" ")} ${ln(oe[1])} ${ln(oe[2])}`,CSSName:`${W}-${oe[1]}-${oe[2]}`,Value:D}})).flat().filter(W=>!!W).sort((W,O)=>W.Title>O.Title?1:W.Title==O.Title?0:-1)});return(x,W)=>(A(),N(ct,{class:"px-0 mx-0",fluid:!0},{default:c(()=>[s(ge,null,{default:c(()=>[s(Y,{cols:"12",sm:"6"},{default:c(()=>[s(Ve,{modelValue:l.value.Name,"onUpdate:modelValue":W[0]||(W[0]=O=>l.value.Name=O),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),s(Y,{cols:"12",sm:"6"},{default:c(()=>[s(Te,{modelValue:l.value.Type,"onUpdate:modelValue":W[1]||(W[1]=O=>l.value.Type=O),label:"Layout Type",items:F(sl),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),l.value.Type==F(ut).ADMIN_LAYOUT_PANELS?(A(),N(Y,{key:0,cols:"12",sm:"6"},{default:c(()=>[s(Te,{modelValue:l.value.RunnerLayoutUUID,"onUpdate:modelValue":W[2]||(W[2]=O=>l.value.RunnerLayoutUUID=O),clearable:!0,items:x.layouts.filter(O=>O.Type===F(ut).ADMIN_LAYOUT_PANELS)||[],multiple:!1,label:"Runner Display (Optional)","item-title":"Name","item-value":"AdminLayoutUUID",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})):ae("",!0)]),_:1}),s(ge,null,{default:c(()=>[s(Y,null,{default:c(()=>[s(dn,{modelValue:l.value.Panels,"onUpdate:modelValue":W[3]||(W[3]=O=>l.value.Panels=O),"new-item":T,closeable:!1,title:G.value,label:"Name","slot-name-prefix":"panel"},Fa({_:2},[Be(l.value.Panels,(O,B)=>({name:`panel_${B}`,fn:c(()=>[s(ct,{class:"px-0 mx-0",fluid:!0},{default:c(()=>[s(ge,null,{default:c(()=>[s(Y,{cols:"12",sm:"6"},{default:c(()=>[s(Ve,{modelValue:O.Name,"onUpdate:modelValue":D=>O.Name=D,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.value.Type===F(ut).ADMIN_LAYOUT_PANELS?(A(),N(Y,{key:0,cols:"12",sm:"6"},{default:c(()=>[s(Te,{modelValue:O.PanelStyle,"onUpdate:modelValue":D=>O.PanelStyle=D,items:F(ul),clearable:!0,label:"Panel Style",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)):ae("",!0),s(Y,{cols:"12",sm:"6"},{default:c(()=>[s(Te,{modelValue:O.RequiredFormType,"onUpdate:modelValue":D=>O.RequiredFormType=D,items:F(fl),clearable:!0,label:"Required Form",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),s(Y,{cols:"12",sm:"6"},{default:c(()=>[s(Rl,{label:"Required Groups",variant:"outlined",modelValue:O.RequiredGroupMemberships,"onUpdate:modelValue":D=>O.RequiredGroupMemberships=D,convention:l.value.ConventionUUID,chips:"",clearable:"",hint:"Groups that a user must be in to see this panel. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024),s(Y,{cols:"12",sm:"6"},{default:c(()=>[s(Ir,{label:"Registration Tags",variant:"outlined",modelValue:O.RequiredRegistrationTags,"onUpdate:modelValue":D=>O.RequiredRegistrationTags=D,convention:l.value.ConventionUUID,chips:"",clearable:"",hint:"Tags that a registration must have to appear in results. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024)]),_:2},1024),F(n)?(A(),N(ge,{key:0},{default:c(()=>[s(Y,null,{default:c(()=>[s(Cr,{variant:"accordion"},{default:c(()=>[s(cn,null,{default:c(()=>[s(mn,null,{default:c(()=>W[7]||(W[7]=[re(" Filters ")])),_:1}),s(fn,null,{default:c(()=>[W[8]||(W[8]=ue("p",null," Fixed search settings to pre-filter results by ",-1)),s(zs,{modelValue:l.value.Panels[B],"onUpdate:modelValue":D=>l.value.Panels[B]=D,"form-options":m.value},null,8,["modelValue","onUpdate:modelValue","form-options"])]),_:2},1024)]),_:2},1024),s(cn,null,{default:c(()=>[s(mn,null,{default:c(()=>W[9]||(W[9]=[re(" Search Options ")])),_:1}),s(fn,null,{default:c(()=>[W[10]||(W[10]=ue("p",null," Dynamic search options ",-1)),s(qs,{modelValue:l.value.Panels[B],"onUpdate:modelValue":D=>l.value.Panels[B]=D,"form-options":m.value},null,8,["modelValue","onUpdate:modelValue","form-options"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):ae("",!0),l.value.Type===F(ut).ADMIN_LAYOUT_TABLE?(A(),N(ge,{key:1},{default:c(()=>[s(Y,null,{default:c(()=>[s(ta,{modelValue:O.Meta.challenge,"onUpdate:modelValue":D=>O.Meta.challenge=D,label:"Require challenge on search"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):ae("",!0),l.value.Type===F(ut).ADMIN_LAYOUT_PANELS&&O.PanelStyle===F(qn).PANEL_STYLE_FLEX?(A(),N(ge,{key:2},{default:c(()=>[s(Y,{cols:"12",class:"py-0 my-0"},{default:c(()=>W[11]||(W[11]=[ue("h4",null,"Grid Size (Max 12)",-1)])),_:1}),s(Y,{cols:"6",sm:"4",lg:"2"},{default:c(()=>[s(Ve,{modelValue:O.Meta.cols,"onUpdate:modelValue":D=>O.Meta.cols=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"Default",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"6",sm:"4",lg:"2"},{default:c(()=>[s(Ve,{modelValue:O.Meta.cols_xs,"onUpdate:modelValue":D=>O.Meta.cols_xs=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"XS",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"6",sm:"4",lg:"2"},{default:c(()=>[s(Ve,{modelValue:O.Meta.cols_sm,"onUpdate:modelValue":D=>O.Meta.cols_sm=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"SM",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"6",sm:"4",lg:"2"},{default:c(()=>[s(Ve,{modelValue:O.Meta.cols_md,"onUpdate:modelValue":D=>O.Meta.cols_md=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"MD",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"6",sm:"4",lg:"2"},{default:c(()=>[s(Ve,{modelValue:O.Meta.cols_lg,"onUpdate:modelValue":D=>O.Meta.cols_lg=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"LG",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"6",sm:"4",lg:"2"},{default:c(()=>[s(Ve,{modelValue:O.Meta.cols_xl,"onUpdate:modelValue":D=>O.Meta.cols_xl=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"XL",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):ae("",!0)]),_:2},1024),s(dn,{modelValue:O.Items,"onUpdate:modelValue":D=>O.Items=D,"new-item":C(O),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},Fa({_:2},[Be(O.Items,(D,oe)=>({name:`item_${oe}`,fn:c(()=>[s(ct,{class:"px-0 mx-0",fluid:!0},{default:c(()=>{var be,P;return[s(ge,null,{default:c(()=>[s(Y,{cols:"12",sm:"6"},{default:c(()=>[s(Ve,{modelValue:D.Label,"onUpdate:modelValue":E=>D.Label=E,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),s(ge,null,{default:c(()=>[s(Y,{cols:"12",sm:"6"},{default:c(()=>[s(Te,{modelValue:D.SourceType,"onUpdate:modelValue":E=>D.SourceType=E,label:"Source Type",items:F(pn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),s(Y,{cols:"12",sm:"6"},{default:c(()=>[D.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(A(),N(Te,{key:0,modelValue:D.SectionFieldUUID,"onUpdate:modelValue":E=>D.SectionFieldUUID=E,label:"Form Data",items:m.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:E=>$(D)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):D.SourceType==="LAYOUT_ITEM_SOURCE_META"?(A(),N(Te,{key:1,modelValue:D.MetaField,"onUpdate:modelValue":E=>D.MetaField=E,label:"Miscellaneous Data",items:F(yn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):D.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(A(),N(Te,{key:2,modelValue:D.UserField,"onUpdate:modelValue":E=>D.UserField=E,label:"User Profile Data",items:F(gn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):ae("",!0)]),_:2},1024)]),_:2},1024),x.layouts&&D.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&((P=(be=D.SectionField)==null?void 0:be.Field)==null?void 0:P.Type)===F(pr).TEXT?(A(),N(ge,{key:0},{default:c(()=>[s(Y,{cols:"12",xs:"6",sm:"6",lg:"3"},{default:c(()=>[s(ta,{modelValue:D.Meta.DirectEdit,"onUpdate:modelValue":E=>D.Meta.DirectEdit=E,label:"Direct Edit","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"12",xs:"6",sm:"6",lg:"3"},{default:c(()=>[s(Te,{modelValue:D.Meta.DirectEditPermission,"onUpdate:modelValue":E=>D.Meta.DirectEditPermission=E,label:"Minimum Permission Required",items:["View","Edit"],"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):ae("",!0),x.layouts&&D.SourceType==="LAYOUT_ITEM_SOURCE_META"&&D.MetaField===F(pe).META_DATA_SOURCE_BADGE_DISPLAY?(A(),N(ge,{key:1},{default:c(()=>[s(Y,{cols:"6",sm:"4",lg:"2"},{default:c(()=>[s(ta,{modelValue:D.Meta.HideDownloadButton,"onUpdate:modelValue":E=>D.Meta.HideDownloadButton=E,label:"Hide Download Button"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"6",sm:"4",lg:"2"},{default:c(()=>[s(ta,{modelValue:D.Meta.HideNFCButton,"onUpdate:modelValue":E=>D.Meta.HideNFCButton=E,label:"Hide NFC Button"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):ae("",!0),x.layouts&&D.SourceType==="LAYOUT_ITEM_SOURCE_META"&&D.MetaField===F(pe).META_DATA_SOURCE_DATA_LAYOUT?(A(),N(ge,{key:2},{default:c(()=>[s(Y,{cols:"6",sm:"4",lg:"2"},{default:c(()=>[s(Te,{modelValue:u.value[`${D.LayoutItemUUID}.LayoutUUID`],"onUpdate:modelValue":[E=>u.value[`${D.LayoutItemUUID}.LayoutUUID`]=E,E=>M(D,"LayoutUUID")],clearable:!0,items:x.layouts.filter(E=>E.Type===F(ut).ADMIN_LAYOUT_PANELS)||[],multiple:!0,label:"Data Display","item-title":"Name","item-value":"AdminLayoutUUID",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)):ae("",!0),x.layouts&&D.SourceType==="LAYOUT_ITEM_SOURCE_META"&&D.MetaField===F(pe).META_DATA_SOURCE_TAGS?(A(),N(ge,{key:3},{default:c(()=>[s(Y,{cols:"6",sm:"6",md:"6",lg:"6"},{default:c(()=>[s(Te,{modelValue:u.value[`${D.LayoutItemUUID}.Tags`],"onUpdate:modelValue":[E=>u.value[`${D.LayoutItemUUID}.Tags`]=E,E=>M(D,"Tags")],clearable:!0,items:S.value||[],multiple:!0,chips:!0,label:"Tags to Display","item-title":"Title","item-value":"TagUUID",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"]),!u.value[D.LayoutItemUUID]||u.value[D.LayoutItemUUID].length===0?(A(),J("small",Js," Will show all tags ")):ae("",!0)]),_:2},1024),s(Y,{cols:"6"},{default:c(()=>[s(Te,{modelValue:D.Meta.TagColour,"onUpdate:modelValue":E=>D.Meta.TagColour=E,items:ee.value,label:"Colour","item-title":"Title","item-value":"Value",variant:"outlined","hide-details":""},{selection:c(({item:E})=>[s(me,{size:"x-small",color:E.raw.Value,class:"mr-2"},null,8,["color"]),re(" "+ie(E.title),1)]),item:c(({props:E,item:H})=>[s(la,xi(ji(E)),{prepend:c(()=>[s(me,{size:"x-small",color:H.raw.Value,class:"mr-2"},null,8,["color"])]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)):ae("",!0),l.value.Type===F(ut).ADMIN_LAYOUT_TABLE&&(D.SourceType!==F(kt).LAYOUT_ITEM_SOURCE_META||D.MetaField!==F(pe).META_DATA_SOURCE_DATA_LAYOUT)?(A(),N(ge,{key:4},{default:c(()=>[s(Y,null,{default:c(()=>[s(ta,{modelValue:D.DefaultSort,"onUpdate:modelValue":E=>D.DefaultSort=E,label:"Default Sort","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):ae("",!0)]}),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue","title"])]),_:1})]),_:1}),s(ge,null,{default:c(()=>[s(Y,null,{default:c(()=>[s(me,{onClick:W[4]||(W[4]=O=>f.value=!0),"prepend-icon":"mdi:mdi-delete",color:"red-darken-4"},{default:c(()=>W[12]||(W[12]=[re("Delete Layout")])),_:1})]),_:1})]),_:1}),f.value?(A(),N(Ml,{key:0,modelValue:f.value,"onUpdate:modelValue":W[5]||(W[5]=O=>f.value=O),message:d.value,title:"Delete Layout",subtitle:"Removes this layout and all it's panels",onDelete:W[6]||(W[6]=O=>g("delete"))},null,8,["modelValue","message"])):ae("",!0)]),_:1}))}}),Qs=Ye({__name:"EditAdminLayouts",props:Fe({title:{},convention:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:Fe(["save"],["update:modelValue"]),setup(a,{emit:o}){const n=Ke(a,"modelValue"),l=o,m=R([]),y=R([]),g=R([]),u=Yt(),d=()=>({ID:0,AdminLayoutUUID:Rt(),ConventionID:a.convention.ID,ConventionUUID:a.convention.ConventionUUID,Name:"New Layout",Type:ut.ADMIN_LAYOUT_PANELS,Panels:[]}),f=()=>{let T=!1;[...new Set(g.value)].forEach(M=>{const $=m.value.findIndex(G=>G.AdminLayoutUUID===M);$<0||$>=m.value.length||(u.saveAdminLayout(m.value[$]).then(G=>{G&&m.value.splice($,1,G)}).catch(()=>{}),T=!0)}),y.value.forEach(M=>{u.deleteAdminLayout(M).catch(()=>{})}),y.value=[],g.value=[],T&&l("save")},S=T=>{const C=m.value.findIndex(M=>M.AdminLayoutUUID===T.AdminLayoutUUID);C<0||C>=m.value.length||(m.value[C].ID>0&&y.value.push(T.AdminLayoutUUID),m.value.splice(C,1))};return u.getConventionAdminLayouts(a.convention.ConventionUUID).then(T=>{T&&(m.value=T)}).catch(()=>[]),(T,C)=>(A(),N(vn,{modelValue:n.value,"onUpdate:modelValue":C[2]||(C[2]=M=>n.value=M),scrollable:!0,"retain-focus":!0,persistent:!0,fullscreen:!0},{default:c(()=>[s(dn,{modelValue:m.value,"onUpdate:modelValue":C[0]||(C[0]=M=>m.value=M),"new-item":d,closeable:!0,"show-delete":!1,"show-save":!0,"has-order":!1,title:T.title,label:"Name","slot-name-prefix":"panel",onClose:C[1]||(C[1]=M=>n.value=!1),onSave:f},Fa({_:2},[Be(m.value,(M,$)=>({name:`panel_${$}`,fn:c(()=>[s(ct,{class:"px-0 mx-0",fluid:!0},{default:c(()=>[s(ge,null,{default:c(()=>[s(Y,{cols:"12"},{default:c(()=>[s(Ks,{modelValue:m.value[$],"onUpdate:modelValue":G=>m.value[$]=G,convention:T.convention,layouts:m.value,onChange:G=>g.value.push(M.AdminLayoutUUID),onDelete:G=>S(M)},null,8,["modelValue","onUpdate:modelValue","convention","layouts","onChange","onDelete"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","title"])]),_:1},8,["modelValue"]))}}),Xs=["href","onClick"],Zs=Ye({__name:"OperatorSocket",setup(a){const o=Yt(),n=Pa.getInstance(),l=xa(),m=Pl(),y=R(!1),g=dl({wsUri:o.getRunnerSocketURL()}),u=Bi.getInstance(),d=R(!1),f=R(!1),S=R([]),T=fr(),C=R("Connecting"),M=R([{title:"- Select Duration -",value:-1},{title:"No Expiry",value:0},{title:"5 Minutes",value:5*60*1e3},{title:"30 Minutes",value:30*60*1e3},{title:"1 Hour",value:60*60*1e3},{title:"1.5 Hours",value:90*60*1e3},{title:"2 Hours",value:120*60*1e3},{title:"3 Hours",value:180*60*1e3},{title:"4 Hours",value:240*60*1e3},{title:"5 Hours",value:300*60*1e3},{title:"6 Hours",value:360*60*1e3}]),$=P=>{if(P.editing=!1,P.timer&&clearTimeout(P.timer),!P.selectedDuration){P.expires=void 0,P.timer=void 0;return}const E=new Date;E.setTime(new Date().getTime()+P.selectedDuration),P.expires=E,G(P),B()},G=P=>{if(P.expires){if(P.timer&&clearTimeout(P.timer),typeof P.expires=="number"){const E=new Date;E.setTime(P.expires),P.expires=E}P.expires&&"getTime"in P.expires&&(P.timer=setTimeout(()=>{P.timer&&clearTimeout(P.timer),W(P)},P.expires.getTime()-Date.now()))}};g.on("authenticated",()=>{d.value=!0;const P={Key:"",Mode:"host",UserUUID:(l==null?void 0:l.UserUUID)||""},E={Command:"SET_MODE",Params:new Map,Data:JSON.stringify(P)};g.JSON(E)}),g.on("auth_failed",()=>{d.value=!1,C.value="Access Denied"}),g.on("badge_serial_update",P=>{n.emit("badge_serial_update",P)}),g.on("close",()=>{C.value="Disconnected"}),g.on("open",()=>{const P=u.getTokenByService("GrazeAPI");C.value="Authenticating",g.send(`AUTH ${P==null?void 0:P.AccessToken}`)}),g.on("runner_connected",P=>{const E=P,H=S.value.find(ye=>ye.key==E.Key);if(!H){ee(E.Key,E.UserUUID);return}const de=Hl();de.DisplayName=E.DisplayName,de.UserUUID=E.UserUUID,H.users.find(ye=>ye.UserUUID==de.UserUUID)||H.users.push(de)}),g.on("runner_disconnected",P=>{const E=P,H=S.value.find(ye=>ye.key==E.Key);if(!H)return;const de=H.users.findIndex(ye=>ye.UserUUID==E.UserUUID);de<0||H.users.splice(de,1)}),g.on("started",()=>{S.value.forEach(P=>{const E={Key:P.key},H={Command:"ADD_KEY",Params:new Map,Data:JSON.stringify(E)};g.JSON(H)}),C.value="Connected"}),Yi(()=>{O(),Pa.getInstance().on("layout_opened",E=>{const H=E;if(!g||!d.value||!H||!H.AdminLayoutUUID||!H.RegistrationUUID)return;const de={Command:"OPEN_LAYOUT",Params:new Map,Data:JSON.stringify(H)};g.JSON(de)})}),mr(()=>{g.destroy()});const ee=(P,E)=>{const de={Command:"KICK_RUNNER",Params:new Map,Data:JSON.stringify({DisplayName:"",Key:P,UserUUID:E})};g.JSON(de)},x=()=>{const P=Rt(),H={Command:"ADD_KEY",Params:new Map,Data:JSON.stringify({Key:P})};g.JSON(H),S.value.push({key:P,name:"New Session",users:[]}),B()},W=P=>{const E=S.value.findIndex(ye=>ye==P);if(E<0)return;const H={Key:P.key},de={Command:"REMOVE_KEY",Params:new Map,Data:JSON.stringify(H)};g.JSON(de),S.value.splice(E,1),B()},O=()=>{const P=sessionStorage.getItem("collaboration.sessions");P&&(S.value=JSON.parse(P),S.value.forEach(E=>{typeof E.expires!="number"&&(E.expires=0),G(E)}))},B=()=>{const P=[];S.value.forEach(E=>{P.push({name:E.name,expires:typeof E.expires=="number"?E.expires:E.expires?E.expires.getTime():0,key:E.key,users:[]})}),sessionStorage.setItem("collaboration.sessions",JSON.stringify(P))},D=P=>{const E=T.resolve({name:"RunnerView",params:{user:l==null?void 0:l.UserUUID,session:P.key}}),H=new URL(location.href);return H.pathname=E.href,H.toString()},oe=P=>{const E=D(P);return $l(E),f.value=!0,E},be=P=>{if(typeof P=="number"){const ye=new Date;ye.setTime(P),P=ye}const E=P.getTime()-Date.now(),H=Math.floor(E/(1e3*60*60)),de=Math.floor(E%(1e3*60*60)/(1e3*60));return H==0&&de==0?`${Math.floor(E%6e4/1e3)}s`:`${H}hr${H!=1?"s":""} ${de}min${de!=1?"s":""}`};return(P,E)=>d.value?(A(),J(fe,{key:0},[s(me,{icon:"mdi:mdi-link-variant",onClick:E[0]||(E[0]=H=>y.value=!0)}),s(Ta,{modelValue:y.value,"onUpdate:modelValue":E[4]||(E[4]=H=>y.value=H),"hide-extension":!0,"show-save-action":!1,"show-delete-action":!1,"show-reset-action":!1,title:"Collaboration",subtitle:`Connection Status: ${C.value}`},{actions:c(()=>[s(ga),s(me,{color:"primary",variant:"flat","prepend-icon":"mdi:mdi-link-variant-plus",onClick:x},{default:c(()=>E[5]||(E[5]=[re(" Create Session ")])),_:1})]),default:c(()=>[s(hn,null,{default:c(()=>[(A(!0),J(fe,null,Be(S.value,H=>(A(),J(fe,{key:H.key},[s(gl,{value:H.key},{activator:c(({props:de})=>[s(la,cr({ref_for:!0},de),{default:c(()=>[s(gr,null,{default:c(()=>[s(ge,null,{default:c(()=>[s(Y,{style:{"max-width":"84px"}},{default:c(()=>[ue("a",{href:oe(H),onClick:dt(ye=>oe(H),["prevent","stop"]),class:"text-white text-decoration-none"},[s(me,{variant:"flat",size:"x-small",icon:"mdi:mdi-link-variant",color:"success",class:"mr-2",title:"Copy Link"})],8,Xs),s(me,{variant:"flat",size:"x-small",icon:"mdi:mdi-link-variant-remove",color:"error",class:"mr-2",title:"Terminate",onClick:dt(ye=>W(H),["stop"])},null,8,["onClick"])]),_:2},1024),s(Y,null,{default:c(()=>[s(Ve,{modelValue:H.name,"onUpdate:modelValue":ye=>H.name=ye,"hide-details":"",variant:"plain",density:"compact",onChange:B,onClick:E[1]||(E[1]=dt(()=>{},["stop"])),onKeydown:E[2]||(E[2]=dt(()=>{},["stop"]))},{append:c(()=>[re(ie(H.users.length),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),default:c(()=>[H.editing?(A(),N(Te,{key:0,label:"Duration",items:M.value,density:"compact","hide-details":!0,modelValue:H.selectedDuration,"onUpdate:modelValue":[de=>H.selectedDuration=de,de=>$(H)],modelModifiers:{number:!0}},null,8,["items","modelValue","onUpdate:modelValue"])):H.expires?(A(),J(fe,{key:1},[ue("small",null,[E[6]||(E[6]=ue("strong",null,"Expires:",-1)),re(" "+ie(be(H.expires)),1)]),s(me,{onClick:de=>{H.selectedDuration=-1,H.editing=!0},variant:"text",color:"primary",density:"compact",size:"small"},{default:c(()=>E[7]||(E[7]=[re(" (Change Expiry) ")])),_:2},1032,["onClick"])],64)):(A(),N(me,{key:2,onClick:de=>{H.selectedDuration=-1,H.editing=!0},variant:"text",color:"primary",density:"compact",size:"small"},{default:c(()=>E[8]||(E[8]=[re(" (Set Expiry) ")])),_:2},1032,["onClick"])),(A(!0),J(fe,null,Be(H.users,de=>(A(),N(la,{key:`${H.key}.${de.UserUUID}`},{append:c(()=>[s(me,{variant:"flat",size:"small",icon:"mdi:mdi-account-network-off",title:"Disconnect User",onClick:ye=>ee(H.key,de.UserUUID)},null,8,["onClick"])]),prepend:c(()=>[s(hr,{src:F(m)(de.UserUUID),class:"rounded-circle mr-2 pt-4 d-inline-block",height:"32",width:"32"},null,8,["src"])]),default:c(()=>[re(" "+ie(de.DisplayName),1)]),_:2},1024))),128))]),_:2},1032,["value"]),s(F(Ll),{value:oe(H),width:"200"},null,8,["value"])],64))),128))]),_:1}),s(Dl,{modelValue:f.value,"onUpdate:modelValue":E[3]||(E[3]=H=>f.value=H),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"])]),_:1},8,["modelValue","subtitle"])],64)):ae("",!0)}}),eu={style:{opacity:"var(--v-medium-emphasis-opacity)"}},tu=Ye({__name:"Paginator",props:Fe({itemTotal:{}},{currentPage:{required:!0},currentPageModifiers:{},itemsPerPage:{required:!0},itemsPerPageModifiers:{}}),emits:["update:currentPage","update:itemsPerPage"],setup(a){const o=Ke(a,"currentPage"),n=Ke(a,"itemsPerPage");return(l,m)=>(A(),N(ct,{fluid:!0},{default:c(()=>[s(ge,{class:"align-center"},{default:c(()=>[s(Y,{cols:"12",lg:"7","order-lg":"3",xl:"8"},{default:c(()=>[s(Fl,{modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=y=>o.value=y),modelModifiers:{number:!0},length:Math.ceil(l.itemTotal/n.value)},null,8,["modelValue","length"])]),_:1}),s(Y,{cols:"6",sm:"4",md:"2",lg:"2",xl:"1","order-lg":"1"},{default:c(()=>[s(Te,{modelValue:n.value,"onUpdate:modelValue":m[1]||(m[1]=y=>n.value=y),density:"compact","hide-details":"","item-title":"title","item-value":"value",label:"Items per page",min:"-1",max:"100",type:"number",variant:"outlined",items:[{title:"10",value:10},{title:"25",value:25},{title:"50",value:50},{title:"100",value:100},{title:"All",value:-1}]},null,8,["modelValue"])]),_:1}),s(Y,{cols:"6",sm:"3",md:"2",lg:"1",xl:"1","order-lg":"2"},{default:c(()=>[s(Ve,{modelValue:o.value,"onUpdate:modelValue":m[2]||(m[2]=y=>o.value=y),modelModifiers:{number:!0},density:"compact","hide-details":"",label:"Page",min:"1",max:Math.ceil(l.itemTotal/n.value),type:"number",variant:"outlined"},null,8,["modelValue","max"])]),_:1}),s(Y,{class:"text-right",cols:"12",sm:"5",md:"8",lg:"2",xl:"2","order-lg":"4"},{default:c(()=>[ue("span",eu,[n.value===-1?(A(),J(fe,{key:0},[re(" 1-"+ie(l.itemTotal)+" of "+ie(l.itemTotal),1)],64)):(A(),J(fe,{key:1},[re(ie((o.value-1)*n.value+1)+" - "+ie(o.value*n.value>=l.itemTotal?l.itemTotal:o.value*n.value)+" of "+ie(l.itemTotal),1)],64))])]),_:1})]),_:1})]),_:1}))}});var Or=(a,o,n)=>{if(!o.has(a))throw TypeError("Cannot "+n)},tr=(a,o,n)=>(Or(a,o,"read from private field"),n?n.call(a):o.get(a)),au=(a,o,n)=>{if(o.has(a))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(a):o.set(a,n)},nu=(a,o,n,l)=>(Or(a,o,"write to private field"),o.set(a,n),n);const kr=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"]],ru=[...kr,["unknown"]].map(a=>a[0]),Va=new Map(kr);function ou(a){for(const[o,n]of Va)if(a===n)return o;return"unknown"}function iu(a){if(Rr(a))return{width:a.naturalWidth,height:a.naturalHeight};if(Mr(a))return{width:a.width.baseVal.value,height:a.height.baseVal.value};if(Vr(a))return{width:a.videoWidth,height:a.videoHeight};if(Pr(a))return{width:a.width,height:a.height};if(Fr(a))return{width:a.displayWidth,height:a.displayHeight};if($r(a))return{width:a.width,height:a.height};if(Lr(a))return{width:a.width,height:a.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function Rr(a){try{return a instanceof HTMLImageElement}catch{return!1}}function Mr(a){try{return a instanceof SVGImageElement}catch{return!1}}function Vr(a){try{return a instanceof HTMLVideoElement}catch{return!1}}function $r(a){try{return a instanceof HTMLCanvasElement}catch{return!1}}function Pr(a){try{return a instanceof ImageBitmap}catch{return!1}}function Lr(a){try{return a instanceof OffscreenCanvas}catch{return!1}}function Fr(a){try{return a instanceof VideoFrame}catch{return!1}}function Nr(a){try{return a instanceof Blob}catch{return!1}}function lu(a){try{return a instanceof ImageData}catch{return!1}}function su(a,o){try{const n=new OffscreenCanvas(a,o);if(n.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return n;throw void 0}catch{const l=document.createElement("canvas");return l.width=a,l.height=o,l}}async function xr(a){if(Rr(a)&&!await mu(a))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(Mr(a)&&!await fu(a))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(Fr(a)&&vu(a))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(Vr(a)&&(a.readyState===0||a.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(Pr(a)&&yu(a))throw new DOMException("The image source is detached.","InvalidStateError");const{width:o,height:n}=iu(a);if(o===0||n===0)return null;const l=su(o,n).getContext("2d");l.drawImage(a,0,0);try{return l.getImageData(0,0,o,n)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function uu(a){let o;try{if(globalThis.createImageBitmap)o=await createImageBitmap(a);else if(globalThis.Image){o=new Image;let n="";try{n=URL.createObjectURL(a),o.src=n,await o.decode()}finally{URL.revokeObjectURL(n)}}else return a}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await xr(o)}function du(a){const{width:o,height:n}=a;if(o===0||n===0)return null;const l=a.getContext("2d");try{return l.getImageData(0,0,o,n)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function cu(a){if(Nr(a))return await uu(a);if(lu(a)){if(pu(a))throw new DOMException("The image data has been detached.","InvalidStateError");return a}return $r(a)||Lr(a)?du(a):await xr(a)}async function mu(a){try{return await a.decode(),!0}catch{return!1}}async function fu(a){var o;try{return await((o=a.decode)==null?void 0:o.call(a)),!0}catch{return!1}}function vu(a){return a.format===null}function pu(a){return a.data.buffer.byteLength===0}function yu(a){return a.width===0&&a.height===0}function ar(a,o){return a instanceof DOMException?new DOMException(`${o}: ${a.message}`,a.name):a instanceof Error?new a.constructor(`${o}: ${a.message}`):new Error(`${o}: ${a}`)}const nr=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","DXFilmEdge","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","rMQRCode","UPC-A","UPC-E"];function gu(a){return a.join("|")}function hu(a){const o=rr(a);let n=0,l=nr.length-1;for(;n<=l;){const m=Math.floor((n+l)/2),y=nr[m],g=rr(y);if(g===o)return y;g<o?n=m+1:l=m-1}return"None"}function rr(a){return a.toLowerCase().replace(/_-\[\]/g,"")}function Uu(a,o){return a.Binarizer[o]}function Tu(a,o){return a.CharacterSet[o]}const bu=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function Su(a){return bu[a.value]}function _u(a,o){return a.EanAddOnSymbol[o]}function Du(a,o){return a.TextMode[o]}const sa={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function jr(a,o){return{...o,formats:gu(o.formats),binarizer:Uu(a,o.binarizer),eanAddOnSymbol:_u(a,o.eanAddOnSymbol),textMode:Du(a,o.textMode),characterSet:Tu(a,o.characterSet)}}function Br(a){return{...a,format:hu(a.format),eccLevel:a.eccLevel,contentType:Su(a.contentType)}}const Au={locateFile:(a,o)=>{const n=a.match(/_(.+?)\.wasm$/);return n?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.1.3/dist/${n[1]}/${a}`:o+a}};let or=new WeakMap;function bn(a,o){var n;const l=or.get(a);if(l!=null&&l.modulePromise&&o===void 0)return l.modulePromise;const m=(n=l==null?void 0:l.moduleOverrides)!=null?n:Au,y=a({...m});return or.set(a,{moduleOverrides:m,modulePromise:y}),y}async function Eu(a,o,n=sa){const l={...sa,...n},m=await bn(a),{size:y}=o,g=new Uint8Array(await o.arrayBuffer()),u=m._malloc(y);m.HEAPU8.set(g,u);const d=m.readBarcodesFromImage(u,y,jr(m,l));m._free(u);const f=[];for(let S=0;S<d.size();++S)f.push(Br(d.get(S)));return f}async function Iu(a,o,n=sa){const l={...sa,...n},m=await bn(a),{data:y,width:g,height:u,data:{byteLength:d}}=o,f=m._malloc(d);m.HEAPU8.set(y,f);const S=m.readBarcodesFromPixmap(f,g,u,jr(m,l));m._free(f);const T=[];for(let C=0;C<S.size();++C)T.push(Br(S.get(C)));return T}({...sa,formats:[...sa.formats]});var Sn=(()=>{var a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(o={}){var n=o,l,m;n.ready=new Promise((e,t)=>{l=e,m=t});var y=Object.assign({},n),g="./this.program",u=typeof window=="object",d=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var f="";function S(e){return n.locateFile?n.locateFile(e,f):f+e}var T;(u||d)&&(d?f=self.location.href:typeof document<"u"&&document.currentScript&&(f=document.currentScript.src),a&&(f=a),f.indexOf("blob:")!==0?f=f.substr(0,f.replace(/[?#].*/,"").lastIndexOf("/")+1):f="",d&&(T=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)})),n.print||console.log.bind(console);var C=n.printErr||console.error.bind(console);Object.assign(n,y),y=null,n.arguments&&n.arguments,n.thisProgram&&(g=n.thisProgram),n.quit&&n.quit;var M;n.wasmBinary&&(M=n.wasmBinary),typeof WebAssembly!="object"&&ke("no native wasm support detected");var $,G=!1,ee,x,W,O,B,D,oe,be;function P(){var e=$.buffer;n.HEAP8=ee=new Int8Array(e),n.HEAP16=W=new Int16Array(e),n.HEAPU8=x=new Uint8Array(e),n.HEAPU16=O=new Uint16Array(e),n.HEAP32=B=new Int32Array(e),n.HEAPU32=D=new Uint32Array(e),n.HEAPF32=oe=new Float32Array(e),n.HEAPF64=be=new Float64Array(e)}var E=[],H=[],de=[];function ye(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)$e(n.preRun.shift());$t(E)}function mt(){$t(H)}function gt(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)ot(n.postRun.shift());$t(de)}function $e(e){E.unshift(e)}function ht(e){H.unshift(e)}function ot(e){de.unshift(e)}var Ne=0,tt=null;function ft(e){var t;Ne++,(t=n.monitorRunDependencies)===null||t===void 0||t.call(n,Ne)}function je(e){var t;if(Ne--,(t=n.monitorRunDependencies)===null||t===void 0||t.call(n,Ne),Ne==0&&tt){var r=tt;tt=null,r()}}function ke(e){var t;(t=n.onAbort)===null||t===void 0||t.call(n,e),e="Aborted("+e+")",C(e),G=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw m(r),r}var Mt="data:application/octet-stream;base64,",Ut=e=>e.startsWith(Mt),Ge;Ge="zxing_reader.wasm",Ut(Ge)||(Ge=S(Ge));function Wt(e){if(e==Ge&&M)return new Uint8Array(M);if(T)return T(e);throw"both async and sync fetching of the wasm failed"}function Vt(e){return!M&&(u||d)&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>Wt(e)):Promise.resolve().then(()=>Wt(e))}function Tt(e,t,r){return Vt(e).then(i=>WebAssembly.instantiate(i,t)).then(i=>i).then(r,i=>{C(`failed to asynchronously prepare wasm: ${i}`),ke(i)})}function qt(e,t,r,i){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!Ut(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(v=>{var h=WebAssembly.instantiateStreaming(v,r);return h.then(i,function(b){return C(`wasm streaming compile failed: ${b}`),C("falling back to ArrayBuffer instantiation"),Tt(t,r,i)})}):Tt(t,r,i)}function zt(){var e={a:gi};function t(i,v){return Oe=i.exports,$=Oe.ia,P(),An=Oe.ma,ht(Oe.ja),je(),Oe}ft();function r(i){t(i.instance)}if(n.instantiateWasm)try{return n.instantiateWasm(e,t)}catch(i){C(`Module.instantiateWasm callback failed with error: ${i}`),m(i)}return qt(M,Ge,e,r).catch(m),{}}var $t=e=>{for(;e.length>0;)e.shift()(n)};n.noExitRuntime;var bt=[],St=0,Jt=e=>{var t=new Pe(e);return t.get_caught()||(t.set_caught(!0),St--),t.set_rethrown(!1),bt.push(t),Nn(t.excPtr),t.get_exception_ptr()},He=0,it=()=>{Se(0,0);var e=bt.pop();Fn(e.excPtr),He=0};function Pe(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(t){D[this.ptr+4>>2]=t},this.get_type=function(){return D[this.ptr+4>>2]},this.set_destructor=function(t){D[this.ptr+8>>2]=t},this.get_destructor=function(){return D[this.ptr+8>>2]},this.set_caught=function(t){t=t?1:0,ee[this.ptr+12>>0]=t},this.get_caught=function(){return ee[this.ptr+12>>0]!=0},this.set_rethrown=function(t){t=t?1:0,ee[this.ptr+13>>0]=t},this.get_rethrown=function(){return ee[this.ptr+13>>0]!=0},this.init=function(t,r){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(r)},this.set_adjusted_ptr=function(t){D[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return D[this.ptr+16>>2]},this.get_exception_ptr=function(){var t=jn(this.get_type());if(t)return D[this.excPtr>>2];var r=this.get_adjusted_ptr();return r!==0?r:this.excPtr}}var _t=e=>{throw He||(He=e),He},Kt=e=>{var t=He;if(!t)return ya(0),0;var r=new Pe(t);r.set_adjusted_ptr(t);var i=r.get_type();if(!i)return ya(0),t;for(var v in e){var h=e[v];if(h===0||h===i)break;var b=r.ptr+16;if(xn(h,i,b))return ya(h),t}return ya(i),t},Ba=()=>Kt([]),Qt=e=>Kt([e]),ba=(e,t)=>Kt([e,t]),Ht=()=>{var e=bt.pop();e||ke("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(bt.push(e),e.set_rethrown(!0),e.set_caught(!1),St++),He=t,He},Pt=(e,t,r)=>{var i=new Pe(e);throw i.init(t,r),He=e,St++,He},Ya=()=>St,qe={},lt=e=>{for(;e.length;){var t=e.pop(),r=e.pop();r(t)}};function he(e){return this.fromWireType(B[e>>2])}var Lt={},Dt={},Xt={},Sa,At=e=>{throw new Sa(e)},Et=(e,t,r)=>{e.forEach(function(_){Xt[_]=t});function i(_){var w=r(_);w.length!==e.length&&At("Mismatched type converter count");for(var V=0;V<e.length;++V)at(e[V],w[V])}var v=new Array(t.length),h=[],b=0;t.forEach((_,w)=>{Dt.hasOwnProperty(_)?v[w]=Dt[_]:(h.push(_),Lt.hasOwnProperty(_)||(Lt[_]=[]),Lt[_].push(()=>{v[w]=Dt[_],++b,b===h.length&&i(v)}))}),h.length===0&&i(v)},_a=e=>{var t=qe[e];delete qe[e];var r=t.rawConstructor,i=t.rawDestructor,v=t.fields,h=v.map(b=>b.getterReturnType).concat(v.map(b=>b.setterArgumentType));Et([e],h,b=>{var _={};return v.forEach((w,V)=>{var j=w.fieldName,te=b[V],ne=w.getter,se=w.getterContext,_e=b[V+v.length],Ie=w.setter,Ue=w.setterContext;_[j]={read:xe=>te.fromWireType(ne(se,xe)),write:(xe,k)=>{var z=[];Ie(Ue,xe,_e.toWireType(z,k)),lt(z)}}}),[{name:t.name,fromWireType:w=>{var V={};for(var j in _)V[j]=_[j].read(w);return i(w),V},toWireType:(w,V)=>{for(var j in _)if(!(j in V))throw new TypeError(`Missing field: "${j}"`);var te=r();for(j in _)_[j].write(te,V[j]);return w!==null&&w.push(i,te),te},argPackAdvance:nt,readValueFromPointer:he,destructorFunction:i}]})},Ha=(e,t,r,i,v)=>{},Ga=()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Da=e},Da,Re=e=>{for(var t="",r=e;x[r];)t+=Da[x[r++]];return t},Ft,ve=e=>{throw new Ft(e)};function ua(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i=t.name;if(e||ve(`type "${i}" must have a positive integer typeid pointer`),Dt.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;ve(`Cannot register type '${i}' twice`)}if(Dt[e]=t,delete Xt[e],Lt.hasOwnProperty(e)){var v=Lt[e];delete Lt[e],v.forEach(h=>h())}}function at(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");return ua(e,t,r)}var nt=8,Wa=(e,t,r,i)=>{t=Re(t),at(e,{name:t,fromWireType:function(v){return!!v},toWireType:function(v,h){return h?r:i},argPackAdvance:nt,readValueFromPointer:function(v){return this.fromWireType(x[v])},destructorFunction:null})},qa=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),da=e=>{function t(r){return r.$$.ptrType.registeredClass.name}ve(t(e)+" instance already deleted")},It=!1,Aa=e=>{},Ea=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},ca=e=>{e.count.value-=1;var t=e.count.value===0;t&&Ea(e)},ma=(e,t,r)=>{if(t===r)return e;if(r.baseClass===void 0)return null;var i=ma(e,t,r.baseClass);return i===null?null:r.downcast(i)},U={},p=()=>Object.keys(vt).length,I=()=>{var e=[];for(var t in vt)vt.hasOwnProperty(t)&&e.push(vt[t]);return e},L=[],q=()=>{for(;L.length;){var e=L.pop();e.$$.deleteScheduled=!1,e.delete()}},le,Xe=e=>{le=e,L.length&&le&&le(q)},za=()=>{n.getInheritedInstanceCount=p,n.getLiveInheritedInstances=I,n.flushPendingDeletes=q,n.setDelayFunction=Xe},vt={},fa=(e,t)=>{for(t===void 0&&ve("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},Ja=(e,t)=>(t=fa(e,t),vt[t]),X=(e,t)=>{(!t.ptrType||!t.ptr)&&At("makeClassHandle requires ptr and ptrType");var r=!!t.smartPtrType,i=!!t.smartPtr;return r!==i&&At("Both smartPtrType and smartPtr must be specified"),t.count={value:1},We(Object.create(e,{$$:{value:t,writable:!0}}))};function Zt(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=Ja(this.registeredClass,t);if(r!==void 0){if(r.$$.count.value===0)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var i=r.clone();return this.destructor(e),i}function v(){return this.isSmartPointer?X(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):X(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var h=this.registeredClass.getActualType(t),b=U[h];if(!b)return v.call(this);var _;this.isConst?_=b.constPointerType:_=b.pointerType;var w=ma(t,this.registeredClass,_.registeredClass);return w===null?v.call(this):this.isSmartPointer?X(_.registeredClass.instancePrototype,{ptrType:_,ptr:w,smartPtrType:this,smartPtr:e}):X(_.registeredClass.instancePrototype,{ptrType:_,ptr:w})}var We=e=>typeof FinalizationRegistry>"u"?(We=t=>t,e):(It=new FinalizationRegistry(t=>{ca(t.$$)}),We=t=>{var r=t.$$,i=!!r.smartPtr;if(i){var v={$$:r};It.register(t,v,t)}return t},Aa=t=>It.unregister(t),We(e)),ce=()=>{Object.assign(ze.prototype,{isAliasOf(e){if(!(this instanceof ze)||!(e instanceof ze))return!1;var t=this.$$.ptrType.registeredClass,r=this.$$.ptr;e.$$=e.$$;for(var i=e.$$.ptrType.registeredClass,v=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;i.baseClass;)v=i.upcast(v),i=i.baseClass;return t===i&&r===v},clone(){if(this.$$.ptr||da(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=We(Object.create(Object.getPrototypeOf(this),{$$:{value:qa(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||da(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ve("Object already scheduled for deletion"),Aa(this),ca(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||da(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ve("Object already scheduled for deletion"),L.push(this),L.length===1&&le&&le(q),this.$$.deleteScheduled=!0,this}})};function ze(){}var Q=(e,t)=>Object.defineProperty(t,"name",{value:e}),va=(e,t,r)=>{if(e[t].overloadTable===void 0){var i=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||ve(`Function '${r}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[i.argCount]=i}},Ct=(e,t,r)=>{n.hasOwnProperty(e)?((r===void 0||n[e].overloadTable!==void 0&&n[e].overloadTable[r]!==void 0)&&ve(`Cannot register public name '${e}' twice`),va(n,e,e),n.hasOwnProperty(r)&&ve(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),n[e].overloadTable[r]=t):(n[e]=t,r!==void 0&&(n[e].numArguments=r))},Nt=48,K=57,Z=e=>{if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Nt&&t<=K?`_${e}`:e};function Ze(e,t,r,i,v,h,b,_){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=i,this.baseClass=v,this.getActualType=h,this.upcast=b,this.downcast=_,this.pureVirtualFunctions=[]}var Ka=(e,t,r)=>{for(;t!==r;)t.upcast||ve(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function ro(e,t){if(t===null)return this.isReference&&ve(`null is not a valid ${this.name}`),0;t.$$||ve(`Cannot pass "${tn(t)}" as a ${this.name}`),t.$$.ptr||ve(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass,i=Ka(t.$$.ptr,r,this.registeredClass);return i}function oo(e,t){var r;if(t===null)return this.isReference&&ve(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,r),r):0;(!t||!t.$$)&&ve(`Cannot pass "${tn(t)}" as a ${this.name}`),t.$$.ptr||ve(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&ve(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var i=t.$$.ptrType.registeredClass;if(r=Ka(t.$$.ptr,i,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&ve("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:ve(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var v=t.clone();r=this.rawShare(r,wt.toHandle(()=>v.delete())),e!==null&&e.push(this.rawDestructor,r)}break;default:ve("Unsupporting sharing policy")}return r}function io(e,t){if(t===null)return this.isReference&&ve(`null is not a valid ${this.name}`),0;t.$$||ve(`Cannot pass "${tn(t)}" as a ${this.name}`),t.$$.ptr||ve(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&ve(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass,i=Ka(t.$$.ptr,r,this.registeredClass);return i}function _n(e){return this.fromWireType(D[e>>2])}var lo=()=>{Object.assign(Ia.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;(t=this.rawDestructor)===null||t===void 0||t.call(this,e)},argPackAdvance:nt,readValueFromPointer:_n,deleteObject(e){e!==null&&e.delete()},fromWireType:Zt})};function Ia(e,t,r,i,v,h,b,_,w,V,j){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=i,this.isSmartPointer=v,this.pointeeType=h,this.sharingPolicy=b,this.rawGetPointee=_,this.rawConstructor=w,this.rawShare=V,this.rawDestructor=j,!v&&t.baseClass===void 0?i?(this.toWireType=ro,this.destructorFunction=null):(this.toWireType=io,this.destructorFunction=null):this.toWireType=oo}var Dn=(e,t,r)=>{n.hasOwnProperty(e)||At("Replacing nonexistant public symbol"),n[e].overloadTable!==void 0&&r!==void 0?n[e].overloadTable[r]=t:(n[e]=t,n[e].argCount=r)},so=(e,t,r)=>{var i=n["dynCall_"+e];return r&&r.length?i.apply(null,[t].concat(r)):i.call(null,t)},Ca=[],An,De=e=>{var t=Ca[e];return t||(e>=Ca.length&&(Ca.length=e+1),Ca[e]=t=An.get(e)),t},uo=(e,t,r)=>{if(e.includes("j"))return so(e,t,r);var i=De(t).apply(null,r);return i},co=(e,t)=>{var r=[];return function(){return r.length=0,Object.assign(r,arguments),uo(e,t,r)}},st=(e,t)=>{e=Re(e);function r(){return e.includes("j")?co(e,t):De(t)}var i=r();return typeof i!="function"&&ve(`unknown function pointer with signature ${e}: ${t}`),i},mo=(e,t)=>{var r=Q(t,function(i){this.name=t,this.message=i;var v=new Error(i).stack;v!==void 0&&(this.stack=this.toString()+`
`+v.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},r},En,In=e=>{var t=Ln(e),r=Re(t);return Ot(t),r},wa=(e,t)=>{var r=[],i={};function v(h){if(!i[h]&&!Dt[h]){if(Xt[h]){Xt[h].forEach(v);return}r.push(h),i[h]=!0}}throw t.forEach(v),new En(`${e}: `+r.map(In).join([", "]))},fo=(e,t,r,i,v,h,b,_,w,V,j,te,ne)=>{j=Re(j),h=st(v,h),_&&(_=st(b,_)),V&&(V=st(w,V)),ne=st(te,ne);var se=Z(j);Ct(se,function(){wa(`Cannot construct ${j} due to unbound types`,[i])}),Et([e,t,r],i?[i]:[],function(_e){_e=_e[0];var Ie,Ue;i?(Ie=_e.registeredClass,Ue=Ie.instancePrototype):Ue=ze.prototype;var xe=Q(j,function(){if(Object.getPrototypeOf(this)!==k)throw new Ft("Use 'new' to construct "+j);if(z.constructor_body===void 0)throw new Ft(j+" has no accessible constructor");var Gn=z.constructor_body[arguments.length];if(Gn===void 0)throw new Ft(`Tried to invoke ctor of ${j} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(z.constructor_body).toString()}) parameters instead!`);return Gn.apply(this,arguments)}),k=Object.create(Ue,{constructor:{value:xe}});xe.prototype=k;var z=new Ze(j,xe,k,ne,Ie,h,_,V);if(z.baseClass){var Ce,Le;(Le=(Ce=z.baseClass).__derivedClasses)!==null&&Le!==void 0||(Ce.__derivedClasses=[]),z.baseClass.__derivedClasses.push(z)}var ea=new Ia(j,z,!0,!1,!1),Ra=new Ia(j+"*",z,!1,!1,!1),Hn=new Ia(j+" const*",z,!1,!0,!1);return U[e]={pointerType:Ra,constPointerType:Hn},Dn(se,xe),[ea,Ra,Hn]})},Qa=(e,t)=>{for(var r=[],i=0;i<e;i++)r.push(D[t+i*4>>2]);return r};function vo(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].destructorFunction===void 0)return!0;return!1}function Xa(e,t,r,i,v,h){var b=t.length;b<2&&ve("argTypes array size mismatch! Must at least get return value and 'this' types!");var _=t[1]!==null&&r!==null,w=vo(t),V=t[0].name!=="void",j=b-2,te=new Array(j),ne=[],se=[],_e=function(){arguments.length!==j&&ve(`function ${e} called with ${arguments.length} arguments, expected ${j}`),se.length=0;var Ie;ne.length=_?2:1,ne[0]=v,_&&(Ie=t[1].toWireType(se,this),ne[1]=Ie);for(var Ue=0;Ue<j;++Ue)te[Ue]=t[Ue+2].toWireType(se,arguments[Ue]),ne.push(te[Ue]);var xe=i.apply(null,ne);function k(z){if(w)lt(se);else for(var Ce=_?1:2;Ce<t.length;Ce++){var Le=Ce===1?Ie:te[Ce-2];t[Ce].destructorFunction!==null&&t[Ce].destructorFunction(Le)}if(V)return t[0].fromWireType(z)}return k(xe)};return Q(e,_e)}var po=(e,t,r,i,v,h)=>{var b=Qa(t,r);v=st(i,v),Et([],[e],function(_){_=_[0];var w=`constructor ${_.name}`;if(_.registeredClass.constructor_body===void 0&&(_.registeredClass.constructor_body=[]),_.registeredClass.constructor_body[t-1]!==void 0)throw new Ft(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${_.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return _.registeredClass.constructor_body[t-1]=()=>{wa(`Cannot construct ${_.name} due to unbound types`,b)},Et([],b,V=>(V.splice(1,0,null),_.registeredClass.constructor_body[t-1]=Xa(w,V,null,v,h),[])),[]})},Cn=e=>{e=e.trim();const t=e.indexOf("(");return t!==-1?e.substr(0,t):e},yo=(e,t,r,i,v,h,b,_,w)=>{var V=Qa(r,i);t=Re(t),t=Cn(t),h=st(v,h),Et([],[e],function(j){j=j[0];var te=`${j.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),_&&j.registeredClass.pureVirtualFunctions.push(t);function ne(){wa(`Cannot call ${te} due to unbound types`,V)}var se=j.registeredClass.instancePrototype,_e=se[t];return _e===void 0||_e.overloadTable===void 0&&_e.className!==j.name&&_e.argCount===r-2?(ne.argCount=r-2,ne.className=j.name,se[t]=ne):(va(se,t,te),se[t].overloadTable[r-2]=ne),Et([],V,function(Ie){var Ue=Xa(te,Ie,j,h,b);return se[t].overloadTable===void 0?(Ue.argCount=r-2,se[t]=Ue):se[t].overloadTable[r-2]=Ue,[]}),[]})};function go(){Object.assign(wn.prototype,{get(e){return this.allocated[e]},has(e){return this.allocated[e]!==void 0},allocate(e){var t=this.freelist.pop()||this.allocated.length;return this.allocated[t]=e,t},free(e){this.allocated[e]=void 0,this.freelist.push(e)}})}function wn(){this.allocated=[void 0],this.freelist=[]}var rt=new wn,Za=e=>{e>=rt.reserved&&--rt.get(e).refcount===0&&rt.free(e)},ho=()=>{for(var e=0,t=rt.reserved;t<rt.allocated.length;++t)rt.allocated[t]!==void 0&&++e;return e},Uo=()=>{rt.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),rt.reserved=rt.allocated.length,n.count_emval_handles=ho},wt={toValue:e=>(e||ve("Cannot use deleted val. handle = "+e),rt.get(e).value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return rt.allocate({refcount:1,value:e})}}},To=(e,t)=>{t=Re(t),at(e,{name:t,fromWireType:r=>{var i=wt.toValue(r);return Za(r),i},toWireType:(r,i)=>wt.toHandle(i),argPackAdvance:nt,readValueFromPointer:he,destructorFunction:null})},bo=(e,t,r)=>{switch(t){case 1:return r?function(i){return this.fromWireType(ee[i>>0])}:function(i){return this.fromWireType(x[i>>0])};case 2:return r?function(i){return this.fromWireType(W[i>>1])}:function(i){return this.fromWireType(O[i>>1])};case 4:return r?function(i){return this.fromWireType(B[i>>2])}:function(i){return this.fromWireType(D[i>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},So=(e,t,r,i)=>{t=Re(t);function v(){}v.values={},at(e,{name:t,constructor:v,fromWireType:function(h){return this.constructor.values[h]},toWireType:(h,b)=>b.value,argPackAdvance:nt,readValueFromPointer:bo(t,r,i),destructorFunction:null}),Ct(t,v)},en=(e,t)=>{var r=Dt[e];return r===void 0&&ve(t+" has unknown type "+In(e)),r},_o=(e,t,r)=>{var i=en(e,"enum");t=Re(t);var v=i.constructor,h=Object.create(i.constructor.prototype,{value:{value:r},constructor:{value:Q(`${i.name}_${t}`,function(){})}});v.values[r]=h,v[t]=h},tn=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},Do=(e,t)=>{switch(t){case 4:return function(r){return this.fromWireType(oe[r>>2])};case 8:return function(r){return this.fromWireType(be[r>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},Ao=(e,t,r)=>{t=Re(t),at(e,{name:t,fromWireType:i=>i,toWireType:(i,v)=>v,argPackAdvance:nt,readValueFromPointer:Do(t,r),destructorFunction:null})},Eo=(e,t,r,i,v,h,b)=>{var _=Qa(t,r);e=Re(e),e=Cn(e),v=st(i,v),Ct(e,function(){wa(`Cannot call ${e} due to unbound types`,_)},t-1),Et([],_,function(w){var V=[w[0],null].concat(w.slice(1));return Dn(e,Xa(e,V,null,v,h),t-1),[]})},Io=(e,t,r)=>{switch(t){case 1:return r?i=>ee[i>>0]:i=>x[i>>0];case 2:return r?i=>W[i>>1]:i=>O[i>>1];case 4:return r?i=>B[i>>2]:i=>D[i>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Co=(e,t,r,i,v)=>{t=Re(t);var h=j=>j;if(i===0){var b=32-8*r;h=j=>j<<b>>>b}var _=t.includes("unsigned"),w=(j,te)=>{},V;_?V=function(j,te){return w(te,this.name),te>>>0}:V=function(j,te){return w(te,this.name),te},at(e,{name:t,fromWireType:h,toWireType:V,argPackAdvance:nt,readValueFromPointer:Io(t,r,i!==0),destructorFunction:null})},wo=(e,t,r)=>{var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],v=i[t];function h(b){var _=D[b>>2],w=D[b+4>>2];return new v(ee.buffer,w,_)}r=Re(r),at(e,{name:r,fromWireType:h,argPackAdvance:nt,readValueFromPointer:h},{ignoreDuplicateRegistrations:!0})},On=(e,t,r,i)=>{if(!(i>0))return 0;for(var v=r,h=r+i-1,b=0;b<e.length;++b){var _=e.charCodeAt(b);if(_>=55296&&_<=57343){var w=e.charCodeAt(++b);_=65536+((_&1023)<<10)|w&1023}if(_<=127){if(r>=h)break;t[r++]=_}else if(_<=2047){if(r+1>=h)break;t[r++]=192|_>>6,t[r++]=128|_&63}else if(_<=65535){if(r+2>=h)break;t[r++]=224|_>>12,t[r++]=128|_>>6&63,t[r++]=128|_&63}else{if(r+3>=h)break;t[r++]=240|_>>18,t[r++]=128|_>>12&63,t[r++]=128|_>>6&63,t[r++]=128|_&63}}return t[r]=0,r-v},Oo=(e,t,r)=>On(e,x,t,r),kn=e=>{for(var t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i<=127?t++:i<=2047?t+=2:i>=55296&&i<=57343?(t+=4,++r):t+=3}return t},Rn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,ko=(e,t,r)=>{for(var i=t+r,v=t;e[v]&&!(v>=i);)++v;if(v-t>16&&e.buffer&&Rn)return Rn.decode(e.subarray(t,v));for(var h="";t<v;){var b=e[t++];if(!(b&128)){h+=String.fromCharCode(b);continue}var _=e[t++]&63;if((b&224)==192){h+=String.fromCharCode((b&31)<<6|_);continue}var w=e[t++]&63;if((b&240)==224?b=(b&15)<<12|_<<6|w:b=(b&7)<<18|_<<12|w<<6|e[t++]&63,b<65536)h+=String.fromCharCode(b);else{var V=b-65536;h+=String.fromCharCode(55296|V>>10,56320|V&1023)}}return h},an=(e,t)=>e?ko(x,e,t):"",Ro=(e,t)=>{t=Re(t);var r=t==="std::string";at(e,{name:t,fromWireType(i){var v=D[i>>2],h=i+4,b;if(r)for(var _=h,w=0;w<=v;++w){var V=h+w;if(w==v||x[V]==0){var j=V-_,te=an(_,j);b===void 0?b=te:(b+="\0",b+=te),_=V+1}}else{for(var ne=new Array(v),w=0;w<v;++w)ne[w]=String.fromCharCode(x[h+w]);b=ne.join("")}return Ot(i),b},toWireType(i,v){v instanceof ArrayBuffer&&(v=new Uint8Array(v));var h,b=typeof v=="string";b||v instanceof Uint8Array||v instanceof Uint8ClampedArray||v instanceof Int8Array||ve("Cannot pass non-string to std::string"),r&&b?h=kn(v):h=v.length;var _=on(4+h+1),w=_+4;if(D[_>>2]=h,r&&b)Oo(v,w,h+1);else if(b)for(var V=0;V<h;++V){var j=v.charCodeAt(V);j>255&&(Ot(w),ve("String has UTF-16 code units that do not fit in 8 bits")),x[w+V]=j}else for(var V=0;V<h;++V)x[w+V]=v[V];return i!==null&&i.push(Ot,_),_},argPackAdvance:nt,readValueFromPointer:_n,destructorFunction(i){Ot(i)}})},Mn=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Mo=(e,t)=>{for(var r=e,i=r>>1,v=i+t/2;!(i>=v)&&O[i];)++i;if(r=i<<1,r-e>32&&Mn)return Mn.decode(x.subarray(e,r));for(var h="",b=0;!(b>=t/2);++b){var _=W[e+b*2>>1];if(_==0)break;h+=String.fromCharCode(_)}return h},Vo=(e,t,r)=>{var i;if((i=r)!==null&&i!==void 0||(r=2147483647),r<2)return 0;r-=2;for(var v=t,h=r<e.length*2?r/2:e.length,b=0;b<h;++b){var _=e.charCodeAt(b);W[t>>1]=_,t+=2}return W[t>>1]=0,t-v},$o=e=>e.length*2,Po=(e,t)=>{for(var r=0,i="";!(r>=t/4);){var v=B[e+r*4>>2];if(v==0)break;if(++r,v>=65536){var h=v-65536;i+=String.fromCharCode(55296|h>>10,56320|h&1023)}else i+=String.fromCharCode(v)}return i},Lo=(e,t,r)=>{var i;if((i=r)!==null&&i!==void 0||(r=2147483647),r<4)return 0;for(var v=t,h=v+r-4,b=0;b<e.length;++b){var _=e.charCodeAt(b);if(_>=55296&&_<=57343){var w=e.charCodeAt(++b);_=65536+((_&1023)<<10)|w&1023}if(B[t>>2]=_,t+=4,t+4>h)break}return B[t>>2]=0,t-v},Fo=e=>{for(var t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i>=55296&&i<=57343&&++r,t+=4}return t},No=(e,t,r)=>{r=Re(r);var i,v,h,b,_;t===2?(i=Mo,v=Vo,b=$o,h=()=>O,_=1):t===4&&(i=Po,v=Lo,b=Fo,h=()=>D,_=2),at(e,{name:r,fromWireType:w=>{for(var V=D[w>>2],j=h(),te,ne=w+4,se=0;se<=V;++se){var _e=w+4+se*t;if(se==V||j[_e>>_]==0){var Ie=_e-ne,Ue=i(ne,Ie);te===void 0?te=Ue:(te+="\0",te+=Ue),ne=_e+t}}return Ot(w),te},toWireType:(w,V)=>{typeof V!="string"&&ve(`Cannot pass non-string to C++ string type ${r}`);var j=b(V),te=on(4+j+t);return D[te>>2]=j>>_,v(V,te+4,j+t),w!==null&&w.push(Ot,te),te},argPackAdvance:nt,readValueFromPointer:he,destructorFunction(w){Ot(w)}})},xo=(e,t,r,i,v,h)=>{qe[e]={name:Re(t),rawConstructor:st(r,i),rawDestructor:st(v,h),fields:[]}},jo=(e,t,r,i,v,h,b,_,w,V)=>{qe[e].fields.push({fieldName:Re(t),getterReturnType:r,getter:st(i,v),getterContext:h,setterArgumentType:b,setter:st(_,w),setterContext:V})},Bo=(e,t)=>{t=Re(t),at(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:(r,i)=>{}})},nn=[],Yo=(e,t,r,i)=>(e=nn[e],t=wt.toValue(t),e(null,t,r,i)),Ho={},Go=e=>{var t=Ho[e];return t===void 0?Re(e):t},Vn=()=>{if(typeof globalThis=="object")return globalThis;function e(t){t.$$$embind_global$$$=t;var r=typeof $$$embind_global$$$=="object"&&t.$$$embind_global$$$==t;return r||delete t.$$$embind_global$$$,r}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&e(global)?$$$embind_global$$$=global:typeof self=="object"&&e(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},Wo=e=>e===0?wt.toHandle(Vn()):(e=Go(e),wt.toHandle(Vn()[e])),qo=e=>{var t=nn.length;return nn.push(e),t},zo=(e,t)=>{for(var r=new Array(e),i=0;i<e;++i)r[i]=en(D[t+i*4>>2],"parameter "+i);return r},Jo=Reflect.construct,Ko=(e,t,r)=>{var i=[],v=e.toWireType(i,r);return i.length&&(D[t>>2]=wt.toHandle(i)),v},Qo=(e,t,r)=>{var i=zo(e,t),v=i.shift();e--;var h=new Array(e),b=(w,V,j,te)=>{for(var ne=0,se=0;se<e;++se)h[se]=i[se].readValueFromPointer(te+ne),ne+=i[se].argPackAdvance;for(var _e=r===1?Jo(V,h):V.apply(w,h),se=0;se<e;++se){var Ie,Ue;(Ie=(Ue=i[se]).deleteObject)===null||Ie===void 0||Ie.call(Ue,h[se])}return Ko(v,j,_e)},_=`methodCaller<(${i.map(w=>w.name).join(", ")}) => ${v.name}>`;return qo(Q(_,b))},Xo=e=>{e>4&&(rt.get(e).refcount+=1)},Zo=e=>{var t=wt.toValue(e);lt(t),Za(e)},ei=(e,t)=>{e=en(e,"_emval_take_value");var r=e.readValueFromPointer(t);return wt.toHandle(r)},ti=()=>{ke("")},ai=(e,t,r)=>x.copyWithin(e,t,t+r),ni=()=>2147483648,ri=e=>{var t=$.buffer,r=(e-t.byteLength+65535)/65536;try{return $.grow(r),P(),1}catch{}},oi=e=>{var t=x.length;e>>>=0;var r=ni();if(e>r)return!1;for(var i=(w,V)=>w+(V-w%V)%V,v=1;v<=4;v*=2){var h=t*(1+.2/v);h=Math.min(h,e+100663296);var b=Math.min(r,i(Math.max(e,h),65536)),_=ri(b);if(_)return!0}return!1},rn={},ii=()=>g||"./this.program",pa=()=>{if(!pa.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:ii()};for(var r in rn)rn[r]===void 0?delete t[r]:t[r]=rn[r];var i=[];for(var r in t)i.push(`${r}=${t[r]}`);pa.strings=i}return pa.strings},li=(e,t)=>{for(var r=0;r<e.length;++r)ee[t++>>0]=e.charCodeAt(r);ee[t>>0]=0},si=(e,t)=>{var r=0;return pa().forEach((i,v)=>{var h=t+r;D[e+v*4>>2]=h,li(i,h),r+=i.length+1}),0},ui=(e,t)=>{var r=pa();D[e>>2]=r.length;var i=0;return r.forEach(v=>i+=v.length+1),D[t>>2]=i,0},di=e=>e,Oa=e=>e%4===0&&(e%100!==0||e%400===0),ci=(e,t)=>{for(var r=0,i=0;i<=t;r+=e[i++]);return r},$n=[31,29,31,30,31,30,31,31,30,31,30,31],Pn=[31,28,31,30,31,30,31,31,30,31,30,31],mi=(e,t)=>{for(var r=new Date(e.getTime());t>0;){var i=Oa(r.getFullYear()),v=r.getMonth(),h=(i?$n:Pn)[v];if(t>h-r.getDate())t-=h-r.getDate()+1,r.setDate(1),v<11?r.setMonth(v+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1));else return r.setDate(r.getDate()+t),r}return r};function fi(e,t,r){var i=kn(e)+1,v=new Array(i);return On(e,v,0,v.length),v}var vi=(e,t)=>{ee.set(e,t)},pi=(e,t,r,i)=>{var v=D[i+40>>2],h={tm_sec:B[i>>2],tm_min:B[i+4>>2],tm_hour:B[i+8>>2],tm_mday:B[i+12>>2],tm_mon:B[i+16>>2],tm_year:B[i+20>>2],tm_wday:B[i+24>>2],tm_yday:B[i+28>>2],tm_isdst:B[i+32>>2],tm_gmtoff:B[i+36>>2],tm_zone:v?an(v):""},b=an(r),_={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var w in _)b=b.replace(new RegExp(w,"g"),_[w]);var V=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],j=["January","February","March","April","May","June","July","August","September","October","November","December"];function te(k,z,Ce){for(var Le=typeof k=="number"?k.toString():k||"";Le.length<z;)Le=Ce[0]+Le;return Le}function ne(k,z){return te(k,z,"0")}function se(k,z){function Ce(ea){return ea<0?-1:ea>0?1:0}var Le;return(Le=Ce(k.getFullYear()-z.getFullYear()))===0&&(Le=Ce(k.getMonth()-z.getMonth()))===0&&(Le=Ce(k.getDate()-z.getDate())),Le}function _e(k){switch(k.getDay()){case 0:return new Date(k.getFullYear()-1,11,29);case 1:return k;case 2:return new Date(k.getFullYear(),0,3);case 3:return new Date(k.getFullYear(),0,2);case 4:return new Date(k.getFullYear(),0,1);case 5:return new Date(k.getFullYear()-1,11,31);case 6:return new Date(k.getFullYear()-1,11,30)}}function Ie(k){var z=mi(new Date(k.tm_year+1900,0,1),k.tm_yday),Ce=new Date(z.getFullYear(),0,4),Le=new Date(z.getFullYear()+1,0,4),ea=_e(Ce),Ra=_e(Le);return se(ea,z)<=0?se(Ra,z)<=0?z.getFullYear()+1:z.getFullYear():z.getFullYear()-1}var Ue={"%a":k=>V[k.tm_wday].substring(0,3),"%A":k=>V[k.tm_wday],"%b":k=>j[k.tm_mon].substring(0,3),"%B":k=>j[k.tm_mon],"%C":k=>{var z=k.tm_year+1900;return ne(z/100|0,2)},"%d":k=>ne(k.tm_mday,2),"%e":k=>te(k.tm_mday,2," "),"%g":k=>Ie(k).toString().substring(2),"%G":k=>Ie(k),"%H":k=>ne(k.tm_hour,2),"%I":k=>{var z=k.tm_hour;return z==0?z=12:z>12&&(z-=12),ne(z,2)},"%j":k=>ne(k.tm_mday+ci(Oa(k.tm_year+1900)?$n:Pn,k.tm_mon-1),3),"%m":k=>ne(k.tm_mon+1,2),"%M":k=>ne(k.tm_min,2),"%n":()=>`
`,"%p":k=>k.tm_hour>=0&&k.tm_hour<12?"AM":"PM","%S":k=>ne(k.tm_sec,2),"%t":()=>"	","%u":k=>k.tm_wday||7,"%U":k=>{var z=k.tm_yday+7-k.tm_wday;return ne(Math.floor(z/7),2)},"%V":k=>{var z=Math.floor((k.tm_yday+7-(k.tm_wday+6)%7)/7);if((k.tm_wday+371-k.tm_yday-2)%7<=2&&z++,z){if(z==53){var Ce=(k.tm_wday+371-k.tm_yday)%7;Ce!=4&&(Ce!=3||!Oa(k.tm_year))&&(z=1)}}else{z=52;var Le=(k.tm_wday+7-k.tm_yday-1)%7;(Le==4||Le==5&&Oa(k.tm_year%400-1))&&z++}return ne(z,2)},"%w":k=>k.tm_wday,"%W":k=>{var z=k.tm_yday+7-(k.tm_wday+6)%7;return ne(Math.floor(z/7),2)},"%y":k=>(k.tm_year+1900).toString().substring(2),"%Y":k=>k.tm_year+1900,"%z":k=>{var z=k.tm_gmtoff,Ce=z>=0;return z=Math.abs(z)/60,z=z/60*100+z%60,(Ce?"+":"-")+("0000"+z).slice(-4)},"%Z":k=>k.tm_zone,"%%":()=>"%"};b=b.replace(/%%/g,"\0\0");for(var w in Ue)b.includes(w)&&(b=b.replace(new RegExp(w,"g"),Ue[w](h)));b=b.replace(/\0\0/g,"%");var xe=fi(b);return xe.length>t?0:(vi(xe,e),xe.length-1)},yi=(e,t,r,i,v)=>pi(e,t,r,i);Sa=n.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Ga(),Ft=n.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},ce(),za(),lo(),En=n.UnboundTypeError=mo(Error,"UnboundTypeError"),go(),Uo();var gi={s:Jt,u:it,b:Ba,g:Qt,q:ba,J:Ht,f:Pt,V:Ya,d:_t,da:_a,Q:Ha,_:Wa,ca:fo,ba:po,w:yo,Y:To,x:So,h:_o,L:Ao,M:Eo,t:Co,o:wo,K:Ro,C:No,A:xo,ea:jo,$:Bo,R:Yo,ha:Za,fa:Wo,Z:Qo,N:Xo,O:Zo,aa:ei,B:ti,X:ai,W:oi,T:si,U:ui,E:Mi,D:Si,F:Ri,n:Vi,a:hi,e:Di,m:bi,k:Ei,H:Oi,v:Ci,G:ki,z:Pi,P:Fi,l:Ai,j:_i,c:Ti,p:Ui,I:wi,r:$i,i:Ii,y:Li,ga:di,S:yi},Oe=zt(),Ot=n._free=e=>(Ot=n._free=Oe.ka)(e),on=n._malloc=e=>(on=n._malloc=Oe.la)(e),Ln=e=>(Ln=Oe.na)(e),Se=(e,t)=>(Se=Oe.oa)(e,t),ya=e=>(ya=Oe.pa)(e),Ae=()=>(Ae=Oe.qa)(),Ee=e=>(Ee=Oe.ra)(e),Fn=e=>(Fn=Oe.sa)(e),Nn=e=>(Nn=Oe.ta)(e),xn=(e,t,r)=>(xn=Oe.ua)(e,t,r),jn=e=>(jn=Oe.va)(e);n.dynCall_viijii=(e,t,r,i,v,h,b)=>(n.dynCall_viijii=Oe.wa)(e,t,r,i,v,h,b);var Bn=n.dynCall_jiiii=(e,t,r,i,v)=>(Bn=n.dynCall_jiiii=Oe.xa)(e,t,r,i,v);n.dynCall_iiiiij=(e,t,r,i,v,h,b)=>(n.dynCall_iiiiij=Oe.ya)(e,t,r,i,v,h,b),n.dynCall_iiiiijj=(e,t,r,i,v,h,b,_,w)=>(n.dynCall_iiiiijj=Oe.za)(e,t,r,i,v,h,b,_,w),n.dynCall_iiiiiijj=(e,t,r,i,v,h,b,_,w,V)=>(n.dynCall_iiiiiijj=Oe.Aa)(e,t,r,i,v,h,b,_,w,V);function hi(e,t){var r=Ae();try{return De(e)(t)}catch(i){if(Ee(r),i!==i+0)throw i;Se(1,0)}}function Ui(e,t,r,i){var v=Ae();try{De(e)(t,r,i)}catch(h){if(Ee(v),h!==h+0)throw h;Se(1,0)}}function Ti(e,t,r){var i=Ae();try{De(e)(t,r)}catch(v){if(Ee(i),v!==v+0)throw v;Se(1,0)}}function bi(e,t,r,i){var v=Ae();try{return De(e)(t,r,i)}catch(h){if(Ee(v),h!==h+0)throw h;Se(1,0)}}function Si(e,t,r,i,v){var h=Ae();try{return De(e)(t,r,i,v)}catch(b){if(Ee(h),b!==b+0)throw b;Se(1,0)}}function _i(e,t){var r=Ae();try{De(e)(t)}catch(i){if(Ee(r),i!==i+0)throw i;Se(1,0)}}function Di(e,t,r){var i=Ae();try{return De(e)(t,r)}catch(v){if(Ee(i),v!==v+0)throw v;Se(1,0)}}function Ai(e){var t=Ae();try{De(e)()}catch(r){if(Ee(t),r!==r+0)throw r;Se(1,0)}}function Ei(e,t,r,i,v){var h=Ae();try{return De(e)(t,r,i,v)}catch(b){if(Ee(h),b!==b+0)throw b;Se(1,0)}}function Ii(e,t,r,i,v,h,b,_,w,V,j){var te=Ae();try{De(e)(t,r,i,v,h,b,_,w,V,j)}catch(ne){if(Ee(te),ne!==ne+0)throw ne;Se(1,0)}}function Ci(e,t,r,i,v,h,b){var _=Ae();try{return De(e)(t,r,i,v,h,b)}catch(w){if(Ee(_),w!==w+0)throw w;Se(1,0)}}function wi(e,t,r,i,v){var h=Ae();try{De(e)(t,r,i,v)}catch(b){if(Ee(h),b!==b+0)throw b;Se(1,0)}}function Oi(e,t,r,i,v,h){var b=Ae();try{return De(e)(t,r,i,v,h)}catch(_){if(Ee(b),_!==_+0)throw _;Se(1,0)}}function ki(e,t,r,i,v,h,b,_){var w=Ae();try{return De(e)(t,r,i,v,h,b,_)}catch(V){if(Ee(w),V!==V+0)throw V;Se(1,0)}}function Ri(e,t,r,i){var v=Ae();try{return De(e)(t,r,i)}catch(h){if(Ee(v),h!==h+0)throw h;Se(1,0)}}function Mi(e,t,r,i){var v=Ae();try{return De(e)(t,r,i)}catch(h){if(Ee(v),h!==h+0)throw h;Se(1,0)}}function Vi(e){var t=Ae();try{return De(e)()}catch(r){if(Ee(t),r!==r+0)throw r;Se(1,0)}}function $i(e,t,r,i,v,h,b,_){var w=Ae();try{De(e)(t,r,i,v,h,b,_)}catch(V){if(Ee(w),V!==V+0)throw V;Se(1,0)}}function Pi(e,t,r,i,v,h,b,_,w,V,j,te){var ne=Ae();try{return De(e)(t,r,i,v,h,b,_,w,V,j,te)}catch(se){if(Ee(ne),se!==se+0)throw se;Se(1,0)}}function Li(e,t,r,i,v,h,b,_,w,V,j,te,ne,se,_e,Ie){var Ue=Ae();try{De(e)(t,r,i,v,h,b,_,w,V,j,te,ne,se,_e,Ie)}catch(xe){if(Ee(Ue),xe!==xe+0)throw xe;Se(1,0)}}function Fi(e,t,r,i,v){var h=Ae();try{return Bn(e,t,r,i,v)}catch(b){if(Ee(h),b!==b+0)throw b;Se(1,0)}}var ka;tt=function e(){ka||Yn(),ka||(tt=e)};function Yn(){if(Ne>0||(ye(),Ne>0))return;function e(){ka||(ka=!0,n.calledRun=!0,!G&&(mt(),l(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),gt()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),e()},1)):e()}if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Yn(),o.ready}})();function Cu(a){return bn(Sn,a)}async function wu(a,o){return Eu(Sn,a,o)}async function Ou(a,o){return Iu(Sn,a,o)}var ha;class sn extends EventTarget{constructor(o={}){var n;super(),au(this,ha,void 0);try{const l=(n=o==null?void 0:o.formats)==null?void 0:n.filter(m=>m!=="unknown");if((l==null?void 0:l.length)===0)throw new TypeError("Hint option provided, but is empty.");l==null||l.forEach(m=>{if(!Va.has(m))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${m}' is not a valid enum value of type BarcodeFormat.`)}),nu(this,ha,l??[]),Cu().then(m=>{this.dispatchEvent(new CustomEvent("load",{detail:m}))}).catch(m=>{this.dispatchEvent(new CustomEvent("error",{detail:m}))})}catch(l){throw ar(l,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return ru.filter(o=>o!=="unknown")}async detect(o){try{const n=await cu(o);if(n===null)return[];let l;try{Nr(n)?l=await wu(n,{tryHarder:!0,formats:tr(this,ha).map(m=>Va.get(m))}):l=await Ou(n,{tryHarder:!0,formats:tr(this,ha).map(m=>Va.get(m))})}catch(m){throw console.error(m),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return l.map(m=>{const{topLeft:{x:y,y:g},topRight:{x:u,y:d},bottomLeft:{x:f,y:S},bottomRight:{x:T,y:C}}=m.position,M=Math.min(y,u,f,T),$=Math.min(g,d,S,C),G=Math.max(y,u,f,T),ee=Math.max(g,d,S,C);return{boundingBox:new DOMRectReadOnly(M,$,G-M,ee-$),rawValue:m.text,format:ou(m.format),cornerPoints:[{x:y,y:g},{x:u,y:d},{x:T,y:C},{x:f,y:S}]}})}catch(n){throw ar(n,"Failed to execute 'detect' on 'BarcodeDetector'")}}}ha=new WeakMap;const Yr=(a,o,n="error")=>{let l,m;const y=new Promise((g,u)=>{l=g,m=u,a.addEventListener(o,l),a.addEventListener(n,m)});return y.finally(()=>{a.removeEventListener(o,l),a.removeEventListener(n,m)}),y},ir=a=>new Promise(o=>setTimeout(o,a));class Hr extends Error{constructor(){super("this browser has no Stream API support"),this.name="StreamApiNotSupportedError"}}class ku extends Error{constructor(){super("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."),this.name="InsecureContextError"}}class Ru extends Error{constructor(){super("Loading camera stream timed out after 6 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"),this.name="StreamLoadTimeoutError"}}const Mu=a=>{let o=!1,n;return(...l)=>(o||(n=a(l),o=!0),n)};function pt(a,o){if(a===!1)throw new Error(o??"assertion failure")}function lr(a){throw new Error("this code should be unreachable")}function Vu(){return navigator.platform.toUpperCase().includes("MAC")}let Gr;async function $u(a){if(window.BarcodeDetector===void 0)return console.debug("[vue-qrcode-reader] Native BarcodeDetector not supported. Will use polyfill."),new sn({formats:a});const o=await window.BarcodeDetector.getSupportedFormats(),n=a.filter(l=>!o.includes(l));return n.length>0?(console.debug(`[vue-qrcode-reader] Native BarcodeDetector does not support formats ${JSON.stringify(n)}. Will use polyfill.`),new sn({formats:a})):Vu()&&a.includes("pdf417")?(console.debug("[vue-qrcode-reader] Native BarcodeDetector is buggy for PDF417 codes on MacOS. Will use polyfill."),new sn({formats:a})):(console.debug("[vue-qrcode-reader] Will use native BarcodeDetector."),new window.BarcodeDetector({formats:a}))}async function Wr(a){Gr=await $u(a)}const Pu=async(a,{detectHandler:o,locateHandler:n,minDelay:l,formats:m})=>{console.debug("[vue-qrcode-reader] start scanning"),await Wr(m);const y=g=>async u=>{if(a.readyState===0)console.debug("[vue-qrcode-reader] stop scanning: video element readyState is 0");else{const{lastScanned:d,contentBefore:f,lastScanHadContent:S}=g;if(u-d<l)window.requestAnimationFrame(y(g));else{const T=await Gr.detect(a),C=T.some(G=>!f.includes(G.rawValue));C&&o(T);const M=T.length>0;M&&n(T),!M&&S&&n(T);const $={lastScanned:u,lastScanHadContent:M,contentBefore:C?T.map(G=>G.rawValue):f};window.requestAnimationFrame(y($))}}};y({lastScanned:performance.now(),contentBefore:[],lastScanHadContent:!1})(performance.now())};var qr={},Qe={};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.compactObject=Kr;Qe.deprecated=Gu;var Lu=Qe.detectBrowser=Wu;Qe.disableLog=Bu;Qe.disableWarnings=Yu;Qe.extractVersion=$a;Qe.filterStats=qu;Qe.log=Hu;Qe.walkStats=Na;Qe.wrapPeerConnectionEvent=ju;function Fu(a,o,n){return o=Nu(o),o in a?Object.defineProperty(a,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[o]=n,a}function Nu(a){var o=xu(a,"string");return jt(o)==="symbol"?o:String(o)}function xu(a,o){if(jt(a)!=="object"||a===null)return a;var n=a[Symbol.toPrimitive];if(n!==void 0){var l=n.call(a,o);if(jt(l)!=="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(a)}function jt(a){"@babel/helpers - typeof";return jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},jt(a)}var zr=!0,Jr=!0;function $a(a,o,n){var l=a.match(o);return l&&l.length>=n&&parseInt(l[n],10)}function ju(a,o,n){if(a.RTCPeerConnection){var l=a.RTCPeerConnection.prototype,m=l.addEventListener;l.addEventListener=function(g,u){if(g!==o)return m.apply(this,arguments);var d=function(f){var S=n(f);S&&(u.handleEvent?u.handleEvent(S):u(S))};return this._eventMap=this._eventMap||{},this._eventMap[o]||(this._eventMap[o]=new Map),this._eventMap[o].set(u,d),m.apply(this,[g,d])};var y=l.removeEventListener;l.removeEventListener=function(g,u){if(g!==o||!this._eventMap||!this._eventMap[o])return y.apply(this,arguments);if(!this._eventMap[o].has(u))return y.apply(this,arguments);var d=this._eventMap[o].get(u);return this._eventMap[o].delete(u),this._eventMap[o].size===0&&delete this._eventMap[o],Object.keys(this._eventMap).length===0&&delete this._eventMap,y.apply(this,[g,d])},Object.defineProperty(l,"on"+o,{get:function(){return this["_on"+o]},set:function(g){this["_on"+o]&&(this.removeEventListener(o,this["_on"+o]),delete this["_on"+o]),g&&this.addEventListener(o,this["_on"+o]=g)},enumerable:!0,configurable:!0})}}function Bu(a){return typeof a!="boolean"?new Error("Argument type: "+jt(a)+". Please use a boolean."):(zr=a,a?"adapter.js logging disabled":"adapter.js logging enabled")}function Yu(a){return typeof a!="boolean"?new Error("Argument type: "+jt(a)+". Please use a boolean."):(Jr=!a,"adapter.js deprecation warnings "+(a?"disabled":"enabled"))}function Hu(){if((typeof window>"u"?"undefined":jt(window))==="object"){if(zr)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Gu(a,o){Jr&&console.warn(a+" is deprecated, please use "+o+" instead.")}function Wu(a){var o={browser:null,version:null};if(typeof a>"u"||!a.navigator||!a.navigator.userAgent)return o.browser="Not a browser.",o;var n=a.navigator;if(n.mozGetUserMedia)o.browser="firefox",o.version=$a(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||a.isSecureContext===!1&&a.webkitRTCPeerConnection)o.browser="chrome",o.version=$a(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(a.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))o.browser="safari",o.version=$a(n.userAgent,/AppleWebKit\/(\d+)\./,1),o.supportsUnifiedPlan=a.RTCRtpTransceiver&&"currentDirection"in a.RTCRtpTransceiver.prototype;else return o.browser="Not a supported browser.",o;return o}function sr(a){return Object.prototype.toString.call(a)==="[object Object]"}function Kr(a){return sr(a)?Object.keys(a).reduce(function(o,n){var l=sr(a[n]),m=l?Kr(a[n]):a[n],y=l&&!Object.keys(m).length;return m===void 0||y?o:Object.assign(o,Fu({},n,m))},{}):a}function Na(a,o,n){!o||n.has(o.id)||(n.set(o.id,o),Object.keys(o).forEach(function(l){l.endsWith("Id")?Na(a,a.get(o[l]),n):l.endsWith("Ids")&&o[l].forEach(function(m){Na(a,a.get(m),n)})}))}function qu(a,o,n){var l=n?"outbound-rtp":"inbound-rtp",m=new Map;if(o===null)return m;var y=[];return a.forEach(function(g){g.type==="track"&&g.trackIdentifier===o.id&&y.push(g)}),y.forEach(function(g){a.forEach(function(u){u.type===l&&u.trackId===g.id&&Na(a,u,m)})}),m}Object.defineProperty(qr,"__esModule",{value:!0});var zu=qr.shimGetUserMedia=Qu,Ju=Ku(Qe);function Qr(a){if(typeof WeakMap!="function")return null;var o=new WeakMap,n=new WeakMap;return(Qr=function(l){return l?n:o})(a)}function Ku(a,o){if(a&&a.__esModule)return a;if(a===null||xt(a)!=="object"&&typeof a!="function")return{default:a};var n=Qr(o);if(n&&n.has(a))return n.get(a);var l={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in a)if(y!=="default"&&Object.prototype.hasOwnProperty.call(a,y)){var g=m?Object.getOwnPropertyDescriptor(a,y):null;g&&(g.get||g.set)?Object.defineProperty(l,y,g):l[y]=a[y]}return l.default=a,n&&n.set(a,l),l}function xt(a){"@babel/helpers - typeof";return xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},xt(a)}var ur=Ju.log;function Qu(a,o){var n=a&&a.navigator;if(n.mediaDevices){var l=function(d){if(xt(d)!=="object"||d.mandatory||d.optional)return d;var f={};return Object.keys(d).forEach(function(S){if(!(S==="require"||S==="advanced"||S==="mediaSource")){var T=xt(d[S])==="object"?d[S]:{ideal:d[S]};T.exact!==void 0&&typeof T.exact=="number"&&(T.min=T.max=T.exact);var C=function($,G){return $?$+G.charAt(0).toUpperCase()+G.slice(1):G==="deviceId"?"sourceId":G};if(T.ideal!==void 0){f.optional=f.optional||[];var M={};typeof T.ideal=="number"?(M[C("min",S)]=T.ideal,f.optional.push(M),M={},M[C("max",S)]=T.ideal,f.optional.push(M)):(M[C("",S)]=T.ideal,f.optional.push(M))}T.exact!==void 0&&typeof T.exact!="number"?(f.mandatory=f.mandatory||{},f.mandatory[C("",S)]=T.exact):["min","max"].forEach(function($){T[$]!==void 0&&(f.mandatory=f.mandatory||{},f.mandatory[C($,S)]=T[$])})}}),d.advanced&&(f.optional=(f.optional||[]).concat(d.advanced)),f},m=function(d,f){if(o.version>=61)return f(d);if(d=JSON.parse(JSON.stringify(d)),d&&xt(d.audio)==="object"){var S=function($,G,ee){G in $&&!(ee in $)&&($[ee]=$[G],delete $[G])};d=JSON.parse(JSON.stringify(d)),S(d.audio,"autoGainControl","googAutoGainControl"),S(d.audio,"noiseSuppression","googNoiseSuppression"),d.audio=l(d.audio)}if(d&&xt(d.video)==="object"){var T=d.video.facingMode;T=T&&(xt(T)==="object"?T:{ideal:T});var C=o.version<66;if(T&&(T.exact==="user"||T.exact==="environment"||T.ideal==="user"||T.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!C)){delete d.video.facingMode;var M;if(T.exact==="environment"||T.ideal==="environment"?M=["back","rear"]:(T.exact==="user"||T.ideal==="user")&&(M=["front"]),M)return n.mediaDevices.enumerateDevices().then(function($){$=$.filter(function(ee){return ee.kind==="videoinput"});var G=$.find(function(ee){return M.some(function(x){return ee.label.toLowerCase().includes(x)})});return!G&&$.length&&M.includes("back")&&(G=$[$.length-1]),G&&(d.video.deviceId=T.exact?{exact:G.deviceId}:{ideal:G.deviceId}),d.video=l(d.video),ur("chrome: "+JSON.stringify(d)),f(d)})}d.video=l(d.video)}return ur("chrome: "+JSON.stringify(d)),f(d)},y=function(d){return o.version>=64?d:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[d.name]||d.name,message:d.message,constraint:d.constraint||d.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},g=function(d,f,S){m(d,function(T){n.webkitGetUserMedia(T,f,function(C){S&&S(y(C))})})};if(n.getUserMedia=g.bind(n),n.mediaDevices.getUserMedia){var u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(d){return m(d,function(f){return u(f).then(function(S){if(f.audio&&!S.getAudioTracks().length||f.video&&!S.getVideoTracks().length)throw S.getTracks().forEach(function(T){T.stop()}),new DOMException("","NotFoundError");return S},function(S){return Promise.reject(y(S))})})}}}}var Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});var Xu=Xr.shimGetUserMedia=td,Zu=ed(Qe);function Zr(a){if(typeof WeakMap!="function")return null;var o=new WeakMap,n=new WeakMap;return(Zr=function(l){return l?n:o})(a)}function ed(a,o){if(a&&a.__esModule)return a;if(a===null||oa(a)!=="object"&&typeof a!="function")return{default:a};var n=Zr(o);if(n&&n.has(a))return n.get(a);var l={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in a)if(y!=="default"&&Object.prototype.hasOwnProperty.call(a,y)){var g=m?Object.getOwnPropertyDescriptor(a,y):null;g&&(g.get||g.set)?Object.defineProperty(l,y,g):l[y]=a[y]}return l.default=a,n&&n.set(a,l),l}function oa(a){"@babel/helpers - typeof";return oa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},oa(a)}function td(a,o){var n=a&&a.navigator,l=a&&a.MediaStreamTrack;if(n.getUserMedia=function(d,f,S){Zu.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(d).then(f,S)},!(o.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var m=function(d,f,S){f in d&&!(S in d)&&(d[S]=d[f],delete d[f])},y=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(d){return oa(d)==="object"&&oa(d.audio)==="object"&&(d=JSON.parse(JSON.stringify(d)),m(d.audio,"autoGainControl","mozAutoGainControl"),m(d.audio,"noiseSuppression","mozNoiseSuppression")),y(d)},l&&l.prototype.getSettings){var g=l.prototype.getSettings;l.prototype.getSettings=function(){var d=g.apply(this,arguments);return m(d,"mozAutoGainControl","autoGainControl"),m(d,"mozNoiseSuppression","noiseSuppression"),d}}if(l&&l.prototype.applyConstraints){var u=l.prototype.applyConstraints;l.prototype.applyConstraints=function(d){return this.kind==="audio"&&oa(d)==="object"&&(d=JSON.parse(JSON.stringify(d)),m(d,"autoGainControl","mozAutoGainControl"),m(d,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[d])}}}}var yt={};Object.defineProperty(yt,"__esModule",{value:!0});yt.shimAudioContext=cd;yt.shimCallbacksAPI=id;yt.shimConstraints=ao;yt.shimCreateOfferLegacy=dd;var ad=yt.shimGetUserMedia=ld;yt.shimLocalStreamsAPI=rd;yt.shimRTCIceServerUrls=sd;yt.shimRemoteStreamsAPI=od;yt.shimTrackEventTransceiver=ud;var eo=nd(Qe);function to(a){if(typeof WeakMap!="function")return null;var o=new WeakMap,n=new WeakMap;return(to=function(l){return l?n:o})(a)}function nd(a,o){if(a&&a.__esModule)return a;if(a===null||Bt(a)!=="object"&&typeof a!="function")return{default:a};var n=to(o);if(n&&n.has(a))return n.get(a);var l={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in a)if(y!=="default"&&Object.prototype.hasOwnProperty.call(a,y)){var g=m?Object.getOwnPropertyDescriptor(a,y):null;g&&(g.get||g.set)?Object.defineProperty(l,y,g):l[y]=a[y]}return l.default=a,n&&n.set(a,l),l}function Bt(a){"@babel/helpers - typeof";return Bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Bt(a)}function rd(a){if(!(Bt(a)!=="object"||!a.RTCPeerConnection)){if("getLocalStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in a.RTCPeerConnection.prototype)){var o=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addStream=function(n){var l=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(function(m){return o.call(l,m,n)}),n.getVideoTracks().forEach(function(m){return o.call(l,m,n)})},a.RTCPeerConnection.prototype.addTrack=function(n){for(var l=this,m=arguments.length,y=new Array(m>1?m-1:0),g=1;g<m;g++)y[g-1]=arguments[g];return y&&y.forEach(function(u){l._localStreams?l._localStreams.includes(u)||l._localStreams.push(u):l._localStreams=[u]}),o.apply(this,arguments)}}"removeStream"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.removeStream=function(n){var l=this;this._localStreams||(this._localStreams=[]);var m=this._localStreams.indexOf(n);if(m!==-1){this._localStreams.splice(m,1);var y=n.getTracks();this.getSenders().forEach(function(g){y.includes(g.track)&&l.removeTrack(g)})}})}}function od(a){if(!(Bt(a)!=="object"||!a.RTCPeerConnection)&&("getRemoteStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in a.RTCPeerConnection.prototype))){Object.defineProperty(a.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(n){var l=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=function(m){m.streams.forEach(function(y){if(l._remoteStreams||(l._remoteStreams=[]),!l._remoteStreams.includes(y)){l._remoteStreams.push(y);var g=new Event("addstream");g.stream=y,l.dispatchEvent(g)}})})}});var o=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(l){l.streams.forEach(function(m){if(n._remoteStreams||(n._remoteStreams=[]),!(n._remoteStreams.indexOf(m)>=0)){n._remoteStreams.push(m);var y=new Event("addstream");y.stream=m,n.dispatchEvent(y)}})}),o.apply(n,arguments)}}}function id(a){if(!(Bt(a)!=="object"||!a.RTCPeerConnection)){var o=a.RTCPeerConnection.prototype,n=o.createOffer,l=o.createAnswer,m=o.setLocalDescription,y=o.setRemoteDescription,g=o.addIceCandidate;o.createOffer=function(d,f){var S=arguments.length>=2?arguments[2]:arguments[0],T=n.apply(this,[S]);return f?(T.then(d,f),Promise.resolve()):T},o.createAnswer=function(d,f){var S=arguments.length>=2?arguments[2]:arguments[0],T=l.apply(this,[S]);return f?(T.then(d,f),Promise.resolve()):T};var u=function(d,f,S){var T=m.apply(this,[d]);return S?(T.then(f,S),Promise.resolve()):T};o.setLocalDescription=u,u=function(d,f,S){var T=y.apply(this,[d]);return S?(T.then(f,S),Promise.resolve()):T},o.setRemoteDescription=u,u=function(d,f,S){var T=g.apply(this,[d]);return S?(T.then(f,S),Promise.resolve()):T},o.addIceCandidate=u}}function ld(a){var o=a&&a.navigator;if(o.mediaDevices&&o.mediaDevices.getUserMedia){var n=o.mediaDevices,l=n.getUserMedia.bind(n);o.mediaDevices.getUserMedia=function(m){return l(ao(m))}}!o.getUserMedia&&o.mediaDevices&&o.mediaDevices.getUserMedia&&(o.getUserMedia=(function(m,y,g){o.mediaDevices.getUserMedia(m).then(y,g)}).bind(o))}function ao(a){return a&&a.video!==void 0?Object.assign({},a,{video:eo.compactObject(a.video)}):a}function sd(a){if(a.RTCPeerConnection){var o=a.RTCPeerConnection;a.RTCPeerConnection=function(n,l){if(n&&n.iceServers){for(var m=[],y=0;y<n.iceServers.length;y++){var g=n.iceServers[y];g.urls===void 0&&g.url?(eo.deprecated("RTCIceServer.url","RTCIceServer.urls"),g=JSON.parse(JSON.stringify(g)),g.urls=g.url,delete g.url,m.push(g)):m.push(n.iceServers[y])}n.iceServers=m}return new o(n,l)},a.RTCPeerConnection.prototype=o.prototype,"generateCertificate"in o&&Object.defineProperty(a.RTCPeerConnection,"generateCertificate",{get:function(){return o.generateCertificate}})}}function ud(a){Bt(a)==="object"&&a.RTCTrackEvent&&"receiver"in a.RTCTrackEvent.prototype&&!("transceiver"in a.RTCTrackEvent.prototype)&&Object.defineProperty(a.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function dd(a){var o=a.RTCPeerConnection.prototype.createOffer;a.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);var l=this.getTransceivers().find(function(y){return y.receiver.track.kind==="audio"});n.offerToReceiveAudio===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):n.offerToReceiveAudio===!0&&!l&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);var m=this.getTransceivers().find(function(y){return y.receiver.track.kind==="video"});n.offerToReceiveVideo===!1&&m?m.direction==="sendrecv"?m.setDirection?m.setDirection("sendonly"):m.direction="sendonly":m.direction==="recvonly"&&(m.setDirection?m.setDirection("inactive"):m.direction="inactive"):n.offerToReceiveVideo===!0&&!m&&this.addTransceiver("video",{direction:"recvonly"})}return o.apply(this,arguments)}}function cd(a){Bt(a)!=="object"||a.AudioContext||(a.AudioContext=a.webkitAudioContext)}const md=Mu(()=>{const a=Lu(window);switch(a.browser){case"chrome":zu(window,a);break;case"firefox":Xu(window,a);break;case"safari":ad(window,a);break;default:throw new Hr}});let ia=Promise.resolve({type:"stop",data:{}});async function dr(a,o,n){var l,m,y;if(console.debug("[vue-qrcode-reader] starting camera with constraints: ",JSON.stringify(o)),window.isSecureContext!==!0)throw new ku;if(((l=navigator==null?void 0:navigator.mediaDevices)==null?void 0:l.getUserMedia)===void 0)throw new Hr;md(),console.debug("[vue-qrcode-reader] calling getUserMedia");const g=await navigator.mediaDevices.getUserMedia({audio:!1,video:o});a.srcObject!==void 0?a.srcObject=g:a.mozSrcObject!==void 0?a.mozSrcObject=g:window.URL.createObjectURL?a.src=window.URL.createObjectURL(g):window.webkitURL?a.src=window.webkitURL.createObjectURL(g):a.src=g.id,a.play(),console.debug("[vue-qrcode-reader] waiting for video element to load"),await Promise.race([Yr(a,"loadeddata"),ir(6e3).then(()=>{throw new Ru})]),console.debug("[vue-qrcode-reader] video element loaded"),await ir(500);const[u]=g.getVideoTracks(),d=(y=(m=u==null?void 0:u.getCapabilities)==null?void 0:m.call(u))!=null?y:{};let f=!1;return n&&d.torch&&(await u.applyConstraints({advanced:[{torch:!0}]}),f=!0),console.debug("[vue-qrcode-reader] camera ready"),{type:"start",data:{videoEl:a,stream:g,capabilities:d,constraints:o,isTorchOn:f}}}async function fd(a,{constraints:o,torch:n,restart:l=!1}){ia=ia.then(y=>{if(y.type==="start"){const{data:{videoEl:g,stream:u,constraints:d,isTorchOn:f}}=y;return!l&&a===g&&o===d&&n===f?y:no(g,u,f).then(()=>dr(a,o,n))}else if(y.type==="stop"||y.type==="failed")return dr(a,o,n);lr()}).catch(y=>(console.debug(`[vue-qrcode-reader] starting camera failed with "${y}"`),{type:"failed",error:y}));const m=await ia;if(m.type==="stop")throw new Error("Something went wrong with the camera task queue (start task).");if(m.type==="failed")throw m.error;if(m.type==="start")return m.data.capabilities;lr()}async function no(a,o,n){console.debug("[vue-qrcode-reader] stopping camera"),a.src="",a.srcObject=null,a.load(),await Yr(a,"error");for(const l of o.getTracks())n!=null||await l.applyConstraints({advanced:[{torch:!1}]}),o.removeTrack(l),l.stop();return{type:"stop",data:{}}}async function Ma(){if(ia=ia.then(a=>{if(a.type==="stop"||a.type==="failed")return a;const{data:{videoEl:o,stream:n,isTorchOn:l}}=a;return no(o,n,l)}),(await ia).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")}const vd=Ye({__name:"QrcodeStream",props:{constraints:{default:()=>({facingMode:"environment"})},formats:{default:()=>["qr_code"]},paused:{type:Boolean,default:!1},torch:{type:Boolean,default:!1},track:{type:Function,default:void 0}},emits:["detect","camera-on","camera-off","error"],setup(a,{emit:o}){const n=a,l=o,m=R(n.constraints),y=R(n.formats);Je(()=>n.constraints,(O,B)=>{JSON.stringify(O)!==JSON.stringify(B)&&(m.value=O)},{deep:!0}),Je(()=>n.formats,(O,B)=>{JSON.stringify(O)!==JSON.stringify(B)&&(y.value=O)},{deep:!0});const g=R(),u=R(),d=R(),f=R(!1),S=R(!1);vr(()=>{S.value=!0}),Hi(()=>{Ma()});const T=aa(()=>({torch:n.torch,constraints:m.value,shouldStream:S.value&&!n.paused}));Je(T,async O=>{const B=d.value;pt(B!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined.");const D=g.value;pt(D!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined.");const oe=D.getContext("2d");if(pt(oe!==null,"if cavnas is defined, canvas 2d context should also be non-null"),O.shouldStream){Ma(),f.value=!1;try{const be=await fd(B,O);S.value?(f.value=!0,l("camera-on",be)):await Ma()}catch(be){l("error",be)}}else D.width=B.videoWidth,D.height=B.videoHeight,oe.drawImage(B,0,0,B.videoWidth,B.videoHeight),Ma(),f.value=!1,l("camera-off")},{deep:!0}),Je(y,async O=>{S.value&&await Wr(O)});const C=aa(()=>T.value.shouldStream&&f.value);Je(C,O=>{if(O){pt(g.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"),M(g.value),pt(u.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"),M(u.value);const B=()=>n.track===void 0?500:40;pt(d.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"),Pu(d.value,{detectHandler:D=>l("detect",D),formats:y.value,locateHandler:$,minDelay:B()})}});const M=O=>{const B=O.getContext("2d");pt(B!==null,"canvas 2d context should always be non-null"),B.clearRect(0,0,O.width,O.height)},$=O=>{const B=u.value;pt(B!==void 0,"onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined.");const D=d.value;if(pt(D!==void 0,"onLocate handler should only be called when component is mounted. Thus video element is always defined."),O.length===0||n.track===void 0)M(B);else{const oe=D.offsetWidth,be=D.offsetHeight,P=D.videoWidth,E=D.videoHeight,H=Math.max(oe/P,be/E),de=P*H,ye=E*H,mt=de/P,gt=ye/E,$e=(oe-de)/2,ht=(be-ye)/2,ot=({x:je,y:ke})=>({x:Math.floor(je*mt),y:Math.floor(ke*gt)}),Ne=({x:je,y:ke})=>({x:Math.floor(je+$e),y:Math.floor(ke+ht)}),tt=O.map(je=>{const{boundingBox:ke,cornerPoints:Mt}=je,{x:Ut,y:Ge}=Ne(ot({x:ke.x,y:ke.y})),{x:Wt,y:Vt}=ot({x:ke.width,y:ke.height});return{...je,cornerPoints:Mt.map(Tt=>Ne(ot(Tt))),boundingBox:DOMRectReadOnly.fromRect({x:Ut,y:Ge,width:Wt,height:Vt})}});B.width=D.offsetWidth,B.height=D.offsetHeight;const ft=B.getContext("2d");pt(ft!==null,"canvas 2d context should always be non-null"),n.track(tt,ft)}},G={width:"100%",height:"100%",position:"relative","z-index":"0"},ee={width:"100%",height:"100%",position:"absolute",top:"0",left:"0"},x={width:"100%",height:"100%","object-fit":"cover"},W=aa(()=>C.value?x:{...x,visibility:"hidden",position:"absolute"});return(O,B)=>(A(),J("div",{style:G},[ue("video",{ref_key:"videoRef",ref:d,style:Wi(W.value),autoplay:"",muted:"",playsinline:""},null,4),Gi(ue("canvas",{id:"qrcode-stream-pause-frame",ref_key:"pauseFrameRef",ref:g,style:x},null,512),[[qi,!C.value]]),ue("canvas",{id:"qrcode-stream-tracking-layer",ref_key:"trackingLayerRef",ref:u,style:ee},null,512),ue("div",{style:ee},[zi(O.$slots,"default")])]))}}),pd=Ye({__name:"QRCodeReader",emits:["scan"],setup(a,{emit:o}){const n=o,l=Ji("inputBox"),m=R("keyboard"),y=R({facingMode:"environment"}),g=[{label:"Rear Camera",constraints:{facingMode:"environment"}},{label:"Front Camera",constraints:{facingMode:"user"}}],u=R(g),d=R({aztec:!0,code_128:!0,code_39:!0,code_93:!0,codabar:!0,databar:!0,databar_expanded:!0,data_matrix:!0,dx_film_edge:!0,ean_13:!0,ean_8:!0,itf:!0,maxi_code:!0,micro_qr_code:!0,pdf417:!0,qr_code:!0,rm_qr_code:!0,upc_a:!0,upc_e:!0,linear_codes:!0,matrix_codes:!0}),f=$=>{$.length>=1&&n("scan",$[0].rawValue)},S=async()=>{const G=(await navigator.mediaDevices.enumerateDevices()).filter(({kind:ee})=>ee==="videoinput");u.value=[...g,...G.map(({deviceId:ee,label:x})=>({label:`${x}`,constraints:{deviceId:ee}}))]},T=aa(()=>Object.keys(d.value).filter($=>d.value[$])),C=R(""),M=$=>{$.key==="Enter"?(n("scan",C.value),C.value=""):$.key.length===1&&(C.value+=$.key)};return mr(()=>{window.removeEventListener("keydown",M)}),window.addEventListener("keydown",M),vr(()=>{l.value&&l.value.focus()}),($,G)=>m.value==="keyboard"?(A(),J(fe,{key:0},[ue("input",{ref_key:"inputBox",ref:l,type:"text",class:"opacity-0 w-0 h-0"},null,512),s(ge,null,{default:c(()=>[s(Y,{class:"text-center"},{default:c(()=>[s(Un,{icon:"mdi:mdi-qrcode-scan",size:"150"})]),_:1})]),_:1}),s(ge,null,{default:c(()=>[C.value?(A(),N(Y,{key:0,class:"text-center"},{default:c(()=>[re(ie(C.value),1)]),_:1})):(A(),N(Y,{key:1,class:"text-center"},{default:c(()=>G[3]||(G[3]=[ue("small",null,"(Awaiting Input)",-1)])),_:1}))]),_:1}),s(ge,null,{default:c(()=>[s(Y,{class:"text-center"},{default:c(()=>[s(me,{onClick:G[0]||(G[0]=ee=>m.value="camera"),color:"primary"},{default:c(()=>G[4]||(G[4]=[re(" Use Camera ")])),_:1})]),_:1})]),_:1})],64)):m.value==="camera"?(A(),J(fe,{key:1},[s(ge,null,{default:c(()=>[s(Y,{class:"text-center"},{default:c(()=>[s(F(vd),{onDetect:f,onCameraOn:S,constraints:y.value,formats:T.value,style:{"max-width":"400px"}},null,8,["constraints","formats"])]),_:1})]),_:1}),s(ge,null,{default:c(()=>[s(Y,null,{default:c(()=>[s(Te,{modelValue:y.value,"onUpdate:modelValue":G[1]||(G[1]=ee=>y.value=ee),items:u.value,"item-title":"label","item-value":"constraints",label:"Select Camera","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1}),s(ge,null,{default:c(()=>[s(Y,{class:"text-center"},{default:c(()=>[s(me,{onClick:G[2]||(G[2]=ee=>m.value="keyboard"),color:"primary"},{default:c(()=>G[5]||(G[5]=[re(" Cancel ")])),_:1})]),_:1})]),_:1})],64)):ae("",!0)}}),yd=["colspan"],Oc=Ye({__name:"RegistrationsView",emits:["pageTitle"],async setup(a,{emit:o}){var Ea,ca,ma;let n,l;const m=Tl(),{getConvention:y}=kl();o("pageTitle","Registration Manager");const u=Ki(),d=fr(),f=R(!1);let S=((Ea=u.params.convention)==null?void 0:Ea.toString())||"";const T=R();T.value=([n,l]=Wn(()=>y()),n=await n,l(),n);const C=Yt(),M=Pa.getInstance(),{getLinkedFields:$}=Al(),G=R([]),ee=R({ID:0,AdminLayoutUUID:Rt(),ConventionID:((ca=T.value)==null?void 0:ca.ID)||0,ConventionUUID:((ma=T.value)==null?void 0:ma.ConventionUUID)||et,Name:"Registration Table",RunnerLayoutUUID:et,Type:ut.ADMIN_LAYOUT_TABLE,Panels:[]}),x=R([]),W=R([]),O=R([]),B=R([]),D=R([]),oe=R([]),be=R(1),P=R(10),E=R([]),H=R(0),de=R([]),ye=R(!1),mt=R(!1),gt=R(!1),$e=R(""),ht=R(""),ot=R(""),Ne=R(""),tt=R(""),ft=R(""),je=([n,l]=Wn(()=>{var U;return $(((U=T.value)==null?void 0:U.ConventionUUID)||et)}),n=await n,l(),n),ke=R({FieldUUID:je.badge_name||et,Value:""}),Mt=R({FieldUUID:je.forename||et,Value:""}),Ut=R({FieldUUID:je.surname||et,Value:""}),Ge=R({FieldUUID:je.dob||et,Value:""}),Wt=R(new Map([[je.badge_name||et,ke.value],[je.forename||et,Mt.value],[je.surname||et,Ut.value],[je.dob||et,Ge.value]])),Vt=R(""),Tt=R(""),qt=R([]),zt=R([]),$t=R([]),bt=R([]),St=R([]),Jt=R([]),He=R([]),it=R(0),Pe=R(),_t=R(!1),Kt=R(!1),Ba=R(!1),Qt=R(),ba=R(),Ht=R(),Pt=R(!1),Ya=xa(),qe=R(""),lt=R(!1),he=Jn(()=>{qe.value="";const U=oe.value.find(p=>p.uuid===$e.value);U&&U.challenge||(ht.value=Date.now().toString())}),Lt=Jn(()=>{lt.value=!1,ht.value=Date.now().toString()});Je($e,U=>{const p=oe.value.find(I=>I.uuid===U);if(p){const I=p.headers.find(L=>L.defaultSort===!0);I&&(E.value=[{key:I.key,order:"asc"}],qt.value=[{key:I.key,order:"asc"}]),p.challenge&&(p.items=[])}At({page:1,itemsPerPage:P.value,sortBy:qt.value})}),Je(it,U=>{U===8&&_a()}),Je(Vt,()=>{he()}),Je(Tt,()=>{he()});const Dt=()=>{if(x.value=[],O.value=[],B.value=[],oe.value=[],!!T.value){try{C.getConventionAdminLayoutByName(T.value.ConventionUUID,"Registration Table").then(U=>{if(it.value+=1,U)ee.value=U;else{if(!T.value)return;ee.value.ConventionID=T.value.ID,ee.value.ConventionUUID=T.value.ConventionUUID}})}catch{ee.value.ConventionID=T.value.ID,ee.value.ConventionUUID=T.value.ConventionUUID}try{C.getConventionAdminLayouts(T.value.ConventionUUID).then(U=>{it.value+=1,U&&(U.forEach(p=>{p.Panels.sort((I,L)=>I.Order>L.Order?1:I.Order===L.Order?0:-1),p.Panels.forEach(I=>{I.Items.sort((L,q)=>L.Order>q.Order?1:L.Order===q.Order?0:-1)})}),O.value=U)})}catch{}try{C.getConventionForms(T.value.ConventionUUID).then(U=>{it.value+=1,U&&(x.value=U)})}catch{}try{C.getConventionAccommodation(T.value.ConventionUUID).then(U=>{it.value+=1,U&&(zt.value=U)})}catch{}try{C.getConventionVenues(T.value.ConventionUUID).then(U=>{it.value+=1,U&&(Jt.value=U)})}catch{}try{C.getConventionExtras(T.value.ConventionUUID).then(U=>{it.value+=1,U&&($t.value=U)})}catch{}try{C.getConventionInterests(T.value.ConventionUUID).then(U=>{it.value+=1,U&&(bt.value=U)})}catch{}try{C.getConventionTickets(T.value.ConventionUUID).then(U=>{it.value+=1,U&&(St.value=U)})}catch{}try{C.getConventionGroups(T.value.ConventionUUID).then(U=>{U&&(W.value=U.sort((p,I)=>p.Name.localeCompare(I.Name)))})}catch{}try{C.getConventionTags(T.value.ConventionUUID).then(U=>{U&&(D.value=U.sort((p,I)=>p.Title.localeCompare(I.Title)).map(p=>(p.Title=`${p.Title} [${p.Key}]`,p)))})}catch{}}},Xt=(U,p,I,L,q)=>{const le={Direction:L,Limit:I,Offset:(p-1)*I,Order:q};return U&&(le.PanelUUID=U==null?void 0:U.layout.LayoutPanelUUID),(U==null?void 0:U.layout.RequiredFormType)===we.FORM_TYPE_ADDITIONAL&&(le.Additional=!0),(U==null?void 0:U.layout.RequiredFormType)===we.FORM_TYPE_ADMIN&&(le.AdminForm=!0),(U==null?void 0:U.layout.RequiredFormType)===we.FORM_TYPE_ACCOMMODATION&&(le.Accommodation=!0),(U==null?void 0:U.layout.RequiredFormType)===we.FORM_TYPE_BADGE&&(le.Badge=!0),(U==null?void 0:U.layout.RequiredFormType)===we.FORM_TYPE_DEALER&&(le.Dealer=!0),(U==null?void 0:U.layout.RequiredFormType)===we.FORM_TYPE_REGISTRATION&&(le.Registration=!0),le.GroupUUID=Vt.value||et,le.TagUUID=Tt.value||et,le.Email=tt.value,le.Reference=Ne.value,ot.value&&(le.RegistrationUUID=ot.value),ft.value&&(le.BadgeSerialNumber=ft.value),le.FieldValues=Array.from(Wt.value.values()),le},Sa=(U,p)=>{let I="",L="";const q=p==null?void 0:p.layout.Items;if(U&&q&&U.length>=1){const le=q.find(Xe=>Xe.LayoutItemUUID==U[0].key);switch(L=U[0].order||"asc",le==null?void 0:le.MetaField){case pe.META_DATA_SOURCE_ACCOMMODATION_FORM:I="submission.status";break;case pe.META_DATA_SOURCE_ADDITIONAL_FORM:I="submission.status";break;case pe.META_DATA_SOURCE_ADMIN_FORM:I="submission.status";break;case pe.META_DATA_SOURCE_BADGE_FORM:I="submission.status";break;case pe.META_DATA_SOURCE_DEALER_FORM:I="submission.status";break;case pe.META_DATA_SOURCE_REGISTRATION_FORM:I="submission.status";break;case pe.META_DATA_SOURCE_REGISTRATION_REFERENCE:I="reference";break;case pe.META_DATA_SOURCE_SUBMISSION_DATE:I="created";break;case pe.META_DATA_SOURCE_SUBMISSION_STATUS:I="submission.status";break}switch(le==null?void 0:le.UserField){case Me.USER_DATA_SOURCE_DISPLAY_NAME:I="user.display_name";break;case Me.USER_DATA_SOURCE_EMAIL:I="user.email";break;case Me.USER_DATA_SOURCE_FIRST_NAME:I="user.firstname";break;case Me.USER_DATA_SOURCE_HANDLE:I="user.handle";break;case Me.USER_DATA_SOURCE_LAST_NAME:I="user.lastname";break}}return{sortByStr:I,directionStr:L}},At=({page:U,itemsPerPage:p,sortBy:I})=>{if(!T.value)return;be.value=U,E.value=I;const L=oe.value.find(Xe=>Xe.uuid==$e.value);if(L&&L.challenge&&qe.value.trim().length<3)return;f.value=!0;let{sortByStr:q,directionStr:le}=Sa(I,L);try{const Xe=Xt(L,U,p,le,q);ot.value="",ft.value="";const za=ht.value;C.searchConventionRegistrations(T.value.ConventionUUID,Xe,qe.value).then(vt=>{vt&&za===ht.value&&(H.value=vt.Total,B.value=vt.Registrations,de.value=vt.IDs,oe.value.forEach(fa=>{const Ja=fa.layout;fa.items=B.value.map(X=>{const Zt=[];let We;X.Leader?We=X:We=X.Primary,Zt.push({Name:We.User.DisplayName,UUID:We.UserUUID,UserUUID:We.User.UserUUID,IsLeader:!0,Reference:We.Reference,Paid:We.Paid,Total:We.Total}),Zt.push(...We.Members.map(ze=>({Name:ze.User.DisplayName,UUID:ze.UserUUID,UserUUID:ze.User.UserUUID,IsLeader:!1,Reference:ze.Reference,Paid:ze.Paid,Total:ze.Total})));const ce={};return fa.headers.forEach(ze=>{var va;const Q=Ja.Items.find(Ct=>Ct.LayoutItemUUID===ze.key);if(Q){if(Q.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&Q.SectionField)X.Submissions.forEach(Ct=>{const Nt=Ct.Data.find(K=>K.SectionFieldUUID===Q.SectionFieldUUID);if(Nt){ze.type===pr.ACCOMMODATION?ce[Q.LayoutItemUUID]={Data:Nt.Data,Registration:X}:ce[Q.LayoutItemUUID]=Nt.Data;return}});else if(Q.SourceType==="LAYOUT_ITEM_SOURCE_USER"&&Q.UserField)switch(Q.UserField){case Me.USER_DATA_SOURCE_AVATAR:ce[Q.LayoutItemUUID]=m.GetProfileImageURL(X.UserUUID);break;case Me.USER_DATA_SOURCE_CONTACTS:ce[Q.LayoutItemUUID]={},X.User.Generated&&X.User.Generated.telegram_handle&&(ce[Q.LayoutItemUUID].telegram=`@${X.User.Generated.telegram_handle}`),ce[Q.LayoutItemUUID].email=X.User.Additional.Email;break;case Me.USER_DATA_SOURCE_DISPLAY_NAME:ce[Q.LayoutItemUUID]=X.User.DisplayName;break;case Me.USER_DATA_SOURCE_EMAIL:ce[Q.LayoutItemUUID]=X.User.Additional.Email;break;case Me.USER_DATA_SOURCE_HANDLE:ce[Q.LayoutItemUUID]=X.User.Handle;break;case Me.USER_DATA_SOURCE_DATE_OF_BIRTH:ce[Q.LayoutItemUUID]=X.User.Additional.DOB;break;case Me.USER_DATA_SOURCE_FIRST_NAME:ce[Q.LayoutItemUUID]=X.User.Additional.FirstName;break;case Me.USER_DATA_SOURCE_LAST_NAME:ce[Q.LayoutItemUUID]=X.User.Additional.LastName;break;case Me.USER_DATA_SOURCE_TELEGRAM:X.User.Generated&&X.User.Generated.telegram_handle?ce[Q.LayoutItemUUID]=`@${X.User.Generated.telegram_handle}`:ce[Q.LayoutItemUUID]="";break}else if(Q.SourceType==="LAYOUT_ITEM_SOURCE_META"&&Q.MetaField){const Ct=(va=x.value.find(K=>K.Type===we.FORM_TYPE_REGISTRATION))==null?void 0:va.FormUUID,Nt=X.Submissions.find(K=>K.FormUUID===Ct);switch(Q.MetaField){case pe.META_DATA_SOURCE_REGISTRATION_ACTIONS:ce[Q.LayoutItemUUID]=X;break;case pe.META_DATA_SOURCE_REGISTRATION_GROUP:ce[Q.LayoutItemUUID]=Zt;break;case pe.META_DATA_SOURCE_REGISTRATION_REFERENCE:ce[Q.LayoutItemUUID]=X.Reference;break;case pe.META_DATA_SOURCE_SUBMISSION_DATE:if(Nt){const K=new Date(Nt.CreatedAt||"");ce[Q.LayoutItemUUID]=`${K.getFullYear()}-${(K.getMonth()+1).toString().padStart(2,"0")}-${K.getDate().toString().padStart(2,"0")} ${K.getHours().toString().padStart(2,"0")}:${K.getMinutes().toString().padStart(2,"0")}:${K.getSeconds().toString().padStart(2,"0")}`}else{const K=new Date(X.CreatedAt||"");ce[Q.LayoutItemUUID]=`${K.getFullYear()}-${(K.getMonth()+1).toString().padStart(2,"0")}-${K.getDate().toString().padStart(2,"0")} ${K.getHours().toString().padStart(2,"0")}:${K.getMinutes().toString().padStart(2,"0")}:${K.getSeconds().toString().padStart(2,"0")}`}break;case pe.META_DATA_SOURCE_ACCOMMODATION_FORM:ce[Q.LayoutItemUUID]=X.Submissions.map(K=>{const Z=x.value.find(Ze=>Ze.FormUUID===K.FormUUID);return{Heading:Z==null?void 0:Z.Heading,Form:Z,Submission:K,Registration:X}}).filter(K=>{var Z;return((Z=K.Form)==null?void 0:Z.Type)===we.FORM_TYPE_ACCOMMODATION});break;case pe.META_DATA_SOURCE_ADMIN_FORM:ce[Q.LayoutItemUUID]=X.Submissions.map(K=>{const Z=x.value.find(Ze=>Ze.FormUUID===K.FormUUID);return{Heading:Z==null?void 0:Z.Heading,Form:Z,Submission:K,Registration:X}}).filter(K=>{var Z;return((Z=K.Form)==null?void 0:Z.Type)===we.FORM_TYPE_ADMIN});break;case pe.META_DATA_SOURCE_ADDITIONAL_FORM:ce[Q.LayoutItemUUID]=X.Submissions.map(K=>{const Z=x.value.find(Ze=>Ze.FormUUID===K.FormUUID);return{Heading:Z==null?void 0:Z.Heading,Form:Z,Submission:K,Registration:X}}).filter(K=>{var Z;return((Z=K.Form)==null?void 0:Z.Type)===we.FORM_TYPE_ADDITIONAL});break;case pe.META_DATA_SOURCE_BADGE_FORM:ce[Q.LayoutItemUUID]=X.Submissions.map(K=>{const Z=x.value.find(Ze=>Ze.FormUUID===K.FormUUID);return{Heading:Z==null?void 0:Z.Heading,Form:Z,Submission:K,Registration:X}}).filter(K=>{var Z;return((Z=K.Form)==null?void 0:Z.Type)===we.FORM_TYPE_BADGE});break;case pe.META_DATA_SOURCE_DEALER_FORM:ce[Q.LayoutItemUUID]=X.Submissions.map(K=>{const Z=x.value.find(Ze=>Ze.FormUUID===K.FormUUID);return{Heading:Z==null?void 0:Z.Heading,Form:Z,Submission:K,Registration:X}}).filter(K=>{var Z;return((Z=K.Form)==null?void 0:Z.Type)===we.FORM_TYPE_DEALER});break;case pe.META_DATA_SOURCE_PAYMENT_STATUS:if(X.Paid===0&&X.Total)ce[Q.LayoutItemUUID]="REQUIRED";else if(X.Total>X.Paid)ce[Q.LayoutItemUUID]="ADDITIONAL_REQUIRED";else{const K=Zt.find(Z=>Z.Paid===0&&(Z.Total||0)>0);if(K){X.Total===0&&K.Total===0?ce[Q.LayoutItemUUID]="NOT_REQUIRED":X.Total>0&&K.Total===0?ce[Q.LayoutItemUUID]="MISSING_REQUIRED":X.Paid>=X.Total?ce[Q.LayoutItemUUID]="AWAITING_PARTNER":ce[Q.LayoutItemUUID]="ALL_REQUIRED";break}else X.Total===0?ce[Q.LayoutItemUUID]="NOT_REQUIRED":ce[Q.LayoutItemUUID]="COMPLETE"}break;case pe.META_DATA_SOURCE_SUBMISSION_STATUS:Ul(X.Submissions,x.value),ce[Q.LayoutItemUUID]=X.Submissions.map(K=>{const Z=x.value.find(Ze=>Ze.FormUUID===K.FormUUID);return{Heading:Z==null?void 0:Z.Heading,Form:Z,Submission:K,Registration:X}});break;case pe.META_DATA_SOURCE_DATA_LAYOUT:ce[Q.LayoutItemUUID]={Registration:X,Layouts:O.value.filter(K=>{if(Q.Meta&&Q.Meta.LayoutUUID&&Array.isArray(Q.Meta.LayoutUUID))return Q.Meta.LayoutUUID.includes(K.AdminLayoutUUID)})};break}}}}),{key:X.RegistrationUUID,registration:X,...ce}})}),f.value=!1)})}catch{}},Et=U=>{ye.value=!1,U&&(ee.value=U,_a())},_a=()=>{wr(ee.value.Panels,x.value),ee.value.Panels.length>0&&(oe.value=[],ee.value.Panels.forEach(U=>{const p={uuid:Rt(),order:U.Order,name:U.Name,headers:[],items:[],layout:U,challenge:U.Meta&&!!U.Meta.challenge};U.Items.sort((I,L)=>I.Order>L.Order?1:I.Order==L.Order?0:-1),p.headers=U.Items.filter(I=>I.SourceType!=kt.LAYOUT_ITEM_SOURCE_META||I.MetaField!=pe.META_DATA_SOURCE_REGISTRATION_TOOLS_DROP).map(I=>{var L,q;return{key:I.LayoutItemUUID,title:I.Label||((q=(L=I.SectionField)==null?void 0:L.Field)==null?void 0:q.Label)||"",align:I.Align==="end"?"end":"start",sortable:Da(I),type:Ha(I),defaultSort:I.DefaultSort,meta:I.Meta}}),oe.value.push(p)}),oe.value=oe.value.sort((U,p)=>U.order>p.order?1:U.order==p.order?0:-1)),($e.value==null||$e.value=="")&&oe.value.length>0&&($e.value=oe.value[0].uuid)};S?C.getConvention(S).then(U=>{U&&(T.value=U,ee.value.ConventionID=T.value.ID,ee.value.ConventionUUID=T.value.ConventionUUID,Dt())}).catch(()=>{d.push("/")}):d.push("/");const Ha=U=>{var p,I;if(U.SourceType===kt.LAYOUT_ITEM_SOURCE_META)return`${U.SourceType}.${U.MetaField}`;if(U.SourceType===kt.LAYOUT_ITEM_SOURCE_FORM)return(I=(p=U.SectionField)==null?void 0:p.Field)==null?void 0:I.Type;if(U.SourceType===kt.LAYOUT_ITEM_SOURCE_USER)return`${U.SourceType}.${U.UserField}`},Ga=()=>{const U=oe.value.find(p=>p.uuid===$e.value);return U?!!U.layout.Items.find(p=>p.SourceType==kt.LAYOUT_ITEM_SOURCE_META&&p.MetaField==pe.META_DATA_SOURCE_REGISTRATION_TOOLS_DROP):!1},Da=U=>{const p=[pe.META_DATA_SOURCE_ACCOMMODATION_FORM,pe.META_DATA_SOURCE_BADGE_FORM,pe.META_DATA_SOURCE_DEALER_FORM,pe.META_DATA_SOURCE_REGISTRATION_FORM,pe.META_DATA_SOURCE_REGISTRATION_REFERENCE,pe.META_DATA_SOURCE_SUBMISSION_DATE,pe.META_DATA_SOURCE_SUBMISSION_STATUS],I=[Me.USER_DATA_SOURCE_DISPLAY_NAME,Me.USER_DATA_SOURCE_EMAIL,Me.USER_DATA_SOURCE_HANDLE,Me.USER_DATA_SOURCE_DATE_OF_BIRTH,Me.USER_DATA_SOURCE_FIRST_NAME,Me.USER_DATA_SOURCE_LAST_NAME];return p.includes(U.MetaField)||I.includes(U.UserField)},Re=U=>{Pe.value=U,_t.value=!0},Ft=U=>{Pe.value=U,Kt.value=!0},ve=U=>{Pe.value=U,Ba.value=!0};Je(_t,U=>{U||(Pe.value=void 0)}),Je(Kt,U=>{U||(Pe.value=void 0)});const ua=async(U="")=>{ba.value=await C.getRegistrationGroup(U)},at=({registration:U,form:p})=>{const I={FormUUID:p.FormUUID,Limit:1,RegistrationUUID:U.RegistrationUUID};switch(p.Type){case we.FORM_TYPE_ACCOMMODATION:I.Accommodation=!0;break;case we.FORM_TYPE_ADDITIONAL:I.Additional=!0;break;case we.FORM_TYPE_ADMIN:I.AdminForm=!0;break;case we.FORM_TYPE_BADGE:I.Badge=!0;break;case we.FORM_TYPE_DEALER:I.Dealer=!0;break;case we.FORM_TYPE_REGISTRATION:I.Registration=!0;break}C.searchConventionRegistrations(U.ConventionUUID,I).then(L=>{if(L&&L.Total>0){if(Pe.value=L.Registrations[0],!Pe.value)return;ua(U.RegistrationUUID).then(()=>{var q,le;Pe.value&&((q=Pe.value)!=null&&q.Submissions)&&(Ht.value=(le=Pe.value)==null?void 0:le.Submissions.find(Xe=>Xe.FormUUID===p.FormUUID)),Ht.value||(Ht.value=nt(p,U)),Qt.value=p,Pt.value=!0})}})},nt=(U,p)=>({ID:0,SubmissionUUID:Rt(),FormID:U.ID,FormUUID:U.FormUUID,Form:U,UserID:p.UserID,UserUUID:p.UserUUID,RegistrationID:p.ID,RegistrationUUID:p.RegistrationUUID,Registration:p,Data:[],Status:pl.SUBMISSION_STATUS_NULL}),Wa=U=>{It(),ft.value=U,gt.value=!1;const p=oe.value.find(I=>I.uuid===$e.value);p&&p.challenge?lt.value=!0:he()},qa=U=>{C.switchUser(U.UserUUID).then(p=>{p&&Cl(p.tokens,p.user,d,!1)}).catch(p=>{console.error(p)})},da=U=>{Yl(U)?(It(),ot.value=U,mt.value=!1,he()):isNaN(parseInt(U))||(It(),Ne.value=U,mt.value=!1,he())},It=()=>{ft.value="",ot.value="",Ne.value="",ke.value.Value="",tt.value="",Mt.value.Value="",Ut.value.Value="",Ge.value.Value=""},Aa=()=>{He.value=de.value};return M.on("registration.group.leave",U=>{C.leaveRegistrationGroup(U).then(p=>{p&&ua(U).then(()=>{M.emit("registration.group.left",p)})})}),M.on("registration.group.remove.member",U=>{C.leaveRegistrationGroup(U).then(p=>{p&&ua(U).then(()=>{M.emit("registration.group.left",p)})})}),M.on("checkin-saved",()=>{It()}),(U,p)=>T.value?(A(),N(Kn,{key:0},{default:c(()=>[s(Qn,{color:"blue-darken-4"},{default:c(()=>[s(Tr,{modelValue:$e.value,"onUpdate:modelValue":p[0]||(p[0]=I=>$e.value=I),"show-arrows":""},{default:c(()=>[(A(!0),J(fe,null,Be(oe.value,I=>(A(),N(br,{key:I.uuid,value:I.uuid},{default:c(()=>[re(ie(I.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),s(ga),s(Zs),s(me,{icon:"mdi:mdi-cog-outline",onClick:p[1]||(p[1]=I=>ye.value=!0)})]),_:1}),s(Sr,{modelValue:$e.value,"onUpdate:modelValue":p[32]||(p[32]=I=>$e.value=I),disabled:!0,touch:!1},{default:c(()=>[(A(!0),J(fe,null,Be(oe.value,I=>(A(),N(Gt,{key:I.uuid,value:I.uuid},{default:c(()=>[I.uuid===$e.value?(A(),N(na,{key:0,class:"pa-2"},{default:c(()=>[s(wl,{modelValue:He.value,"onUpdate:modelValue":p[25]||(p[25]=L=>He.value=L),expanded:G.value,"onUpdate:expanded":p[26]||(p[26]=L=>G.value=L),page:be.value,"onUpdate:page":p[27]||(p[27]=L=>be.value=L),"items-per-page":P.value,"onUpdate:itemsPerPage":p[28]||(p[28]=L=>P.value=L),"sort-by":qt.value,"onUpdate:sortBy":p[29]||(p[29]=L=>qt.value=L),headers:I.headers,"items-length":H.value,items:I.items,"item-value":"key",loading:f.value,search:ht.value,"onUpdate:options":At,"show-expand":Ga(),"show-select":""},Fa({top:c(()=>[s(Cr,{class:"mb-3"},{default:c(()=>[s(cn,null,{default:c(()=>[s(mn,{color:"secondary",class:"font-weight-bold pb-0 pt-0"},{default:c(()=>{var L;return[s(Y,{class:"py-0 pl-0 pr-2 text-left flex-shrink-1 text-no-wrap"},{default:c(()=>[p[45]||(p[45]=re(" Search Criteria ")),s(Un,{class:"pl-5",icon:"mdi:mdi-credit-card-search-outline"})]),_:1}),s(Y,{class:"d-none d-sm-block py-0 px-2",cols:"6",sm:"7",md:"2"},{default:c(()=>[s(Ve,{modelValue:Ne.value,"onUpdate:modelValue":p[2]||(p[2]=q=>Ne.value=q),label:"Badge No.",clearable:!0,"hide-details":"",variant:"plain",onClick:p[3]||(p[3]=dt(()=>{},["stop"])),"onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{class:"d-none d-md-block py-0 px-2",md:"4"},{default:c(()=>[s(Ve,{modelValue:ke.value.Value,"onUpdate:modelValue":p[4]||(p[4]=q=>ke.value.Value=q),label:"Furry Name",clearable:!0,"hide-details":"",variant:"plain",onClick:p[5]||(p[5]=dt(()=>{},["stop"])),"onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{class:"d-none d-md-block py-0 px-2",md:"2"},{default:c(()=>[s(Ve,{modelValue:Ge.value.Value,"onUpdate:modelValue":p[6]||(p[6]=q=>Ge.value.Value=q),type:"date",label:"Date of Birth",clearable:!0,"hide-details":"",variant:"plain","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(ga),s(me,{icon:"mdi:mdi-eraser",variant:"text",title:"Clear Primary Search Values",onClick:p[7]||(p[7]=dt(q=>{It(),F(he)()},["stop"]))}),s(me,{icon:"mdi:mdi-nfc",variant:"text",title:"Scan NFC Badge (not iPhone)",onClick:p[8]||(p[8]=dt(q=>gt.value=!0,["stop"]))}),s(me,{icon:"mdi:mdi-qrcode-scan",variant:"text",title:"Scan Code",onClick:p[9]||(p[9]=dt(q=>mt.value=!0,["stop"]))}),(L=oe.value.find(q=>q.uuid===$e.value))!=null&&L.challenge?(A(),N(me,{key:0,icon:"mdi:mdi-magnify",variant:"text",title:"Search",onClick:p[10]||(p[10]=dt(q=>{qe.value="",lt.value=!0},["stop"]))})):ae("",!0)]}),_:1}),s(fn,{class:"pt-2"},{default:c(()=>{var L;return[s(ge,null,{default:c(()=>[s(Y,{cols:"12",sm:"6",md:"3",lg:"2",xl:"1"},{default:c(()=>[s(Ve,{modelValue:Ne.value,"onUpdate:modelValue":p[11]||(p[11]=q=>Ne.value=q),label:"Badge No.",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{cols:"12",sm:"6",md:"4",lg:"5",xl:"2"},{default:c(()=>[s(Ve,{modelValue:ke.value.Value,"onUpdate:modelValue":p[12]||(p[12]=q=>ke.value.Value=q),label:"Furry Name",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{cols:"12",sm:"12",md:"5",lg:"5",xl:"3"},{default:c(()=>[s(Ve,{modelValue:tt.value,"onUpdate:modelValue":p[13]||(p[13]=q=>tt.value=q),label:"E-mail",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{cols:"12",sm:"6",md:"4",lg:"4",xl:"2"},{default:c(()=>[s(Ve,{modelValue:Mt.value.Value,"onUpdate:modelValue":p[14]||(p[14]=q=>Mt.value.Value=q),label:"Legal Forename",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{cols:"12",sm:"6",md:"4",lg:"4",xl:"2"},{default:c(()=>[s(Ve,{modelValue:Ut.value.Value,"onUpdate:modelValue":p[15]||(p[15]=q=>Ut.value.Value=q),label:"Legal Surname",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{cols:"12",sm:"12",md:"4",lg:"4",xl:"2"},{default:c(()=>[s(Ve,{modelValue:Ge.value.Value,"onUpdate:modelValue":p[16]||(p[16]=q=>Ge.value.Value=q),type:"date",label:"Date of Birth",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"},{default:c(()=>[s(Te,{modelValue:Vt.value,"onUpdate:modelValue":p[17]||(p[17]=q=>Vt.value=q),label:"Permission Groups",clearable:!0,"hide-details":"",variant:"outlined",items:W.value,"item-value":"GroupUUID","item-title":"Name"},null,8,["modelValue","items"])]),_:1}),s(Y,{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"},{default:c(()=>[s(Te,{modelValue:Tt.value,"onUpdate:modelValue":p[18]||(p[18]=q=>Tt.value=q),label:"Tags",clearable:!0,"hide-details":"",variant:"outlined",items:D.value,"item-value":"TagUUID","item-title":"Title"},null,8,["modelValue","items"])]),_:1})]),_:1}),(L=oe.value.find(q=>q.uuid===$e.value))!=null&&L.challenge?(A(),N(ge,{key:0},{default:c(()=>[s(Y,{class:"text-right"},{default:c(()=>[s(me,{"prepend-icon":"mdi:mdi-magnify",title:"Search",color:"success",onClick:p[19]||(p[19]=dt(q=>{qe.value="",lt.value=!0},["stop"]))},{default:c(()=>p[46]||(p[46]=[re(" Run Search ")])),_:1})]),_:1})]),_:1})):ae("",!0)]}),_:1})]),_:1})]),_:1})]),"expanded-row":c(({columns:L,internalItem:q})=>[ue("tr",null,[ue("td",{colspan:L.length},[s(er,{modelValue:_t.value,"onUpdate:modelValue":p[21]||(p[21]=le=>_t.value=le),registration:q.raw.registration,"onUpdate:registration":le=>q.raw.registration=le,accommodations:zt.value,convention:T.value,extras:$t.value,forms:x.value,interests:bt.value,tickets:St.value,title:`Registration Controls (#${q.raw.registration.Reference} ${q.raw.registration.User.DisplayName})`,"use-dialog":!1,venues:Jt.value,style:{"max-width":"calc(100vw - 48px)"},class:"ml-auto mr-0"},null,8,["modelValue","registration","onUpdate:registration","accommodations","convention","extras","forms","interests","tickets","title","venues"])],8,yd)])]),"item.data-table-expand":c(({internalItem:L})=>[G.value.findIndex(q=>q===L.key)>=0?(A(),N(me,{key:0,"append-icon":"mdi:mdi-chevron-up",size:"xs",variant:"flat",onClick:q=>G.value.splice(G.value.findIndex(le=>le===L.key),1)},{default:c(()=>[L.raw.registration.Notes&&L.raw.registration.Notes.length>0?(A(),J(fe,{key:0},[re(ie(L.raw.registration.Notes.length),1)],64)):ae("",!0)]),_:2},1032,["onClick"])):(A(),N(me,{key:1,"append-icon":"mdi:mdi-chevron-down",size:"xs",variant:"flat",onClick:q=>G.value.push(L.key)},{default:c(()=>[L.raw.registration.Notes&&L.raw.registration.Notes.length>0?(A(),J(fe,{key:0},[re(ie(L.raw.registration.Notes.length),1)],64)):ae("",!0)]),_:2},1032,["onClick"]))]),bottom:c(()=>[s(tu,{"current-page":be.value,"onUpdate:currentPage":p[22]||(p[22]=L=>be.value=L),"items-per-page":P.value,"onUpdate:itemsPerPage":p[23]||(p[23]=L=>P.value=L),"item-total":H.value},null,8,["current-page","items-per-page","item-total"]),ue("div",null,[s(me,{variant:"text",color:"primary",onClick:Aa},{default:c(()=>p[47]||(p[47]=[re(" (Select all on every page) ")])),_:1}),s(me,{variant:"text",color:"primary",onClick:p[24]||(p[24]=L=>He.value=[])},{default:c(()=>p[48]||(p[48]=[re(" (Unselect all on every page) ")])),_:1})])]),_:2},[Be(I.headers,L=>({name:`item.${L.key}`,fn:c(({internalItem:q,index:le})=>[s(os,{header:L,item:q,accommodations:zt.value,convention:T.value,extras:$t.value,forms:x.value,interests:bt.value,tickets:St.value,user:F(Ya),venues:Jt.value,modelValue:I.items[le],"onUpdate:modelValue":Xe=>I.items[le]=Xe,onOpenActions:Re,onOpenPayments:Ft,onOpenTags:ve,onReload:p[20]||(p[20]=Xe=>At({page:be.value,itemsPerPage:P.value,sortBy:E.value})),onSwitchUser:qa,onShowForm:at},null,8,["header","item","accommodations","convention","extras","forms","interests","tickets","user","venues","modelValue","onUpdate:modelValue"])])}))]),1032,["modelValue","expanded","page","items-per-page","sort-by","headers","items-length","items","loading","search","show-expand"]),s(Nl,{modelValue:He.value,"onUpdate:modelValue":p[30]||(p[30]=L=>He.value=L),details:I.items,"onUpdate:details":L=>I.items=L,"model-type":"registration",convention:T.value,"onUpdate:convention":p[31]||(p[31]=L=>T.value=L),custom:""},null,8,["modelValue","details","onUpdate:details","convention"])]),_:2},1024)):ae("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),mt.value?(A(),N(Ta,{key:0,modelValue:mt.value,"onUpdate:modelValue":p[33]||(p[33]=I=>mt.value=I),title:"Scan Code",width:"auto","card-class":"px-2 px-sm-6"},{default:c(()=>[s(pd,{onScan:da})]),_:1},8,["modelValue"])):ae("",!0),gt.value?(A(),N(Ta,{key:1,modelValue:gt.value,"onUpdate:modelValue":p[34]||(p[34]=I=>gt.value=I),title:"Scan Code",width:"auto","card-class":"px-2 px-sm-6"},{default:c(()=>[s(cl,{onScan:Wa})]),_:1},8,["modelValue"])):ae("",!0),ye.value?(A(),N(Qs,{key:2,title:"Edit Layouts",modelValue:ye.value,"onUpdate:modelValue":p[35]||(p[35]=I=>ye.value=I),convention:T.value,onSave:Et},null,8,["modelValue","convention"])):ae("",!0),Pe.value?(A(),J(fe,{key:3},[_t.value?(A(),N(er,{key:0,modelValue:_t.value,"onUpdate:modelValue":p[36]||(p[36]=I=>_t.value=I),registration:Pe.value,"onUpdate:registration":p[37]||(p[37]=I=>Pe.value=I),accommodations:zt.value,convention:T.value,extras:$t.value,forms:x.value,interests:bt.value,tickets:St.value,title:`Registration Controls (#${Pe.value.Reference} ${Pe.value.User.DisplayName})`,"use-dialog":!0,venues:Jt.value},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","title","venues"])):ae("",!0)],64)):ae("",!0),Pt.value&&Ht.value&&Qt.value?(A(),N(vn,{key:4,modelValue:Pt.value,"onUpdate:modelValue":p[41]||(p[41]=I=>Pt.value=I),scrollable:!0,fullscreen:!0},{default:c(()=>[s(na,{class:"bg-red-darken-4"},{default:c(()=>[s(Qn,{color:"error"},{default:c(()=>[s(xl,null,{default:c(()=>p[49]||(p[49]=[re("Submission Editor - Admin Mode")])),_:1}),s(ga),s(hl,null,{default:c(()=>[s(me,{icon:"mdi:mdi-window-close",onClick:p[38]||(p[38]=I=>Pt.value=!1)})]),_:1})]),_:1}),s(ra,{class:"pa-0"},{default:c(()=>[s(ml,{modelValue:Qt.value,"onUpdate:modelValue":p[39]||(p[39]=I=>Qt.value=I),admin:!0,convention:T.value,data:Ht.value,editable:!0,"registration-group":ba.value,onClose:p[40]||(p[40]=I=>{Pt.value=!1,At({page:be.value,itemsPerPage:P.value,sortBy:E.value})})},null,8,["modelValue","convention","data","registration-group"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):ae("",!0),s(vn,{modelValue:lt.value,"onUpdate:modelValue":p[44]||(p[44]=I=>lt.value=I)},{default:c(()=>[s(na,{class:"rounded-xl"},{default:c(()=>[s(ja,null,{default:c(()=>[s(ra,{class:"px-0"},{default:c(()=>p[50]||(p[50]=[ue("h2",null,"Search Challenge",-1)])),_:1}),s(_l,null,{default:c(()=>p[51]||(p[51]=[re("Please provide the reason for this search. If it relates to an open case, enter the relevant identifiers.")])),_:1})]),_:1}),s(ra,{color:"white"},{default:c(()=>[s(jl,{modelValue:qe.value,"onUpdate:modelValue":p[42]||(p[42]=I=>qe.value=I),label:"Reason"},null,8,["modelValue"])]),_:1}),s(Ar,null,{default:c(()=>[s(me,{onClick:p[43]||(p[43]=I=>{qe.value="",lt.value=!1})},{default:c(()=>p[52]||(p[52]=[re("Cancel")])),_:1}),s(ga),s(me,{onClick:F(Lt),disabled:qe.value.length<3},{default:c(()=>p[53]||(p[53]=[re("Search")])),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):(A(),N(Kn,{key:1},{default:c(()=>p[54]||(p[54]=[re(" Convention Not Found ")])),_:1}))}});export{Oc as default};
