import{i as me,L as N,M as fe,V as Re,r as $,w as ne,c as Oe,D as B,n as t,G as K,h as r,x as Q,q as a,H as F,P as te,l as T,A as q,F as p,m as Ue,v as J,k as Ie,N as xe,y as Ke,a1 as Ce,E as el,$ as Ae,b as ll,a7 as tl,d as ze,p as je,aP as al,u as nl,aQ as sl,as as qe,ad as ul,z as ol,aR as Pe}from"./index-Ed4eIGni.js";import{F as oe}from"./form-Cqw16b_M.js";import{S as il}from"./submission-DAi9v6uc.js";import{u as ke}from"./useModel-u9EOK8q0.js";import{s as Ve}from"./index-CndaLrdX.js";import{b as Qe,a as ve,c as Te,d as De,V as he}from"./VList-CAm56P-4.js";import{V as z,a as Y}from"./VRow-D5thwBNc.js";import{V as be}from"./VCheckbox-B1zoVqrb.js";import{V as Me,c as $e,d as rl,e as dl,f as vl}from"./VSelect-D9IvzsIX.js";import{T as ml}from"./ticket-DqurB3v3.js";import{c as Se,u as cl,s as Be}from"./useConventionSlug-DDFYF8hk.js";import{d as we,V as Z,o as fl,u as Ze}from"./VGrid-DRXhcLGe.js";import{c as pl}from"./copyToClipboard-BtcEYe2-.js";import{a as hl,l as pe,_ as He}from"./SaveButton.vue_vue_type_script_setup_true_lang-DzOq1ddC.js";import{u as _e}from"./useStoreAPI-C7gylrty.js";import{V as Ge}from"./forwardRefs-B-cG5F-y.js";import{a as Le,V as ye,m as gl,b as bl}from"./VTextField-F70z9sPd.js";import{V as yl}from"./VFileInput-CVWnpTKi.js";import{V as Ne}from"./VForm-BPKKuL4L.js";import{V as Ye}from"./VTooltip-Bw-FxXtR.js";import{_ as Ul}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as Il}from"./VTextarea-CGjYbOv6.js";import{V as Xe}from"./VAutocomplete-QSifYxtl.js";import{G as Dl}from"./userData-B2bRA4jq.js";import{v as Ee}from"./v4-CtRu48qb.js";import{V as Vl}from"./VContainer-D4VYrHrl.js";import{e as Tl,a as kl,b as Cl,c as Sl}from"./VCard-DJ0SDk-m.js";var ae=(d=>(d.ACCOMMODATION="ACCOMMODATION",d.AGE="AGE",d.BADGE_IMAGE="BADGE_IMAGE",d.CHECKBOX="CHECKBOX",d.CONFIRMATION="CONFIRMATION",d.DATE="DATE",d.EXTRAS="EXTRAS",d.HTML="HTML",d.INTERESTS="INTERESTS",d.RADIO="RADIO",d.SELECT="SELECT",d.TEXT="TEXT",d.TEXTAREA="TEXTAREA",d.TICKET="TICKET",d.NUMBER="NUMBER",d))(ae||{});const qt=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Badge Image",value:"BADGE_IMAGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Confirmation",value:"CONFIRMATION"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"HTML",value:"HTML"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}],wl={class:"extrasList"},El=me({__name:"Extras",props:N({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:N(["change"],["update:modelValue"]),setup(d,{emit:x}){const k=d,{admin:O=!1,convention:S,disabled:h=!1}=k,E=fe(d,"modelValue"),V=x,P=Re.getInstance(),A=$({});try{A.value=JSON.parse(E.value)}catch{}const b=$([]),e=$([]);ne(k,()=>{L()}),ne(A.value,o=>{for(const w in o)if(o[w].checked){const n=b.value.map(u=>{var g;return(g=u.Options)==null?void 0:g.find(m=>m.OptionUUID===w)});if(n&&n.length>0)try{const u=n[0];o[w].choiceId===""&&u&&u.Choices&&u.Choices.length>0&&(o[w].choiceId=u.Choices[0].TagUUID),o[w].price=u==null?void 0:u.Price}catch{}}else o[w].choiceId="",o[w].price=0;E.value=JSON.stringify(o),s()});const y=Oe({get:()=>b.value.map(o=>o.ExtraUUID),set:()=>{}}),L=()=>{var w;const o=((w=k.items.find(n=>n.Title==="SelectedExtras"))==null?void 0:w.Value)||"[]";try{const n=JSON.parse(o);b.value=e.value.filter(u=>n.find(g=>g===u.ExtraUUID))||[],y.value=[...b.value.map(u=>u.ExtraUUID)],b.value.forEach(u=>{var g;(g=u.Options)==null||g.forEach(m=>{A.value[m.OptionUUID]||(A.value[m.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"Extras"in S&&S.Extras.length?(e.value=S.Extras,L()):"ConventionUUID"in S&&(O?P==null||P.getConventionExtras(S.ConventionUUID).then(o=>{o&&(e.value=o,L())}):P==null||P.getAvailableConventionExtras(S.ConventionUUID).then(o=>{o&&(e.value=o,L())}));const s=(o=void 0)=>{setTimeout(()=>V("change",o),100)};return(o,w)=>(t(),B("div",wl,[K("h4",null,Q(o.label),1),r(he,{opened:y.value,"onUpdate:opened":w[0]||(w[0]=n=>y.value=n)},{default:a(()=>[(t(!0),B(F,null,te(b.value,n=>(t(),T(Qe,{key:n.ExtraUUID,value:n.ExtraUUID},{activator:a(({props:u})=>[r(ve,Ue({"prepend-icon":"mdi:mdi-group","append-icon":"",ref_for:!0},u),{default:a(()=>[n.Name?(t(),T(Te,{key:0},{default:a(()=>[K("strong",null,Q(n.Name),1)]),_:2},1024)):q("",!0),n.Description?(t(),T(De,{key:1,class:"mt-2 d-inline"},{default:a(()=>[J(Q(n.Description),1)]),_:2},1024)):q("",!0)]),_:2},1040)]),default:a(()=>[n.Options?(t(!0),B(F,{key:0},te(n.Options,u=>(t(),T(ve,{key:u.OptionUUID,class:"override-pl"},{default:a(()=>[r(z,null,{default:a(()=>[r(Y,{cols:"12",sm:"6"},{default:a(()=>[r(be,{label:`${u.Name} ${u.Price&&u.Price!==0?`(${p(Ve).currencySymbol}${u.Price})`:""}`,modelValue:A.value[u.OptionUUID].checked,"onUpdate:modelValue":g=>A.value[u.OptionUUID].checked=g,disabled:p(h),"hide-details":"",onChange:s},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),u.Choices&&u.Choices.length>1&&A.value[u.OptionUUID].checked?(t(),T(Y,{key:0,cols:"12",sm:"6"},{default:a(()=>[r(Me,{items:u.Choices.sort((g,m)=>g.Title.localeCompare(m.Title)).map(g=>({value:g.TagUUID,title:g.Title})),modelValue:A.value[u.OptionUUID].choiceId,"onUpdate:modelValue":g=>A.value[u.OptionUUID].choiceId=g,"item-value":"value","item-title":"title",variant:"outlined",disabled:p(h),"hide-details":"",onChange:s},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):q("",!0)]),_:2},1024)]),_:2},1024))),128)):q("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]))}}),Al=["innerHTML"],Ml=me({__name:"HTML",props:{data:{}},setup(d){const x=d,k=$({html:""}),O=()=>{try{const S=JSON.parse(x.data);S&&(k.value=S)}catch{}};return O(),ne(x,()=>{O()}),(S,h)=>(t(),B("div",{innerHTML:k.value.html},null,8,Al))}}),$l={class:"interestList"},Ll=me({__name:"Interests",props:N({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:N(["change"],["update:modelValue"]),setup(d,{emit:x}){const k=d,{admin:O=!1,convention:S,disabled:h=!1}=k,E=fe(d,"modelValue"),V=x,P=Re.getInstance(),A=$({});try{A.value=JSON.parse(E.value)}catch{}const b=$([]),e=$([]);ne(A.value,o=>{E.value=JSON.stringify(o)});const y=$([]),L=()=>{var w;const o=((w=k.items.find(n=>n.Title==="SelectedInterests"))==null?void 0:w.Value)||"[]";try{const n=JSON.parse(o);b.value=e.value.filter(u=>n.find(g=>g===u.InterestUUID))||[],y.value=[...b.value.map(u=>u.InterestUUID)]}catch{}};"ConventionUUID"in S&&(O?P==null||P.getConventionInterests(S.ConventionUUID).then(o=>{o&&(e.value=o,L())}):P==null||P.getConventionInterests(S.ConventionUUID).then(o=>{o&&(e.value=o,L())})),ne(k,()=>{L()});const s=(o=void 0)=>{setTimeout(()=>V("change",o),100)};return(o,w)=>(t(),B("div",$l,[K("h4",null,Q(o.label),1),r(he,{opened:y.value,"onUpdate:opened":w[0]||(w[0]=n=>y.value=n)},{default:a(()=>[(t(!0),B(F,null,te(b.value.sort((n,u)=>n.Order>u.Order?1:n.Order==u.Order?0:-1),n=>(t(),T(ve,{key:n.InterestUUID},{default:a(()=>[r(z,null,{default:a(()=>[r(Y,null,{default:a(()=>[r(be,{label:`${n.Name} ${n.Price&&n.Price>0?`(${p(Ve).currencySymbol}${n.Price})`:""}`,modelValue:A.value[n.InterestUUID],"onUpdate:modelValue":u=>A.value[n.InterestUUID]=u,disabled:p(h),messages:n.Description,onChange:s},null,8,["label","modelValue","onUpdate:modelValue","disabled","messages"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])]))}}),Fe=(d,x,k)=>{if(k>=d.length){let O=k-d.length+1;for(;O--;)d.push(void 0)}d.splice(k,0,d.splice(x,1)[0])},Rl={class:"ticketList"},Ol={key:0,class:"text-orange-darken-1"},xl=me({__name:"Tickets",props:N({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:N(["change"],["update:modelValue"]),setup(d,{emit:x}){const k=d,{admin:O=!1,convention:S,disabled:h=!1,registrationGroup:E=void 0}=k,V=fe(d,"modelValue"),P=x,A=Re.getInstance(),b=$({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{b.value=JSON.parse(V.value),"ticket"in b.value&&(b.value.Ticket=b.value.ticket),"addonsChecked"in b.value&&(b.value.AddonsChecked=b.value.addonsChecked),"componentsChecked"in b.value&&(b.value.ComponentsChecked=b.value.componentsChecked)}catch{}const e=$([]),y=$([]),L=$([]),s=$({required:(g,m=void 0)=>()=>{if(h||!(E!=null&&E.Registration.Leader))return!0;if(m==null){if(b.value.Ticket.length===0&&k.required)return"Must select at least one ticket option.";if(g&&g.ComponentsRequired>0&&b.value.Ticket.includes(g.TicketUUID||"")){let H=0;if(g.TicketComponents.forEach(X=>{b.value.ComponentsChecked.forEach(W=>{X.TicketUUID===W&&(H+=1)})}),H<g.ComponentsRequired)return`Must select ticket ${g.ComponentsRequired} component${g.ComponentsRequired===1?"":"s"}`}}return!0}}),o=()=>{var m;const g=((m=k.items.find(H=>H.Title==="SelectedTickets"))==null?void 0:m.Value)||"[]";try{const H=JSON.parse(g);e.value=y.value.filter(X=>X.Type==="TICKET_TYPE_GROUP"&&H.find(W=>W===X.TicketUUID))||[],L.value=[...e.value.filter(X=>X.Type==="TICKET_TYPE_GROUP").map(X=>X.TicketUUID)]}catch{}};if("ConventionUUID"in S)if(O)A==null||A.getConventionTickets(S.ConventionUUID).then(g=>{g&&(y.value=g,o())});else{const g=k.items.find(m=>m.Title==="SelectedTickets");g&&(A==null||A.getFieldTickets(g.FieldUUID).then(m=>{m&&(y.value=m,o())}))}ne(k,()=>{o()});const w=g=>{b.value.Ticket.length>1&&b.value.Ticket.shift(),b.value.ComponentsChecked=[];const m=[];e.value.forEach(H=>{(b.value.Ticket.includes(H.TicketUUID)||b.value.ComponentsChecked.includes(H.TicketUUID))&&m.push(...H.AddonTickets.map(X=>X.TicketUUID))}),b.value.AddonsChecked=b.value.AddonsChecked.filter(H=>m.includes(H)),u(g)},n=g=>{const m=y.value.find(H=>H.TicketUUID===b.value.Ticket[0]);if(m)for(;b.value.ComponentsChecked.length>m.ComponentsRequired;)b.value.ComponentsChecked.shift();u(g)},u=(g=void 0)=>{V.value=JSON.stringify(b.value),setTimeout(()=>P("change",g),100)};try{E!=null&&E.TicketData&&(b.value=JSON.parse(E.TicketData),"ticket"in b.value&&(b.value.Ticket=b.value.ticket),"addonsChecked"in b.value&&(b.value.AddonsChecked=b.value.addonsChecked),"componentsChecked"in b.value&&(b.value.ComponentsChecked=b.value.componentsChecked),u())}catch{}return(g,m)=>{var H;return t(),B("div",Rl,[K("h4",null,[J(Q(g.label)+" ",1),(H=p(E))!=null&&H.Registration.Leader?q("",!0):(t(),B("small",Ol,"(controlled by group leader)"))]),r(he,{opened:L.value,"onUpdate:opened":m[4]||(m[4]=X=>L.value=X)},{default:a(()=>[(t(!0),B(F,null,te(p(Se)(e.value.filter(X=>X.Type===p(ml).TICKET_TYPE_GROUP)),X=>(t(),B(F,{key:X.TicketUUID},[X.Tickets.length>0?(t(),T(Qe,{key:0,value:X.TicketUUID},{activator:a(({props:W})=>[r(ve,Ue({ref_for:!0},W,{"prepend-icon":"mdi:mdi-group"}),{default:a(()=>[r(Te,null,{default:a(()=>[K("strong",null,Q(X.Name),1)]),_:2},1024),r(De,{class:"d-inline"},{default:a(()=>[J(Q(X.Description),1)]),_:2},1024)]),_:2},1040)]),default:a(()=>[(t(!0),B(F,null,te(X.Tickets,W=>(t(),T(ve,{key:W.TicketUUID,class:"override-pl"},{default:a(()=>{var ee;return[r(De,{class:"d-inline"},{default:a(()=>[J(Q(W.Description),1)]),_:2},1024),r(be,{modelValue:b.value.Ticket,"onUpdate:modelValue":m[0]||(m[0]=U=>b.value.Ticket=U),value:W.TicketUUID,onChange:w,rules:[s.value.required(W)],"validate-on":"submit",disabled:p(h)||!((ee=p(E))!=null&&ee.Registration.Leader)},{label:a(()=>[r(we,{icon:W.RequiresAccommodation?"mdi:mdi-home":W.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),J(" "+Q(`${W.Name} ${W.Price>0?`(${p(Ve).currencySymbol}${W.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),b.value.Ticket.length>0&&W.TicketUUID===b.value.Ticket[0]?(t(),B(F,{key:0},[W.AddonTickets.length?(t(),T(he,{key:0},{default:a(()=>[(t(!0),B(F,null,te(p(Se)(W.AddonTickets),U=>(t(),B(F,{key:U==null?void 0:U.TicketUUID},[U?(t(),T(ve,{key:0},{default:a(()=>[r(Te,null,{default:a(()=>{var I;return[r(be,{modelValue:b.value.AddonsChecked,"onUpdate:modelValue":m[1]||(m[1]=R=>b.value.AddonsChecked=R),value:U.TicketUUID,onChange:m[2]||(m[2]=R=>{b.value.ComponentsChecked=[],u(R)}),disabled:p(h)||!((I=p(E))!=null&&I.Registration.Leader)},{label:a(()=>[r(we,{icon:U.RequiresAccommodation?"mdi:mdi-home-plus":U.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),J(" "+Q(`${U.Name} ${U.Price>0?`(${p(Ve).currencySymbol}${U.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),r(De,{class:"d-inline"},{default:a(()=>[J(Q(U.Description),1)]),_:2},1024)]),_:2},1024)):q("",!0)],64))),128))]),_:2},1024)):q("",!0),W.TicketComponents.length?(t(),T(he,{key:1},{default:a(()=>[(t(!0),B(F,null,te(p(Se)(W.TicketComponents),U=>(t(),B(F,{key:U==null?void 0:U.TicketUUID},[U?(t(),T(ve,{key:0},{default:a(()=>[r(Te,null,{default:a(()=>{var I;return[r(be,{modelValue:b.value.ComponentsChecked,"onUpdate:modelValue":m[3]||(m[3]=R=>b.value.ComponentsChecked=R),value:U.TicketUUID,onChange:n,rules:[s.value.required(W,U)],"validate-on":"submit",disabled:p(h)||!((I=p(E))!=null&&I.Registration.Leader)},{label:a(()=>[r(we,{icon:U.RequiresAccommodation?"mdi:mdi-home-plus":U.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),J(" "+Q(`${U.Name} ${U.Price>0?`(${p(Ve).currencySymbol}${U.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),r(De,null,{default:a(()=>[J(Q(U.Description),1)]),_:2},1024)]),_:2},1024)):q("",!0)],64))),128))]),_:2},1024)):q("",!0)],64)):q("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):q("",!0)],64))),128))]),_:1},8,["opened"])])}}}),ql={key:0},Pl={class:"d-flex flex-wrap my-2"},Bl={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1 align-content-center"},Hl={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},Gl={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1"},Yl={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},Xl=["href"],Fl=me({__name:"Accommodation",props:N({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:N(["change","update:items"],["update:modelValue"]),setup(d,{emit:x}){const k=d,{admin:O=!1,convention:S,disabled:h}=k,E=x,V=fe(d,"modelValue"),P=ke(k,E,void 0,void 0,"items"),A=xe(),b=_e(),e=el.getInstance(),y=$(Ie(V.value)),L=$([]),s=$(),o=$({sharing:!1}),w=()=>{try{const c=JSON.parse(k.data);c&&(o.value=c)}catch{}};w(),ne(k,()=>{w(),k.registrationGroup&&(L.value=k.registrationGroup.Members,s.value=k.registrationGroup.Registration)}),ne(y,c=>{V.value=Ie(c)},{deep:!0});const n=$(""),u=$(!1),g=()=>{var c;(c=s.value)!=null&&c.Leader&&A.getRegistrationInvite(S.ConventionUUID).then(i=>{if(i){const se=new URL(location.href);se.searchParams.set("token",i),n.value=se.toString()}})},m=()=>{pl(n.value),g(),u.value=!0,setTimeout(()=>u.value=!1,2200)},H=(c=void 0)=>{setTimeout(()=>E("change",c),100)},X=$({required:c=>!k.required||c.length>0||"Selections Required"}),W=c=>c?`${c.Reference?`#${c.Reference}`:"(not registered)"} ${c.Name}`:"",ee=()=>{var c;e.emit("registration.group.leave",(c=s.value)==null?void 0:c.RegistrationUUID)},U=c=>{e.emit("registration.group.remove.member",c)},I=$([]);ne(P,()=>{R()});const R=()=>{O?A.getConventionAccommodation(S.ConventionUUID).then(c=>{I.value=c.filter(i=>!!(P!=null&&P.value.find(se=>se.Value===i.AccommodationUUID)))||[]}):P.value.length>0&&A.getFieldAccommodation(P.value[0].FieldUUID).then(c=>{I.value=c.filter(i=>!!(P!=null&&P.value.find(se=>se.Value===i.AccommodationUUID)))||[]})};R(),(()=>{var c;if(k.registrationGroup)if(L.value=k.registrationGroup.Members,s.value=k.registrationGroup.Registration,(c=s.value)!=null&&c.Leader)g();else try{y.value=JSON.parse(k.registrationGroup.AccommodationData),H()}catch{}})();const C=$({column:0,id:""}),j=()=>{!h&&!y.value.includes(C.value.id)&&(C.value.column===0&&C.value.id!==""&&y.value.push(C.value.id),H())},re=()=>{const c=y.value.findIndex(i=>i===C.value.id);!h&&c>=0&&(y.value.splice(c,1),H())},ce=()=>{if(h||C.value.column!==1)return;const c=y.value.findIndex(i=>i===C.value.id);c<=0||(Fe(y.value,c,c-1),H())},ge=()=>{if(h||C.value.column!==1)return;const c=y.value.findIndex(i=>i===C.value.id);c>=y.value.length-1||(Fe(y.value,c,c+1),H())};return(c,i)=>{var se;return t(),B(F,null,[K("h4",null,Q(c.label),1),r(z,null,{default:a(()=>[r(Y,{cols:"12"},{default:a(()=>{var G,le;return[L.value&&s.value&&o.value.sharing?(t(),B("div",ql,[i[16]||(i[16]=K("strong",null,"Your Sharing Group",-1)),!p(h)&&((G=L.value.find(_=>_.IsLeader))==null?void 0:G.UUID)!==s.value.RegistrationUUID?(t(),T(Z,{key:0,color:"red",variant:"text",onClick:ee},{default:a(()=>i[10]||(i[10]=[J("(leave group)")])),_:1})):q("",!0),K("dl",Pl,[i[12]||(i[12]=K("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 font-weight-bold pa-1 pt-4"}," Leader: ",-1)),K("dd",Bl,[r(Ge,{class:"rounded-circle d-inline-block",src:p(b).GetProfileImageURL(((le=L.value.find(_=>_.IsLeader))==null?void 0:le.UserUUID)||""),height:"32",width:"32"},null,8,["src"]),K("div",Hl,Q(W(L.value.find(_=>_.IsLeader))),1)]),(t(!0),B(F,null,te(L.value,_=>(t(),B(F,{key:_.UUID},[_.IsLeader?q("",!0):(t(),B(F,{key:0},[i[11]||(i[11]=K("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 pa-1 pt-4"}," Member: ",-1)),K("dd",Gl,[r(Ge,{class:"rounded-circle d-inline-block",src:p(b).GetProfileImageURL(_.UserUUID),height:"32",width:"32"},null,8,["src"]),K("div",Yl,[J(Q(W(_))+" ",1),s.value.Leader?(t(),T(Z,{key:0,variant:"text",class:"ml-4",icon:"mdi:mdi-close-circle",color:"red",size:"xs",title:"Remove Member",onClick:l=>U(_.UUID),disabled:p(h)},null,8,["onClick","disabled"])):q("",!0)])])],64))],64))),128))]),r(hl,{modelValue:u.value,"onUpdate:modelValue":i[0]||(i[0]=_=>u.value=_),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),n.value&&s.value.Leader&&!p(h)?(t(),B(F,{key:1},[K("a",{href:n.value,onClick:Ke(m,["prevent"]),class:"text-white text-decoration-none"},[r(Z,{color:"blue",class:"mb-2"},{default:a(()=>i[13]||(i[13]=[J("Get Invite Link")])),_:1})],8,Xl),i[14]||(i[14]=K("br",null,null,-1)),i[15]||(i[15]=K("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1))],64)):q("",!0)])):q("",!0)]}),_:1})]),_:1}),s.value&&!s.value.Leader?(t(),T(z,{key:0},{default:a(()=>[r(Y,{cols:"10",md:"5"},{default:a(()=>[i[17]||(i[17]=K("strong",null,"Your Groups Accommodation",-1)),i[18]||(i[18]=K("br",null,null,-1)),i[19]||(i[19]=K("small",null,"(in order of preference, controlled by group leader)",-1)),r(he,null,{default:a(()=>[(t(!0),B(F,null,te(y.value.map(G=>I.value.find(le=>le.AccommodationUUID==G)).filter(G=>G!==void 0),(G,le)=>(t(),B(F,null,[G?(t(),T(ve,{key:G.AccommodationUUID,title:`${le+1}. ${G.Name}`,class:Ce(C.value.column===1&&C.value.id===G.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):q("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(t(),T(z,{key:1},{default:a(()=>[r(Y,{cols:"12",md:"5"},{default:a(()=>[i[20]||(i[20]=K("strong",null,"Accommodation Options",-1)),i[21]||(i[21]=K("br",null,null,-1)),r(he,null,{default:a(()=>[(t(!0),B(F,null,te(I.value,G=>(t(),T(ve,{key:G.AccommodationUUID,title:G.Name,class:Ce(C.value.column===0&&C.value.id===G.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:le=>C.value={column:0,id:G.AccommodationUUID},"append-icon":p(h)?"":"mdi:mdi-gesture-tap",onDblclick:i[1]||(i[1]=le=>j())},null,8,["title","class","onClick","append-icon"]))),128))]),_:1})]),_:1}),p(h)?q("",!0):(t(),T(Y,{key:0,cols:"12",md:"1"},{default:a(()=>[r(z,{class:"d-md-none"},{default:a(()=>[r(Y,{cols:"12",class:"text-center"},{default:a(()=>[r(Z,{icon:"mdi:mdi-arrow-down",size:"small",onClick:i[2]||(i[2]=G=>j()),color:"primary",title:"Select"}),i[22]||(i[22]=J(" Â  ")),r(Z,{icon:"mdi:mdi-arrow-up",size:"small",onClick:i[3]||(i[3]=G=>re()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),r(z,{class:"d-none d-md-flex h-100 align-content-center"},{default:a(()=>[r(Y,{cols:"12"},{default:a(()=>[r(Z,{icon:"mdi:mdi-arrow-right",size:"small",onClick:i[4]||(i[4]=G=>j()),color:"primary",title:"Select"})]),_:1}),r(Y,{cols:"12"},{default:a(()=>[r(Z,{icon:"mdi:mdi-arrow-left",size:"small",onClick:i[5]||(i[5]=G=>re()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1})),r(Y,{cols:"10",md:"5"},{default:a(()=>[i[23]||(i[23]=K("strong",null,"Your Chosen Accommodation",-1)),r(he,null,{default:a(()=>[(t(!0),B(F,null,te(y.value.map(G=>I.value.find(le=>le.AccommodationUUID==G)).filter(G=>G!==void 0),(G,le)=>(t(),B(F,null,[G?(t(),T(ve,{key:G.AccommodationUUID,title:`${le+1}. ${G.Name}`,class:Ce(C.value.column===1&&C.value.id===G.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:_=>C.value={column:1,id:(G==null?void 0:G.AccommodationUUID)||""},"append-icon":p(h)?"":"mdi:mdi-gesture-tap",onDblclick:i[6]||(i[6]=_=>re())},null,8,["title","class","onClick","append-icon"])):q("",!0)],64))),256))]),_:1}),i[24]||(i[24]=K("small",null,"(in order of preference)",-1))]),_:1}),p(h)?q("",!0):(t(),T(Y,{key:1,cols:"2",md:"1"},{default:a(()=>[r(z,{class:"d-flex h-100 align-content-center mt-3"},{default:a(()=>[r(Y,{cols:"12"},{default:a(()=>[r(Z,{icon:"mdi:mdi-arrow-up",size:"small",onClick:i[7]||(i[7]=G=>ce()),color:"primary",title:"Higher Priority"})]),_:1}),r(Y,{cols:"12"},{default:a(()=>[r(Z,{icon:"mdi:mdi-arrow-down",size:"small",onClick:i[8]||(i[8]=G=>ge()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1}))]),_:1})),(se=s.value)!=null&&se.Leader?(t(),T(Le,{key:2,modelValue:V.value,"onUpdate:modelValue":i[9]||(i[9]=G=>V.value=G),disabled:p(h)||!1,"persistent-hint":c.persistentHint||!1,"error-messages":c.errorMessages||"",rules:[X.value.required],class:"accommodation-field-warning"},null,8,["modelValue","disabled","persistent-hint","error-messages","rules"])):q("",!0)],64)}}}),Jl=me({__name:"AgeCheck",props:N({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:N(["blur","change","update:items"],["update:modelValue"]),setup(d,{emit:x}){const k=x,O=d,S=ke(O,k,void 0,void 0,"items"),h=fe(d,"modelValue"),E=$({required:e=>!O.required||!!e||"Required.",min:e=>{var g,m;const y=new Date,L=y.getFullYear(),s=(y.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),o=y.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),w=((g=S.value.find(H=>H.Title=="MIN_AGE"))==null?void 0:g.Value)||"18",n=((m=S.value.find(H=>H.Title=="BEFORE_DATE"))==null?void 0:m.Value)||`${L}-${s}-${o}`,u=A(n);return P(e,n,parseInt(w))||`You must be at least ${w} years old by ${u.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),V=()=>(k("blur"),!(E.value.min(h.value||"")!==!0||E.value.required(h.value||"")!==!0)),P=(e,y,L)=>{if(e>=y)return!1;const s=A(e),w=A(y).getTime()-s.getTime(),n=1e3*60*60*24*365.25;return w/n>=L},A=e=>{const[y,L,s]=e.split("-");return new Date(parseInt(y),parseInt(L)-1,parseInt(s))},b=(e=void 0)=>{setTimeout(()=>k("change",e),100)};return(e,y)=>(t(),T(ye,{modelValue:h.value,"onUpdate:modelValue":y[0]||(y[0]=L=>h.value=L),type:"date",hint:e.hint||"",label:e.label||"",name:e.name||"",variant:"outlined",disabled:e.disabled||!1,"persistent-hint":e.persistentHint||!1,"error-messages":e.errorMessages||"",rules:[E.value.required,E.value.min],onBlur:V,onChange:b},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}});function Je(d){const x=JSON.parse(d),k={charge:0,free:0,height:0,label:!1,maximum:0,tags:[],width:0};return x&&(x.charge&&pe.isNumber(x.charge)&&(k.charge=x.charge),x.free&&pe.isNumber(x.free)&&(k.free=x.free),x.height&&pe.isNumber(x.height)&&(k.height=x.height),x.label&&pe.isBoolean(x.label)&&(k.label=x.label),x.maximum&&pe.isNumber(x.maximum)&&(k.maximum=x.maximum),x.tags&&Array.isArray(x.tags)&&(k.tags=x.tags),x.width&&pe.isNumber(x.width)&&(k.width=x.width)),k}const Wl={class:"text-center"},Kl={key:0},zl={key:0,class:"image-progress my-auto mx-auto"},jl=["onMousemove","onMousedown","onMouseup","onTouchstart","onTouchmove","onTouchend"],Ql=["src","onLoad","onDragstart","onKeydown","onKeyup"],Zl={key:0},_l={key:1},Nl=me({__name:"BadgeImage",props:N({disabled:{type:Boolean},hint:{},field:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registration:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:N(["blur","change","update:items"],["update:modelValue"]),setup(d,{emit:x}){var _;const k=x,O=d,S=fe(d,"modelValue"),h=$([]),E=$({charge:0,free:0,height:0,label:!1,maximum:0,tags:[],width:0}),V=$(1),P=xe(),A=_e(),b=Ae("badgeImageForm"),e=$(""),y=$([]),L=Ae("imageFileInput"),s=$([]),o=$([]),w=$([]),n=$(0),u=$(),g=$({imageNo:0,imageX:0,imageY:0,mouseDown:!1,mouseX:0,mouseY:0}),m=$(280),H=$(280),X=l=>{if(!s.value||l+1>s.value.length||!s.value[l])return;const D=s.value[l],v=h.value[l];v.left=parseInt(getComputedStyle(D).left),v.top=parseInt(getComputedStyle(D).top),v.height=D.height,v.width=D.width,S.value=JSON.stringify(h.value)},W=Oe(()=>({"--preview-width":`${H.value}px`,"--preview-height":`${m.value}px`})),ee=$([!1]);try{h.value=JSON.parse(S.value||"[]"),pe.isArray(h.value)||(pe.isObject(h.value)?h.value=[h.value]:h.value=[]),h.value.forEach((l,D)=>{l.fileUUID&&(o.value[D]=A.GetBadgeImageURL(l.fileUUID)),l.values||(O.field&&O.field.Values?l.values=O.field.Values.map(v=>({key:v.Value,value:""})):l.values=[]),O.field&&O.field.Values&&O.field.Values.forEach(v=>{l.values.find(f=>{if(f.key==v.Value)return!0})||l.values.push({key:v.Value,value:""})})}),V.value=h.value.length,O.field&&"Data"in O.field&&(E.value=Je(((_=O.field)==null?void 0:_.Data)||"")),V.value===0&&E.value.maximum===1&&(V.value=1)}catch{}O.registration&&P.getConBadgeDisplayName(O.registration.RegistrationUUID).then(l=>{l&&(e.value=l)}).catch(()=>{});const U=(l,D)=>{s.value[l]=D},I=l=>{var D;try{l.field&&"Data"in l.field&&(E.value=Je(((D=l.field)==null?void 0:D.Data)||"")),E.value.height&&(m.value=E.value.height),E.value.width&&(H.value=E.value.width)}catch{}R()},R=()=>{if(V.value>h.value.length)for(let l=0;l<V.value-h.value.length;l+=1){let D=[];O.field&&O.field.Values&&(D=O.field.Values.map(v=>({key:v.Value,value:""}))),h.value.push({fileUUID:"",height:0,label:"",left:0,top:0,values:D,width:0})}else V.value<h.value.length&&V.value>=0&&(h.value=h.value.slice(0,V.value));if(V.value>y.value.length){const l=y.value.length;for(let D=0;D<V.value-l;D+=1)y.value.push(!0)}else V.value<y.value.length&&V.value>=0&&(y.value=y.value.slice(0,V.value));if(V.value>o.value.length){const l=o.value.length;for(let D=0;D<V.value-l;D+=1)o.value.push("")}else V.value<o.value.length&&V.value>=0&&(o.value=o.value.slice(0,V.value));if(V.value>w.value.length){const l=w.value.length;for(let D=0;D<V.value-l;D+=1)w.value.push(!1)}else V.value<w.value.length&&V.value>=0&&(w.value=w.value.slice(0,V.value));if(V.value>ee.value.length){const l=ee.value.length;for(let D=0;D<V.value-l;D+=1)ee.value.push(!1)}else V.value<ee.value.length&&V.value>=0&&(ee.value=ee.value.slice(0,V.value));S.value=JSON.stringify(h.value)};ne(O,l=>{I(l)}),I(O),ne(V,()=>{R()});const M=$({required:l=>!O.required||!!l||"Required.",saved:l=>!y.value[l]||"File not uploaded."}),C=()=>(k("blur"),M.value.required(S.value||"")!==!0),j=(l,D=void 0)=>{h.value[l].top=0,h.value[l].left=0,h.value[l].width=0,h.value[l].height=0,ce(l).then(()=>{setTimeout(()=>{re(l)},100),setTimeout(()=>k("change",D),200)}).catch(()=>{})},re=l=>{if(!L.value)return;const v=L.value[l].$el.getElementsByTagName("input")[0];v&&v.files.length>0&&(o.value[l]=URL.createObjectURL(v.files[0]))},ce=async l=>{if(!b.value||!b.value[l])return;const D=new FormData(b.value[l].$el);y.value[l]=!1,w.value[l]=!0;const v=await A.SaveFormFile(D);v.Saved&&(w.value[l]=!1,y.value[l]=!0,h.value[l].fileUUID=v.FileUUID,ee.value[l]=!0)},ge=(l,D)=>{const v=D.target;v.style.left="0px",v.style.top="0px",v.width>v.height?v.width=H.value*(v.width/v.height):v.width=H.value,v.classList.remove("d-none"),l>=0&&l<V.value&&X(l)},c=(l,D,v=0,ie=void 0)=>{if(ie&&ie.type)switch(ie.type){case"touchstart":case"touchend":ie.preventDefault();break}let f=500;if(!n.value)n.value=Date.now();else{const de=Date.now()-n.value;de>=3e3?f=1:de>=2500?f=2:de>=2e3?f=5:de>=1500?f=12:de>=1e3?f=25:de>=500?f=50:de>=250&&(f=100)}if(v!==f&&(clearInterval(u.value),u.value=setInterval(()=>{c(l,D,f)},f)),!s.value)return;const ue=s.value[l];switch(D){case 0:n.value=0,clearInterval(u.value),X(l);break;case 6:s.value&&s.value[l]&&(ue.width-=1);break;case 5:s.value&&s.value[l]&&(ue.width+=1);break;case 1:s.value&&s.value[l]&&(ue.style.top=`${(parseInt(getComputedStyle(ue).top)||0)-1}px`);break;case 2:s.value&&s.value[l]&&(ue.style.left=`${(parseInt(getComputedStyle(ue).left)||0)+1}px`);break;case 3:s.value&&s.value[l]&&(ue.style.top=`${(parseInt(getComputedStyle(ue).top)||0)+1}px`);break;case 4:s.value&&s.value[l]&&(ue.style.left=`${(parseInt(getComputedStyle(ue).left)||0)-1}px`);break}se(l)},i=(l,D)=>{l===-1&&(l=g.value.imageNo);const v=s.value[l];switch(D.type){case"touchstart":D.preventDefault(),s.value&&s.value[l]&&(g.value.imageX=parseInt(getComputedStyle(s.value[l]).left)),s.value&&s.value[l]&&(g.value.imageY=parseInt(getComputedStyle(s.value[l]).top)),g.value.mouseX=D.touches[0].clientX,g.value.mouseY=D.touches[0].clientY,g.value.mouseDown=!0;break;case"mousedown":g.value.imageNo=l,s.value&&s.value[l]&&(g.value.imageX=parseInt(getComputedStyle(s.value[l]).left)),s.value&&s.value[l]&&(g.value.imageY=parseInt(getComputedStyle(s.value[l]).top)),g.value.mouseX=D.clientX,g.value.mouseY=D.clientY,g.value.mouseDown=!0;break;case"touchend":D.preventDefault();case"mouseup":g.value.mouseDown=!1,X(l);break;case"touchmove":if(!g.value.mouseDown)return;s.value&&s.value[l]&&(v.style.left=`${g.value.imageX+(D.touches[0].clientX-g.value.mouseX)}px`),s.value&&s.value[l]&&(v.style.top=`${g.value.imageY+(D.touches[0].clientY-g.value.mouseY)}px`);break;case"mousemove":if(!g.value.mouseDown)return;s.value&&s.value[l]&&(v.style.left=`${g.value.imageX+(D.clientX-g.value.mouseX)}px`),s.value&&s.value[l]&&(v.style.top=`${g.value.imageY+(D.clientY-g.value.mouseY)}px`);break;case"dragstart":D.preventDefault();break;case"keydown":switch(D.key){case"ArrowUp":D.preventDefault(),c(l,1);break;case"ArrowRight":D.preventDefault(),c(l,2);break;case"ArrowDown":D.preventDefault(),c(l,3);break;case"ArrowLeft":D.preventDefault(),c(l,4);break;case"+":D.preventDefault(),c(l,5);break;case"-":D.preventDefault(),c(l,6);break}break;case"keyup":c(l,0),X(l);break}se(l)},se=l=>{if(s.value&&s.value[l]){if(l+1>s.value.length)return;const D=s.value[l];if(D.width<H.value&&(D.width=H.value),D.height<m.value){const v=m.value-D.height,ie=D.width/D.height;D.width+=Math.ceil(v*ie)}(parseInt(getComputedStyle(s.value[l]).left)||0)>0&&(D.style.left="0px"),(parseInt(getComputedStyle(s.value[l]).top)||0)>0&&(D.style.top="0px"),(parseInt(getComputedStyle(s.value[l]).left)||0)<0-(D.width-H.value)&&(D.style.left=`${0-(D.width-H.value)}px`),(parseInt(getComputedStyle(s.value[l]).top)||0)<0-(D.height-m.value)&&(D.style.top=`${0-(D.height-m.value)}px`)}},G=l=>{try{clearInterval(u.value)}catch{}g.value.mouseDown=!1,n.value=0,X(g.value.imageNo)},le=l=>{i(-1,l)};return window.addEventListener("mouseup",G),window.addEventListener("mousemove",le),window.addEventListener("touchend",G),window.addEventListener("touchmove",le),ll(()=>{window.removeEventListener("mouseup",G),window.removeEventListener("mousemove",le),window.removeEventListener("touchend",G),window.removeEventListener("touchmove",le)}),(l,D)=>(t(),B("div",null,[(t(!0),B(F,null,te(V.value,v=>(t(),B("div",{style:tl(W.value),key:v},[r(Ne,{ref_for:!0,ref:"badgeImageForm",enctype:"multipart/form-data"},{default:a(()=>{var ie;return[r(z,null,{default:a(()=>[r(Y,null,{default:a(()=>[r(yl,{label:l.label||"",hint:l.hint||"",name:l.name?"name":"badgeFile",variant:"outlined",ref_for:!0,ref:"imageFileInput",accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp",rules:[M.value.required],"error-messages":l.errorMessages||"","persistent-hint":l.persistentHint||!1,disabled:!y.value[v-1]||l.disabled||!1,"hide-details":"",onChange:f=>j(v-1,f),onBlur:C},null,8,["label","hint","name","rules","error-messages","persistent-hint","disabled","onChange"]),K("p",Wl,[y.value[v-1]?q("",!0):(t(),B("small",Kl,"File Uploading"))])]),_:2},1024)]),_:2},1024),E.value.label?(t(),T(z,{key:0},{default:a(()=>[r(Y,null,{default:a(()=>[r(ye,{label:"Display Name",variant:"outlined","prepend-icon":"mdi:mdi-label-outline","hide-details":"",modelValue:h.value[v-1].label,"onUpdate:modelValue":f=>h.value[v-1].label=f,onInput:f=>X(v-1),onChange:f=>X(v-1)},null,8,["modelValue","onUpdate:modelValue","onInput","onChange"])]),_:2},1024)]),_:2},1024)):q("",!0),(ie=l.field)!=null&&ie.Multiple&&l.field.Values.length>0?(t(),T(z,{key:1},{default:a(()=>[(t(!0),B(F,null,te(l.field.Values,(f,ue)=>(t(),T(Y,{cols:"12",sm:"6",md:"6",lg:"4",xl:"3",xxl:"2",key:f.FieldValueUUID},{default:a(()=>[r(ye,{label:f.Title,variant:"outlined","prepend-icon":"mdi:mdi-label-outline","hide-details":"",modelValue:h.value[v-1].values[ue].value,"onUpdate:modelValue":de=>h.value[v-1].values[ue].value=de,onInput:de=>X(v-1),onChange:de=>X(v-1)},null,8,["label","modelValue","onUpdate:modelValue","onInput","onChange"])]),_:2},1024))),128))]),_:2},1024)):q("",!0),r(z,{class:"justify-center scale-down"},{default:a(()=>[r(Y,{cols:"12",class:"text-center"},{default:a(()=>[D[3]||(D[3]=J(" Preview ")),w.value[v-1]?(t(),B("div",zl,[r(fl,{indeterminate:"",color:"primary",size:128,width:10},{default:a(()=>D[2]||(D[2]=[J("Uploading")])),_:1})])):(t(),B(F,{key:1},[K("div",{class:"image-preview my-auto mx-auto",onMousemove:f=>i(v-1,f),onMousedown:f=>i(v-1,f),onMouseup:f=>i(v-1,f),onTouchstart:f=>i(v-1,f),onTouchmove:f=>i(v-1,f),onTouchend:f=>i(v-1,f)},[K("img",{src:o.value[v-1],ref_for:!0,ref:f=>U(v-1,f),alt:"Your badge image",onLoad:f=>ge(v-1,f),onDragstart:f=>i(v-1,f),onKeydown:f=>i(v-1,f),onKeyup:f=>i(v-1,f),tabindex:"0",class:"d-none"},null,40,Ql)],40,jl),E.value.label?(t(),B("h3",Zl,Q(h.value[v-1].label),1)):(t(),B("h3",_l,Q(e.value),1))],64))]),_:2},1024)]),_:2},1024),ee.value[v-1]?(t(),T(z,{key:2,class:"justify-center"},{default:a(()=>[r(Y,{cols:"12",class:"d-flex justify-space-between",style:{"max-width":"280px"}},{default:a(()=>[r(Z,{icon:"mdi:mdi-arrow-left",color:"primary",onMousedown:f=>c(v-1,4,0,f),onMouseup:f=>c(v-1,0,0,f),onTouchstart:f=>c(v-1,4,0,f),onTouchend:f=>c(v-1,0,0,f)},null,8,["onMousedown","onMouseup","onTouchstart","onTouchend"]),r(Z,{icon:"mdi:mdi-arrow-up",color:"secondary",onMousedown:f=>c(v-1,1,0,f),onMouseup:f=>c(v-1,0,0,f),onTouchstart:f=>c(v-1,1,0,f),onTouchend:f=>c(v-1,0,0,f)},null,8,["onMousedown","onMouseup","onTouchstart","onTouchend"]),r(Z,{icon:"mdi:mdi-arrow-down",color:"secondary",onMousedown:f=>c(v-1,3,0,f),onMouseup:f=>c(v-1,0,0,f),onTouchstart:f=>c(v-1,3,0,f),onTouchend:f=>c(v-1,0,0,f)},null,8,["onMousedown","onMouseup","onTouchstart","onTouchend"]),r(Z,{icon:"mdi:mdi-arrow-right",color:"primary",onMousedown:f=>c(v-1,2,0,f),onMouseup:f=>c(v-1,0,0,f),onTouchstart:f=>c(v-1,2,0,f),onTouchend:f=>c(v-1,0,0,f)},null,8,["onMousedown","onMouseup","onTouchstart","onTouchend"])]),_:2},1024)]),_:2},1024)):q("",!0),ee.value[v-1]?(t(),T(z,{key:3,class:"justify-center"},{default:a(()=>[r(Y,{cols:"12",class:"d-flex justify-space-between",style:{"max-width":"280px"}},{default:a(()=>[r(Z,{icon:"mdi:mdi-plus",color:"primary",onMousedown:f=>c(v-1,5,0,f),onMouseup:f=>c(v-1,0,0,f),onTouchstart:f=>c(v-1,5,0,f),onTouchend:f=>c(v-1,0,0,f)},null,8,["onMousedown","onMouseup","onTouchstart","onTouchend"]),r(Z,{icon:"mdi:mdi-minus",color:"secondary",onMousedown:f=>c(v-1,6,0,f),onMouseup:f=>c(v-1,0,0,f),onTouchstart:f=>c(v-1,6,0,f),onTouchend:f=>c(v-1,0,0,f)},null,8,["onMousedown","onMouseup","onTouchstart","onTouchend"])]),_:2},1024)]),_:2},1024)):q("",!0)]}),_:2},1024)],4))),128)),E.value.maximum===0||E.value.maximum>1?(t(),T(z,{key:0},{default:a(()=>[r(Y,{class:"text-right"},{default:a(()=>[r(Ye,{text:"Add Badge",location:"top"},{activator:a(({props:v})=>[r(Z,Ue({color:"success",icon:"mdi:mdi-plus",size:"xs",variant:"flat",disabled:l.disabled||V.value>=E.value.maximum&&E.value.maximum>0||!1},v,{onClick:D[0]||(D[0]=ie=>V.value<E.value.maximum||E.value.maximum===0?V.value+=1:null)}),null,16,["disabled"])]),_:1})]),_:1}),r(Y,null,{default:a(()=>[r(Ye,{text:"Remove Badge",location:"top"},{activator:a(({props:v})=>[r(Z,Ue({color:"error",icon:"mdi:mdi-minus",size:"xs",variant:"flat",disabled:l.disabled||V.value==0||!1},v,{onClick:D[1]||(D[1]=ie=>V.value>=1?V.value-=1:null)}),null,16,["disabled"])]),_:1})]),_:1})]),_:1})):q("",!0)]))}}),et=Ul(Nl,[["__scopeId","data-v-81eaabc8"]]),lt=me({__name:"Confirmation",props:N({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:N(["blur","change","update:items"],["update:modelValue"]),setup(d,{emit:x}){const k=x,O=d,S=ke(O,k,void 0,void 0,"items"),h=fe(d,"modelValue"),E=$({mustMatch:A=>{var L,s,o;const b=((L=S.value.find(w=>w.Title=="CASE_SENSITIVE"))==null?void 0:L.Value)||!1,e=((s=S.value.find(w=>w.Title=="MUST_MATCH"))==null?void 0:s.Value)||!1,y=((o=S.value.find(w=>w.Title=="MATCH_STRING"))==null?void 0:o.Value)||"";return!e||b&&y==A||!b&&y.toLocaleLowerCase()==A.toLocaleLowerCase()||"You must enter the text specified to proceed."},required:A=>!O.required||!!A||"Required."}),V=()=>(k("blur"),E.value.mustMatch(h.value||"")===!0&&E.value.required(h.value||"")===!0),P=(A=void 0)=>{setTimeout(()=>k("change",A),100)};return(A,b)=>(t(),T(ye,{modelValue:h.value,"onUpdate:modelValue":b[0]||(b[0]=e=>h.value=e),type:"text",hint:A.hint||"",label:A.label||"",name:A.name||"",variant:"outlined",disabled:A.disabled||!1,"persistent-hint":A.persistentHint||!1,"error-messages":A.errorMessages||"",rules:[E.value.required,E.value.mustMatch],onBlur:V,onChange:P},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),tt=je({...rl({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),at=ze()({name:"VRadio",props:tt(),setup(d,x){let{slots:k}=x;return Ze(()=>{const O=$e.filterProps(d);return r($e,Ue(O,{class:["v-radio",d.class],style:d.style,type:"radio"}),k)}),{}}}),nt=je({height:{type:[Number,String],default:"auto"},...gl(),...ul(dl(),["multiple"]),trueIcon:{type:qe,default:"$radioOn"},falseIcon:{type:qe,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),st=ze()({name:"VRadioGroup",inheritAttrs:!1,props:nt(),emits:{"update:modelValue":d=>!0},setup(d,x){let{attrs:k,slots:O}=x;const S=al(),h=Oe(()=>d.id||`radio-group-${S}`),E=nl(d,"modelValue");return Ze(()=>{const[V,P]=sl(k),A=Le.filterProps(d),b=$e.filterProps(d),e=O.label?O.label({label:d.label,props:{for:h.value}}):d.label;return r(Le,Ue({class:["v-radio-group",d.class],style:d.style},V,A,{modelValue:E.value,"onUpdate:modelValue":y=>E.value=y,id:h.value}),{...O,default:y=>{let{id:L,messagesId:s,isDisabled:o,isReadonly:w}=y;return r(F,null,[e&&r(bl,{id:L.value},{default:()=>[e]}),r(vl,Ue(b,{id:L.value,"aria-describedby":s.value,defaultsTarget:"VRadio",trueIcon:d.trueIcon,falseIcon:d.falseIcon,type:d.type,disabled:o.value,readonly:w.value,"aria-labelledby":e?L.value:void 0,multiple:!1},P,{modelValue:E.value,"onUpdate:modelValue":n=>E.value=n}),O)])}})}),{}}}),We=me({__name:"FormField",props:N({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:N(["change","input","update:field"],["update:modelValue"]),setup(d,{emit:x}){const k=d,{admin:O=!1,disabled:S=!1,persistentHint:h=!1,required:E=!1}=k,V=$(""),P=fe(d,"modelValue"),A=x,b=ke(k,A,void 0,void 0,"field"),e=$(Ie(b.value)),y=$({maxlength:n=>!k.maxLength||n.length<=k.maxLength||`Maximum length is ${k.maxLength} characters. (Current length: ${n.length})`,minlength:n=>!k.minLength||n.length>=k.minLength||`Minimum length is ${k.minLength} characters. (Current length: ${n.length})`,required:n=>!k.required||!!n.replace(/\s/g,"")||"Required field."}),L=$(!1),s=$([]),o=$("");try{const n=JSON.parse(P.value);Array.isArray(n)?s.value=n:s.value=[],typeof n=="boolean"?L.value=n:L.value=!1,o.value=P.value}catch{L.value=!1,s.value=[],o.value=P.value}ne(L,()=>{P.value=JSON.stringify(L.value),A("input"),A("change")}),ne(s,()=>{P.value=JSON.stringify(s.value),A("input"),A("change")},{deep:!0}),ne(o,()=>{P.value=o.value,A("input"),A("change")}),ne(b.value,()=>{e.value.Type!==b.value.Type?(e.value=Ie(b.value),L.value=!1,s.value=[],o.value=""):e.value=Ie(b.value)});const w=(n=void 0)=>{A("change",n)};return(n,u)=>{var g;return e.value.Type===p(ae).TEXT?(t(),T(ye,{key:0,modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=m=>o.value=m),name:n.name||"",hint:e.value.Hint,label:`${e.value.Label}${p(E)?"*":""}`,placeholder:e.value.Placeholder,variant:"outlined",disabled:p(S)||!1,"persistent-hint":p(h)||!1,"error-messages":V.value,rules:[y.value.maxlength,y.value.minlength,y.value.required],onChange:w,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):e.value.Type===p(ae).DATE?(t(),T(ye,{key:1,modelValue:o.value,"onUpdate:modelValue":u[1]||(u[1]=m=>o.value=m),type:"date",name:n.name||"",hint:e.value.Hint,label:e.value.Label,placeholder:e.value.Placeholder,variant:"outlined",disabled:p(S)||!1,"persistent-hint":p(h)||!1,"error-messages":V.value,rules:[y.value.maxlength,y.value.minlength,y.value.required],onChange:w,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):e.value.Type===p(ae).NUMBER?(t(),T(ye,{key:2,modelValue:o.value,"onUpdate:modelValue":u[2]||(u[2]=m=>o.value=m),type:"number",name:n.name||"",hint:e.value.Hint,label:e.value.Label,placeholder:e.value.Placeholder,variant:"outlined",disabled:p(S)||!1,"persistent-hint":p(h)||!1,"error-messages":V.value,rules:[y.value.maxlength,y.value.minlength,y.value.required],onChange:w,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):e.value.Type===p(ae).TEXTAREA?(t(),T(Il,{key:3,modelValue:o.value,"onUpdate:modelValue":u[3]||(u[3]=m=>o.value=m),name:n.name||"",hint:e.value.Hint,label:e.value.Label,placeholder:e.value.Placeholder,variant:"outlined",disabled:p(S)||!1,"persistent-hint":p(h)||!1,"error-messages":V.value,rules:[y.value.maxlength,y.value.minlength,y.value.required],onChange:w,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):e.value.Type===p(ae).CHECKBOX?(t(),B(F,{key:4},[e.value.Multiple?(t(!0),B(F,{key:0},te(e.value.Values,m=>(t(),T(be,{key:m.ID,modelValue:s.value,"onUpdate:modelValue":u[4]||(u[4]=H=>s.value=H),name:n.name||"",hint:e.value.Hint,label:m.Title,value:m.Value,disabled:p(S)||!1,"persistent-hint":p(h),"error-messages":V.value,rules:[y.value.required],onChange:w},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(t(),T(be,{key:1,modelValue:L.value,"onUpdate:modelValue":u[5]||(u[5]=m=>L.value=m),name:n.name||"",hint:e.value.Hint,label:e.value.Label,disabled:p(S)||!1,"persistent-hint":p(h),"error-messages":V.value,required:p(E),rules:[m=>!p(E)||!!m||"You must tick to continue!"],onChange:w},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):e.value.Type===p(ae).SELECT?(t(),B(F,{key:5},[!e.value.Autofill&&e.value.Multiple?(t(),T(Me,{key:0,modelValue:s.value,"onUpdate:modelValue":u[6]||(u[6]=m=>s.value=m),name:n.name||"",hint:e.value.Hint,label:e.value.Label,multiple:"",items:e.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:p(S)||!1,"persistent-hint":p(h)||!1,"error-messages":V.value,rules:[y.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):e.value.Autofill&&e.value.Multiple?(t(),T(Xe,{key:1,modelValue:s.value,"onUpdate:modelValue":u[7]||(u[7]=m=>s.value=m),name:n.name||"",hint:e.value.Hint,label:e.value.Label,multiple:"",items:e.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:p(S)||!1,"persistent-hint":p(h)||!1,"error-messages":V.value,rules:[y.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):e.value.Autofill?e.value.Autofill?(t(),T(Xe,{key:3,modelValue:o.value,"onUpdate:modelValue":u[9]||(u[9]=m=>o.value=m),name:n.name||"",hint:e.value.Hint,label:e.value.Label,items:e.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:p(S)||!1,"persistent-hint":p(h)||!1,"error-messages":V.value,rules:[y.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):q("",!0):(t(),T(Me,{key:2,modelValue:o.value,"onUpdate:modelValue":u[8]||(u[8]=m=>o.value=m),name:n.name||"",hint:e.value.Hint,label:e.value.Label,items:e.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:p(S)||!1,"persistent-hint":p(h)||!1,"error-messages":V.value,rules:[y.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):e.value.Type===p(ae).RADIO?(t(),T(st,{key:6,modelValue:o.value,"onUpdate:modelValue":u[10]||(u[10]=m=>o.value=m),name:n.name||"",hint:e.value.Hint,label:e.value.Label,disabled:p(S)||!1,"persistent-hint":p(h),"error-messages":V.value,rules:[y.value.required],onChange:w},{default:a(()=>[(t(!0),B(F,null,te(e.value.Values,m=>(t(),T(at,{key:m.Value,label:m.Title,value:m.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):e.value.Type===p(ae).ACCOMMODATION?(t(),T(Fl,{key:7,modelValue:s.value,"onUpdate:modelValue":u[11]||(u[11]=m=>s.value=m),name:n.name,admin:p(O),convention:n.convention,"registration-group":n.registrationGroup,data:n.field.Data,hint:e.value.Hint,label:e.value.Label,items:e.value.Values,disabled:p(S)||!1,"persistent-hint":p(h),"error-messages":V.value,required:p(E),onChange:w},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages","required"])):e.value.Type===p(ae).AGE?(t(),T(Jl,{key:8,modelValue:o.value,"onUpdate:modelValue":u[12]||(u[12]=m=>o.value=m),name:n.name,hint:e.value.Hint,label:e.value.Label,items:e.value.Values,disabled:p(S)||!1,"persistent-hint":p(h),"error-messages":V.value,onChange:w},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):e.value.Type===p(ae).BADGE_IMAGE?(t(),T(et,{key:9,modelValue:o.value,"onUpdate:modelValue":u[13]||(u[13]=m=>o.value=m),name:n.name,field:e.value,registration:(g=n.registrationGroup)==null?void 0:g.Registration,hint:e.value.Hint,label:e.value.Label,items:e.value.Values,disabled:p(S)||!1,"persistent-hint":p(h),"error-messages":V.value,onChange:w},null,8,["modelValue","name","field","registration","hint","label","items","disabled","persistent-hint","error-messages"])):e.value.Type===p(ae).CONFIRMATION?(t(),T(lt,{key:10,modelValue:o.value,"onUpdate:modelValue":u[14]||(u[14]=m=>o.value=m),name:n.name,hint:e.value.Hint,label:e.value.Label,items:e.value.Values,disabled:p(S)||!1,"persistent-hint":p(h),"error-messages":V.value,onChange:w},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):e.value.Type===p(ae).EXTRAS?(t(),T(El,{key:11,modelValue:o.value,"onUpdate:modelValue":u[15]||(u[15]=m=>o.value=m),admin:p(O),convention:n.convention,name:n.name,hint:e.value.Hint,label:e.value.Label,items:e.value.Values,disabled:p(S)||!1,"persistent-hint":p(h),"error-messages":V.value,required:p(E),onChange:w},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):e.value.Type===p(ae).INTERESTS?(t(),T(Ll,{key:12,modelValue:o.value,"onUpdate:modelValue":u[16]||(u[16]=m=>o.value=m),admin:p(O),convention:n.convention,name:n.name,hint:e.value.Hint,label:e.value.Label,items:e.value.Values,disabled:p(S)||!1,"persistent-hint":p(h),"error-messages":V.value,required:p(E),onChange:w},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):e.value.Type===p(ae).TICKET?(t(),T(xl,{key:13,modelValue:o.value,"onUpdate:modelValue":u[17]||(u[17]=m=>o.value=m),admin:p(O),convention:n.convention,name:n.name,"registration-group":n.registrationGroup,hint:e.value.Hint,label:e.value.Label,items:e.value.Values,disabled:p(S)||!1,"persistent-hint":p(h),"error-messages":V.value,required:p(E),onChange:w},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):e.value.Type===p(ae).HTML?(t(),T(Ml,{key:14,data:n.field.Data},null,8,["data"])):q("",!0)}}}),ut={key:0,class:"my-2 text-white text-center"},ot={key:1,class:"admin-header my-2 text-white text-center"},it=["innerHTML"],rt=["innerHTML"],Pt=me({__name:"FormRenderer",props:N({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:N(["close"],["update:modelValue"]),setup(d,{emit:x}){const{clearConventionCache:k}=cl(),O=x,S=fe(d,"modelValue");Be(S.value.Sections),S.value.Sections.forEach(U=>{U.Fields&&Be(U.Fields)});const h=Ae("formValidator"),E=Dl(),V=xe(),P=$(!1),A=$(!1),b=$(!1),e=$(!1),y=$(!1),L=$(!1),s=$(!1),o=$(!1),w=$(!1),n=$(!1),u=$(!1),g=$((()=>{if(d.data!==void 0){const I=Ie(d.data);return S.value.Sections.forEach(R=>{R.Fields&&R.Fields.forEach(M=>{const C=d.data.Data.find(j=>j.SectionFieldUUID===M.SectionFieldUUID&&j.SectionFieldUUID==M.SectionFieldUUID);if(C)M.Value=C.Data;else{const j={ID:0,SubmissionDataUUID:Ee(),SubmissionID:d.data.ID,SubmissionUUID:d.data.SubmissionUUID,SectionID:R.ID,SectionUUID:R.SectionUUID,SectionFieldID:M.ID,SectionFieldUUID:M.SectionFieldUUID,Data:M.Value,CreatedAt:"",DeletedAt:"",UpdatedAt:""};I.Data.push(j),M.Value=""}})}),I}const U={ID:0,SubmissionUUID:Ee(),FormID:S.value.ID,FormUUID:S.value.FormUUID,UserID:(E==null?void 0:E.ID)||0,UserUUID:(E==null?void 0:E.UserUUID)||"",Data:[],Status:il.SUBMISSION_STATUS_OPEN};return U.Data=S.value.Sections.map(I=>I.Fields?I.Fields.map(R=>({ID:0,SubmissionDataUUID:Ee(),SubmissionID:U.ID,SubmissionUUID:U.SubmissionUUID,SectionID:I.ID,SectionUUID:I.SectionUUID,SectionFieldID:R.ID,SectionFieldUUID:R.SectionFieldUUID,Data:""})):[]).flat(),U})()),m=(U,I,R)=>{const M=g.value.Data.find(C=>C.SectionUUID===U&&C.SectionFieldUUID===I);M&&(M.Data=R)},H=(U,I,R,M,C)=>U!=null&&U.State.Independent?"/":U&&U.Type===oe.FORM_TYPE_REGISTRATION?I&&!I.State.Independent&&(I.State.New||I.State.Edit)?`/register/${d.convention.Slug||d.convention.ConventionUUID}/accommodation`:R&&!R.State.Independent&&(R.State.New||R.State.Edit)?`/register/${d.convention.Slug||d.convention.ConventionUUID}/dealer`:M&&!M.State.Independent&&(M.State.New||M.State.Edit)?`/register/${d.convention.Slug||d.convention.ConventionUUID}/badge`:C&&!C.State.Independent&&(C.State.New||C.State.Edit)?`/register/${d.convention.Slug||d.convention.ConventionUUID}/additional`:"/":U&&U.Type===oe.FORM_TYPE_ACCOMMODATION?R&&!R.State.Independent&&(R.State.New||R.State.Edit)?`/register/${d.convention.Slug||d.convention.ConventionUUID}/dealer`:M&&!M.State.Independent&&(M.State.New||M.State.Edit)?`/register/${d.convention.Slug||d.convention.ConventionUUID}/badge`:C&&!C.State.Independent&&(C.State.New||C.State.Edit)?`/register/${d.convention.Slug||d.convention.ConventionUUID}/additional`:"/":U&&U.Type===oe.FORM_TYPE_DEALER?M&&!M.State.Independent&&(M.State.New||M.State.Edit)?`/register/${d.convention.Slug||d.convention.ConventionUUID}/badge`:C&&!C.State.Independent&&(C.State.New||C.State.Edit)?`/register/${d.convention.Slug||d.convention.ConventionUUID}/additional`:"/":U&&U.Type===oe.FORM_TYPE_BADGE?C&&!C.State.Independent&&(C.State.New||C.State.Edit)?`/register/${d.convention.Slug||d.convention.ConventionUUID}/additional`:"/":(U&&U.Type===oe.FORM_TYPE_ADDITIONAL,"/"),X=({callback:U})=>{V.getRegistrationByConvention(d.convention.ConventionUUID).then(I=>{U&&U("Loading"),V.getAvailableConventionForms(d.convention.ConventionUUID).then(R=>{I.Submissions.forEach((c,i)=>{c.Form||(I.Submissions[i].Form=R.find(se=>se.FormUUID===c.FormUUID))});const M=I.Submissions.find(c=>c.FormUUID===g.value.FormUUID),C=I.Submissions.find(c=>{var i;return((i=c.Form)==null?void 0:i.Type)===oe.FORM_TYPE_ACCOMMODATION}),j=I.Submissions.find(c=>{var i;return((i=c.Form)==null?void 0:i.Type)===oe.FORM_TYPE_ADDITIONAL}),re=I.Submissions.find(c=>{var i;return((i=c.Form)==null?void 0:i.Type)===oe.FORM_TYPE_DEALER}),ce=I.Submissions.find(c=>{var i;return((i=c.Form)==null?void 0:i.Type)===oe.FORM_TYPE_BADGE}),ge=H(M==null?void 0:M.Form,C==null?void 0:C.Form,re==null?void 0:re.Form,ce==null?void 0:ce.Form,j==null?void 0:j.Form);Pe.push(ge)})})},W=({callback:U})=>{var I;(I=h.value)==null||I.validate().then(R=>{R.valid?V.saveSubmission(g.value).then(M=>{M?setTimeout(()=>{ee(M,U,1)},1e3):U&&U("Failed to process request")}).catch(()=>{U&&U("Failed to process request")}):U&&U("Errors in form detected, please review and try again.")})},ee=(U,I,R=1)=>{V.checkSubmission(U).then(M=>{if(M)if(M.Ready&&M.Submission){if(P.value=!1,g.value=M.Submission,I&&I("Saved"),k(),d.admin)O("close");else if(M.Forms&&M.Forms.length>0){const C=M.Forms.find(i=>i.FormUUID===g.value.FormUUID),j=M.Forms.find(i=>i.Type===oe.FORM_TYPE_ACCOMMODATION),re=M.Forms.find(i=>i.Type===oe.FORM_TYPE_DEALER),ce=M.Forms.find(i=>i.Type===oe.FORM_TYPE_BADGE),ge=M.Forms.find(i=>i.Type===oe.FORM_TYPE_ADDITIONAL),c=H(C,j,re,ce,ge);Pe.push(c)}}else{if(R>5&&(P.value=!0),R>10&&(A.value=!0),R>20&&(b.value=!0),R>30&&(e.value=!0),R>40&&(y.value=!0),R>50&&(L.value=!0),R>60&&(s.value=!0),R>70&&(o.value=!0),R>80&&(w.value=!0),R>90&&(n.value=!0),R>100&&(u.value=!0),R>200){I&&(P.value=!1,A.value=!1,b.value=!1,e.value=!1,y.value=!1,L.value=!1,s.value=!1,o.value=!1,w.value=!1,n.value=!1,u.value=!1,I("A problem was encountered during saving, please check form and try again."));return}setTimeout(()=>{ee(U,I,R+1)},R<20?1e3*R:2e4)}else I&&(P.value=!1,A.value=!1,b.value=!1,e.value=!1,y.value=!1,L.value=!1,s.value=!1,o.value=!1,w.value=!1,n.value=!1,u.value=!1,I("A problem was encountered during saving, please check form and try again."))}).catch(()=>{I&&(P.value=!1,A.value=!1,b.value=!1,e.value=!1,y.value=!1,L.value=!1,s.value=!1,o.value=!1,w.value=!1,n.value=!1,u.value=!1,I("A problem was encountered during saving, please check form and try again."))})};return(U,I)=>{const R=ol("router-link");return t(),T(Vl,null,{default:a(()=>[r(Ne,{ref:"formValidator",autocomplete:"off",onSubmit:I[1]||(I[1]=Ke(()=>{},["prevent"]))},{default:a(()=>[S.value.Heading?(t(),B("h1",ut,Q(S.value.Heading),1)):q("",!0),U.admin?(t(),B("h2",ot," (Admin Mode) ")):q("",!0),S.value.Description?(t(),B("div",{key:2,class:"my-2 form-description-container pa-5 border rounded-lg text-black",innerHTML:S.value.Description},null,8,it)):q("",!0),(t(!0),B(F,null,te(S.value.Sections,M=>(t(),T(Tl,{key:`section_${S.value.ID}.${M.ID}`,class:"my-4 section-container rounded-lg",elevation:"4"},{default:a(()=>[M.Heading?(t(),T(kl,{key:0},{default:a(()=>[J(Q(M.Heading),1)]),_:2},1024)):q("",!0),M.Description?(t(),T(Cl,{key:1,class:"text-wrap"},{default:a(()=>[K("div",{innerHTML:M.Description},null,8,rt)]),_:2},1024)):q("",!0),M.Fields?(t(),T(Sl,{key:2},{default:a(()=>[(t(!0),B(F,null,te(M.Fields,C=>(t(),B(F,{key:`field_${S.value.ID}.${M.ID}.${C.ID}`},[C.Field?(t(),T(z,{key:0},{default:a(()=>[r(Y,null,{default:a(()=>[U.editable?(t(),T(We,{key:0,name:C.SectionFieldUUID,field:C.Field,modelValue:C.Value,"onUpdate:modelValue":j=>C.Value=j,admin:U.admin,convention:U.convention,"registration-group":U.registrationGroup,required:C.Required,"min-length":C.MinLength,"max-length":C.MaxLength,"persistent-hint":!0,onChange:j=>m(M.SectionUUID,C.SectionFieldUUID,C.Value)},null,8,["name","field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(t(),T(We,{key:1,name:C.SectionFieldUUID,field:C.Field,modelValue:C.Value,"onUpdate:modelValue":j=>C.Value=j,admin:U.admin,convention:U.convention,"registration-group":U.registrationGroup,required:C.Required,"min-length":C.MinLength,"max-length":C.MaxLength,"persistent-hint":!0,disabled:"",onChange:j=>m(M.SectionUUID,C.SectionFieldUUID,C.Value)},null,8,["name","field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):q("",!0)],64))),128))]),_:2},1024)):q("",!0)]),_:2},1024))),128)),U.preview?q("",!0):(t(),B(F,{key:3},[r(z,null,{default:a(()=>[U.admin?(t(),T(Y,{key:1,class:"text-right"},{default:a(()=>[r(Z,{color:"red",onClick:I[0]||(I[0]=M=>O("close"))},{default:a(()=>I[3]||(I[3]=[J("Cancel")])),_:1})]),_:1})):(t(),T(Y,{key:0,class:"text-right"},{default:a(()=>[r(R,{to:{name:"Home"},class:"text-decoration-none text-white"},{default:a(()=>[r(Z,{color:"red"},{default:a(()=>I[2]||(I[2]=[J("Close")])),_:1})]),_:1})]),_:1})),U.admin||U.editable?(t(),T(Y,{key:2,class:"text-left"},{default:a(()=>[r(He,{onClick:W,type:"submit"})]),_:1})):(t(),T(Y,{key:3,class:"text-left"},{default:a(()=>[r(He,{onClick:X,type:"submit",label:"Next",color:"green"})]),_:1}))]),_:1}),P.value?(t(),T(z,{key:0},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>I[4]||(I[4]=[J(" Your request is currently queued for processing. We have received your data, you do not need to resubmit it or refresh. The next page will load once the system has processed your details. Please be patient as this may take a while. ")])),_:1})]),_:1})):q("",!0),A.value?(t(),T(z,{key:1},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>I[5]||(I[5]=[J(" Honestly! It really is being handled by our systems, the web browser window will continue, to monitor progress whilst it remains open. ")])),_:1})]),_:1})):q("",!0),b.value?(t(),T(z,{key:2},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>I[6]||(I[6]=[J(" There seems to be a bit of Jam, don't worry because we have a fine selection of Jams at breakfast. Keep holding on in there, we'll get you on your way soon. ")])),_:1})]),_:1})):q("",!0),e.value?(t(),T(z,{key:3},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>I[7]||(I[7]=[J(" Reticulating splines ")])),_:1})]),_:1})):q("",!0),y.value?(t(),T(z,{key:4},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>I[8]||(I[8]=[J(" Downloading more RAM to process your registration. ")])),_:1})]),_:1})):q("",!0),L.value?(t(),T(z,{key:5},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>I[9]||(I[9]=[J(" Ever seen a loading screen with a jump scare? ")])),_:1})]),_:1})):q("",!0),s.value?(t(),T(z,{key:6},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>I[10]||(I[10]=[J(" We are not liable for any broken screens as a result of waiting. ")])),_:1})]),_:1})):q("",!0),o.value?(t(),T(z,{key:7},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>I[11]||(I[11]=[J(" At this point we're blaming your Wi-Fi. ")])),_:1})]),_:1})):q("",!0),w.value?(t(),T(z,{key:8},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>I[12]||(I[12]=[J(" Hold tight! The hamsters powering this are on a break. ")])),_:1})]),_:1})):q("",!0),n.value?(t(),T(z,{key:9},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>I[13]||(I[13]=[J(" Preparing an elaborate excuse for the delay. ")])),_:1})]),_:1})):q("",!0),u.value?(t(),T(z,{key:10},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>I[14]||(I[14]=[J(" We've run out of silly things to say, but if the save button is still spinning then the registration request is still queued for processing. ")])),_:1})]),_:1})):q("",!0)],64))]),_:1})]),_:1})}}});export{qt as F,We as _,ae as a,Pt as b,Je as p};
