import{i as ce,L as ee,M as fe,V as Re,r as M,w as ne,c as Oe,D as P,n as t,G as z,h as r,x as Q,q as a,H as J,P as te,l as V,A as q,F as p,m as Ue,v as K,k as Ie,N as xe,y as Ke,a1 as Ce,E as el,$ as Ae,b as ll,a7 as tl,d as ze,p as je,aP as al,u as nl,aQ as sl,as as qe,ad as ul,z as ol,aR as Pe}from"./index-Bbv8XZUK.js";import{F as ue}from"./form-Cqw16b_M.js";import{S as il}from"./submission-DAi9v6uc.js";import{u as ke}from"./useModel-fdFHuEKi.js";import{s as Ve}from"./index-CndaLrdX.js";import{b as Qe,a as me,c as Te,d as De,V as he}from"./VList-i29AZ8Xo.js";import{V as j,a as Y}from"./VRow-CLfaFD_p.js";import{V as be}from"./VCheckbox-CxHGTDwV.js";import{V as Me,c as $e,d as rl,e as dl,f as vl}from"./VSelect-D7-96B5o.js";import{T as ml}from"./ticket-DqurB3v3.js";import{c as Se,s as Be}from"./sorted-PYsDa1V2.js";import{d as we,V as Z,o as cl,u as Ze}from"./VGrid-XcZ0p89F.js";import{c as fl}from"./copyToClipboard-BtcEYe2-.js";import{a as pl,l as pe,_ as He}from"./SaveButton.vue_vue_type_script_setup_true_lang-Db0Hz3EV.js";import{u as _e}from"./useStoreAPI-CkK7haBh.js";import{V as Ge}from"./forwardRefs-C3piIGW-.js";import{a as Le,V as ye,m as hl,b as gl}from"./VTextField-gGgkxUio.js";import{V as bl}from"./VFileInput-CHHAJ4Op.js";import{V as Ne}from"./VForm-_dfbsCh9.js";import{V as Ye}from"./VTooltip-B-rJ-XMm.js";import{_ as yl}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as Ul}from"./VTextarea-BHHzfj06.js";import{V as Xe}from"./VAutocomplete-Dzv5d848.js";import{G as Il}from"./userData-CGeK3e5Y.js";import{v as Ee}from"./v4-CtRu48qb.js";import{V as Dl}from"./VContainer-CZcFscLV.js";import{e as Vl,a as Tl,b as kl,c as Cl}from"./VCard-O9h-nctc.js";var ae=(d=>(d.ACCOMMODATION="ACCOMMODATION",d.AGE="AGE",d.BADGE_IMAGE="BADGE_IMAGE",d.CHECKBOX="CHECKBOX",d.CONFIRMATION="CONFIRMATION",d.DATE="DATE",d.EXTRAS="EXTRAS",d.HTML="HTML",d.INTERESTS="INTERESTS",d.RADIO="RADIO",d.SELECT="SELECT",d.TEXT="TEXT",d.TEXTAREA="TEXTAREA",d.TICKET="TICKET",d.NUMBER="NUMBER",d))(ae||{});const xt=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Badge Image",value:"BADGE_IMAGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Confirmation",value:"CONFIRMATION"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"HTML",value:"HTML"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}],Sl={class:"extrasList"},wl=ce({__name:"Extras",props:ee({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ee(["change"],["update:modelValue"]),setup(d,{emit:x}){const T=d,{admin:A=!1,convention:$,disabled:h=!1}=T,w=fe(d,"modelValue"),U=x,B=Re.getInstance(),E=M({});try{E.value=JSON.parse(w.value)}catch{}const g=M([]),e=M([]);ne(T,()=>{R()}),ne(E.value,o=>{for(const k in o)if(o[k].checked){const n=g.value.map(u=>{var y;return(y=u.Options)==null?void 0:y.find(c=>c.OptionUUID===k)});if(n&&n.length>0)try{const u=n[0];o[k].choiceId===""&&u&&u.Choices&&u.Choices.length>0&&(o[k].choiceId=u.Choices[0].TagUUID),o[k].price=u==null?void 0:u.Price}catch{}}else o[k].choiceId="",o[k].price=0;w.value=JSON.stringify(o),s()});const b=Oe({get:()=>g.value.map(o=>o.ExtraUUID),set:()=>{}}),R=()=>{var k;const o=((k=T.items.find(n=>n.Title==="SelectedExtras"))==null?void 0:k.Value)||"[]";try{const n=JSON.parse(o);g.value=e.value.filter(u=>n.find(y=>y===u.ExtraUUID))||[],b.value=[...g.value.map(u=>u.ExtraUUID)],g.value.forEach(u=>{var y;(y=u.Options)==null||y.forEach(c=>{E.value[c.OptionUUID]||(E.value[c.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"Extras"in $&&$.Extras.length?(e.value=$.Extras,R()):"ConventionUUID"in $&&(A?B==null||B.getConventionExtras($.ConventionUUID).then(o=>{o&&(e.value=o,R())}):B==null||B.getAvailableConventionExtras($.ConventionUUID).then(o=>{o&&(e.value=o,R())}));const s=(o=void 0)=>{setTimeout(()=>U("change",o),100)};return(o,k)=>(t(),P("div",Sl,[z("h4",null,Q(o.label),1),r(he,{opened:b.value,"onUpdate:opened":k[0]||(k[0]=n=>b.value=n)},{default:a(()=>[(t(!0),P(J,null,te(g.value,n=>(t(),V(Qe,{key:n.ExtraUUID,value:n.ExtraUUID},{activator:a(({props:u})=>[r(me,Ue({"prepend-icon":"mdi:mdi-group","append-icon":"",ref_for:!0},u),{default:a(()=>[n.Name?(t(),V(Te,{key:0},{default:a(()=>[z("strong",null,Q(n.Name),1)]),_:2},1024)):q("",!0),n.Description?(t(),V(De,{key:1,class:"mt-2 d-inline"},{default:a(()=>[K(Q(n.Description),1)]),_:2},1024)):q("",!0)]),_:2},1040)]),default:a(()=>[n.Options?(t(!0),P(J,{key:0},te(n.Options,u=>(t(),V(me,{key:u.OptionUUID,class:"override-pl"},{default:a(()=>[r(j,null,{default:a(()=>[r(Y,{cols:"12",sm:"6"},{default:a(()=>[r(be,{label:`${u.Name} ${u.Price&&u.Price!==0?`(${p(Ve).currencySymbol}${u.Price})`:""}`,modelValue:E.value[u.OptionUUID].checked,"onUpdate:modelValue":y=>E.value[u.OptionUUID].checked=y,disabled:p(h),"hide-details":"",onChange:s},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),u.Choices&&u.Choices.length>1&&E.value[u.OptionUUID].checked?(t(),V(Y,{key:0,cols:"12",sm:"6"},{default:a(()=>[r(Me,{items:u.Choices.sort((y,c)=>y.Title.localeCompare(c.Title)).map(y=>({value:y.TagUUID,title:y.Title})),modelValue:E.value[u.OptionUUID].choiceId,"onUpdate:modelValue":y=>E.value[u.OptionUUID].choiceId=y,"item-value":"value","item-title":"title",variant:"outlined",disabled:p(h),"hide-details":"",onChange:s},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):q("",!0)]),_:2},1024)]),_:2},1024))),128)):q("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]))}}),El=["innerHTML"],Al=ce({__name:"HTML",props:{data:{}},setup(d){const x=d,T=M({html:""}),A=()=>{try{const $=JSON.parse(x.data);$&&(T.value=$)}catch{}};return A(),ne(x,()=>{A()}),($,h)=>(t(),P("div",{innerHTML:T.value.html},null,8,El))}}),Ml={class:"interestList"},$l=ce({__name:"Interests",props:ee({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ee(["change"],["update:modelValue"]),setup(d,{emit:x}){const T=d,{admin:A=!1,convention:$,disabled:h=!1}=T,w=fe(d,"modelValue"),U=x,B=Re.getInstance(),E=M({});try{E.value=JSON.parse(w.value)}catch{}const g=M([]),e=M([]);ne(E.value,o=>{w.value=JSON.stringify(o)});const b=M([]),R=()=>{var k;const o=((k=T.items.find(n=>n.Title==="SelectedInterests"))==null?void 0:k.Value)||"[]";try{const n=JSON.parse(o);g.value=e.value.filter(u=>n.find(y=>y===u.InterestUUID))||[],b.value=[...g.value.map(u=>u.InterestUUID)]}catch{}};"ConventionUUID"in $&&(A?B==null||B.getConventionInterests($.ConventionUUID).then(o=>{o&&(e.value=o,R())}):B==null||B.getConventionInterests($.ConventionUUID).then(o=>{o&&(e.value=o,R())})),ne(T,()=>{R()});const s=(o=void 0)=>{setTimeout(()=>U("change",o),100)};return(o,k)=>(t(),P("div",Ml,[z("h4",null,Q(o.label),1),r(he,{opened:b.value,"onUpdate:opened":k[0]||(k[0]=n=>b.value=n)},{default:a(()=>[(t(!0),P(J,null,te(g.value.sort((n,u)=>n.Order>u.Order?1:n.Order==u.Order?0:-1),n=>(t(),V(me,{key:n.InterestUUID},{default:a(()=>[r(j,null,{default:a(()=>[r(Y,null,{default:a(()=>[r(be,{label:`${n.Name} ${n.Price&&n.Price>0?`(${p(Ve).currencySymbol}${n.Price})`:""}`,modelValue:E.value[n.InterestUUID],"onUpdate:modelValue":u=>E.value[n.InterestUUID]=u,disabled:p(h),messages:n.Description,onChange:s},null,8,["label","modelValue","onUpdate:modelValue","disabled","messages"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])]))}}),Fe=(d,x,T)=>{if(T>=d.length){let A=T-d.length+1;for(;A--;)d.push(void 0)}d.splice(T,0,d.splice(x,1)[0])},Ll={class:"ticketList"},Rl={key:0,class:"text-orange-darken-1"},Ol=ce({__name:"Tickets",props:ee({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ee(["change"],["update:modelValue"]),setup(d,{emit:x}){const T=d,{admin:A=!1,convention:$,disabled:h=!1,registrationGroup:w=void 0}=T,U=fe(d,"modelValue"),B=x,E=Re.getInstance(),g=M({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{g.value=JSON.parse(U.value),"ticket"in g.value&&(g.value.Ticket=g.value.ticket),"addonsChecked"in g.value&&(g.value.AddonsChecked=g.value.addonsChecked),"componentsChecked"in g.value&&(g.value.ComponentsChecked=g.value.componentsChecked)}catch{}const e=M([]),b=M([]),R=M([]),s=M({required:(y,c=void 0)=>()=>{if(h||!(w!=null&&w.Registration.Leader))return!0;if(c==null){if(g.value.Ticket.length===0&&T.required)return"Must select at least one ticket option.";if(y&&y.ComponentsRequired>0&&g.value.Ticket.includes(y.TicketUUID||"")){let G=0;if(y.TicketComponents.forEach(F=>{g.value.ComponentsChecked.forEach(W=>{F.TicketUUID===W&&(G+=1)})}),G<y.ComponentsRequired)return`Must select ticket ${y.ComponentsRequired} component${y.ComponentsRequired===1?"":"s"}`}}return!0}}),o=()=>{var c;const y=((c=T.items.find(G=>G.Title==="SelectedTickets"))==null?void 0:c.Value)||"[]";try{const G=JSON.parse(y);e.value=b.value.filter(F=>F.Type==="TICKET_TYPE_GROUP"&&G.find(W=>W===F.TicketUUID))||[],R.value=[...e.value.filter(F=>F.Type==="TICKET_TYPE_GROUP").map(F=>F.TicketUUID)]}catch{}};if("ConventionUUID"in $)if(A)E==null||E.getConventionTickets($.ConventionUUID).then(y=>{y&&(b.value=y,o())});else{const y=T.items.find(c=>c.Title==="SelectedTickets");y&&(E==null||E.getFieldTickets(y.FieldUUID).then(c=>{c&&(b.value=c,o())}))}ne(T,()=>{o()});const k=y=>{g.value.Ticket.length>1&&g.value.Ticket.shift(),g.value.ComponentsChecked=[];const c=[];e.value.forEach(G=>{(g.value.Ticket.includes(G.TicketUUID)||g.value.ComponentsChecked.includes(G.TicketUUID))&&c.push(...G.AddonTickets.map(F=>F.TicketUUID))}),g.value.AddonsChecked=g.value.AddonsChecked.filter(G=>c.includes(G)),u(y)},n=y=>{const c=b.value.find(G=>G.TicketUUID===g.value.Ticket[0]);if(c)for(;g.value.ComponentsChecked.length>c.ComponentsRequired;)g.value.ComponentsChecked.shift();u(y)},u=(y=void 0)=>{U.value=JSON.stringify(g.value),setTimeout(()=>B("change",y),100)};try{w!=null&&w.TicketData&&(g.value=JSON.parse(w.TicketData),"ticket"in g.value&&(g.value.Ticket=g.value.ticket),"addonsChecked"in g.value&&(g.value.AddonsChecked=g.value.addonsChecked),"componentsChecked"in g.value&&(g.value.ComponentsChecked=g.value.componentsChecked),u())}catch{}return(y,c)=>{var G;return t(),P("div",Ll,[z("h4",null,[K(Q(y.label)+" ",1),(G=p(w))!=null&&G.Registration.Leader?q("",!0):(t(),P("small",Rl,"(controlled by group leader)"))]),r(he,{opened:R.value,"onUpdate:opened":c[4]||(c[4]=F=>R.value=F)},{default:a(()=>[(t(!0),P(J,null,te(p(Se)(e.value.filter(F=>F.Type===p(ml).TICKET_TYPE_GROUP)),F=>(t(),P(J,{key:F.TicketUUID},[F.Tickets.length>0?(t(),V(Qe,{key:0,value:F.TicketUUID},{activator:a(({props:W})=>[r(me,Ue({ref_for:!0},W,{"prepend-icon":"mdi:mdi-group"}),{default:a(()=>[r(Te,null,{default:a(()=>[z("strong",null,Q(F.Name),1)]),_:2},1024),r(De,{class:"d-inline"},{default:a(()=>[K(Q(F.Description),1)]),_:2},1024)]),_:2},1040)]),default:a(()=>[(t(!0),P(J,null,te(F.Tickets,W=>(t(),V(me,{key:W.TicketUUID,class:"override-pl"},{default:a(()=>{var S;return[r(De,{class:"d-inline"},{default:a(()=>[K(Q(W.Description),1)]),_:2},1024),r(be,{modelValue:g.value.Ticket,"onUpdate:modelValue":c[0]||(c[0]=v=>g.value.Ticket=v),value:W.TicketUUID,onChange:k,rules:[s.value.required(W)],"validate-on":"submit",disabled:p(h)||!((S=p(w))!=null&&S.Registration.Leader)},{label:a(()=>[r(we,{icon:W.RequiresAccommodation?"mdi:mdi-home":W.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),K(" "+Q(`${W.Name} ${W.Price>0?`(${p(Ve).currencySymbol}${W.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),g.value.Ticket.length>0&&W.TicketUUID===g.value.Ticket[0]?(t(),P(J,{key:0},[W.AddonTickets.length?(t(),V(he,{key:0},{default:a(()=>[(t(!0),P(J,null,te(p(Se)(W.AddonTickets),v=>(t(),P(J,{key:v==null?void 0:v.TicketUUID},[v?(t(),V(me,{key:0},{default:a(()=>[r(Te,null,{default:a(()=>{var L;return[r(be,{modelValue:g.value.AddonsChecked,"onUpdate:modelValue":c[1]||(c[1]=C=>g.value.AddonsChecked=C),value:v.TicketUUID,onChange:c[2]||(c[2]=C=>{g.value.ComponentsChecked=[],u(C)}),disabled:p(h)||!((L=p(w))!=null&&L.Registration.Leader)},{label:a(()=>[r(we,{icon:v.RequiresAccommodation?"mdi:mdi-home-plus":v.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),K(" "+Q(`${v.Name} ${v.Price>0?`(${p(Ve).currencySymbol}${v.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),r(De,{class:"d-inline"},{default:a(()=>[K(Q(v.Description),1)]),_:2},1024)]),_:2},1024)):q("",!0)],64))),128))]),_:2},1024)):q("",!0),W.TicketComponents.length?(t(),V(he,{key:1},{default:a(()=>[(t(!0),P(J,null,te(p(Se)(W.TicketComponents),v=>(t(),P(J,{key:v==null?void 0:v.TicketUUID},[v?(t(),V(me,{key:0},{default:a(()=>[r(Te,null,{default:a(()=>{var L;return[r(be,{modelValue:g.value.ComponentsChecked,"onUpdate:modelValue":c[3]||(c[3]=C=>g.value.ComponentsChecked=C),value:v.TicketUUID,onChange:n,rules:[s.value.required(W,v)],"validate-on":"submit",disabled:p(h)||!((L=p(w))!=null&&L.Registration.Leader)},{label:a(()=>[r(we,{icon:v.RequiresAccommodation?"mdi:mdi-home-plus":v.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),K(" "+Q(`${v.Name} ${v.Price>0?`(${p(Ve).currencySymbol}${v.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),r(De,null,{default:a(()=>[K(Q(v.Description),1)]),_:2},1024)]),_:2},1024)):q("",!0)],64))),128))]),_:2},1024)):q("",!0)],64)):q("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):q("",!0)],64))),128))]),_:1},8,["opened"])])}}}),xl={key:0},ql={class:"d-flex flex-wrap my-2"},Pl={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1 align-content-center"},Bl={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},Hl={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1"},Gl={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},Yl=["href"],Xl=ce({__name:"Accommodation",props:ee({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ee(["change","update:items"],["update:modelValue"]),setup(d,{emit:x}){const T=d,{admin:A=!1,convention:$,disabled:h}=T,w=x,U=fe(d,"modelValue"),B=ke(T,w,void 0,void 0,"items"),E=xe(),g=_e(),e=el.getInstance(),b=M(Ie(U.value)),R=M([]),s=M(),o=M({sharing:!1}),k=()=>{try{const i=JSON.parse(T.data);i&&(o.value=i)}catch{}};k(),ne(T,()=>{k(),T.registrationGroup&&(R.value=T.registrationGroup.Members,s.value=T.registrationGroup.Registration)}),ne(b,i=>{U.value=Ie(i)},{deep:!0});const n=M(""),u=M(!1),y=()=>{var i;(i=s.value)!=null&&i.Leader&&E.getRegistrationInvite($.ConventionUUID).then(D=>{if(D){const oe=new URL(location.href);oe.searchParams.set("token",D),n.value=oe.toString()}})},c=()=>{fl(n.value),y(),u.value=!0,setTimeout(()=>u.value=!1,2200)},G=(i=void 0)=>{setTimeout(()=>w("change",i),100)},F=M({required:i=>!T.required||i.length>0||"Selections Required"}),W=i=>i?`${i.Reference?`#${i.Reference}`:"(not registered)"} ${i.Name}`:"",S=()=>{var i;e.emit("registration.group.leave",(i=s.value)==null?void 0:i.RegistrationUUID)},v=i=>{e.emit("registration.group.remove.member",i)},L=M([]);ne(B,()=>{C()});const C=()=>{A?E.getConventionAccommodation($.ConventionUUID).then(i=>{L.value=i.filter(D=>!!(B!=null&&B.value.find(oe=>oe.Value===D.AccommodationUUID)))||[]}):B.value.length>0&&E.getFieldAccommodation(B.value[0].FieldUUID).then(i=>{L.value=i.filter(D=>!!(B!=null&&B.value.find(oe=>oe.Value===D.AccommodationUUID)))||[]})};C(),(()=>{var i;if(T.registrationGroup)if(R.value=T.registrationGroup.Members,s.value=T.registrationGroup.Registration,(i=s.value)!=null&&i.Leader)y();else try{b.value=JSON.parse(T.registrationGroup.AccommodationData),G()}catch{}})();const X=M({column:0,id:""}),re=()=>{!h&&!b.value.includes(X.value.id)&&(X.value.column===0&&X.value.id!==""&&b.value.push(X.value.id),G())},de=()=>{const i=b.value.findIndex(D=>D===X.value.id);!h&&i>=0&&(b.value.splice(i,1),G())},ge=()=>{if(h||X.value.column!==1)return;const i=b.value.findIndex(D=>D===X.value.id);i<=0||(Fe(b.value,i,i-1),G())},_=()=>{if(h||X.value.column!==1)return;const i=b.value.findIndex(D=>D===X.value.id);i>=b.value.length-1||(Fe(b.value,i,i+1),G())};return(i,D)=>{var oe;return t(),P(J,null,[z("h4",null,Q(i.label),1),r(j,null,{default:a(()=>[r(Y,{cols:"12"},{default:a(()=>{var H,le;return[R.value&&s.value&&o.value.sharing?(t(),P("div",xl,[D[16]||(D[16]=z("strong",null,"Your Sharing Group",-1)),!p(h)&&((H=R.value.find(N=>N.IsLeader))==null?void 0:H.UUID)!==s.value.RegistrationUUID?(t(),V(Z,{key:0,color:"red",variant:"text",onClick:S},{default:a(()=>D[10]||(D[10]=[K("(leave group)")])),_:1})):q("",!0),z("dl",ql,[D[12]||(D[12]=z("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 font-weight-bold pa-1 pt-4"}," Leader: ",-1)),z("dd",Pl,[r(Ge,{class:"rounded-circle d-inline-block",src:p(g).GetProfileImageURL(((le=R.value.find(N=>N.IsLeader))==null?void 0:le.UserUUID)||""),height:"32",width:"32"},null,8,["src"]),z("div",Bl,Q(W(R.value.find(N=>N.IsLeader))),1)]),(t(!0),P(J,null,te(R.value,N=>(t(),P(J,{key:N.UUID},[N.IsLeader?q("",!0):(t(),P(J,{key:0},[D[11]||(D[11]=z("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 pa-1 pt-4"}," Member: ",-1)),z("dd",Hl,[r(Ge,{class:"rounded-circle d-inline-block",src:p(g).GetProfileImageURL(N.UserUUID),height:"32",width:"32"},null,8,["src"]),z("div",Gl,[K(Q(W(N))+" ",1),s.value.Leader?(t(),V(Z,{key:0,variant:"text",class:"ml-4",icon:"mdi:mdi-close-circle",color:"red",size:"xs",title:"Remove Member",onClick:l=>v(N.UUID),disabled:p(h)},null,8,["onClick","disabled"])):q("",!0)])])],64))],64))),128))]),r(pl,{modelValue:u.value,"onUpdate:modelValue":D[0]||(D[0]=N=>u.value=N),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),n.value&&s.value.Leader&&!p(h)?(t(),P(J,{key:1},[z("a",{href:n.value,onClick:Ke(c,["prevent"]),class:"text-white text-decoration-none"},[r(Z,{color:"blue",class:"mb-2"},{default:a(()=>D[13]||(D[13]=[K("Get Invite Link")])),_:1})],8,Yl),D[14]||(D[14]=z("br",null,null,-1)),D[15]||(D[15]=z("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1))],64)):q("",!0)])):q("",!0)]}),_:1})]),_:1}),s.value&&!s.value.Leader?(t(),V(j,{key:0},{default:a(()=>[r(Y,{cols:"10",md:"5"},{default:a(()=>[D[17]||(D[17]=z("strong",null,"Your Groups Accommodation",-1)),D[18]||(D[18]=z("br",null,null,-1)),D[19]||(D[19]=z("small",null,"(in order of preference, controlled by group leader)",-1)),r(he,null,{default:a(()=>[(t(!0),P(J,null,te(b.value.map(H=>L.value.find(le=>le.AccommodationUUID==H)).filter(H=>H!==void 0),(H,le)=>(t(),P(J,null,[H?(t(),V(me,{key:H.AccommodationUUID,title:`${le+1}. ${H.Name}`,class:Ce(X.value.column===1&&X.value.id===H.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):q("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(t(),V(j,{key:1},{default:a(()=>[r(Y,{cols:"12",md:"5"},{default:a(()=>[D[20]||(D[20]=z("strong",null,"Accommodation Options",-1)),D[21]||(D[21]=z("br",null,null,-1)),r(he,null,{default:a(()=>[(t(!0),P(J,null,te(L.value,H=>(t(),V(me,{key:H.AccommodationUUID,title:H.Name,class:Ce(X.value.column===0&&X.value.id===H.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:le=>X.value={column:0,id:H.AccommodationUUID},"append-icon":p(h)?"":"mdi:mdi-gesture-tap",onDblclick:D[1]||(D[1]=le=>re())},null,8,["title","class","onClick","append-icon"]))),128))]),_:1})]),_:1}),p(h)?q("",!0):(t(),V(Y,{key:0,cols:"12",md:"1"},{default:a(()=>[r(j,{class:"d-md-none"},{default:a(()=>[r(Y,{cols:"12",class:"text-center"},{default:a(()=>[r(Z,{icon:"mdi:mdi-arrow-down",size:"small",onClick:D[2]||(D[2]=H=>re()),color:"primary",title:"Select"}),D[22]||(D[22]=K(" Â  ")),r(Z,{icon:"mdi:mdi-arrow-up",size:"small",onClick:D[3]||(D[3]=H=>de()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),r(j,{class:"d-none d-md-flex h-100 align-content-center"},{default:a(()=>[r(Y,{cols:"12"},{default:a(()=>[r(Z,{icon:"mdi:mdi-arrow-right",size:"small",onClick:D[4]||(D[4]=H=>re()),color:"primary",title:"Select"})]),_:1}),r(Y,{cols:"12"},{default:a(()=>[r(Z,{icon:"mdi:mdi-arrow-left",size:"small",onClick:D[5]||(D[5]=H=>de()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1})),r(Y,{cols:"10",md:"5"},{default:a(()=>[D[23]||(D[23]=z("strong",null,"Your Chosen Accommodation",-1)),r(he,null,{default:a(()=>[(t(!0),P(J,null,te(b.value.map(H=>L.value.find(le=>le.AccommodationUUID==H)).filter(H=>H!==void 0),(H,le)=>(t(),P(J,null,[H?(t(),V(me,{key:H.AccommodationUUID,title:`${le+1}. ${H.Name}`,class:Ce(X.value.column===1&&X.value.id===H.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:N=>X.value={column:1,id:(H==null?void 0:H.AccommodationUUID)||""},"append-icon":p(h)?"":"mdi:mdi-gesture-tap",onDblclick:D[6]||(D[6]=N=>de())},null,8,["title","class","onClick","append-icon"])):q("",!0)],64))),256))]),_:1}),D[24]||(D[24]=z("small",null,"(in order of preference)",-1))]),_:1}),p(h)?q("",!0):(t(),V(Y,{key:1,cols:"2",md:"1"},{default:a(()=>[r(j,{class:"d-flex h-100 align-content-center mt-3"},{default:a(()=>[r(Y,{cols:"12"},{default:a(()=>[r(Z,{icon:"mdi:mdi-arrow-up",size:"small",onClick:D[7]||(D[7]=H=>ge()),color:"primary",title:"Higher Priority"})]),_:1}),r(Y,{cols:"12"},{default:a(()=>[r(Z,{icon:"mdi:mdi-arrow-down",size:"small",onClick:D[8]||(D[8]=H=>_()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1}))]),_:1})),(oe=s.value)!=null&&oe.Leader?(t(),V(Le,{key:2,modelValue:U.value,"onUpdate:modelValue":D[9]||(D[9]=H=>U.value=H),disabled:p(h)||!1,"persistent-hint":i.persistentHint||!1,"error-messages":i.errorMessages||"",rules:[F.value.required],class:"accommodation-field-warning"},null,8,["modelValue","disabled","persistent-hint","error-messages","rules"])):q("",!0)],64)}}}),Fl=ce({__name:"AgeCheck",props:ee({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ee(["blur","change","update:items"],["update:modelValue"]),setup(d,{emit:x}){const T=x,A=d,$=ke(A,T,void 0,void 0,"items"),h=fe(d,"modelValue"),w=M({required:e=>!A.required||!!e||"Required.",min:e=>{var y,c;const b=new Date,R=b.getFullYear(),s=(b.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),o=b.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),k=((y=$.value.find(G=>G.Title=="MIN_AGE"))==null?void 0:y.Value)||"18",n=((c=$.value.find(G=>G.Title=="BEFORE_DATE"))==null?void 0:c.Value)||`${R}-${s}-${o}`,u=E(n);return B(e,n,parseInt(k))||`You must be at least ${k} years old by ${u.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),U=()=>(T("blur"),!(w.value.min(h.value||"")!==!0||w.value.required(h.value||"")!==!0)),B=(e,b,R)=>{if(e>=b)return!1;const s=E(e),k=E(b).getTime()-s.getTime(),n=1e3*60*60*24*365.25;return k/n>=R},E=e=>{const[b,R,s]=e.split("-");return new Date(parseInt(b),parseInt(R)-1,parseInt(s))},g=(e=void 0)=>{setTimeout(()=>T("change",e),100)};return(e,b)=>(t(),V(ye,{modelValue:h.value,"onUpdate:modelValue":b[0]||(b[0]=R=>h.value=R),type:"date",hint:e.hint||"",label:e.label||"",name:e.name||"",variant:"outlined",disabled:e.disabled||!1,"persistent-hint":e.persistentHint||!1,"error-messages":e.errorMessages||"",rules:[w.value.required,w.value.min],onBlur:U,onChange:g},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}});function Je(d){const x=JSON.parse(d),T={charge:0,free:0,height:0,label:!1,maximum:0,tags:[],width:0};return x&&(x.charge&&pe.isNumber(x.charge)&&(T.charge=x.charge),x.free&&pe.isNumber(x.free)&&(T.free=x.free),x.height&&pe.isNumber(x.height)&&(T.height=x.height),x.label&&pe.isBoolean(x.label)&&(T.label=x.label),x.maximum&&pe.isNumber(x.maximum)&&(T.maximum=x.maximum),x.tags&&Array.isArray(x.tags)&&(T.tags=x.tags),x.width&&pe.isNumber(x.width)&&(T.width=x.width)),T}const Jl={class:"text-center"},Wl={key:0},Kl={key:0,class:"image-progress my-auto mx-auto"},zl=["onMousemove","onMousedown","onMouseup","onTouchstart","onTouchmove","onTouchend"],jl=["src","onLoad","onDragstart","onKeydown","onKeyup"],Ql={key:0},Zl={key:1},_l=ce({__name:"BadgeImage",props:ee({disabled:{type:Boolean},hint:{},field:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registration:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ee(["blur","change","update:items"],["update:modelValue"]),setup(d,{emit:x}){var N;const T=x,A=d,$=fe(d,"modelValue"),h=M([]),w=M({charge:0,free:0,height:0,label:!1,maximum:0,tags:[],width:0}),U=M(1),B=xe(),E=_e(),g=Ae("badgeImageForm"),e=M(""),b=M([]),R=Ae("imageFileInput"),s=M([]),o=M([]),k=M([]),n=M(0),u=M(),y=M({imageNo:0,imageX:0,imageY:0,mouseDown:!1,mouseX:0,mouseY:0}),c=M(280),G=M(280),F=l=>{if(!s.value||l+1>s.value.length||!s.value[l])return;const I=s.value[l],m=h.value[l];m.left=parseInt(getComputedStyle(I).left),m.top=parseInt(getComputedStyle(I).top),m.height=I.height,m.width=I.width,$.value=JSON.stringify(h.value)},W=Oe(()=>({"--preview-width":`${G.value}px`,"--preview-height":`${c.value}px`})),S=M([!1]);try{h.value=JSON.parse($.value||"[]"),pe.isArray(h.value)||(pe.isObject(h.value)?h.value=[h.value]:h.value=[]),h.value.forEach((l,I)=>{l.fileUUID&&(o.value[I]=E.GetBadgeImageURL(l.fileUUID)),l.values||(A.field&&A.field.Values?l.values=A.field.Values.map(m=>({key:m.Value,value:""})):l.values=[]),A.field&&A.field.Values&&A.field.Values.forEach(m=>{l.values.find(f=>{if(f.key==m.Value)return!0})||l.values.push({key:m.Value,value:""})})}),U.value=h.value.length,A.field&&"Data"in A.field&&(w.value=Je(((N=A.field)==null?void 0:N.Data)||"")),U.value===0&&w.value.maximum===1&&(U.value=1)}catch{}A.registration&&B.getConBadgeDisplayName(A.registration.RegistrationUUID).then(l=>{l&&(e.value=l)}).catch(()=>{});const v=(l,I)=>{s.value[l]=I},L=l=>{var I;try{l.field&&"Data"in l.field&&(w.value=Je(((I=l.field)==null?void 0:I.Data)||"")),w.value.height&&(c.value=w.value.height),w.value.width&&(G.value=w.value.width)}catch{}C()},C=()=>{if(U.value>h.value.length)for(let l=0;l<U.value-h.value.length;l+=1){let I=[];A.field&&A.field.Values&&(I=A.field.Values.map(m=>({key:m.Value,value:""}))),h.value.push({fileUUID:"",height:0,label:"",left:0,top:0,values:I,width:0})}else U.value<h.value.length&&U.value>=0&&(h.value=h.value.slice(0,U.value));if(U.value>b.value.length){const l=b.value.length;for(let I=0;I<U.value-l;I+=1)b.value.push(!0)}else U.value<b.value.length&&U.value>=0&&(b.value=b.value.slice(0,U.value));if(U.value>o.value.length){const l=o.value.length;for(let I=0;I<U.value-l;I+=1)o.value.push("")}else U.value<o.value.length&&U.value>=0&&(o.value=o.value.slice(0,U.value));if(U.value>k.value.length){const l=k.value.length;for(let I=0;I<U.value-l;I+=1)k.value.push(!1)}else U.value<k.value.length&&U.value>=0&&(k.value=k.value.slice(0,U.value));if(U.value>S.value.length){const l=S.value.length;for(let I=0;I<U.value-l;I+=1)S.value.push(!1)}else U.value<S.value.length&&U.value>=0&&(S.value=S.value.slice(0,U.value));$.value=JSON.stringify(h.value)};ne(A,l=>{L(l)}),L(A),ne(U,()=>{C()});const O=M({required:l=>!A.required||!!l||"Required.",saved:l=>!b.value[l]||"File not uploaded."}),X=()=>(T("blur"),O.value.required($.value||"")!==!0),re=(l,I=void 0)=>{h.value[l].top=0,h.value[l].left=0,h.value[l].width=0,h.value[l].height=0,ge(l).then(()=>{setTimeout(()=>{de(l)},100),setTimeout(()=>T("change",I),200)}).catch(()=>{})},de=l=>{if(!R.value)return;const m=R.value[l].$el.getElementsByTagName("input")[0];m&&m.files.length>0&&(o.value[l]=URL.createObjectURL(m.files[0]))},ge=async l=>{if(!g.value||!g.value[l])return;const I=new FormData(g.value[l].$el);b.value[l]=!1,k.value[l]=!0;const m=await E.SaveFormFile(I);m.Saved&&(k.value[l]=!1,b.value[l]=!0,h.value[l].fileUUID=m.FileUUID,S.value[l]=!0)},_=(l,I)=>{const m=I.target;m.style.left="0px",m.style.top="0px",m.width>m.height?m.width=G.value*(m.width/m.height):m.width=G.value,m.classList.remove("d-none"),l>=0&&l<U.value&&F(l)},i=(l,I,m=0,ie=void 0)=>{if(ie&&ie.type)switch(ie.type){case"touchstart":case"touchend":ie.preventDefault();break}let f=500;if(!n.value)n.value=Date.now();else{const ve=Date.now()-n.value;ve>=3e3?f=1:ve>=2500?f=2:ve>=2e3?f=5:ve>=1500?f=12:ve>=1e3?f=25:ve>=500?f=50:ve>=250&&(f=100)}if(m!==f&&(clearInterval(u.value),u.value=setInterval(()=>{i(l,I,f)},f)),!s.value)return;const se=s.value[l];switch(I){case 0:n.value=0,clearInterval(u.value),F(l);break;case 6:s.value&&s.value[l]&&(se.width-=1);break;case 5:s.value&&s.value[l]&&(se.width+=1);break;case 1:s.value&&s.value[l]&&(se.style.top=`${(parseInt(getComputedStyle(se).top)||0)-1}px`);break;case 2:s.value&&s.value[l]&&(se.style.left=`${(parseInt(getComputedStyle(se).left)||0)+1}px`);break;case 3:s.value&&s.value[l]&&(se.style.top=`${(parseInt(getComputedStyle(se).top)||0)+1}px`);break;case 4:s.value&&s.value[l]&&(se.style.left=`${(parseInt(getComputedStyle(se).left)||0)-1}px`);break}oe(l)},D=(l,I)=>{l===-1&&(l=y.value.imageNo);const m=s.value[l];switch(I.type){case"touchstart":I.preventDefault(),s.value&&s.value[l]&&(y.value.imageX=parseInt(getComputedStyle(s.value[l]).left)),s.value&&s.value[l]&&(y.value.imageY=parseInt(getComputedStyle(s.value[l]).top)),y.value.mouseX=I.touches[0].clientX,y.value.mouseY=I.touches[0].clientY,y.value.mouseDown=!0;break;case"mousedown":y.value.imageNo=l,s.value&&s.value[l]&&(y.value.imageX=parseInt(getComputedStyle(s.value[l]).left)),s.value&&s.value[l]&&(y.value.imageY=parseInt(getComputedStyle(s.value[l]).top)),y.value.mouseX=I.clientX,y.value.mouseY=I.clientY,y.value.mouseDown=!0;break;case"touchend":I.preventDefault();case"mouseup":y.value.mouseDown=!1,F(l);break;case"touchmove":if(!y.value.mouseDown)return;s.value&&s.value[l]&&(m.style.left=`${y.value.imageX+(I.touches[0].clientX-y.value.mouseX)}px`),s.value&&s.value[l]&&(m.style.top=`${y.value.imageY+(I.touches[0].clientY-y.value.mouseY)}px`);break;case"mousemove":if(!y.value.mouseDown)return;s.value&&s.value[l]&&(m.style.left=`${y.value.imageX+(I.clientX-y.value.mouseX)}px`),s.value&&s.value[l]&&(m.style.top=`${y.value.imageY+(I.clientY-y.value.mouseY)}px`);break;case"dragstart":I.preventDefault();break;case"keydown":switch(I.key){case"ArrowUp":I.preventDefault(),i(l,1);break;case"ArrowRight":I.preventDefault(),i(l,2);break;case"ArrowDown":I.preventDefault(),i(l,3);break;case"ArrowLeft":I.preventDefault(),i(l,4);break;case"+":I.preventDefault(),i(l,5);break;case"-":I.preventDefault(),i(l,6);break}break;case"keyup":i(l,0),F(l);break}oe(l)},oe=l=>{if(s.value&&s.value[l]){if(l+1>s.value.length)return;const I=s.value[l];if(I.width<G.value&&(I.width=G.value),I.height<c.value){const m=c.value-I.height,ie=I.width/I.height;I.width+=Math.ceil(m*ie)}(parseInt(getComputedStyle(s.value[l]).left)||0)>0&&(I.style.left="0px"),(parseInt(getComputedStyle(s.value[l]).top)||0)>0&&(I.style.top="0px"),(parseInt(getComputedStyle(s.value[l]).left)||0)<0-(I.width-G.value)&&(I.style.left=`${0-(I.width-G.value)}px`),(parseInt(getComputedStyle(s.value[l]).top)||0)<0-(I.height-c.value)&&(I.style.top=`${0-(I.height-c.value)}px`)}},H=l=>{try{clearInterval(u.value)}catch{}y.value.mouseDown=!1,n.value=0,F(y.value.imageNo)},le=l=>{D(-1,l)};return window.addEventListener("mouseup",H),window.addEventListener("mousemove",le),window.addEventListener("touchend",H),window.addEventListener("touchmove",le),ll(()=>{window.removeEventListener("mouseup",H),window.removeEventListener("mousemove",le),window.removeEventListener("touchend",H),window.removeEventListener("touchmove",le)}),(l,I)=>(t(),P("div",null,[(t(!0),P(J,null,te(U.value,m=>(t(),P("div",{style:tl(W.value),key:m},[r(Ne,{ref_for:!0,ref:"badgeImageForm",enctype:"multipart/form-data"},{default:a(()=>{var ie;return[r(j,null,{default:a(()=>[r(Y,null,{default:a(()=>[r(bl,{label:l.label||"",hint:l.hint||"",name:l.name?"name":"badgeFile",variant:"outlined",ref_for:!0,ref:"imageFileInput",accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp",rules:[O.value.required],"error-messages":l.errorMessages||"","persistent-hint":l.persistentHint||!1,disabled:!b.value[m-1]||l.disabled||!1,"hide-details":"",onChange:f=>re(m-1,f),onBlur:X},null,8,["label","hint","name","rules","error-messages","persistent-hint","disabled","onChange"]),z("p",Jl,[b.value[m-1]?q("",!0):(t(),P("small",Wl,"File Uploading"))])]),_:2},1024)]),_:2},1024),w.value.label?(t(),V(j,{key:0},{default:a(()=>[r(Y,null,{default:a(()=>[r(ye,{label:"Display Name",variant:"outlined","prepend-icon":"mdi:mdi-label-outline","hide-details":"",modelValue:h.value[m-1].label,"onUpdate:modelValue":f=>h.value[m-1].label=f,onInput:f=>F(m-1),onChange:f=>F(m-1)},null,8,["modelValue","onUpdate:modelValue","onInput","onChange"])]),_:2},1024)]),_:2},1024)):q("",!0),(ie=l.field)!=null&&ie.Multiple&&l.field.Values.length>0?(t(),V(j,{key:1},{default:a(()=>[(t(!0),P(J,null,te(l.field.Values,(f,se)=>(t(),V(Y,{cols:"12",sm:"6",md:"6",lg:"4",xl:"3",xxl:"2",key:f.FieldValueUUID},{default:a(()=>[r(ye,{label:f.Title,variant:"outlined","prepend-icon":"mdi:mdi-label-outline","hide-details":"",modelValue:h.value[m-1].values[se].value,"onUpdate:modelValue":ve=>h.value[m-1].values[se].value=ve,onInput:ve=>F(m-1),onChange:ve=>F(m-1)},null,8,["label","modelValue","onUpdate:modelValue","onInput","onChange"])]),_:2},1024))),128))]),_:2},1024)):q("",!0),r(j,{class:"justify-center scale-down"},{default:a(()=>[r(Y,{cols:"12",class:"text-center"},{default:a(()=>[I[3]||(I[3]=K(" Preview ")),k.value[m-1]?(t(),P("div",Kl,[r(cl,{indeterminate:"",color:"primary",size:128,width:10},{default:a(()=>I[2]||(I[2]=[K("Uploading")])),_:1})])):(t(),P(J,{key:1},[z("div",{class:"image-preview my-auto mx-auto",onMousemove:f=>D(m-1,f),onMousedown:f=>D(m-1,f),onMouseup:f=>D(m-1,f),onTouchstart:f=>D(m-1,f),onTouchmove:f=>D(m-1,f),onTouchend:f=>D(m-1,f)},[z("img",{src:o.value[m-1],ref_for:!0,ref:f=>v(m-1,f),alt:"Your badge image",onLoad:f=>_(m-1,f),onDragstart:f=>D(m-1,f),onKeydown:f=>D(m-1,f),onKeyup:f=>D(m-1,f),tabindex:"0",class:"d-none"},null,40,jl)],40,zl),w.value.label?(t(),P("h3",Ql,Q(h.value[m-1].label),1)):(t(),P("h3",Zl,Q(e.value),1))],64))]),_:2},1024)]),_:2},1024),S.value[m-1]?(t(),V(j,{key:2,class:"justify-center"},{default:a(()=>[r(Y,{cols:"12",class:"d-flex justify-space-between",style:{"max-width":"280px"}},{default:a(()=>[r(Z,{icon:"mdi:mdi-arrow-left",color:"primary",onMousedown:f=>i(m-1,4,0,f),onMouseup:f=>i(m-1,0,0,f),onTouchstart:f=>i(m-1,4,0,f),onTouchend:f=>i(m-1,0,0,f)},null,8,["onMousedown","onMouseup","onTouchstart","onTouchend"]),r(Z,{icon:"mdi:mdi-arrow-up",color:"secondary",onMousedown:f=>i(m-1,1,0,f),onMouseup:f=>i(m-1,0,0,f),onTouchstart:f=>i(m-1,1,0,f),onTouchend:f=>i(m-1,0,0,f)},null,8,["onMousedown","onMouseup","onTouchstart","onTouchend"]),r(Z,{icon:"mdi:mdi-arrow-down",color:"secondary",onMousedown:f=>i(m-1,3,0,f),onMouseup:f=>i(m-1,0,0,f),onTouchstart:f=>i(m-1,3,0,f),onTouchend:f=>i(m-1,0,0,f)},null,8,["onMousedown","onMouseup","onTouchstart","onTouchend"]),r(Z,{icon:"mdi:mdi-arrow-right",color:"primary",onMousedown:f=>i(m-1,2,0,f),onMouseup:f=>i(m-1,0,0,f),onTouchstart:f=>i(m-1,2,0,f),onTouchend:f=>i(m-1,0,0,f)},null,8,["onMousedown","onMouseup","onTouchstart","onTouchend"])]),_:2},1024)]),_:2},1024)):q("",!0),S.value[m-1]?(t(),V(j,{key:3,class:"justify-center"},{default:a(()=>[r(Y,{cols:"12",class:"d-flex justify-space-between",style:{"max-width":"280px"}},{default:a(()=>[r(Z,{icon:"mdi:mdi-plus",color:"primary",onMousedown:f=>i(m-1,5,0,f),onMouseup:f=>i(m-1,0,0,f),onTouchstart:f=>i(m-1,5,0,f),onTouchend:f=>i(m-1,0,0,f)},null,8,["onMousedown","onMouseup","onTouchstart","onTouchend"]),r(Z,{icon:"mdi:mdi-minus",color:"secondary",onMousedown:f=>i(m-1,6,0,f),onMouseup:f=>i(m-1,0,0,f),onTouchstart:f=>i(m-1,6,0,f),onTouchend:f=>i(m-1,0,0,f)},null,8,["onMousedown","onMouseup","onTouchstart","onTouchend"])]),_:2},1024)]),_:2},1024)):q("",!0)]}),_:2},1024)],4))),128)),w.value.maximum===0||w.value.maximum>1?(t(),V(j,{key:0},{default:a(()=>[r(Y,{class:"text-right"},{default:a(()=>[r(Ye,{text:"Add Badge",location:"top"},{activator:a(({props:m})=>[r(Z,Ue({color:"success",icon:"mdi:mdi-plus",size:"xs",variant:"flat",disabled:l.disabled||U.value>=w.value.maximum&&w.value.maximum>0||!1},m,{onClick:I[0]||(I[0]=ie=>U.value<w.value.maximum||w.value.maximum===0?U.value+=1:null)}),null,16,["disabled"])]),_:1})]),_:1}),r(Y,null,{default:a(()=>[r(Ye,{text:"Remove Badge",location:"top"},{activator:a(({props:m})=>[r(Z,Ue({color:"error",icon:"mdi:mdi-minus",size:"xs",variant:"flat",disabled:l.disabled||U.value==0||!1},m,{onClick:I[1]||(I[1]=ie=>U.value>=1?U.value-=1:null)}),null,16,["disabled"])]),_:1})]),_:1})]),_:1})):q("",!0)]))}}),Nl=yl(_l,[["__scopeId","data-v-81eaabc8"]]),et=ce({__name:"Confirmation",props:ee({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ee(["blur","change","update:items"],["update:modelValue"]),setup(d,{emit:x}){const T=x,A=d,$=ke(A,T,void 0,void 0,"items"),h=fe(d,"modelValue"),w=M({mustMatch:E=>{var R,s,o;const g=((R=$.value.find(k=>k.Title=="CASE_SENSITIVE"))==null?void 0:R.Value)||!1,e=((s=$.value.find(k=>k.Title=="MUST_MATCH"))==null?void 0:s.Value)||!1,b=((o=$.value.find(k=>k.Title=="MATCH_STRING"))==null?void 0:o.Value)||"";return!e||g&&b==E||!g&&b.toLocaleLowerCase()==E.toLocaleLowerCase()||"You must enter the text specified to proceed."},required:E=>!A.required||!!E||"Required."}),U=()=>(T("blur"),w.value.mustMatch(h.value||"")===!0&&w.value.required(h.value||"")===!0),B=(E=void 0)=>{setTimeout(()=>T("change",E),100)};return(E,g)=>(t(),V(ye,{modelValue:h.value,"onUpdate:modelValue":g[0]||(g[0]=e=>h.value=e),type:"text",hint:E.hint||"",label:E.label||"",name:E.name||"",variant:"outlined",disabled:E.disabled||!1,"persistent-hint":E.persistentHint||!1,"error-messages":E.errorMessages||"",rules:[w.value.required,w.value.mustMatch],onBlur:U,onChange:B},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),lt=je({...rl({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),tt=ze()({name:"VRadio",props:lt(),setup(d,x){let{slots:T}=x;return Ze(()=>{const A=$e.filterProps(d);return r($e,Ue(A,{class:["v-radio",d.class],style:d.style,type:"radio"}),T)}),{}}}),at=je({height:{type:[Number,String],default:"auto"},...hl(),...ul(dl(),["multiple"]),trueIcon:{type:qe,default:"$radioOn"},falseIcon:{type:qe,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),nt=ze()({name:"VRadioGroup",inheritAttrs:!1,props:at(),emits:{"update:modelValue":d=>!0},setup(d,x){let{attrs:T,slots:A}=x;const $=al(),h=Oe(()=>d.id||`radio-group-${$}`),w=nl(d,"modelValue");return Ze(()=>{const[U,B]=sl(T),E=Le.filterProps(d),g=$e.filterProps(d),e=A.label?A.label({label:d.label,props:{for:h.value}}):d.label;return r(Le,Ue({class:["v-radio-group",d.class],style:d.style},U,E,{modelValue:w.value,"onUpdate:modelValue":b=>w.value=b,id:h.value}),{...A,default:b=>{let{id:R,messagesId:s,isDisabled:o,isReadonly:k}=b;return r(J,null,[e&&r(gl,{id:R.value},{default:()=>[e]}),r(vl,Ue(g,{id:R.value,"aria-describedby":s.value,defaultsTarget:"VRadio",trueIcon:d.trueIcon,falseIcon:d.falseIcon,type:d.type,disabled:o.value,readonly:k.value,"aria-labelledby":e?R.value:void 0,multiple:!1},B,{modelValue:w.value,"onUpdate:modelValue":n=>w.value=n}),A)])}})}),{}}}),We=ce({__name:"FormField",props:ee({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:ee(["change","input","update:field"],["update:modelValue"]),setup(d,{emit:x}){const T=d,{admin:A=!1,disabled:$=!1,persistentHint:h=!1,required:w=!1}=T,U=M(""),B=fe(d,"modelValue"),E=x,g=ke(T,E,void 0,void 0,"field"),e=M(Ie(g.value)),b=M({maxlength:n=>!T.maxLength||n.length<=T.maxLength||`Maximum length is ${T.maxLength} characters. (Current length: ${n.length})`,minlength:n=>!T.minLength||n.length>=T.minLength||`Minimum length is ${T.minLength} characters. (Current length: ${n.length})`,required:n=>!T.required||!!n.replace(/\s/g,"")||"Required field."}),R=M(!1),s=M([]),o=M("");try{const n=JSON.parse(B.value);Array.isArray(n)?s.value=n:s.value=[],typeof n=="boolean"?R.value=n:R.value=!1,o.value=B.value}catch{R.value=!1,s.value=[],o.value=B.value}ne(R,()=>{B.value=JSON.stringify(R.value),E("input"),E("change")}),ne(s,()=>{B.value=JSON.stringify(s.value),E("input"),E("change")},{deep:!0}),ne(o,()=>{B.value=o.value,E("input"),E("change")}),ne(g.value,()=>{e.value.Type!==g.value.Type?(e.value=Ie(g.value),R.value=!1,s.value=[],o.value=""):e.value=Ie(g.value)});const k=(n=void 0)=>{E("change",n)};return(n,u)=>{var y;return e.value.Type===p(ae).TEXT?(t(),V(ye,{key:0,modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=c=>o.value=c),name:n.name||"",hint:e.value.Hint,label:`${e.value.Label}${p(w)?"*":""}`,placeholder:e.value.Placeholder,variant:"outlined",disabled:p($)||!1,"persistent-hint":p(h)||!1,"error-messages":U.value,rules:[b.value.maxlength,b.value.minlength,b.value.required],onChange:k,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):e.value.Type===p(ae).DATE?(t(),V(ye,{key:1,modelValue:o.value,"onUpdate:modelValue":u[1]||(u[1]=c=>o.value=c),type:"date",name:n.name||"",hint:e.value.Hint,label:e.value.Label,placeholder:e.value.Placeholder,variant:"outlined",disabled:p($)||!1,"persistent-hint":p(h)||!1,"error-messages":U.value,rules:[b.value.maxlength,b.value.minlength,b.value.required],onChange:k,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):e.value.Type===p(ae).NUMBER?(t(),V(ye,{key:2,modelValue:o.value,"onUpdate:modelValue":u[2]||(u[2]=c=>o.value=c),type:"number",name:n.name||"",hint:e.value.Hint,label:e.value.Label,placeholder:e.value.Placeholder,variant:"outlined",disabled:p($)||!1,"persistent-hint":p(h)||!1,"error-messages":U.value,rules:[b.value.maxlength,b.value.minlength,b.value.required],onChange:k,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):e.value.Type===p(ae).TEXTAREA?(t(),V(Ul,{key:3,modelValue:o.value,"onUpdate:modelValue":u[3]||(u[3]=c=>o.value=c),name:n.name||"",hint:e.value.Hint,label:e.value.Label,placeholder:e.value.Placeholder,variant:"outlined",disabled:p($)||!1,"persistent-hint":p(h)||!1,"error-messages":U.value,rules:[b.value.maxlength,b.value.minlength,b.value.required],onChange:k,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):e.value.Type===p(ae).CHECKBOX?(t(),P(J,{key:4},[e.value.Multiple?(t(!0),P(J,{key:0},te(e.value.Values,c=>(t(),V(be,{key:c.ID,modelValue:s.value,"onUpdate:modelValue":u[4]||(u[4]=G=>s.value=G),name:n.name||"",hint:e.value.Hint,label:c.Title,value:c.Value,disabled:p($)||!1,"persistent-hint":p(h),"error-messages":U.value,rules:[b.value.required],onChange:k},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(t(),V(be,{key:1,modelValue:R.value,"onUpdate:modelValue":u[5]||(u[5]=c=>R.value=c),name:n.name||"",hint:e.value.Hint,label:e.value.Label,disabled:p($)||!1,"persistent-hint":p(h),"error-messages":U.value,required:p(w),rules:[c=>!p(w)||!!c||"You must tick to continue!"],onChange:k},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):e.value.Type===p(ae).SELECT?(t(),P(J,{key:5},[!e.value.Autofill&&e.value.Multiple?(t(),V(Me,{key:0,modelValue:s.value,"onUpdate:modelValue":u[6]||(u[6]=c=>s.value=c),name:n.name||"",hint:e.value.Hint,label:e.value.Label,multiple:"",items:e.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:p($)||!1,"persistent-hint":p(h)||!1,"error-messages":U.value,rules:[b.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):e.value.Autofill&&e.value.Multiple?(t(),V(Xe,{key:1,modelValue:s.value,"onUpdate:modelValue":u[7]||(u[7]=c=>s.value=c),name:n.name||"",hint:e.value.Hint,label:e.value.Label,multiple:"",items:e.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:p($)||!1,"persistent-hint":p(h)||!1,"error-messages":U.value,rules:[b.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):e.value.Autofill?e.value.Autofill?(t(),V(Xe,{key:3,modelValue:o.value,"onUpdate:modelValue":u[9]||(u[9]=c=>o.value=c),name:n.name||"",hint:e.value.Hint,label:e.value.Label,items:e.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:p($)||!1,"persistent-hint":p(h)||!1,"error-messages":U.value,rules:[b.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):q("",!0):(t(),V(Me,{key:2,modelValue:o.value,"onUpdate:modelValue":u[8]||(u[8]=c=>o.value=c),name:n.name||"",hint:e.value.Hint,label:e.value.Label,items:e.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:p($)||!1,"persistent-hint":p(h)||!1,"error-messages":U.value,rules:[b.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):e.value.Type===p(ae).RADIO?(t(),V(nt,{key:6,modelValue:o.value,"onUpdate:modelValue":u[10]||(u[10]=c=>o.value=c),name:n.name||"",hint:e.value.Hint,label:e.value.Label,disabled:p($)||!1,"persistent-hint":p(h),"error-messages":U.value,rules:[b.value.required],onChange:k},{default:a(()=>[(t(!0),P(J,null,te(e.value.Values,c=>(t(),V(tt,{key:c.Value,label:c.Title,value:c.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):e.value.Type===p(ae).ACCOMMODATION?(t(),V(Xl,{key:7,modelValue:s.value,"onUpdate:modelValue":u[11]||(u[11]=c=>s.value=c),name:n.name,admin:p(A),convention:n.convention,"registration-group":n.registrationGroup,data:n.field.Data,hint:e.value.Hint,label:e.value.Label,items:e.value.Values,disabled:p($)||!1,"persistent-hint":p(h),"error-messages":U.value,required:p(w),onChange:k},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages","required"])):e.value.Type===p(ae).AGE?(t(),V(Fl,{key:8,modelValue:o.value,"onUpdate:modelValue":u[12]||(u[12]=c=>o.value=c),name:n.name,hint:e.value.Hint,label:e.value.Label,items:e.value.Values,disabled:p($)||!1,"persistent-hint":p(h),"error-messages":U.value,onChange:k},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):e.value.Type===p(ae).BADGE_IMAGE?(t(),V(Nl,{key:9,modelValue:o.value,"onUpdate:modelValue":u[13]||(u[13]=c=>o.value=c),name:n.name,field:e.value,registration:(y=n.registrationGroup)==null?void 0:y.Registration,hint:e.value.Hint,label:e.value.Label,items:e.value.Values,disabled:p($)||!1,"persistent-hint":p(h),"error-messages":U.value,onChange:k},null,8,["modelValue","name","field","registration","hint","label","items","disabled","persistent-hint","error-messages"])):e.value.Type===p(ae).CONFIRMATION?(t(),V(et,{key:10,modelValue:o.value,"onUpdate:modelValue":u[14]||(u[14]=c=>o.value=c),name:n.name,hint:e.value.Hint,label:e.value.Label,items:e.value.Values,disabled:p($)||!1,"persistent-hint":p(h),"error-messages":U.value,onChange:k},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):e.value.Type===p(ae).EXTRAS?(t(),V(wl,{key:11,modelValue:o.value,"onUpdate:modelValue":u[15]||(u[15]=c=>o.value=c),admin:p(A),convention:n.convention,name:n.name,hint:e.value.Hint,label:e.value.Label,items:e.value.Values,disabled:p($)||!1,"persistent-hint":p(h),"error-messages":U.value,required:p(w),onChange:k},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):e.value.Type===p(ae).INTERESTS?(t(),V($l,{key:12,modelValue:o.value,"onUpdate:modelValue":u[16]||(u[16]=c=>o.value=c),admin:p(A),convention:n.convention,name:n.name,hint:e.value.Hint,label:e.value.Label,items:e.value.Values,disabled:p($)||!1,"persistent-hint":p(h),"error-messages":U.value,required:p(w),onChange:k},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):e.value.Type===p(ae).TICKET?(t(),V(Ol,{key:13,modelValue:o.value,"onUpdate:modelValue":u[17]||(u[17]=c=>o.value=c),admin:p(A),convention:n.convention,name:n.name,"registration-group":n.registrationGroup,hint:e.value.Hint,label:e.value.Label,items:e.value.Values,disabled:p($)||!1,"persistent-hint":p(h),"error-messages":U.value,required:p(w),onChange:k},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):e.value.Type===p(ae).HTML?(t(),V(Al,{key:14,data:n.field.Data},null,8,["data"])):q("",!0)}}}),st={key:0,class:"my-2 text-white text-center"},ut={key:1,class:"admin-header my-2 text-white text-center"},ot=["innerHTML"],it=["innerHTML"],qt=ce({__name:"FormRenderer",props:ee({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ee(["close"],["update:modelValue"]),setup(d,{emit:x}){const T=x,A=fe(d,"modelValue");Be(A.value.Sections),A.value.Sections.forEach(S=>{S.Fields&&Be(S.Fields)});const $=Ae("formValidator"),h=Il(),w=xe(),U=M(!1),B=M(!1),E=M(!1),g=M(!1),e=M(!1),b=M(!1),R=M(!1),s=M(!1),o=M(!1),k=M(!1),n=M(!1),u=M((()=>{if(d.data!==void 0){const v=Ie(d.data);return A.value.Sections.forEach(L=>{L.Fields&&L.Fields.forEach(C=>{const O=d.data.Data.find(X=>X.SectionFieldUUID===C.SectionFieldUUID&&X.SectionFieldUUID==C.SectionFieldUUID);if(O)C.Value=O.Data;else{const X={ID:0,SubmissionDataUUID:Ee(),SubmissionID:d.data.ID,SubmissionUUID:d.data.SubmissionUUID,SectionID:L.ID,SectionUUID:L.SectionUUID,SectionFieldID:C.ID,SectionFieldUUID:C.SectionFieldUUID,Data:C.Value,CreatedAt:"",DeletedAt:"",UpdatedAt:""};v.Data.push(X),C.Value=""}})}),v}const S={ID:0,SubmissionUUID:Ee(),FormID:A.value.ID,FormUUID:A.value.FormUUID,UserID:(h==null?void 0:h.ID)||0,UserUUID:(h==null?void 0:h.UserUUID)||"",Data:[],Status:il.SUBMISSION_STATUS_OPEN};return S.Data=A.value.Sections.map(v=>v.Fields?v.Fields.map(L=>({ID:0,SubmissionDataUUID:Ee(),SubmissionID:S.ID,SubmissionUUID:S.SubmissionUUID,SectionID:v.ID,SectionUUID:v.SectionUUID,SectionFieldID:L.ID,SectionFieldUUID:L.SectionFieldUUID,Data:""})):[]).flat(),S})()),y=(S,v,L)=>{const C=u.value.Data.find(O=>O.SectionUUID===S&&O.SectionFieldUUID===v);C&&(C.Data=L)},c=(S,v,L,C,O)=>S!=null&&S.State.Independent?"/":S&&S.Type===ue.FORM_TYPE_REGISTRATION?v&&!v.State.Independent&&(v.State.New||v.State.Edit)?`/register/${d.convention.Slug||d.convention.ConventionUUID}/accommodation`:L&&!L.State.Independent&&(L.State.New||L.State.Edit)?`/register/${d.convention.Slug||d.convention.ConventionUUID}/dealer`:C&&!C.State.Independent&&(C.State.New||C.State.Edit)?`/register/${d.convention.Slug||d.convention.ConventionUUID}/badge`:O&&!O.State.Independent&&(O.State.New||O.State.Edit)?`/register/${d.convention.Slug||d.convention.ConventionUUID}/additional`:"/":S&&S.Type===ue.FORM_TYPE_ACCOMMODATION?L&&!L.State.Independent&&(L.State.New||L.State.Edit)?`/register/${d.convention.Slug||d.convention.ConventionUUID}/dealer`:C&&!C.State.Independent&&(C.State.New||C.State.Edit)?`/register/${d.convention.Slug||d.convention.ConventionUUID}/badge`:O&&!O.State.Independent&&(O.State.New||O.State.Edit)?`/register/${d.convention.Slug||d.convention.ConventionUUID}/additional`:"/":S&&S.Type===ue.FORM_TYPE_DEALER?C&&!C.State.Independent&&(C.State.New||C.State.Edit)?`/register/${d.convention.Slug||d.convention.ConventionUUID}/badge`:O&&!O.State.Independent&&(O.State.New||O.State.Edit)?`/register/${d.convention.Slug||d.convention.ConventionUUID}/additional`:"/":S&&S.Type===ue.FORM_TYPE_BADGE?O&&!O.State.Independent&&(O.State.New||O.State.Edit)?`/register/${d.convention.Slug||d.convention.ConventionUUID}/additional`:"/":(S&&S.Type===ue.FORM_TYPE_ADDITIONAL,"/"),G=({callback:S})=>{w.getRegistrationByConvention(d.convention.ConventionUUID).then(v=>{S&&S("Loading"),w.getAvailableConventionForms(d.convention.ConventionUUID).then(L=>{v.Submissions.forEach((_,i)=>{_.Form||(v.Submissions[i].Form=L.find(D=>D.FormUUID===_.FormUUID))});const C=v.Submissions.find(_=>_.FormUUID===u.value.FormUUID),O=v.Submissions.find(_=>{var i;return((i=_.Form)==null?void 0:i.Type)===ue.FORM_TYPE_ACCOMMODATION}),X=v.Submissions.find(_=>{var i;return((i=_.Form)==null?void 0:i.Type)===ue.FORM_TYPE_ADDITIONAL}),re=v.Submissions.find(_=>{var i;return((i=_.Form)==null?void 0:i.Type)===ue.FORM_TYPE_DEALER}),de=v.Submissions.find(_=>{var i;return((i=_.Form)==null?void 0:i.Type)===ue.FORM_TYPE_BADGE}),ge=c(C==null?void 0:C.Form,O==null?void 0:O.Form,re==null?void 0:re.Form,de==null?void 0:de.Form,X==null?void 0:X.Form);Pe.push(ge)})})},F=({callback:S})=>{var v;(v=$.value)==null||v.validate().then(L=>{L.valid?w.saveSubmission(u.value).then(C=>{C?setTimeout(()=>{W(C,S,1)},1e3):S&&S("Failed to process request")}).catch(()=>{S&&S("Failed to process request")}):S&&S("Errors in form detected, please review and try again.")})},W=(S,v,L=1)=>{w.checkSubmission(S).then(C=>{if(C)if(C.Ready&&C.Submission){if(U.value=!1,u.value=C.Submission,v&&v("Saved"),d.admin)T("close");else if(C.Forms&&C.Forms.length>0){const O=C.Forms.find(i=>i.FormUUID===u.value.FormUUID),X=C.Forms.find(i=>i.Type===ue.FORM_TYPE_ACCOMMODATION),re=C.Forms.find(i=>i.Type===ue.FORM_TYPE_DEALER),de=C.Forms.find(i=>i.Type===ue.FORM_TYPE_BADGE),ge=C.Forms.find(i=>i.Type===ue.FORM_TYPE_ADDITIONAL),_=c(O,X,re,de,ge);Pe.push(_)}}else{if(L>5&&(U.value=!0),L>10&&(B.value=!0),L>20&&(E.value=!0),L>30&&(g.value=!0),L>40&&(e.value=!0),L>50&&(b.value=!0),L>60&&(R.value=!0),L>70&&(s.value=!0),L>80&&(o.value=!0),L>90&&(k.value=!0),L>100&&(n.value=!0),L>200){v&&(U.value=!1,B.value=!1,E.value=!1,g.value=!1,e.value=!1,b.value=!1,R.value=!1,s.value=!1,o.value=!1,k.value=!1,n.value=!1,v("A problem was encountered during saving, please check form and try again."));return}setTimeout(()=>{W(S,v,L+1)},L<20?1e3*L:2e4)}else v&&(U.value=!1,B.value=!1,E.value=!1,g.value=!1,e.value=!1,b.value=!1,R.value=!1,s.value=!1,o.value=!1,k.value=!1,n.value=!1,v("A problem was encountered during saving, please check form and try again."))}).catch(()=>{v&&(U.value=!1,B.value=!1,E.value=!1,g.value=!1,e.value=!1,b.value=!1,R.value=!1,s.value=!1,o.value=!1,k.value=!1,n.value=!1,v("A problem was encountered during saving, please check form and try again."))})};return(S,v)=>{const L=ol("router-link");return t(),V(Dl,null,{default:a(()=>[r(Ne,{ref:"formValidator",autocomplete:"off",onSubmit:v[1]||(v[1]=Ke(()=>{},["prevent"]))},{default:a(()=>[A.value.Heading?(t(),P("h1",st,Q(A.value.Heading),1)):q("",!0),S.admin?(t(),P("h2",ut," (Admin Mode) ")):q("",!0),A.value.Description?(t(),P("div",{key:2,class:"my-2 form-description-container pa-5 border rounded-lg text-black",innerHTML:A.value.Description},null,8,ot)):q("",!0),(t(!0),P(J,null,te(A.value.Sections,C=>(t(),V(Vl,{key:`section_${A.value.ID}.${C.ID}`,class:"my-4 section-container rounded-lg",elevation:"4"},{default:a(()=>[C.Heading?(t(),V(Tl,{key:0},{default:a(()=>[K(Q(C.Heading),1)]),_:2},1024)):q("",!0),C.Description?(t(),V(kl,{key:1,class:"text-wrap"},{default:a(()=>[z("div",{innerHTML:C.Description},null,8,it)]),_:2},1024)):q("",!0),C.Fields?(t(),V(Cl,{key:2},{default:a(()=>[(t(!0),P(J,null,te(C.Fields,O=>(t(),P(J,{key:`field_${A.value.ID}.${C.ID}.${O.ID}`},[O.Field?(t(),V(j,{key:0},{default:a(()=>[r(Y,null,{default:a(()=>[S.editable?(t(),V(We,{key:0,name:O.SectionFieldUUID,field:O.Field,modelValue:O.Value,"onUpdate:modelValue":X=>O.Value=X,admin:S.admin,convention:S.convention,"registration-group":S.registrationGroup,required:O.Required,"min-length":O.MinLength,"max-length":O.MaxLength,"persistent-hint":!0,onChange:X=>y(C.SectionUUID,O.SectionFieldUUID,O.Value)},null,8,["name","field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(t(),V(We,{key:1,name:O.SectionFieldUUID,field:O.Field,modelValue:O.Value,"onUpdate:modelValue":X=>O.Value=X,admin:S.admin,convention:S.convention,"registration-group":S.registrationGroup,required:O.Required,"min-length":O.MinLength,"max-length":O.MaxLength,"persistent-hint":!0,disabled:"",onChange:X=>y(C.SectionUUID,O.SectionFieldUUID,O.Value)},null,8,["name","field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):q("",!0)],64))),128))]),_:2},1024)):q("",!0)]),_:2},1024))),128)),S.preview?q("",!0):(t(),P(J,{key:3},[r(j,null,{default:a(()=>[S.admin?(t(),V(Y,{key:1,class:"text-right"},{default:a(()=>[r(Z,{color:"red",onClick:v[0]||(v[0]=C=>T("close"))},{default:a(()=>v[3]||(v[3]=[K("Cancel")])),_:1})]),_:1})):(t(),V(Y,{key:0,class:"text-right"},{default:a(()=>[r(L,{to:{name:"Home"},class:"text-decoration-none text-white"},{default:a(()=>[r(Z,{color:"red"},{default:a(()=>v[2]||(v[2]=[K("Close")])),_:1})]),_:1})]),_:1})),S.admin||S.editable?(t(),V(Y,{key:2,class:"text-left"},{default:a(()=>[r(He,{onClick:F,type:"submit"})]),_:1})):(t(),V(Y,{key:3,class:"text-left"},{default:a(()=>[r(He,{onClick:G,type:"submit",label:"Next",color:"green"})]),_:1}))]),_:1}),U.value?(t(),V(j,{key:0},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>v[4]||(v[4]=[K(" Your request is currently queued for processing. We have received your data, you do not need to resubmit it or refresh. The next page will load once the system has processed your details. Please be patient as this may take a while. ")])),_:1})]),_:1})):q("",!0),B.value?(t(),V(j,{key:1},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>v[5]||(v[5]=[K(" Honestly! It really is being handled by our systems, the web browser window will continue, to monitor progress whilst it remains open. ")])),_:1})]),_:1})):q("",!0),E.value?(t(),V(j,{key:2},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>v[6]||(v[6]=[K(" There seems to be a bit of Jam, don't worry because we have a fine selection of Jams at breakfast. Keep holding on in there, we'll get you on your way soon. ")])),_:1})]),_:1})):q("",!0),g.value?(t(),V(j,{key:3},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>v[7]||(v[7]=[K(" Reticulating splines ")])),_:1})]),_:1})):q("",!0),e.value?(t(),V(j,{key:4},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>v[8]||(v[8]=[K(" Downloading more RAM to process your registration. ")])),_:1})]),_:1})):q("",!0),b.value?(t(),V(j,{key:5},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>v[9]||(v[9]=[K(" Ever seen a loading screen with a jump scare? ")])),_:1})]),_:1})):q("",!0),R.value?(t(),V(j,{key:6},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>v[10]||(v[10]=[K(" We are not liable for any broken screens as a result of waiting. ")])),_:1})]),_:1})):q("",!0),s.value?(t(),V(j,{key:7},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>v[11]||(v[11]=[K(" At this point we're blaming your Wi-Fi. ")])),_:1})]),_:1})):q("",!0),o.value?(t(),V(j,{key:8},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>v[12]||(v[12]=[K(" Hold tight! The hamsters powering this are on a break. ")])),_:1})]),_:1})):q("",!0),k.value?(t(),V(j,{key:9},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>v[13]||(v[13]=[K(" Preparing an elaborate excuse for the delay. ")])),_:1})]),_:1})):q("",!0),n.value?(t(),V(j,{key:10},{default:a(()=>[r(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:a(()=>v[14]||(v[14]=[K(" We've run out of silly things to say, but if the save button is still spinning then the registration request is still queued for processing. ")])),_:1})]),_:1})):q("",!0)],64))]),_:1})]),_:1})}}});export{xt as F,We as _,ae as a,qt as b,Je as p};
