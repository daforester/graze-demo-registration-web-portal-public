import{i as oe,L as ee,M as de,l as A,n as O,q as l,h as e,r as f,k as X,w as ae,N as me,U as _,c as Ve,F as z,O as ye,v as L,G as U,y as pe,D as k,H as Z,P as ge,A as B,x as j,Q as Ie,W as fe,a1 as Ne}from"./index-D9RL8iMc.js";import{O as G,G as x}from"./canDo-CuuM40rl.js";import{P as De}from"./permission-Ba-8wP-4.js";import{V as ve}from"./VContainer-D5FQdTO1.js";import{V as te,a as I}from"./VRow-BIaXqEK2.js";import{V as b}from"./VCheckbox-DmNBn-fU.js";import{_ as Ce}from"./DeleteDialog.vue_vue_type_script_setup_true_lang-DiUsEteS.js";import{u as Oe}from"./useModel-3I8O6nQ9.js";import{_ as we}from"./ModelDialog.vue_vue_type_script_setup_true_lang-BjY5Q85z.js";import{V as Ge}from"./VTextField-SUUUHchL.js";import{V as ue}from"./VSelect-DOgk7ElF.js";import{G as be,A as Re}from"./userData-BDvpB53y.js";import{u as ke}from"./useAvatar-7gURCgP2.js";import{a as Le,_ as Se,l as Me}from"./SaveButton.vue_vue_type_script_setup_true_lang-BFs6GeYX.js";import{c as Ue}from"./copyToClipboard-BtcEYe2-.js";import{_ as Ae}from"./UserSelect.vue_vue_type_script_setup_true_lang-A7zRu_6E.js";import{C as _e}from"./canManageGlobalUsers-Cbh5f6xu.js";import{S as he}from"./setupLogin-GvVCIeUb.js";import{V as S}from"./VGrid-C8XE4mRo.js";import{V as re}from"./VSpacer-D26vVx9e.js";import{V as Fe,a as Ye,c as $e,d as je}from"./VList-DO_fPyUq.js";import{V as xe}from"./VDialog-1gh4dF60.js";import{e as We,a as Be,b as ze,c as qe,d as He}from"./VCard-CiTz_xe8.js";import{V as Qe}from"./forwardRefs-C9X_xFjg.js";import{V as Je}from"./VSheet-BSVJEu4_.js";import{V as Ke}from"./VToolbar-kDURXZrh.js";import{V as Xe}from"./VTable-BLBEPX-I.js";import{v as le}from"./v4-CtRu48qb.js";import"./form-xBXW6hX0.js";import"./VOverlay-BhWjqAY_.js";import"./scopeId-CqP4Vn2q.js";import"./VChip-CoLh0RIz.js";import"./useStoreAPI-Dpwh5axk.js";import"./VAutocomplete-Bdu9eGKn.js";import"./filter-DWW1FKGn.js";import"./createSimpleFunctional-BFFZpP0r.js";import"./VDivider-DjhZl5JL.js";const ce=oe({__name:"EditGroupPermissions",props:ee({disabled:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(h){const i=de(h,"modelValue");return(V,t)=>(O(),A(ve,null,{default:l(()=>[e(te,null,{default:l(()=>[e(I,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:i.value.CheckIn,"onUpdate:modelValue":t[0]||(t[0]=n=>i.value.CheckIn=n),label:"Check In","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(I,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:i.value.EditConvention,"onUpdate:modelValue":t[1]||(t[1]=n=>i.value.EditConvention=n),label:"Edit Convention","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(I,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:i.value.EditOrganisation,"onUpdate:modelValue":t[2]||(t[2]=n=>i.value.EditOrganisation=n),label:"Edit Organisation","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(I,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:i.value.EditPaymentTransactions,"onUpdate:modelValue":t[3]||(t[3]=n=>i.value.EditPaymentTransactions=n),label:"Manage Registration Payments","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(I,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:i.value.EditRegistration,"onUpdate:modelValue":t[4]||(t[4]=n=>i.value.EditRegistration=n),label:"Edit Registrations","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(I,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:i.value.ManageUsers,"onUpdate:modelValue":t[5]||(t[5]=n=>i.value.ManageUsers=n),label:"Manage Users","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(I,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:i.value.ManageViews,"onUpdate:modelValue":t[6]||(t[6]=n=>i.value.ManageViews=n),label:"Manage Views","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(I,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:i.value.ViewPaymentTransactions,"onUpdate:modelValue":t[7]||(t[7]=n=>i.value.ViewPaymentTransactions=n),label:"View Payment Transactions","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(I,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:i.value.ViewRegistration,"onUpdate:modelValue":t[8]||(t[8]=n=>i.value.ViewRegistration=n),label:"View Registrations","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(I,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:i.value.ConfigureLostAndFound,"onUpdate:modelValue":t[9]||(t[9]=n=>i.value.ConfigureLostAndFound=n),label:"Configure Lost and Found","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(I,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:i.value.EditLostAndFound,"onUpdate:modelValue":t[10]||(t[10]=n=>i.value.EditLostAndFound=n),label:"Edit Lost and Found","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(I,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:i.value.ViewLostAndFound,"onUpdate:modelValue":t[11]||(t[11]=n=>i.value.ViewLostAndFound=n),label:"View Lost and Found","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(I,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:i.value.ConfigureProps,"onUpdate:modelValue":t[12]||(t[12]=n=>i.value.ConfigureProps=n),label:"Configure Props","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(I,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:i.value.EditProps,"onUpdate:modelValue":t[13]||(t[13]=n=>i.value.EditProps=n),label:"Edit Props","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1}),e(I,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(b,{modelValue:i.value.ViewProps,"onUpdate:modelValue":t[14]||(t[14]=n=>i.value.ViewProps=n),label:"View Props","hide-details":"",disabled:V.disabled},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}))}}),Ze=oe({__name:"EditGroupDialog",props:ee({conventions:{},organisations:{},group:{},title:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:ee(["update:group","save"],["update:modelValue"]),setup(h,{emit:i}){const V=h,t=me(),{conventions:n,organisations:F,title:q=""}=V,C=i,P=de(h,"modelValue"),c=Oe(V,C,void 0,void 0,"group"),a=f(X(c.value)),g=f(null);a.value.OwnerType===G.OWNER_TYPE_CONVENTION?g.value=n.filter(v=>v.ConventionUUID==a.value.OwnerUUID).map(v=>v.ConventionUUID).join(""):a.value.OwnerType===G.OWNER_TYPE_ORGANISATION?g.value=F.filter(v=>v.OrganisationUUID==a.value.OwnerUUID).map(v=>v.OrganisationUUID).join(""):(a.value.Type===x.GROUP_TYPE_SYSTEM||a.value.Type===x.GROUP_TYPE_ADMIN)&&(g.value=null),ae(c,()=>{a.value=X(c.value)});const w=f({ID:0,PermissionUUID:_,GroupID:0,GroupUUID:_,CheckIn:!1,EditConvention:!1,EditOrganisation:!1,EditPaymentTransactions:!1,EditRegistration:!1,ViewPaymentTransactions:!1,ViewRegistration:!1,ManageUsers:!1,ManageViews:!1,ConfigureProps:!1,EditProps:!1,ViewProps:!1,ConfigureLostAndFound:!1,EditLostAndFound:!1,ViewLostAndFound:!1});t.getPermission(x.GROUP_TYPE_SYSTEM,_).then(v=>{w.value=v,N()}).catch(()=>{});const y=()=>{a.value=X(c.value),N()},R=v=>{if(g.value==null)a.value.Type=x.GROUP_TYPE_ADMIN,a.value.OwnerType=null,a.value.OwnerID=null,a.value.OwnerUUID=null;else{const d=Y.value.find(T=>g.value===T.OwnerUUID);d&&(d.OwnerType==G.OWNER_TYPE_ORGANISATION?a.value.Type=x.GROUP_TYPE_ORGANISATION:d.OwnerType==G.OWNER_TYPE_CONVENTION&&(a.value.Type=x.GROUP_TYPE_CONVENTION),a.value.OwnerType=d.OwnerType,a.value.OwnerID=d.OwnerID,a.value.OwnerUUID=d.OwnerUUID)}t.saveGroup(a.value).then(d=>{d&&v&&v("Group Saved").then(()=>{c.value=d,C("save",d)})}).catch(()=>{v&&v("Failed to Save Group")})},N=()=>{const v=Y.value.find(d=>a.value.OwnerUUID===d.OwnerUUID);v?g.value=v.OwnerUUID:Y.value.length>0&&(g.value=null)},Y=Ve(()=>{const v=[];return w.value.ManageUsers&&v.push({Label:"System Admin",OwnerID:null,OwnerUUID:null,OwnerType:null}),v.push(...n.map(d=>({Label:`${d.Name} (Convention)`,OwnerID:d.ID,OwnerUUID:d.ConventionUUID,OwnerType:G.OWNER_TYPE_CONVENTION}))),v.push(...F.map(d=>({Label:`${d.Name} (Organisation)`,OwnerID:d.ID,OwnerUUID:d.OrganisationUUID,OwnerType:G.OWNER_TYPE_ORGANISATION}))),v});return N(),(v,d)=>(O(),A(we,{modelValue:P.value,"onUpdate:modelValue":d[3]||(d[3]=T=>P.value=T),onReset:y,onSave:R,title:z(q),color:"primary","show-close-action":!0,"show-reset-action":!0,"show-save-action":!0,fullscreen:!0,persistent:!0},{default:l(()=>[e(ve,{class:"pa-0",fluid:!0},{default:l(()=>[e(te,null,{default:l(()=>[e(I,{cols:"12",md:"6"},{default:l(()=>[e(Ge,{modelValue:a.value.Name,"onUpdate:modelValue":d[0]||(d[0]=T=>a.value.Name=T),label:"Name",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(I,{cols:"12",md:"6"},{default:l(()=>[e(ue,{modelValue:g.value,"onUpdate:modelValue":d[1]||(d[1]=T=>g.value=T),label:"Owner",items:Y.value,"item-title":"Label","item-value":"OwnerUUID",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),e(I,{cols:"12"},{default:l(()=>[e(ce,{modelValue:a.value.Permission,"onUpdate:modelValue":d[2]||(d[2]=T=>a.value.Permission=T),disabled:!1},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title"]))}}),el={key:1},ll=["href"],al=["href"],tl=oe({__name:"EditGroupMembersDialog",props:ee({group:{},title:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:ee(["update:group","save"],["update:modelValue"]),setup(h,{emit:i}){const V=h,t=me(),n=ke(),F=be(),{title:q=""}=V,C=i,P=de(h,"modelValue"),c=Oe(V,C,void 0,void 0,"group"),a=f(X(c.value)),g=f(""),w=f(!1),y=f(_);(a.value.Users==null||a.value.Users.length==0)&&t.getGroupMembers(a.value.GroupUUID).then(r=>{r&&(a.value.Users=r)}).catch(()=>{a.value.Users=[]});const R=f(""),N=f(""),Y=()=>{t.getGroupInvite(a.value.GroupUUID).then(r=>{if(r){const m=new URL(location.href);m.searchParams.set("token",r),R.value=m.toString()}})};Y();const v=()=>{t.getGroupInfiniteInvite(a.value.GroupUUID).then(r=>{if(r){const m=new URL(location.href);m.searchParams.set("token",r),N.value=m.toString()}})};v(),ae(c,()=>{a.value=X(c.value)});const d=()=>{Ue(R.value),Y()},T=()=>{Ue(N.value),v()},W=f(!1),$=f(-1),J=f(""),M=()=>{$.value=-1,W.value=!1},K=r=>{$.value=r,W.value=!0},D=()=>{(!y.value||y.value===_)&&(g.value="Invalid User",w.value=!0),t.addUserToGroup(y.value,a.value.GroupUUID).then(r=>{r?(a.value=r,g.value="User added to group",w.value=!0):(g.value="Error adding user to group",w.value=!0)}).catch(r=>{g.value="Error adding user to group: "+r,w.value=!0})},E=({callback:r})=>{if(!a.value.Users){r&&(r("Failed to Remove User"),setTimeout(M,2e3));return}J.value="",$.value<0||$.value>=a.value.Users.length?(r&&r("Invalid Convention"),setTimeout(M,2e3)):t.removeUserFromGroup(a.value.Users[$.value].UserUUID,a.value.GroupUUID).then(m=>{var p;m?((p=a.value.Users)==null||p.splice($.value,1),r&&r("User Removed")):r&&r("Failed to Remove User"),setTimeout(M,2e3)}).catch(()=>{r&&(r("Failed to Remove User"),setTimeout(M,2e3))})},se=r=>{const m=Ie();t.switchUser(r).then(p=>{p&&he(p.tokens,p.user,m,!1)}).catch(p=>{console.error(p)})};return(r,m)=>(O(),A(we,{modelValue:P.value,"onUpdate:modelValue":m[3]||(m[3]=p=>P.value=p),title:z(q),color:"primary",fullscreen:!0,persistent:!0},ye({default:l(()=>[e(ve,{class:"pa-0",fluid:!0},{default:l(()=>[a.value.Users&&a.value.Users.length?(O(),k(Z,{key:0},[e(Fe,null,{default:l(()=>[(O(!0),k(Z,null,ge(a.value.Users,(p,ne)=>(O(),A(Ye,{key:p.UserUUID},{append:l(()=>[e(S,{color:"red-darken-3",icon:"mdi:mdi-window-close",size:"x-small",onClick:ie=>K(ne)},null,8,["onClick"])]),prepend:l(()=>[e(Qe,{src:z(n)(p.UserUUID),class:"rounded-circle mr-2",height:"32",width:"32"},null,8,["src"])]),default:l(()=>[e($e,null,{default:l(()=>[L(j(p.DisplayName)+" ",1),z(_e)(z(F))?(O(),A(S,{key:0,icon:"mdi:mdi-account-switch-outline",variant:"flat",size:"small",onClick:ie=>se(p.UserUUID)},null,8,["onClick"])):B("",!0)]),_:2},1024),e(je,null,{default:l(()=>[L(j(p.Handle?`(${p.Handle})`:""),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(xe,{modelValue:W.value,"onUpdate:modelValue":m[2]||(m[2]=p=>W.value=p),width:"auto"},{default:l(()=>[e(We,null,{default:l(()=>[e(Be,null,{default:l(()=>m[5]||(m[5]=[L(" Remove User from Group ")])),_:1}),e(ze,null,{default:l(()=>m[6]||(m[6]=[L(" User will no longer have the permissions from this group. ")])),_:1}),e(qe,null,{default:l(()=>[e(te,null,{default:l(()=>[e(I,null,{default:l(()=>m[7]||(m[7]=[U("p",null," Are you sure you wish to remove this user? If they have permissions from another group these will still be usable. To add the user back into the group you may need to provide them with a new invite link. ",-1)])),_:1})]),_:1})]),_:1}),e(He,null,{default:l(()=>[e(S,{color:"primary",onClick:M},{default:l(()=>m[8]||(m[8]=[L("Cancel")])),_:1}),e(re),e(Se,{color:"red-darken-3",label:"Remove User",onClick:E})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)):(O(),k("p",el," No members "))]),_:1})]),actions:l(()=>[e(S,{variant:"text"},{default:l(()=>[U("a",{href:N.value,onClick:pe(T,["prevent"])},"Infinite Use Invite URL",8,ll)]),_:1}),e(re),e(S,{variant:"text"},{default:l(()=>[U("a",{href:R.value,onClick:pe(d,["prevent"])},"Invite URL",8,al)]),_:1})]),_:2},[r.group.OwnerType===z(G).OWNER_TYPE_CONVENTION&&r.group.OwnerUUID?{name:"extension",fn:l(()=>[e(te,null,{default:l(()=>[e(I,null,{default:l(()=>[e(Ae,{modelValue:y.value,"onUpdate:modelValue":m[0]||(m[0]=p=>y.value=p),convention:r.group.OwnerUUID,"null-label":"- Select User -",variant:"plain"},null,8,["modelValue","convention"])]),_:1}),e(I,{class:"pt-5"},{default:l(()=>[e(S,{onClick:D,variant:"flat",class:"mt-2",color:"success","prepend-icon":"mdi:mdi-account-plus"},{default:l(()=>m[4]||(m[4]=[L(" Add User ")])),_:1})]),_:1})]),_:1}),e(Le,{message:g.value,modelValue:w.value,"onUpdate:modelValue":m[1]||(m[1]=p=>w.value=p)},null,8,["message","modelValue"])]),key:"0"}:void 0]),1032,["modelValue","title"]))}}),ol={key:0,class:"text-center mt-5 text-red text-h5"},sl={key:1,class:"text-center mt-5"},nl={class:"d-block d-md-none mt-2"},il={class:"d-none d-md-table-cell"},Bl=oe({__name:"GroupsView",emits:["pageTitle"],setup(h,{emit:i}){i("pageTitle","Manage Groups & Permissions");const t=me(),n=be(),F=Ie(),q=f(!1),C=f(),P=f(),c=f([]),a=f([]),g=f([]),w=f(!1),y=f(!1),R=f(!1),N=f(""),v=new URL(location.href).searchParams.get("token")||"",d=s=>{const o=()=>{const u=sessionStorage.getItem("gjt_attempt");let H=Me.parseInt(u||"0");H<2?(sessionStorage.setItem("gjt_attempt",(H+1).toString()),setTimeout(()=>{location.reload()},2e3)):(sessionStorage.removeItem("gjt_attempt"),localStorage.removeItem("gjt_token"),N.value="There was a problem with this token, it may have expired or already been used.",setTimeout(()=>{F.push("/")},5e3))};t.validateGroupInviteToken(s).then(u=>{u?(Re(u),localStorage.removeItem("gjt_token"),sessionStorage.setItem("reload","true"),F.push("/")):o()}).catch(()=>{o()})};v!==""?(localStorage.setItem("gjt_token",location.href),d(v)):(q.value=!0,(!n||!n.Groups.find(s=>s.Permission.ManageUsers))&&F.push("/")),ae(C,()=>{J(P.value,C.value)}),ae(P,()=>{J(P.value,C.value)});const T=s=>s.OwnerType===G.OWNER_TYPE_CONVENTION?c.value.filter(o=>o.ConventionUUID===s.OwnerUUID).map(o=>o.Name).join(""):s.OwnerType===G.OWNER_TYPE_ORGANISATION?g.value.filter(o=>o.OrganisationUUID===s.OwnerUUID).map(o=>o.Name).join(""):s.OwnerType===void 0||s.OwnerType===null?"System":"Unknown",W=s=>s.OwnerType===G.OWNER_TYPE_CONVENTION?"Convention":s.OwnerType===G.OWNER_TYPE_ORGANISATION?"Organisation":s.OwnerType===void 0||s.OwnerType===null?"Global":"Unknown",$=()=>{t.getPermissionAccessList(De.PERMISSION_TYPE_MANAGE_USERS).then(s=>{c.value=s.Conventions,g.value=s.Organisations}).catch(()=>{})},J=(s=_,o=_)=>{t.getManageableGroups(s||_,o||_).then(u=>{u&&(a.value=u.sort((H,Q)=>H.Name>Q.Name?1:-1))}).catch(()=>{})},M=()=>{const s={ID:0,GroupUUID:le(),Type:x.GROUP_TYPE_CONVENTION,Name:"",MinimumNumbers:0,Permission:{ID:0,PermissionUUID:le(),GroupID:0,GroupUUID:le(),CheckIn:!1,EditConvention:!1,EditOrganisation:!1,EditPaymentTransactions:!1,EditRegistration:!1,ManageUsers:!1,ManageViews:!1,ViewPaymentTransactions:!1,ViewRegistration:!1,ConfigureProps:!1,EditProps:!1,ViewProps:!1,ConfigureLostAndFound:!1,EditLostAndFound:!1,ViewLostAndFound:!1},Users:[],OwnerID:null,OwnerType:null,OwnerUUID:null};return s.Permission.GroupUUID=s.GroupUUID,s},K=f(M()),D=f(-1),E=f(M()),se=Ve(()=>D.value===-1?"New Group":"Edit Group"),r=()=>{K.value.GroupUUID=le(),E.value=Object.assign({},M()),D.value=-1,w.value=!0},m=s=>{D.value=a.value.indexOf(s),E.value=Object.assign({},s),y.value=!0},p=s=>{D.value=a.value.indexOf(s),E.value=Object.assign({},s),w.value=!0},ne=s=>{D.value=a.value.indexOf(s),E.value=Object.assign({},s),R.value=!0},ie=()=>{t.deleteGroup(E.value.GroupUUID).then(s=>{s&&(a.value.splice(D.value,1),Ee())})},Te=()=>{w.value=!1,fe(()=>{E.value=Object.assign({},K.value),D.value=-1})},Ee=()=>{R.value=!1,fe(()=>{E.value=Object.assign({},K.value),D.value=-1})},Pe=s=>{D.value>-1?Object.assign(a.value[D.value],s):a.value.push(s),Te()};return $(),J(P.value,C.value),(s,o)=>(O(),k("div",null,[q.value?(O(),k(Z,{key:1},[e(Ke,{color:"primary"},{default:l(()=>[e(ue,{label:"Organisation",modelValue:P.value,"onUpdate:modelValue":o[0]||(o[0]=u=>P.value=u),items:g.value,"item-value":"OrganisationUUID","item-title":"Name",clearable:!0,"hide-details":"",class:"mr-1"},null,8,["modelValue","items"]),e(ue,{label:"Convention",modelValue:C.value,"onUpdate:modelValue":o[1]||(o[1]=u=>C.value=u),items:c.value,"item-value":"ConventionUUID","item-title":"Name",clearable:!0,"hide-details":""},null,8,["modelValue","items"]),e(re),e(S,{dark:"",class:"mb-2","prepend-icon":"mdi:mdi-pencil",onClick:r},{default:l(()=>o[8]||(o[8]=[L(" New Group ")])),_:1}),e(Ce,{modelValue:R.value,"onUpdate:modelValue":o[2]||(o[2]=u=>R.value=u),onDelete:ie},null,8,["modelValue"])]),_:1}),w.value?(O(),A(Ze,{key:0,modelValue:w.value,"onUpdate:modelValue":o[3]||(o[3]=u=>w.value=u),group:E.value,"onUpdate:group":o[4]||(o[4]=u=>E.value=u),onSave:Pe,title:se.value,conventions:c.value,organisations:g.value},null,8,["modelValue","group","title","conventions","organisations"])):B("",!0),y.value?(O(),A(tl,{key:1,modelValue:y.value,"onUpdate:modelValue":o[5]||(o[5]=u=>y.value=u),group:E.value,"onUpdate:group":o[6]||(o[6]=u=>E.value=u),title:`${E.value.Name}`},null,8,["modelValue","group","title"])):B("",!0),e(Xe,null,{default:l(()=>[o[15]||(o[15]=U("thead",null,[U("tr",null,[U("th",null,"Name"),U("th",{class:"d-none d-md-table-cell"}," Owner "),U("th",null,"Permissions"),U("th")])],-1)),U("tbody",null,[(O(!0),k(Z,null,ge(a.value,(u,H)=>(O(),k("tr",{key:u.GroupUUID,class:Ne(H%2?"bg-grey-lighten-4":"")},[U("td",null,[L(j(u.Name)+" ",1),U("p",nl,[o[9]||(o[9]=U("strong",null,"Owner",-1)),o[10]||(o[10]=U("br",null,null,-1)),L(" "+j(T(u)),1),o[11]||(o[11]=U("br",null,null,-1)),U("small",null,"("+j(W(u))+")",1)])]),U("td",il,[L(j(T(u)),1),o[12]||(o[12]=U("br",null,null,-1)),U("small",null,"("+j(W(u))+")",1)]),U("td",null,[u.Permission?(O(),A(ce,{key:0,modelValue:u.Permission,"onUpdate:modelValue":Q=>u.Permission=Q,disabled:!0},null,8,["modelValue","onUpdate:modelValue"])):B("",!0)]),U("td",null,[e(S,{icon:"mdi:mdi-account-group",size:"x-small",color:"success",class:"mb-1",onClick:Q=>m(u)},null,8,["onClick"]),o[14]||(o[14]=U("br",null,null,-1)),u.Type!==z(x).GROUP_TYPE_SYSTEM?(O(),k(Z,{key:0},[e(S,{icon:"mdi:mdi-pencil",size:"x-small",color:"primary",class:"mb-1",onClick:Q=>p(u)},null,8,["onClick"]),o[13]||(o[13]=U("br",null,null,-1)),e(S,{icon:"mdi:mdi-delete",size:"x-small",color:"error",class:"mb-1",onClick:Q=>ne(u)},null,8,["onClick"])],64)):B("",!0)])],2))),128))])]),_:1})],64)):(O(),A(Je,{key:0,elevation:"2",class:"pa-4"},{default:l(()=>[o[7]||(o[7]=U("h1",{class:"text-center mt-5"},"Processing Invite...",-1)),N.value?(O(),k("p",ol,j(N.value),1)):B("",!0),N.value?(O(),k("p",sl,"Please contact your admin and request a new one")):B("",!0)]),_:1}))]))}});export{Bl as default};
