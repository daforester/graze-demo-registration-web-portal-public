import{i as Be,M as $e,N as ze,r as M,E as Fa,D as W,n as A,l as N,A as ae,q as c,H as de,Q as je,h as s,v as Z,x as ie,O as Yt,G as ue,F,a1 as Yl,m as gn,k as Na,w as qe,X as Ua,c as ra,P as xa,a2 as Gl,a3 as Hl,T as Wl,a4 as ql,b as pr,L as yr,y as dt,o as gr,a5 as zl,a6 as Jl,a7 as Kl,a8 as Ql,Y as Xl,$ as Zl,R as ei,C as Jn,U as et}from"./index-C9q1-qe9.js";import{_ as ti,D as ai,a as ni,b as ri,c as oi,d as li,e as ii,f as si,g as ui,h as di,i as ci,L as hn,M as Un,U as Tn,j as Rt,A as ut,u as un,k as mi,P as fi,l as Kn,m as pe,n as vi,o as Ve,p as pi}from"./runner-Bxe8yUPy.js";import{a as hr,b as yi}from"./FormRenderer.vue_vue_type_style_index_0_lang-DV-M65hh.js";import{F as Ie,a as gi}from"./form-Cqw16b_M.js";import{b as hi,c as Ur,d as Qn,S as Ui}from"./submission-DAi9v6uc.js";import{C as Ti}from"./canManageGlobalUsers-BnRE97fI.js";import{_ as Ta}from"./ModelDialog.vue_vue_type_script_setup_true_lang-CvWVVOJi.js";import{V as bn,a as ia,d as Tr,c as bi}from"./VList-BU1S6HJk.js";import{V as ce,d as Sn}from"./VGrid-CEhoXd7I.js";import{V as br,b as Si}from"./forwardRefs-CjeG22u4.js";import{s as _i}from"./sortSubmissions-BLiX_qgz.js";import{u as Di}from"./useStoreAPI-CVkaIzXR.js";import{u as Sr}from"./useModel-rkbO243_.js";import{a as _r,V as Dr,e as Ar,d as Ht}from"./VTabs-Bl_FzR3A.js";import{u as Ai,P as Ei}from"./useDisplayTransactions-Dn9NrWV7.js";import{C as Er,G as wr}from"./canDo-PpTJio4K.js";import{G as Ya}from"./userData-DZ-0zh3L.js";import{e as Wt,V as ba,a as Sa,c as sa,d as _n,b as Cr}from"./VCard-S_uO9ZzV.js";import{V as ge,a as Y}from"./VRow-BJNExS0J.js";import{_ as Ir}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as cn,a as wi,l as mn}from"./SaveButton.vue_vue_type_script_setup_true_lang-D_MEH8y0.js";import{V as Te}from"./VSelect-oUpSlnF9.js";import{_ as kr,a as fn,u as Ci}from"./useLinkedFields-DkAeLkgx.js";import{V as Ii,a as ki}from"./VAlert-Cb_A4uF3.js";import{V as aa}from"./VCheckbox-CxD9BvHt.js";import{V as ct}from"./VContainer-DBVhkKp0.js";import{S as Ri}from"./setupLogin-DjFUg5Pj.js";import{u as Xn,V as Oi}from"./debounce-QElLpZc4.js";import{b as Mi,u as Vi}from"./useConventionSlug-D73KnSzx.js";import{_ as $i}from"./SelectGroups.vue_vue_type_script_setup_true_lang-CoBti992.js";import{_ as Pi}from"./DeleteDialog.vue_vue_type_script_setup_true_lang-CIvhhmTQ.js";import{v as Ot}from"./v4-CtRu48qb.js";import{u as Li}from"./useAdvancedMode-BjeRm9aD.js";import{V as Ne}from"./VTextField-D8yRfWpl.js";import{V as Rr,a as vn,b as pn,c as yn}from"./VExpansionPanels-BbOle3ub.js";import{V as ja}from"./VDialog-DgZyWzLu.js";import{c as Fi}from"./copyToClipboard-BtcEYe2-.js";import{u as Ni}from"./useAvatar-2EKQAp9n.js";import{i as xi}from"./index.esm-HRvr0Y3Z.js";import{V as na}from"./VSpacer-BQvrT_TZ.js";import{a as ji}from"./VDataTable-Dos8AGGQ.js";import{_ as Bi}from"./EmailControl.vue_vue_type_script_setup_true_lang-ludiJUPE.js";import{V as Or}from"./VTextarea-DXoiAoRC.js";import{V as Yi}from"./VFileInput-DoLgCPT1.js";import{V as Zn}from"./VSheet-1hL3HCgh.js";import{V as er,a as Gi}from"./VToolbar-BqnGs6J3.js";import"./date-DgbCHIwC.js";import"./canEditRegistrations-CACfEb2k.js";import"./ticket-DqurB3v3.js";import"./VAutocomplete-C3thVKqP.js";import"./filter-Bj30SR6O.js";import"./form-WQPlH-kb.js";import"./VCheckboxBtn-BNaHKsuR.js";import"./VChip-BAb9Kp9o.js";import"./VForm-G8kUFiRc.js";import"./VNavigationDrawer-De9HQqBU.js";import"./scopeId-CuMI2w97.js";import"./index-zHJ-1AxG.js";import"./VTooltip-guysN4h_.js";import"./VOverlay-CN4j01JH.js";import"./createSimpleFunctional-LOBBqZx8.js";import"./VToolbarItems-B1jp6IPW.js";import"./useConventionConfig-XLKuOxnx.js";import"./VTable-DcBZKrrT.js";import"./EmailEditor.vue_vue_type_script_setup_true_lang-jWppqLxv.js";import"./permission-Ba-8wP-4.js";import"./useConventionForms-CcGGfMmp.js";const Hi=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Wi(a){return typeof a=="string"&&Hi.test(a)}const qi=()=>({ID:0,UserUUID:"",DisplayName:"",Handle:"",Credentials:[],Additional:{FirstName:"",LastName:"",DOB:"",Email:""},Data:"",Groups:[],Tags:[]}),zi=Be({__name:"DataTableItemPanel",props:$e({accommodations:{},cardClass:{},convention:{},extras:{},forms:{},interests:{},tickets:{},venues:{},layouts:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:$e(["openActions","showForm"],["update:modelValue"]),setup(a,{emit:o}){const n=Fa.getInstance(),i=o,m=ze(a,"modelValue"),v=M(),g=Yt(),u=M(),d=M(!1),f=E=>{const C={AdminLayoutUUID:E.AdminLayoutUUID,Limit:1,RegistrationUUID:m.value.RegistrationUUID};g.searchConventionRegistrations(m.value.ConventionUUID,C).then(V=>{V&&V.Total>0&&(v.value=V.Registrations[0],u.value=E,d.value=!0)})},b=E=>{i("openActions",E)},T=(E,C,V)=>{i("showForm",E,C,V)};return n.on("checkin-saved",()=>{d.value=!1}),(E,C)=>(A(),W("div",null,[E.layouts?(A(),N(bn,{key:0},{default:c(()=>[(A(!0),W(de,null,je(E.layouts,V=>(A(),N(ia,{key:V.AdminLayoutUUID,class:"d-block pa-0 ma-0"},{default:c(()=>[s(Tr,{style:{"text-overflow":"inherit"},class:"overflow-visible text-wrap"},{default:c(()=>[s(ce,{"prepend-icon":"mdi:mdi-page-layout-body",variant:"flat",onClick:H=>f(V)},{default:c(()=>[Z(ie(V.Name),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):ae("",!0),d.value&&u.value&&v.value?(A(),N(Ta,{key:1,modelValue:d.value,"onUpdate:modelValue":C[2]||(C[2]=V=>d.value=V),"hide-extension":!0,fullscreen:!0,title:`#${v.value.Reference} ${v.value.User.DisplayName} - ${u.value.Name} `,scrollable:!0,"card-class":"pa-0"},{default:c(()=>[s(ti,{accommodations:E.accommodations,convention:E.convention,extras:E.extras,forms:E.forms,interests:E.interests,tickets:E.tickets,venues:E.venues,layout:u.value,"onUpdate:layout":C[0]||(C[0]=V=>u.value=V),modelValue:v.value,"onUpdate:modelValue":C[1]||(C[1]=V=>v.value=V),onOpenActions:b,onShowForm:T},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","layout","modelValue"])]),_:1},8,["modelValue","title"])):ae("",!0)]))}}),Ji={key:0},Ki={class:"text-grey-lighten-1"},Qi={key:0,class:"mb-2"},Xi={key:1,class:"mb-2"},Zi={key:0,class:"text-blue text-center"},es={key:1,class:"text-red text-center"},ts={key:2,class:"text-orange text-center"},as={key:3,class:"text-orange text-center"},ns={key:4,class:"text-orange text-center"},rs={key:5,class:"text-orange text-center"},os={key:6,class:"text-green text-center"},ls={key:0},is={key:0},ss=Be({__name:"RegListRow",props:$e({header:{},accommodations:{},convention:{},extras:{},forms:{},interests:{},item:{},tickets:{},user:{},venues:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:$e(["openActions","openPayments","openTags","reload","showForm","switchUser"],["update:modelValue"]),setup(a,{emit:o}){const n=o,i=ze(a,"modelValue"),m=(u,d)=>{n("showForm",{registration:u,form:d})},v=u=>{n("openActions",u)},g=u=>{n("switchUser",u)};return(u,d)=>u.header.type==="ACCOMMODATION"&&u.accommodations.length>0&&u.item.raw[u.header.key]?(A(),N(ai,{key:0,value:u.item.raw[u.header.key].Data,accommodations:u.accommodations,convention:u.convention,forms:u.forms,tickets:u.tickets,venues:u.venues,registration:u.item.raw[u.header.key].Registration},null,8,["value","accommodations","convention","forms","tickets","venues","registration"])):u.header.type==="EXTRAS"&&u.extras.length>0?(A(),N(ni,{key:1,value:u.item.raw[u.header.key],extras:u.extras},null,8,["value","extras"])):u.header.type==="INTERESTS"&&u.interests.length>0?(A(),N(ri,{key:2,value:u.item.raw[u.header.key],interests:u.interests},null,8,["value","interests"])):u.header.type==="TICKET"&&u.tickets.length>0?(A(),N(oi,{key:3,value:u.item.raw[u.header.key],tickets:u.tickets},null,8,["value","tickets"])):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_CHECKIN_STATUS"?(A(),N(li,{key:4,convention:u.convention,"show-controls":!1,modelValue:u.item.raw.registration,"onUpdate:modelValue":d[0]||(d[0]=f=>u.item.raw.registration=f)},null,8,["convention","modelValue"])):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_SUBMISSION_STATUS"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ACCOMMODATION_FORM"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ADDITIONAL_FORM"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ADMIN_FORM"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DEALER_FORM"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_BADGE_FORM"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_FORM"?(A(),W(de,{key:5},[["LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_SUBMISSION_STATUS","LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ADMIN_FORM"].includes(u.header.type)?(A(),W("ul",Ji,[(A(!0),W(de,null,je(u.forms.filter(f=>f.Type===F(Ie).FORM_TYPE_ADMIN&&u.item.raw[u.header.key].findIndex(b=>b.Form.ID===f.ID)<0),f=>(A(),W("li",{key:f.Heading},[ue("strong",Ki,ie(f.Heading),1),s(ce,{class:"text-grey-lighten-1",icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:b=>m(u.item.raw.registration,f)},null,8,["onClick"])]))),128))])):ae("",!0),ue("ul",null,[(A(!0),W(de,null,je(u.item.raw[u.header.key],f=>(A(),W("li",{key:f.Heading},[ue("strong",null,[Z(ie(f.Heading),1),f.Form.Type!==F(Ie).FORM_TYPE_ADMIN?(A(),W(de,{key:0},[Z(": ")],64)):ae("",!0)]),f.Form.Type!==F(Ie).FORM_TYPE_ADMIN?(A(),W("span",{key:0,class:Yl(F(hi)(f.Submission.Status))},ie(F(Ur)(f.Submission.Status)),3)):ae("",!0),s(ce,{icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:b=>m(f.Registration,f.Form)},null,8,["onClick"])]))),128))])],64)):u.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_AVATAR"?(A(),N(br,{key:6,class:"rounded-circle",src:u.item.raw[u.header.key],height:"32",width:"32"},null,8,["src"])):u.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_CONTACTS"?(A(),W(de,{key:7},[u.item.raw[u.header.key].email?(A(),W("p",Qi,[ue("strong",null,[d[4]||(d[4]=Z("Email")),u.item.raw[u.header.key].email.length>1?(A(),W(de,{key:0},[Z("s")],64)):ae("",!0)]),d[6]||(d[6]=ue("br",null,null,-1)),(A(!0),W(de,null,je(u.item.raw[u.header.key].email,f=>(A(),W(de,{key:f},[Z(ie(f),1),d[5]||(d[5]=ue("br",null,null,-1))],64))),128))])):ae("",!0),u.item.raw[u.header.key].telegram?(A(),W("p",Xi,[d[7]||(d[7]=ue("strong",null,"Telegram",-1)),d[8]||(d[8]=ue("br",null,null,-1)),Z(ie(u.item.raw[u.header.key].telegram),1)])):ae("",!0)],64)):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_PAYMENT_STATUS"?(A(),W(de,{key:8},[u.item.raw[u.header.key]=="NOT_REQUIRED"?(A(),W("div",Zi,"No Payment Requested")):u.item.raw[u.header.key]=="MISSING_REQUIRED"?(A(),W("div",es,"Partner Payment Not Requested")):u.item.raw[u.header.key]=="AWAITING_PARTNER"?(A(),W("div",ts,"Awaiting Partner Payment")):u.item.raw[u.header.key]=="ALL_REQUIRED"?(A(),W("div",as,"Awaiting Payments")):u.item.raw[u.header.key]=="REQUIRED"?(A(),W("div",ns,"Awaiting Payment")):u.item.raw[u.header.key]=="ADDITIONAL_REQUIRED"?(A(),W("div",rs,"Awaiting Additional Payments")):(A(),W("div",os,"Completed"))],64)):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_ACTIONS"?(A(),W(de,{key:9},[s(ce,{icon:"mdi:mdi-briefcase",variant:"flat",onClick:d[1]||(d[1]=f=>v(u.item.raw[u.header.key]))}),F(Ti)(u.user)?(A(),N(ce,{key:0,icon:"mdi:mdi-account-switch-outline",variant:"flat",onClick:d[2]||(d[2]=f=>g(u.item.raw[u.header.key]))})):ae("",!0)],64)):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_GROUP"?(A(),W(de,{key:10},[u.item.raw[u.header.key].length===1?(A(),W("em",ls," Not in a group ")):(A(),W(de,{key:1},[ue("ul",null,[(A(!0),W(de,null,je(u.item.raw[u.header.key],f=>(A(),W("li",{key:f.UUID,class:"ml-0"},[Z(" #"+ie(f.Reference)+" : "+ie(f.Name)+" ",1),f.IsLeader?(A(),W("strong",is,"(Leader)")):ae("",!0)]))),128))]),d[9]||(d[9]=ue("strong",null,"Total:",-1)),Z(" "+ie(u.item.raw[u.header.key].length),1)],64))],64)):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_TAGS"?(A(),N(ii,{key:11,registration:u.item.raw.registration,meta:u.header.meta},null,8,["registration","meta"])):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DATA_LAYOUT"?(A(),W(de,{key:12},[i.value.registration?(A(),N(zi,{key:0,accommodations:u.accommodations,convention:u.convention,extras:u.extras,forms:u.forms,interests:u.interests,tickets:u.tickets,venues:u.venues,layouts:u.item.raw[u.header.key].Layouts,modelValue:i.value.registration,"onUpdate:modelValue":d[3]||(d[3]=f=>i.value.registration=f),onOpenActions:v,onShowForm:m},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","layouts","modelValue"])):ae("",!0)],64)):(A(),W(de,{key:13},[Z(ie(u.item.raw[u.header.key]),1)],64))}}),tr=Be({__name:"RegistrationActionTabs",props:$e({alignTabs:{},class:{},fixedTabs:{type:Boolean},showArrows:{type:[String,Boolean]},tabs:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=a,n=ze(a,"modelValue");return(i,m)=>(A(),N(_r,gn({modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=v=>n.value=v)},o),{default:c(()=>[(A(!0),W(de,null,je(i.tabs,v=>(A(),N(Dr,{value:v.value,key:v.value},{default:c(()=>[Z(ie(v.label),1)]),_:2},1032,["value"]))),128))]),_:1},16,["modelValue"]))}}),us=(a=void 0,o)=>a===void 0?!1:Er(a,wr.GROUP_TYPE_CONVENTION,o.ConventionUUID,o).EditPaymentTransactions,ds={class:"mb-4"},cs={class:"v-row"},ms={key:0,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},fs={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},vs={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},ps={class:"v-col v-col-2 align-self-end text-right py-1 text-no-wrap"},ys={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},gs={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},hs={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},Us={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},Ts=Be({__name:"PaymentActions",props:$e({forms:{},title:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=M(!1),n=M(),i=M([]),m=M(new Date().getTime()),v=M(!1),g=ze(a,"modelValue"),u=M(Na(g.value));qe(g,()=>{u.value=Na(g.value)});const d=Yt();d.getConvention(g.value.ConventionUUID).then(E=>{E&&(v.value=us(Ya(),E))});const f=()=>{d.generateRegistrationCharges(g.value.RegistrationUUID,!1).then(E=>{E&&(i.value=E.PaymentTransactions,n.value=E.Registration,m.value=new Date().getTime())}).catch(()=>{})};f();const b=()=>{d.generateRegistrationCharges(g.value.RegistrationUUID,!0).then(E=>{E&&(i.value=E.PaymentTransactions,n.value=E.Registration,m.value=new Date().getTime())})},{totalCharges:T}=Ai();return(E,C)=>(A(),N(Wt,null,{default:c(()=>[s(ba,null,{default:c(()=>[s(Sa,null,{default:c(()=>[Z(" Payments (#"+ie(g.value.Reference)+" "+ie(g.value.User.DisplayName)+") ",1)]),_:1})]),_:1}),s(sa,null,{default:c(()=>[n.value?(A(),W(de,{key:0},[ue("h3",ds,"#"+ie(n.value.Reference)+" "+ie(n.value.User.DisplayName),1),ue("dl",cs,[(A(!0),W(de,null,je(i.value,V=>(A(),W(de,{key:V.PaymentTransactionUUID},[V.Type===F(Ei).PAYMENT_TRANSACTION_TYPE_CHARGE?(A(),W("dt",ms,[ue("div",fs,ie(V.Description.split(":")[0])+": ",1),ue("div",vs,ie(V.Description.split(":")[1]),1)])):ae("",!0),ue("dd",ps," £"+ie(V.Amount),1)],64))),128)),C[2]||(C[2]=ue("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Total Charges ",-1)),ue("dd",ys," £"+ie(F(T)(i.value)),1),C[3]||(C[3]=ue("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Applied Total ",-1)),ue("dd",gs," £"+ie(n.value.Total),1),C[4]||(C[4]=ue("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Currently Paid ",-1)),ue("dd",hs," £"+ie(n.value.Paid),1),C[5]||(C[5]=ue("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Balance ",-1)),ue("dd",Us," £"+ie(n.value.Total-n.value.Paid),1)]),s(ge,{class:"flex-row-reverse"},{default:c(()=>[s(Y,{class:"text-right"},{default:c(()=>[s(ce,{color:"primary",onClick:b},{default:c(()=>C[6]||(C[6]=[Z("Apply Charges")])),_:1})]),_:1}),!o.value&&v.value?(A(),N(Y,{key:0},{default:c(()=>[s(ce,{color:"secondary",onClick:C[0]||(C[0]=V=>o.value=!0)},{default:c(()=>C[7]||(C[7]=[Z("Transaction Entry")])),_:1})]),_:1})):ae("",!0)]),_:1})],64)):ae("",!0),s(si,{"can-edit":v.value,registration:g.value,"show-editor":o.value,onCloseEditor:C[1]||(C[1]=V=>o.value=!1),updated:m.value,onChange:f},null,8,["can-edit","registration","show-editor","updated"])]),_:1})]),_:1}))}}),bs=Ir(Ts,[["__scopeId","data-v-8af8174d"]]),Ss=Be({__name:"RegistrationFormStatus",props:$e({forms:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=Yt(),n=ze(a,"modelValue"),i=(m,v)=>{const g=n.value.Submissions.find(u=>u.SubmissionUUID==v);if(!g){m&&m("Submission not found");return}o.setSubmissionStatus(v,g.Status).then(u=>{u?(n.value.Submissions.forEach((d,f)=>{n.value.Submissions[f].Status=d.Status}),m&&m("Status Saved")):m&&m("Status not saved")}).catch(()=>{m&&m("Status not saved")})};return(m,v)=>(A(),N(Wt,null,{default:c(()=>[s(ba,null,{default:c(()=>[s(Sa,null,{default:c(()=>[Z("Status (#"+ie(n.value.Reference)+" "+ie(n.value.User.DisplayName)+")",1)]),_:1})]),_:1}),s(sa,null,{default:c(()=>[s(bn,null,{default:c(()=>[(A(!0),W(de,null,je(n.value.Submissions,g=>(A(),N(ia,{key:g.SubmissionUUID,class:"pa-0"},{default:c(()=>[s(ge,{class:"py-2 align-center"},{default:c(()=>[s(Y,{cols:"9",sm:"10",md:"10",lg:"9"},{default:c(()=>{var u;return[s(Te,{modelValue:g.Status,"onUpdate:modelValue":d=>g.Status=d,items:F(Qn),"item-text":"title","item-value":"value",variant:"outlined","hide-details":"",label:((u=m.forms.find(d=>d.FormUUID==g.FormUUID))==null?void 0:u.Name)||""},{selection:c(()=>[s(Sn,{class:"mr-4 d-none d-sm-inline"},{default:c(()=>{var d;return[Z(ie((d=F(Qn).find(f=>f.value===g.Status))==null?void 0:d.icon),1)]}),_:2},1024),Z(" "+ie(F(Ur)(g.Status)),1)]),item:c(({item:d,props:{onClick:f}})=>[s(ia,{title:d.title,"prepend-icon":d.raw.icon,onClick:f},null,8,["title","prepend-icon","onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","items","label"])]}),_:2},1024),s(Y,{cols:"3",sm:"2",md:"2",lg:"1"},{default:c(()=>[s(cn,{class:"d-none d-sm-inline-flex",title:"Save","prepend-icon":"mdi:mdi-content-save",color:"warning",onClick:u=>i(u.callback,g.SubmissionUUID)},null,8,["onClick"]),s(cn,{class:"d-sm-none",size:"35",icon:"mdi:mdi-content-save",color:"warning",onClick:u=>i(u.callback,g.SubmissionUUID)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),_s={class:"mb-4"},Ds=Be({__name:"RegistrationTags",props:$e({title:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=Yt(),n=ze(a,"modelValue"),i=M(Na(n.value)),m=M(!1),v=M(i.value.Tags);qe(n,()=>{i.value=Na(n.value)});const g=({callback:u})=>{const d=[],f=[];i.value.Tags.forEach(b=>{v.value.find(E=>E.TagUUID===b.TagUUID)||d.push(b.TagUUID)}),v.value.forEach(b=>{i.value.Tags.find(E=>b.TagUUID===E.TagUUID)||f.push(b.TagUUID)}),o.updateRegistrationTags(d,f,i.value.RegistrationUUID).then(b=>{b?u&&(u("Tags Saved"),n.value.Tags=b.Tags):u&&u("Error Saving Tags")}).catch(()=>{u&&u("Error Saving Tags")})};return(u,d)=>(A(),N(Wt,null,{default:c(()=>[s(ba,null,{default:c(()=>[s(Sa,null,{default:c(()=>[Z("Tags (#"+ie(i.value.Reference)+" "+ie(i.value.User.DisplayName)+")",1)]),_:1})]),_:1}),s(sa,null,{default:c(()=>[s(Ii,{class:"my-4"},{default:c(()=>[s(ki,null,{default:c(()=>d[2]||(d[2]=[Z("Caution")])),_:1}),d[3]||(d[3]=ue("p",null,"Any tags controlled through registration form fields will be reset when the applicable form is saved. If you don't know what you're doing here, don't touch!",-1))]),_:1}),ue("h3",_s,"#"+ie(i.value.Reference)+" "+ie(i.value.User.DisplayName),1),s(kr,{modelValue:i.value.Tags,"onUpdate:modelValue":d[0]||(d[0]=f=>i.value.Tags=f),convention:i.value.ConventionUUID,"show-key":!0,chips:!0,"show-uuid":m.value},null,8,["modelValue","convention","show-uuid"])]),_:1}),s(_n,{class:"px-4 align-start"},{default:c(()=>[s(aa,{label:"Show UUID",modelValue:m.value,"onUpdate:modelValue":d[1]||(d[1]=f=>m.value=f)},null,8,["modelValue"]),s(cn,{onClick:g,variant:"flat"})]),_:1})]),_:1}))}}),As=Ir(Ds,[["__scopeId","data-v-7d39acf0"]]),ar=Be({__name:"RegistrationActionWindows",props:$e({accommodations:{},convention:{},extras:{},forms:{},interests:{},registration:{},tickets:{},venues:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:$e(["update:registration"],["update:modelValue"]),setup(a,{emit:o}){const n=a,i=ze(a,"modelValue"),v=Sr(n,o,void 0,void 0,"registration");return(g,u)=>(A(),N(Ar,{modelValue:i.value,"onUpdate:modelValue":u[3]||(u[3]=d=>i.value=d),disabled:!0,touch:!1},{default:c(()=>[s(Ht,{value:"badges"},{default:c(()=>[i.value=="badges"?(A(),N(ct,{key:0,class:"pa-0 mx-0",fluid:!0},{default:c(()=>[s(ui,{convention:g.convention,registration:F(v)},null,8,["convention","registration"])]),_:1})):ae("",!0)]),_:1}),s(Ht,{value:"emails"},{default:c(()=>[i.value=="emails"?(A(),N(ct,{key:0,class:"pa-0 mx-0",fluid:!0},{default:c(()=>[s(di,{registration:F(v)},null,8,["registration"])]),_:1})):ae("",!0)]),_:1}),s(Ht,{value:"notes"},{default:c(()=>[i.value=="notes"?(A(),N(ct,{key:0,class:"pa-0 mx-0",fluid:!0},{default:c(()=>[s(ci,{convention:g.convention,expanded:!1,registration:F(v)},null,8,["convention","registration"])]),_:1})):ae("",!0)]),_:1}),s(Ht,{value:"payments"},{default:c(()=>[i.value=="payments"?(A(),N(ct,{key:0,class:"pa-0 mx-0",fluid:!0},{default:c(()=>[s(bs,{modelValue:F(v),"onUpdate:modelValue":u[0]||(u[0]=d=>Ua(v)?v.value=d:null),forms:g.forms,title:"Registration Payments"},null,8,["modelValue","forms"])]),_:1})):ae("",!0)]),_:1}),s(Ht,{value:"status"},{default:c(()=>[i.value=="status"?(A(),N(ct,{key:0,class:"pa-0 mx-0",fluid:!0},{default:c(()=>[s(Ss,{modelValue:F(v),"onUpdate:modelValue":u[1]||(u[1]=d=>Ua(v)?v.value=d:null),forms:g.forms},null,8,["modelValue","forms"])]),_:1})):ae("",!0)]),_:1}),s(Ht,{value:"tags"},{default:c(()=>[i.value=="tags"?(A(),N(ct,{key:0,class:"pa-0 mx-0",fluid:!0},{default:c(()=>[s(As,{modelValue:F(v),"onUpdate:modelValue":u[2]||(u[2]=d=>Ua(v)?v.value=d:null),title:"Registration Tags"},null,8,["modelValue"])]),_:1})):ae("",!0)]),_:1})]),_:1},8,["modelValue"]))}}),Es=(a,o)=>a===void 0?!1:Er(a,wr.GROUP_TYPE_CONVENTION,o.ConventionUUID,o).ViewPaymentTransactions,ws={key:0},Cs={key:1},nr=Be({__name:"RegistrationActions",props:$e({accommodations:{},convention:{},extras:{},forms:{},interests:{},registration:{},tickets:{},title:{},useDialog:{type:Boolean},venues:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:$e(["update:registration"],["update:modelValue"]),setup(a,{emit:o}){const n=a,i=ze(a,"modelValue"),v=Sr(n,o,void 0,void 0,"registration"),g=M("notes"),u=Ya(),d=[{label:"Badge",value:"badges"},{label:"Emails",value:"emails"},{label:"Notes",value:"notes"},{label:"Status",value:"status"},{label:"Tags",value:"tags"}];return Es(u,n.convention)&&d.splice(2,0,{label:"Payments",value:"payments"}),(f,b)=>f.useDialog?(A(),W("div",ws,[s(Ta,{modelValue:i.value,"onUpdate:modelValue":b[3]||(b[3]=T=>i.value=T),title:f.title,"show-close-action":!0,color:"primary","close-action-label":"Close",persistent:!0,"retain-focus":!1,scrollable:!0,fullscreen:"","card-class":"ma-0 pa-0"},{extension:c(()=>[s(tr,{modelValue:g.value,"onUpdate:modelValue":b[0]||(b[0]=T=>g.value=T),tabs:d,"show-arrows":!0},null,8,["modelValue"])]),default:c(()=>[s(ar,{modelValue:g.value,"onUpdate:modelValue":b[1]||(b[1]=T=>g.value=T),registration:F(v),"onUpdate:registration":b[2]||(b[2]=T=>Ua(v)?v.value=T:null),accommodations:f.accommodations,convention:f.convention,extras:f.extras,forms:f.forms,interests:f.interests,tabs:d,tickets:f.tickets,venues:f.venues},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])]),_:1},8,["modelValue","title"])])):(A(),W("div",Cs,[s(tr,{modelValue:g.value,"onUpdate:modelValue":b[4]||(b[4]=T=>g.value=T),tabs:d,"show-arrows":!0},null,8,["modelValue"]),s(ar,{modelValue:g.value,"onUpdate:modelValue":b[5]||(b[5]=T=>g.value=T),registration:F(v),"onUpdate:registration":b[6]||(b[6]=T=>Ua(v)?v.value=T:null),accommodations:f.accommodations,convention:f.convention,extras:f.extras,forms:f.forms,interests:f.interests,tabs:d,tickets:f.tickets,venues:f.venues},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])]))}}),Mr=(a,o)=>{a.forEach(n=>{n.Items.forEach(i=>{(i.SectionField==null||i.SectionField.Field==null)&&o.find(m=>{m.Sections.find(v=>{if(v.Fields){const g=v.Fields.find(u=>u.SectionFieldUUID===i.SectionFieldUUID);if(g)return i.SectionField=g,!0}})})})})},Is={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},ks={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},Rs={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},Os={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},Ms={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},Vs={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},$s={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},Ps={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},Ls={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},Fs={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},Ns={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},xs={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},js={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},Bs={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},Ys={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},Gs={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},Hs={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},Ws={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},qs={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},zs={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},Js={red:Is,pink:ks,purple:Rs,deepPurple:Os,indigo:Ms,blue:Vs,lightBlue:$s,cyan:Ps,teal:Ls,green:Fs,lightGreen:Ns,lime:xs,yellow:js,amber:Bs,orange:Ys,deepOrange:Gs,brown:Hs,blueGrey:Ws,grey:qs,shades:zs},Ks=Be({__name:"EditAdminLayoutSearch",props:$e({formOptions:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=a,n=ze(a,"modelValue");n.value.Search||(n.value.Search=[]);const i=M(o.formOptions),m=()=>{n.value.Search.push({ID:0,LayoutItemUUID:Ot(),LayoutPanelID:n.value.AdminLayoutID,LayoutPanelUUID:n.value.AdminLayoutUUID,Label:"",SourceType:Rt.LAYOUT_ITEM_SOURCE_FORM,Align:"",Order:n.value.Search.length,DefaultSort:!1,Meta:{}})},v=u=>{const d=n.value.Search.findIndex(f=>f.LayoutItemUUID===u.LayoutItemUUID);d!=-1&&n.value.Search.splice(d,1)},g=u=>{const d=i.value.find(f=>f.value===u.SectionFieldUUID);d&&(u.SectionFieldID=d.object.ID,u.SectionField=d.object)};return(u,d)=>(A(),W(de,null,[(A(!0),W(de,null,je(n.value.Search,f=>(A(),N(ge,{key:f.LayoutItemUUID},{default:c(()=>[s(Y,{cols:"12",sm:"6"},{default:c(()=>[s(Te,{modelValue:f.SourceType,"onUpdate:modelValue":b=>f.SourceType=b,label:"Source Type",items:F(hn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),s(Y,null,{default:c(()=>[f.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(A(),N(Te,{key:0,modelValue:f.SectionFieldUUID,"onUpdate:modelValue":b=>f.SectionFieldUUID=b,label:"Form Data",items:i.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:b=>g(f)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):f.SourceType==="LAYOUT_ITEM_SOURCE_META"?(A(),N(Te,{key:1,modelValue:f.MetaField,"onUpdate:modelValue":b=>f.MetaField=b,label:"Miscellaneous Data",items:F(Un),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):f.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(A(),N(Te,{key:2,modelValue:f.UserField,"onUpdate:modelValue":b=>f.UserField=b,label:"User Profile Data",items:F(Tn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):ae("",!0)]),_:2},1024),s(Y,null,{default:c(()=>[s(ce,{icon:"mdi:mdi-delete",onClick:b=>v(f)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),s(ce,{onClick:m,color:"primary"},{default:c(()=>d[0]||(d[0]=[Z(" Add Search Item ")])),_:1})],64))}}),Qs=Be({__name:"EditAdminLayoutFilter",props:$e({formOptions:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=a,n=ze(a,"modelValue");n.value.Filter||(n.value.Filter=[]);const i=M(o.formOptions),m=()=>{n.value.Filter.push({ID:0,LayoutItemUUID:Ot(),LayoutPanelID:n.value.AdminLayoutID,LayoutPanelUUID:n.value.AdminLayoutUUID,Label:"",SourceType:Rt.LAYOUT_ITEM_SOURCE_FORM,Align:"",Order:n.value.Filter.length,DefaultSort:!1,Meta:{}})},v=u=>{const d=n.value.Filter.findIndex(f=>f.LayoutItemUUID===u.LayoutItemUUID);d!=-1&&n.value.Filter.splice(d,1)},g=u=>{const d=i.value.find(f=>f.value===u.SectionFieldUUID);d&&(u.SectionFieldID=d.object.ID,u.SectionField=d.object)};return(u,d)=>(A(),W(de,null,[(A(!0),W(de,null,je(n.value.Filter,f=>(A(),N(ge,{key:f.LayoutItemUUID},{default:c(()=>[s(Y,{cols:"12",sm:"6"},{default:c(()=>[s(Te,{modelValue:f.SourceType,"onUpdate:modelValue":b=>f.SourceType=b,label:"Source Type",items:F(hn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),s(Y,null,{default:c(()=>[f.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(A(),N(Te,{key:0,modelValue:f.SectionFieldUUID,"onUpdate:modelValue":b=>f.SectionFieldUUID=b,label:"Form Data",items:i.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:b=>g(f)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):f.SourceType==="LAYOUT_ITEM_SOURCE_META"?(A(),N(Te,{key:1,modelValue:f.MetaField,"onUpdate:modelValue":b=>f.MetaField=b,label:"Miscellaneous Data",items:F(Un),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):f.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(A(),N(Te,{key:2,modelValue:f.UserField,"onUpdate:modelValue":b=>f.UserField=b,label:"User Profile Data",items:F(Tn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):ae("",!0)]),_:2},1024),s(Y,null,{default:c(()=>[s(ce,{icon:"mdi:mdi-delete",onClick:b=>v(f)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),s(ce,{onClick:m,color:"primary"},{default:c(()=>d[0]||(d[0]=[Z(" Add Filter Item ")])),_:1})],64))}}),Xs={key:0,class:"text-warning text-right pl-1"},Zs=Be({__name:"EditAdminLayout",props:$e({convention:{},layouts:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:$e(["change","delete"],["update:modelValue"]),setup(a,{emit:o}){const n=Li(),i=ze(a,"modelValue"),m=M([]),v=Yt(),g=o,u=M(Object.assign({},...a.layouts.map(x=>x.Panels.map(q=>q.Items.map(R=>{if(!R.Meta)return{};const B={};return Object.entries(R.Meta).forEach(D=>{Array.isArray(D[1])?(B[`${R.LayoutItemUUID}.${D[0]}`]=[],D[1].forEach(oe=>{B[`${R.LayoutItemUUID}.${D[0]}`].push(oe.toString())})):D[1]!==void 0&&D[1]!==null&&(B[`${R.LayoutItemUUID}.${D[0]}`]=[D[1].toString()])}),B}))).flat(2))),d=M(`
Are you sure you wish to delete this layout? All panels relating to it will be
removed and can not be recovered. This action can not be undone once saved.
You will have to create a new layout.
`),f=M(!1),b=M([]);v.getConventionTags(a.convention.ConventionUUID).then(x=>{x&&(b.value=x)}).catch(()=>{});const T=()=>({ID:0,LayoutPanelUUID:Ot(),AdminLayoutID:i.value.ID,AdminLayoutUUID:i.value.AdminLayoutUUID,Name:"",Order:i.value.Panels.length+1,Items:[],Search:[],Filter:[],PanelStyle:Kn.PANEL_STYLE_FLEX,RequiredFormType:Ie.FORM_TYPE_NIL,RequiredGroupMemberships:[],RequiredRegistrationTags:[],Meta:{}}),E=x=>()=>({ID:0,LayoutItemUUID:Ot(),LayoutPanelID:x.ID,LayoutPanelUUID:x.LayoutPanelUUID,Label:"",SourceType:Rt.LAYOUT_ITEM_SOURCE_FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:x.Items.length+1,DefaultSort:!1,Meta:{}}),C=(x,q)=>{x.Meta[q]=u.value[`${x.LayoutItemUUID}.${q}`]},V=x=>{const q=m.value.find(R=>R.value===x.SectionFieldUUID);q&&(x.SectionFieldID=q.object.ID,x.SectionField=q.object)};v.getConventionForms(i.value.ConventionUUID).then(x=>{x&&(x.forEach(q=>q.Sections.forEach(R=>R.Fields&&m.value.push(...R.Fields.map(B=>{var oe;return{title:`${q.Name} - ${R.Name} - ${(oe=B.Field)==null?void 0:oe.Name}`,value:B.SectionFieldUUID,object:B}})))),m.value.sort(Mi("title")),Mr(i.value.Panels,x))});const H=ra(()=>{switch(i.value.Type){case ut.ADMIN_LAYOUT_PANELS:return"Panels";case ut.ADMIN_LAYOUT_TABLE:return"Tabs"}return"Unknown"});qe(i,()=>{g("change")},{deep:!0});const te=ra(()=>{const x=/([a-zA-Z]+)(\d+)/;return Object.entries(Js).map(([q,R])=>Object.entries(R).map(([B,D])=>{const oe=x.exec(B);return!oe||oe.length<3?void 0:{Title:`${un(q).split(/(?=[A-Z])/).join(" ")} ${un(oe[1])} ${un(oe[2])}`,CSSName:`${q}-${oe[1]}-${oe[2]}`,Value:D}})).flat().filter(q=>!!q).sort((q,R)=>q.Title>R.Title?1:q.Title==R.Title?0:-1)});return(x,q)=>(A(),N(ct,{class:"px-0 mx-0",fluid:!0},{default:c(()=>[s(ge,null,{default:c(()=>[s(Y,{cols:"12",sm:"6"},{default:c(()=>[s(Ne,{modelValue:i.value.Name,"onUpdate:modelValue":q[0]||(q[0]=R=>i.value.Name=R),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),s(Y,{cols:"12",sm:"6"},{default:c(()=>[s(Te,{modelValue:i.value.Type,"onUpdate:modelValue":q[1]||(q[1]=R=>i.value.Type=R),label:"Layout Type",items:F(mi),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),i.value.Type==F(ut).ADMIN_LAYOUT_PANELS?(A(),N(Y,{key:0,cols:"12",sm:"6"},{default:c(()=>[s(Te,{modelValue:i.value.RunnerLayoutUUID,"onUpdate:modelValue":q[2]||(q[2]=R=>i.value.RunnerLayoutUUID=R),clearable:!0,items:x.layouts.filter(R=>R.Type===F(ut).ADMIN_LAYOUT_PANELS)||[],multiple:!1,label:"Runner Display (Optional)","item-title":"Name","item-value":"AdminLayoutUUID",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})):ae("",!0)]),_:1}),s(ge,null,{default:c(()=>[s(Y,null,{default:c(()=>[s(fn,{modelValue:i.value.Panels,"onUpdate:modelValue":q[3]||(q[3]=R=>i.value.Panels=R),"new-item":T,closeable:!1,title:H.value,label:"Name","slot-name-prefix":"panel"},xa({_:2},[je(i.value.Panels,(R,B)=>({name:`panel_${B}`,fn:c(()=>[s(ct,{class:"px-0 mx-0",fluid:!0},{default:c(()=>[s(ge,null,{default:c(()=>[s(Y,{cols:"12",sm:"6"},{default:c(()=>[s(Ne,{modelValue:R.Name,"onUpdate:modelValue":D=>R.Name=D,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),i.value.Type===F(ut).ADMIN_LAYOUT_PANELS?(A(),N(Y,{key:0,cols:"12",sm:"6"},{default:c(()=>[s(Te,{modelValue:R.PanelStyle,"onUpdate:modelValue":D=>R.PanelStyle=D,items:F(fi),clearable:!0,label:"Panel Style",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)):ae("",!0),s(Y,{cols:"12",sm:"6"},{default:c(()=>[s(Te,{modelValue:R.RequiredFormType,"onUpdate:modelValue":D=>R.RequiredFormType=D,items:F(gi),clearable:!0,label:"Required Form",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),s(Y,{cols:"12",sm:"6"},{default:c(()=>[s($i,{label:"Required Groups",variant:"outlined",modelValue:R.RequiredGroupMemberships,"onUpdate:modelValue":D=>R.RequiredGroupMemberships=D,convention:i.value.ConventionUUID,chips:"",clearable:"",hint:"Groups that a user must be in to see this panel. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024),s(Y,{cols:"12",sm:"6"},{default:c(()=>[s(kr,{label:"Registration Tags",variant:"outlined",modelValue:R.RequiredRegistrationTags,"onUpdate:modelValue":D=>R.RequiredRegistrationTags=D,convention:i.value.ConventionUUID,chips:"",clearable:"",hint:"Tags that a registration must have to appear in results. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024)]),_:2},1024),F(n)?(A(),N(ge,{key:0},{default:c(()=>[s(Y,null,{default:c(()=>[s(Rr,{variant:"accordion"},{default:c(()=>[s(vn,null,{default:c(()=>[s(pn,null,{default:c(()=>q[7]||(q[7]=[Z(" Filters ")])),_:1}),s(yn,null,{default:c(()=>[q[8]||(q[8]=ue("p",null," Fixed search settings to pre-filter results by ",-1)),s(Qs,{modelValue:i.value.Panels[B],"onUpdate:modelValue":D=>i.value.Panels[B]=D,"form-options":m.value},null,8,["modelValue","onUpdate:modelValue","form-options"])]),_:2},1024)]),_:2},1024),s(vn,null,{default:c(()=>[s(pn,null,{default:c(()=>q[9]||(q[9]=[Z(" Search Options ")])),_:1}),s(yn,null,{default:c(()=>[q[10]||(q[10]=ue("p",null," Dynamic search options ",-1)),s(Ks,{modelValue:i.value.Panels[B],"onUpdate:modelValue":D=>i.value.Panels[B]=D,"form-options":m.value},null,8,["modelValue","onUpdate:modelValue","form-options"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):ae("",!0),i.value.Type===F(ut).ADMIN_LAYOUT_TABLE?(A(),N(ge,{key:1},{default:c(()=>[s(Y,null,{default:c(()=>[s(aa,{modelValue:R.Meta.challenge,"onUpdate:modelValue":D=>R.Meta.challenge=D,label:"Require challenge on search"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):ae("",!0),i.value.Type===F(ut).ADMIN_LAYOUT_PANELS&&R.PanelStyle===F(Kn).PANEL_STYLE_FLEX?(A(),N(ge,{key:2},{default:c(()=>[s(Y,{cols:"12",class:"py-0 my-0"},{default:c(()=>q[11]||(q[11]=[ue("h4",null,"Grid Size (Max 12)",-1)])),_:1}),s(Y,{cols:"6",sm:"4",lg:"2"},{default:c(()=>[s(Ne,{modelValue:R.Meta.cols,"onUpdate:modelValue":D=>R.Meta.cols=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"Default",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"6",sm:"4",lg:"2"},{default:c(()=>[s(Ne,{modelValue:R.Meta.cols_xs,"onUpdate:modelValue":D=>R.Meta.cols_xs=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"XS",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"6",sm:"4",lg:"2"},{default:c(()=>[s(Ne,{modelValue:R.Meta.cols_sm,"onUpdate:modelValue":D=>R.Meta.cols_sm=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"SM",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"6",sm:"4",lg:"2"},{default:c(()=>[s(Ne,{modelValue:R.Meta.cols_md,"onUpdate:modelValue":D=>R.Meta.cols_md=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"MD",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"6",sm:"4",lg:"2"},{default:c(()=>[s(Ne,{modelValue:R.Meta.cols_lg,"onUpdate:modelValue":D=>R.Meta.cols_lg=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"LG",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"6",sm:"4",lg:"2"},{default:c(()=>[s(Ne,{modelValue:R.Meta.cols_xl,"onUpdate:modelValue":D=>R.Meta.cols_xl=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"XL",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):ae("",!0)]),_:2},1024),s(fn,{modelValue:R.Items,"onUpdate:modelValue":D=>R.Items=D,"new-item":E(R),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},xa({_:2},[je(R.Items,(D,oe)=>({name:`item_${oe}`,fn:c(()=>[s(ct,{class:"px-0 mx-0",fluid:!0},{default:c(()=>{var be,P;return[s(ge,null,{default:c(()=>[s(Y,{cols:"12",sm:"6"},{default:c(()=>[s(Ne,{modelValue:D.Label,"onUpdate:modelValue":w=>D.Label=w,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),s(ge,null,{default:c(()=>[s(Y,{cols:"12",sm:"6"},{default:c(()=>[s(Te,{modelValue:D.SourceType,"onUpdate:modelValue":w=>D.SourceType=w,label:"Source Type",items:F(hn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),s(Y,{cols:"12",sm:"6"},{default:c(()=>[D.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(A(),N(Te,{key:0,modelValue:D.SectionFieldUUID,"onUpdate:modelValue":w=>D.SectionFieldUUID=w,label:"Form Data",items:m.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:w=>V(D)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):D.SourceType==="LAYOUT_ITEM_SOURCE_META"?(A(),N(Te,{key:1,modelValue:D.MetaField,"onUpdate:modelValue":w=>D.MetaField=w,label:"Miscellaneous Data",items:F(Un),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):D.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(A(),N(Te,{key:2,modelValue:D.UserField,"onUpdate:modelValue":w=>D.UserField=w,label:"User Profile Data",items:F(Tn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):ae("",!0)]),_:2},1024)]),_:2},1024),x.layouts&&D.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&((P=(be=D.SectionField)==null?void 0:be.Field)==null?void 0:P.Type)===F(hr).TEXT?(A(),N(ge,{key:0},{default:c(()=>[s(Y,{cols:"12",xs:"6",sm:"6",lg:"3"},{default:c(()=>[s(aa,{modelValue:D.Meta.DirectEdit,"onUpdate:modelValue":w=>D.Meta.DirectEdit=w,label:"Direct Edit","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"12",xs:"6",sm:"6",lg:"3"},{default:c(()=>[s(Te,{modelValue:D.Meta.DirectEditPermission,"onUpdate:modelValue":w=>D.Meta.DirectEditPermission=w,label:"Minimum Permission Required",items:["View","Edit"],"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):ae("",!0),x.layouts&&D.SourceType==="LAYOUT_ITEM_SOURCE_META"&&D.MetaField===F(pe).META_DATA_SOURCE_BADGE_DISPLAY?(A(),N(ge,{key:1},{default:c(()=>[s(Y,{cols:"6",sm:"4",lg:"2"},{default:c(()=>[s(aa,{modelValue:D.Meta.HideDownloadButton,"onUpdate:modelValue":w=>D.Meta.HideDownloadButton=w,label:"Hide Download Button"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"6",sm:"4",lg:"2"},{default:c(()=>[s(aa,{modelValue:D.Meta.HideNFCButton,"onUpdate:modelValue":w=>D.Meta.HideNFCButton=w,label:"Hide NFC Button"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):ae("",!0),x.layouts&&D.SourceType==="LAYOUT_ITEM_SOURCE_META"&&D.MetaField===F(pe).META_DATA_SOURCE_DATA_LAYOUT?(A(),N(ge,{key:2},{default:c(()=>[s(Y,{cols:"6",sm:"4",lg:"2"},{default:c(()=>[s(Te,{modelValue:u.value[`${D.LayoutItemUUID}.LayoutUUID`],"onUpdate:modelValue":[w=>u.value[`${D.LayoutItemUUID}.LayoutUUID`]=w,w=>C(D,"LayoutUUID")],clearable:!0,items:x.layouts.filter(w=>w.Type===F(ut).ADMIN_LAYOUT_PANELS)||[],multiple:!0,label:"Data Display","item-title":"Name","item-value":"AdminLayoutUUID",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)):ae("",!0),x.layouts&&D.SourceType==="LAYOUT_ITEM_SOURCE_META"&&D.MetaField===F(pe).META_DATA_SOURCE_TAGS?(A(),N(ge,{key:3},{default:c(()=>[s(Y,{cols:"6",sm:"6",md:"6",lg:"6"},{default:c(()=>[s(Te,{modelValue:u.value[`${D.LayoutItemUUID}.Tags`],"onUpdate:modelValue":[w=>u.value[`${D.LayoutItemUUID}.Tags`]=w,w=>C(D,"Tags")],clearable:!0,items:b.value||[],multiple:!0,chips:!0,label:"Tags to Display","item-title":"Title","item-value":"TagUUID",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"]),!u.value[D.LayoutItemUUID]||u.value[D.LayoutItemUUID].length===0?(A(),W("small",Xs," Will show all tags ")):ae("",!0)]),_:2},1024),s(Y,{cols:"6"},{default:c(()=>[s(Te,{modelValue:D.Meta.TagColour,"onUpdate:modelValue":w=>D.Meta.TagColour=w,items:te.value,label:"Colour","item-title":"Title","item-value":"Value",variant:"outlined","hide-details":""},{selection:c(({item:w})=>[s(ce,{size:"x-small",color:w.raw.Value,class:"mr-2"},null,8,["color"]),Z(" "+ie(w.title),1)]),item:c(({props:w,item:G})=>[s(ia,Gl(Hl(w)),{prepend:c(()=>[s(ce,{size:"x-small",color:G.raw.Value,class:"mr-2"},null,8,["color"])]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)):ae("",!0),i.value.Type===F(ut).ADMIN_LAYOUT_TABLE&&(D.SourceType!==F(Rt).LAYOUT_ITEM_SOURCE_META||D.MetaField!==F(pe).META_DATA_SOURCE_DATA_LAYOUT)?(A(),N(ge,{key:4},{default:c(()=>[s(Y,null,{default:c(()=>[s(aa,{modelValue:D.DefaultSort,"onUpdate:modelValue":w=>D.DefaultSort=w,label:"Default Sort","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):ae("",!0)]}),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue","title"])]),_:1})]),_:1}),s(ge,null,{default:c(()=>[s(Y,null,{default:c(()=>[s(ce,{onClick:q[4]||(q[4]=R=>f.value=!0),"prepend-icon":"mdi:mdi-delete",color:"red-darken-4"},{default:c(()=>q[12]||(q[12]=[Z("Delete Layout")])),_:1})]),_:1})]),_:1}),f.value?(A(),N(Pi,{key:0,modelValue:f.value,"onUpdate:modelValue":q[5]||(q[5]=R=>f.value=R),message:d.value,title:"Delete Layout",subtitle:"Removes this layout and all it's panels",onDelete:q[6]||(q[6]=R=>g("delete"))},null,8,["modelValue","message"])):ae("",!0)]),_:1}))}}),eu=Be({__name:"EditAdminLayouts",props:$e({title:{},convention:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:$e(["save"],["update:modelValue"]),setup(a,{emit:o}){const n=ze(a,"modelValue"),i=o,m=M([]),v=M([]),g=M([]),u=Yt(),d=()=>({ID:0,AdminLayoutUUID:Ot(),ConventionID:a.convention.ID,ConventionUUID:a.convention.ConventionUUID,Name:"New Layout",Type:ut.ADMIN_LAYOUT_PANELS,Panels:[]}),f=()=>{let T=!1;[...new Set(g.value)].forEach(C=>{const V=m.value.findIndex(H=>H.AdminLayoutUUID===C);V<0||V>=m.value.length||(u.saveAdminLayout(m.value[V]).then(H=>{H&&m.value.splice(V,1,H)}).catch(()=>{}),T=!0)}),v.value.forEach(C=>{u.deleteAdminLayout(C).catch(()=>{})}),v.value=[],g.value=[],T&&i("save")},b=T=>{const E=m.value.findIndex(C=>C.AdminLayoutUUID===T.AdminLayoutUUID);E<0||E>=m.value.length||(m.value[E].ID>0&&v.value.push(T.AdminLayoutUUID),m.value.splice(E,1))};return u.getConventionAdminLayouts(a.convention.ConventionUUID).then(T=>{T&&(m.value=T)}).catch(()=>[]),(T,E)=>(A(),N(ja,{modelValue:n.value,"onUpdate:modelValue":E[2]||(E[2]=C=>n.value=C),scrollable:!0,"retain-focus":!0,persistent:!0,fullscreen:!0},{default:c(()=>[s(fn,{modelValue:m.value,"onUpdate:modelValue":E[0]||(E[0]=C=>m.value=C),"new-item":d,closeable:!0,"show-delete":!1,"show-save":!0,"has-order":!1,title:T.title,label:"Name","slot-name-prefix":"panel",onClose:E[1]||(E[1]=C=>n.value=!1),onSave:f},xa({_:2},[je(m.value,(C,V)=>({name:`panel_${V}`,fn:c(()=>[s(ct,{class:"px-0 mx-0",fluid:!0},{default:c(()=>[s(ge,null,{default:c(()=>[s(Y,{cols:"12"},{default:c(()=>[s(Zs,{modelValue:m.value[V],"onUpdate:modelValue":H=>m.value[V]=H,convention:T.convention,layouts:m.value,onChange:H=>g.value.push(C.AdminLayoutUUID),onDelete:H=>b(C)},null,8,["modelValue","onUpdate:modelValue","convention","layouts","onChange","onDelete"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","title"])]),_:1},8,["modelValue"]))}}),tu=["href","onClick"],au=Be({__name:"OperatorSocket",setup(a){const o=Yt(),n=Fa.getInstance(),i=Ya(),m=Ni(),v=M(!1),g=vi({wsUri:o.getRunnerSocketURL()}),u=Wl.getInstance(),d=M(!1),f=M(!1),b=M([]),T=yr(),E=M("Connecting"),C=M([{title:"- Select Duration -",value:-1},{title:"No Expiry",value:0},{title:"5 Minutes",value:5*60*1e3},{title:"30 Minutes",value:30*60*1e3},{title:"1 Hour",value:60*60*1e3},{title:"1.5 Hours",value:90*60*1e3},{title:"2 Hours",value:120*60*1e3},{title:"3 Hours",value:180*60*1e3},{title:"4 Hours",value:240*60*1e3},{title:"5 Hours",value:300*60*1e3},{title:"6 Hours",value:360*60*1e3}]),V=P=>{if(P.editing=!1,P.timer&&clearTimeout(P.timer),!P.selectedDuration){P.expires=void 0,P.timer=void 0;return}const w=new Date;w.setTime(new Date().getTime()+P.selectedDuration),P.expires=w,H(P),B()},H=P=>{if(P.expires){if(P.timer&&clearTimeout(P.timer),typeof P.expires=="number"){const w=new Date;w.setTime(P.expires),P.expires=w}P.expires&&"getTime"in P.expires&&(P.timer=setTimeout(()=>{P.timer&&clearTimeout(P.timer),q(P)},P.expires.getTime()-Date.now()))}};g.on("authenticated",()=>{d.value=!0;const P={Key:"",Mode:"host",UserUUID:(i==null?void 0:i.UserUUID)||""},w={Command:"SET_MODE",Params:new Map,Data:JSON.stringify(P)};g.JSON(w)}),g.on("auth_failed",()=>{d.value=!1,E.value="Access Denied"}),g.on("badge_serial_update",P=>{n.emit("badge_serial_update",P)}),g.on("close",()=>{E.value="Disconnected"}),g.on("open",()=>{const P=u.getTokenByService("GrazeAPI");E.value="Authenticating",g.send(`AUTH ${P==null?void 0:P.AccessToken}`)}),g.on("runner_connected",P=>{const w=P,G=b.value.find(ye=>ye.key==w.Key);if(!G){te(w.Key,w.UserUUID);return}const me=qi();me.DisplayName=w.DisplayName,me.UserUUID=w.UserUUID,G.users.find(ye=>ye.UserUUID==me.UserUUID)||G.users.push(me)}),g.on("runner_disconnected",P=>{const w=P,G=b.value.find(ye=>ye.key==w.Key);if(!G)return;const me=G.users.findIndex(ye=>ye.UserUUID==w.UserUUID);me<0||G.users.splice(me,1)}),g.on("started",()=>{b.value.forEach(P=>{const w={Key:P.key},G={Command:"ADD_KEY",Params:new Map,Data:JSON.stringify(w)};g.JSON(G)}),E.value="Connected"}),ql(()=>{R(),Fa.getInstance().on("layout_opened",w=>{const G=w;if(!g||!d.value||!G||!G.AdminLayoutUUID||!G.RegistrationUUID)return;const me={Command:"OPEN_LAYOUT",Params:new Map,Data:JSON.stringify(G)};g.JSON(me)})}),pr(()=>{g.destroy()});const te=(P,w)=>{const me={Command:"KICK_RUNNER",Params:new Map,Data:JSON.stringify({DisplayName:"",Key:P,UserUUID:w})};g.JSON(me)},x=()=>{const P=Ot(),G={Command:"ADD_KEY",Params:new Map,Data:JSON.stringify({Key:P})};g.JSON(G),b.value.push({key:P,name:"New Session",users:[]}),B()},q=P=>{const w=b.value.findIndex(ye=>ye==P);if(w<0)return;const G={Key:P.key},me={Command:"REMOVE_KEY",Params:new Map,Data:JSON.stringify(G)};g.JSON(me),b.value.splice(w,1),B()},R=()=>{const P=sessionStorage.getItem("collaboration.sessions");P&&(b.value=JSON.parse(P),b.value.forEach(w=>{typeof w.expires!="number"&&(w.expires=0),H(w)}))},B=()=>{const P=[];b.value.forEach(w=>{P.push({name:w.name,expires:typeof w.expires=="number"?w.expires:w.expires?w.expires.getTime():0,key:w.key,users:[]})}),sessionStorage.setItem("collaboration.sessions",JSON.stringify(P))},D=P=>{const w=T.resolve({name:"RunnerView",params:{user:i==null?void 0:i.UserUUID,session:P.key}}),G=new URL(location.href);return G.pathname=w.href,G.toString()},oe=P=>{const w=D(P);return Fi(w),f.value=!0,w},be=P=>{if(typeof P=="number"){const ye=new Date;ye.setTime(P),P=ye}const w=P.getTime()-Date.now(),G=Math.floor(w/(1e3*60*60)),me=Math.floor(w%(1e3*60*60)/(1e3*60));return G==0&&me==0?`${Math.floor(w%6e4/1e3)}s`:`${G}hr${G!=1?"s":""} ${me}min${me!=1?"s":""}`};return(P,w)=>d.value?(A(),W(de,{key:0},[s(ce,{icon:"mdi:mdi-link-variant",onClick:w[0]||(w[0]=G=>v.value=!0)}),s(Ta,{modelValue:v.value,"onUpdate:modelValue":w[4]||(w[4]=G=>v.value=G),"hide-extension":!0,"show-save-action":!1,"show-delete-action":!1,"show-reset-action":!1,title:"Collaboration",subtitle:`Connection Status: ${E.value}`},{actions:c(()=>[s(na),s(ce,{color:"primary",variant:"flat","prepend-icon":"mdi:mdi-link-variant-plus",onClick:x},{default:c(()=>w[5]||(w[5]=[Z(" Create Session ")])),_:1})]),default:c(()=>[s(bn,null,{default:c(()=>[(A(!0),W(de,null,je(b.value,G=>(A(),W(de,{key:G.key},[s(bi,{value:G.key},{activator:c(({props:me})=>[s(ia,gn({ref_for:!0},me),{default:c(()=>[s(Tr,null,{default:c(()=>[s(ge,null,{default:c(()=>[s(Y,{style:{"max-width":"84px"}},{default:c(()=>[ue("a",{href:oe(G),onClick:dt(ye=>oe(G),["prevent","stop"]),class:"text-white text-decoration-none"},[s(ce,{variant:"flat",size:"x-small",icon:"mdi:mdi-link-variant",color:"success",class:"mr-2",title:"Copy Link"})],8,tu),s(ce,{variant:"flat",size:"x-small",icon:"mdi:mdi-link-variant-remove",color:"error",class:"mr-2",title:"Terminate",onClick:dt(ye=>q(G),["stop"])},null,8,["onClick"])]),_:2},1024),s(Y,null,{default:c(()=>[s(Ne,{modelValue:G.name,"onUpdate:modelValue":ye=>G.name=ye,"hide-details":"",variant:"plain",density:"compact",onChange:B,onClick:w[1]||(w[1]=dt(()=>{},["stop"])),onKeydown:w[2]||(w[2]=dt(()=>{},["stop"]))},{append:c(()=>[Z(ie(G.users.length),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),default:c(()=>[G.editing?(A(),N(Te,{key:0,label:"Duration",items:C.value,density:"compact","hide-details":!0,modelValue:G.selectedDuration,"onUpdate:modelValue":[me=>G.selectedDuration=me,me=>V(G)],modelModifiers:{number:!0}},null,8,["items","modelValue","onUpdate:modelValue"])):G.expires?(A(),W(de,{key:1},[ue("small",null,[w[6]||(w[6]=ue("strong",null,"Expires:",-1)),Z(" "+ie(be(G.expires)),1)]),s(ce,{onClick:me=>{G.selectedDuration=-1,G.editing=!0},variant:"text",color:"primary",density:"compact",size:"small"},{default:c(()=>w[7]||(w[7]=[Z(" (Change Expiry) ")])),_:2},1032,["onClick"])],64)):(A(),N(ce,{key:2,onClick:me=>{G.selectedDuration=-1,G.editing=!0},variant:"text",color:"primary",density:"compact",size:"small"},{default:c(()=>w[8]||(w[8]=[Z(" (Set Expiry) ")])),_:2},1032,["onClick"])),(A(!0),W(de,null,je(G.users,me=>(A(),N(ia,{key:`${G.key}.${me.UserUUID}`},{append:c(()=>[s(ce,{variant:"flat",size:"small",icon:"mdi:mdi-account-network-off",title:"Disconnect User",onClick:ye=>te(G.key,me.UserUUID)},null,8,["onClick"])]),prepend:c(()=>[s(br,{src:F(m)(me.UserUUID),class:"rounded-circle mr-2 pt-4 d-inline-block",height:"32",width:"32"},null,8,["src"])]),default:c(()=>[Z(" "+ie(me.DisplayName),1)]),_:2},1024))),128))]),_:2},1032,["value"]),s(F(xi),{value:oe(G),width:"200"},null,8,["value"])],64))),128))]),_:1}),s(wi,{modelValue:f.value,"onUpdate:modelValue":w[3]||(w[3]=G=>f.value=G),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"])]),_:1},8,["modelValue","subtitle"])],64)):ae("",!0)}}),nu={style:{opacity:"var(--v-medium-emphasis-opacity)"}},ru=Be({__name:"Paginator",props:$e({itemTotal:{}},{currentPage:{required:!0},currentPageModifiers:{},itemsPerPage:{required:!0},itemsPerPageModifiers:{}}),emits:["update:currentPage","update:itemsPerPage"],setup(a){const o=ze(a,"currentPage"),n=ze(a,"itemsPerPage");return(i,m)=>(A(),N(ct,{fluid:!0},{default:c(()=>[s(ge,{class:"align-center"},{default:c(()=>[s(Y,{cols:"12",lg:"7","order-lg":"3",xl:"8"},{default:c(()=>[s(ji,{modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=v=>o.value=v),modelModifiers:{number:!0},length:Math.ceil(i.itemTotal/n.value)},null,8,["modelValue","length"])]),_:1}),s(Y,{cols:"6",sm:"4",md:"2",lg:"2",xl:"1","order-lg":"1"},{default:c(()=>[s(Te,{modelValue:n.value,"onUpdate:modelValue":m[1]||(m[1]=v=>n.value=v),density:"compact","hide-details":"","item-title":"title","item-value":"value",label:"Items per page",min:"-1",max:"100",type:"number",variant:"outlined",items:[{title:"10",value:10},{title:"25",value:25},{title:"50",value:50},{title:"100",value:100},{title:"All",value:-1}]},null,8,["modelValue"])]),_:1}),s(Y,{cols:"6",sm:"3",md:"2",lg:"1",xl:"1","order-lg":"2"},{default:c(()=>[s(Ne,{modelValue:o.value,"onUpdate:modelValue":m[2]||(m[2]=v=>o.value=v),modelModifiers:{number:!0},density:"compact","hide-details":"",label:"Page",min:"1",max:Math.ceil(i.itemTotal/n.value),type:"number",variant:"outlined"},null,8,["modelValue","max"])]),_:1}),s(Y,{class:"text-right",cols:"12",sm:"5",md:"8",lg:"2",xl:"2","order-lg":"4"},{default:c(()=>[ue("span",nu,[n.value===-1?(A(),W(de,{key:0},[Z(" 1-"+ie(i.itemTotal)+" of "+ie(i.itemTotal),1)],64)):(A(),W(de,{key:1},[Z(ie((o.value-1)*n.value+1)+" - "+ie(o.value*n.value>=i.itemTotal?i.itemTotal:o.value*n.value)+" of "+ie(i.itemTotal),1)],64))])]),_:1})]),_:1})]),_:1}))}});var Vr=(a,o,n)=>{if(!o.has(a))throw TypeError("Cannot "+n)},rr=(a,o,n)=>(Vr(a,o,"read from private field"),n?n.call(a):o.get(a)),ou=(a,o,n)=>{if(o.has(a))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(a):o.set(a,n)},lu=(a,o,n,i)=>(Vr(a,o,"write to private field"),o.set(a,n),n);const $r=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"]],iu=[...$r,["unknown"]].map(a=>a[0]),Pa=new Map($r);function su(a){for(const[o,n]of Pa)if(a===n)return o;return"unknown"}function uu(a){if(Pr(a))return{width:a.naturalWidth,height:a.naturalHeight};if(Lr(a))return{width:a.width.baseVal.value,height:a.height.baseVal.value};if(Fr(a))return{width:a.videoWidth,height:a.videoHeight};if(xr(a))return{width:a.width,height:a.height};if(Br(a))return{width:a.displayWidth,height:a.displayHeight};if(Nr(a))return{width:a.width,height:a.height};if(jr(a))return{width:a.width,height:a.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function Pr(a){try{return a instanceof HTMLImageElement}catch{return!1}}function Lr(a){try{return a instanceof SVGImageElement}catch{return!1}}function Fr(a){try{return a instanceof HTMLVideoElement}catch{return!1}}function Nr(a){try{return a instanceof HTMLCanvasElement}catch{return!1}}function xr(a){try{return a instanceof ImageBitmap}catch{return!1}}function jr(a){try{return a instanceof OffscreenCanvas}catch{return!1}}function Br(a){try{return a instanceof VideoFrame}catch{return!1}}function Yr(a){try{return a instanceof Blob}catch{return!1}}function du(a){try{return a instanceof ImageData}catch{return!1}}function cu(a,o){try{const n=new OffscreenCanvas(a,o);if(n.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return n;throw void 0}catch{const i=document.createElement("canvas");return i.width=a,i.height=o,i}}async function Gr(a){if(Pr(a)&&!await pu(a))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(Lr(a)&&!await yu(a))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(Br(a)&&gu(a))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(Fr(a)&&(a.readyState===0||a.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(xr(a)&&Uu(a))throw new DOMException("The image source is detached.","InvalidStateError");const{width:o,height:n}=uu(a);if(o===0||n===0)return null;const i=cu(o,n).getContext("2d");i.drawImage(a,0,0);try{return i.getImageData(0,0,o,n)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function mu(a){let o;try{if(globalThis.createImageBitmap)o=await createImageBitmap(a);else if(globalThis.Image){o=new Image;let n="";try{n=URL.createObjectURL(a),o.src=n,await o.decode()}finally{URL.revokeObjectURL(n)}}else return a}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await Gr(o)}function fu(a){const{width:o,height:n}=a;if(o===0||n===0)return null;const i=a.getContext("2d");try{return i.getImageData(0,0,o,n)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function vu(a){if(Yr(a))return await mu(a);if(du(a)){if(hu(a))throw new DOMException("The image data has been detached.","InvalidStateError");return a}return Nr(a)||jr(a)?fu(a):await Gr(a)}async function pu(a){try{return await a.decode(),!0}catch{return!1}}async function yu(a){var o;try{return await((o=a.decode)==null?void 0:o.call(a)),!0}catch{return!1}}function gu(a){return a.format===null}function hu(a){return a.data.buffer.byteLength===0}function Uu(a){return a.width===0&&a.height===0}function or(a,o){return a instanceof DOMException?new DOMException(`${o}: ${a.message}`,a.name):a instanceof Error?new a.constructor(`${o}: ${a.message}`):new Error(`${o}: ${a}`)}const lr=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","DXFilmEdge","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","rMQRCode","UPC-A","UPC-E"];function Tu(a){return a.join("|")}function bu(a){const o=ir(a);let n=0,i=lr.length-1;for(;n<=i;){const m=Math.floor((n+i)/2),v=lr[m],g=ir(v);if(g===o)return v;g<o?n=m+1:i=m-1}return"None"}function ir(a){return a.toLowerCase().replace(/_-\[\]/g,"")}function Su(a,o){return a.Binarizer[o]}function _u(a,o){return a.CharacterSet[o]}const Du=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function Au(a){return Du[a.value]}function Eu(a,o){return a.EanAddOnSymbol[o]}function wu(a,o){return a.TextMode[o]}const ua={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function Hr(a,o){return{...o,formats:Tu(o.formats),binarizer:Su(a,o.binarizer),eanAddOnSymbol:Eu(a,o.eanAddOnSymbol),textMode:wu(a,o.textMode),characterSet:_u(a,o.characterSet)}}function Wr(a){return{...a,format:bu(a.format),eccLevel:a.eccLevel,contentType:Au(a.contentType)}}const Cu={locateFile:(a,o)=>{const n=a.match(/_(.+?)\.wasm$/);return n?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.1.3/dist/${n[1]}/${a}`:o+a}};let sr=new WeakMap;function Dn(a,o){var n;const i=sr.get(a);if(i!=null&&i.modulePromise&&o===void 0)return i.modulePromise;const m=(n=i==null?void 0:i.moduleOverrides)!=null?n:Cu,v=a({...m});return sr.set(a,{moduleOverrides:m,modulePromise:v}),v}async function Iu(a,o,n=ua){const i={...ua,...n},m=await Dn(a),{size:v}=o,g=new Uint8Array(await o.arrayBuffer()),u=m._malloc(v);m.HEAPU8.set(g,u);const d=m.readBarcodesFromImage(u,v,Hr(m,i));m._free(u);const f=[];for(let b=0;b<d.size();++b)f.push(Wr(d.get(b)));return f}async function ku(a,o,n=ua){const i={...ua,...n},m=await Dn(a),{data:v,width:g,height:u,data:{byteLength:d}}=o,f=m._malloc(d);m.HEAPU8.set(v,f);const b=m.readBarcodesFromPixmap(f,g,u,Hr(m,i));m._free(f);const T=[];for(let E=0;E<b.size();++E)T.push(Wr(b.get(E)));return T}({...ua,formats:[...ua.formats]});var An=(()=>{var a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(o={}){var n=o,i,m;n.ready=new Promise((e,t)=>{i=e,m=t});var v=Object.assign({},n),g="./this.program",u=typeof window=="object",d=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var f="";function b(e){return n.locateFile?n.locateFile(e,f):f+e}var T;(u||d)&&(d?f=self.location.href:typeof document<"u"&&document.currentScript&&(f=document.currentScript.src),a&&(f=a),f.indexOf("blob:")!==0?f=f.substr(0,f.replace(/[?#].*/,"").lastIndexOf("/")+1):f="",d&&(T=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)})),n.print||console.log.bind(console);var E=n.printErr||console.error.bind(console);Object.assign(n,v),v=null,n.arguments&&n.arguments,n.thisProgram&&(g=n.thisProgram),n.quit&&n.quit;var C;n.wasmBinary&&(C=n.wasmBinary),typeof WebAssembly!="object"&&Oe("no native wasm support detected");var V,H=!1,te,x,q,R,B,D,oe,be;function P(){var e=V.buffer;n.HEAP8=te=new Int8Array(e),n.HEAP16=q=new Int16Array(e),n.HEAPU8=x=new Uint8Array(e),n.HEAPU16=R=new Uint16Array(e),n.HEAP32=B=new Int32Array(e),n.HEAPU32=D=new Uint32Array(e),n.HEAPF32=oe=new Float32Array(e),n.HEAPF64=be=new Float64Array(e)}var w=[],G=[],me=[];function ye(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)Pe(n.preRun.shift());$t(w)}function mt(){$t(G)}function gt(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)ot(n.postRun.shift());$t(me)}function Pe(e){w.unshift(e)}function ht(e){G.unshift(e)}function ot(e){me.unshift(e)}var ke=0,tt=null;function ft(e){var t;ke++,(t=n.monitorRunDependencies)===null||t===void 0||t.call(n,ke)}function Ye(e){var t;if(ke--,(t=n.monitorRunDependencies)===null||t===void 0||t.call(n,ke),ke==0&&tt){var r=tt;tt=null,r()}}function Oe(e){var t;(t=n.onAbort)===null||t===void 0||t.call(n,e),e="Aborted("+e+")",E(e),H=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw m(r),r}var Mt="data:application/octet-stream;base64,",Ut=e=>e.startsWith(Mt),He;He="zxing_reader.wasm",Ut(He)||(He=b(He));function qt(e){if(e==He&&C)return new Uint8Array(C);if(T)return T(e);throw"both async and sync fetching of the wasm failed"}function Vt(e){return!C&&(u||d)&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>qt(e)):Promise.resolve().then(()=>qt(e))}function Tt(e,t,r){return Vt(e).then(l=>WebAssembly.instantiate(l,t)).then(l=>l).then(r,l=>{E(`failed to asynchronously prepare wasm: ${l}`),Oe(l)})}function zt(e,t,r,l){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!Ut(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(p=>{var h=WebAssembly.instantiateStreaming(p,r);return h.then(l,function(S){return E(`wasm streaming compile failed: ${S}`),E("falling back to ArrayBuffer instantiation"),Tt(t,r,l)})}):Tt(t,r,l)}function Jt(){var e={a:bl};function t(l,p){return Re=l.exports,V=Re.ia,P(),Cn=Re.ma,ht(Re.ja),Ye(),Re}ft();function r(l){t(l.instance)}if(n.instantiateWasm)try{return n.instantiateWasm(e,t)}catch(l){E(`Module.instantiateWasm callback failed with error: ${l}`),m(l)}return zt(C,He,e,r).catch(m),{}}var $t=e=>{for(;e.length>0;)e.shift()(n)};n.noExitRuntime;var bt=[],St=0,Kt=e=>{var t=new Le(e);return t.get_caught()||(t.set_caught(!0),St--),t.set_rethrown(!1),bt.push(t),Bn(t.excPtr),t.get_exception_ptr()},Ge=0,lt=()=>{Se(0,0);var e=bt.pop();jn(e.excPtr),Ge=0};function Le(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(t){D[this.ptr+4>>2]=t},this.get_type=function(){return D[this.ptr+4>>2]},this.set_destructor=function(t){D[this.ptr+8>>2]=t},this.get_destructor=function(){return D[this.ptr+8>>2]},this.set_caught=function(t){t=t?1:0,te[this.ptr+12>>0]=t},this.get_caught=function(){return te[this.ptr+12>>0]!=0},this.set_rethrown=function(t){t=t?1:0,te[this.ptr+13>>0]=t},this.get_rethrown=function(){return te[this.ptr+13>>0]!=0},this.init=function(t,r){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(r)},this.set_adjusted_ptr=function(t){D[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return D[this.ptr+16>>2]},this.get_exception_ptr=function(){var t=Gn(this.get_type());if(t)return D[this.excPtr>>2];var r=this.get_adjusted_ptr();return r!==0?r:this.excPtr}}var _t=e=>{throw Ge||(Ge=e),Ge},Qt=e=>{var t=Ge;if(!t)return ga(0),0;var r=new Le(t);r.set_adjusted_ptr(t);var l=r.get_type();if(!l)return ga(0),t;for(var p in e){var h=e[p];if(h===0||h===l)break;var S=r.ptr+16;if(Yn(h,l,S))return ga(h),t}return ga(l),t},Ga=()=>Qt([]),Xt=e=>Qt([e]),_a=(e,t)=>Qt([e,t]),Gt=()=>{var e=bt.pop();e||Oe("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(bt.push(e),e.set_rethrown(!0),e.set_caught(!1),St++),Ge=t,Ge},Pt=(e,t,r)=>{var l=new Le(e);throw l.init(t,r),Ge=e,St++,Ge},Ha=()=>St,Je={},it=e=>{for(;e.length;){var t=e.pop(),r=e.pop();r(t)}};function he(e){return this.fromWireType(B[e>>2])}var Lt={},Dt={},Zt={},Da,At=e=>{throw new Da(e)},Et=(e,t,r)=>{e.forEach(function(_){Zt[_]=t});function l(_){var k=r(_);k.length!==e.length&&At("Mismatched type converter count");for(var $=0;$<e.length;++$)at(e[$],k[$])}var p=new Array(t.length),h=[],S=0;t.forEach((_,k)=>{Dt.hasOwnProperty(_)?p[k]=Dt[_]:(h.push(_),Lt.hasOwnProperty(_)||(Lt[_]=[]),Lt[_].push(()=>{p[k]=Dt[_],++S,S===h.length&&l(p)}))}),h.length===0&&l(p)},Aa=e=>{var t=Je[e];delete Je[e];var r=t.rawConstructor,l=t.rawDestructor,p=t.fields,h=p.map(S=>S.getterReturnType).concat(p.map(S=>S.setterArgumentType));Et([e],h,S=>{var _={};return p.forEach((k,$)=>{var j=k.fieldName,ne=S[$],re=k.getter,se=k.getterContext,_e=S[$+p.length],we=k.setter,Ue=k.setterContext;_[j]={read:xe=>ne.fromWireType(re(se,xe)),write:(xe,O)=>{var J=[];we(Ue,xe,_e.toWireType(J,O)),it(J)}}}),[{name:t.name,fromWireType:k=>{var $={};for(var j in _)$[j]=_[j].read(k);return l(k),$},toWireType:(k,$)=>{for(var j in _)if(!(j in $))throw new TypeError(`Missing field: "${j}"`);var ne=r();for(j in _)_[j].write(ne,$[j]);return k!==null&&k.push(l,ne),ne},argPackAdvance:nt,readValueFromPointer:he,destructorFunction:l}]})},Wa=(e,t,r,l,p)=>{},qa=()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Ea=e},Ea,Me=e=>{for(var t="",r=e;x[r];)t+=Ea[x[r++]];return t},Ft,ve=e=>{throw new Ft(e)};function da(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var l=t.name;if(e||ve(`type "${l}" must have a positive integer typeid pointer`),Dt.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;ve(`Cannot register type '${l}' twice`)}if(Dt[e]=t,delete Zt[e],Lt.hasOwnProperty(e)){var p=Lt[e];delete Lt[e],p.forEach(h=>h())}}function at(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");return da(e,t,r)}var nt=8,za=(e,t,r,l)=>{t=Me(t),at(e,{name:t,fromWireType:function(p){return!!p},toWireType:function(p,h){return h?r:l},argPackAdvance:nt,readValueFromPointer:function(p){return this.fromWireType(x[p])},destructorFunction:null})},Ja=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),ca=e=>{function t(r){return r.$$.ptrType.registeredClass.name}ve(t(e)+" instance already deleted")},wt=!1,wa=e=>{},Ca=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},ma=e=>{e.count.value-=1;var t=e.count.value===0;t&&Ca(e)},fa=(e,t,r)=>{if(t===r)return e;if(r.baseClass===void 0)return null;var l=fa(e,t,r.baseClass);return l===null?null:r.downcast(l)},U={},y=()=>Object.keys(vt).length,I=()=>{var e=[];for(var t in vt)vt.hasOwnProperty(t)&&e.push(vt[t]);return e},L=[],z=()=>{for(;L.length;){var e=L.pop();e.$$.deleteScheduled=!1,e.delete()}},le,Xe=e=>{le=e,L.length&&le&&le(z)},Ka=()=>{n.getInheritedInstanceCount=y,n.getLiveInheritedInstances=I,n.flushPendingDeletes=z,n.setDelayFunction=Xe},vt={},va=(e,t)=>{for(t===void 0&&ve("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},Qa=(e,t)=>(t=va(e,t),vt[t]),K=(e,t)=>{(!t.ptrType||!t.ptr)&&At("makeClassHandle requires ptr and ptrType");var r=!!t.smartPtrType,l=!!t.smartPtr;return r!==l&&At("Both smartPtrType and smartPtr must be specified"),t.count={value:1},We(Object.create(e,{$$:{value:t,writable:!0}}))};function ea(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=Qa(this.registeredClass,t);if(r!==void 0){if(r.$$.count.value===0)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var l=r.clone();return this.destructor(e),l}function p(){return this.isSmartPointer?K(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):K(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var h=this.registeredClass.getActualType(t),S=U[h];if(!S)return p.call(this);var _;this.isConst?_=S.constPointerType:_=S.pointerType;var k=fa(t,this.registeredClass,_.registeredClass);return k===null?p.call(this):this.isSmartPointer?K(_.registeredClass.instancePrototype,{ptrType:_,ptr:k,smartPtrType:this,smartPtr:e}):K(_.registeredClass.instancePrototype,{ptrType:_,ptr:k})}var We=e=>typeof FinalizationRegistry>"u"?(We=t=>t,e):(wt=new FinalizationRegistry(t=>{ma(t.$$)}),We=t=>{var r=t.$$,l=!!r.smartPtr;if(l){var p={$$:r};wt.register(t,p,t)}return t},wa=t=>wt.unregister(t),We(e)),fe=()=>{Object.assign(Ke.prototype,{isAliasOf(e){if(!(this instanceof Ke)||!(e instanceof Ke))return!1;var t=this.$$.ptrType.registeredClass,r=this.$$.ptr;e.$$=e.$$;for(var l=e.$$.ptrType.registeredClass,p=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;l.baseClass;)p=l.upcast(p),l=l.baseClass;return t===l&&r===p},clone(){if(this.$$.ptr||ca(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=We(Object.create(Object.getPrototypeOf(this),{$$:{value:Ja(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||ca(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ve("Object already scheduled for deletion"),wa(this),ma(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||ca(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ve("Object already scheduled for deletion"),L.push(this),L.length===1&&le&&le(z),this.$$.deleteScheduled=!0,this}})};function Ke(){}var X=(e,t)=>Object.defineProperty(t,"name",{value:e}),pa=(e,t,r)=>{if(e[t].overloadTable===void 0){var l=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||ve(`Function '${r}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[l.argCount]=l}},Ct=(e,t,r)=>{n.hasOwnProperty(e)?((r===void 0||n[e].overloadTable!==void 0&&n[e].overloadTable[r]!==void 0)&&ve(`Cannot register public name '${e}' twice`),pa(n,e,e),n.hasOwnProperty(r)&&ve(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),n[e].overloadTable[r]=t):(n[e]=t,r!==void 0&&(n[e].numArguments=r))},Nt=48,Q=57,ee=e=>{if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Nt&&t<=Q?`_${e}`:e};function Ze(e,t,r,l,p,h,S,_){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=l,this.baseClass=p,this.getActualType=h,this.upcast=S,this.downcast=_,this.pureVirtualFunctions=[]}var Xa=(e,t,r)=>{for(;t!==r;)t.upcast||ve(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function so(e,t){if(t===null)return this.isReference&&ve(`null is not a valid ${this.name}`),0;t.$$||ve(`Cannot pass "${nn(t)}" as a ${this.name}`),t.$$.ptr||ve(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass,l=Xa(t.$$.ptr,r,this.registeredClass);return l}function uo(e,t){var r;if(t===null)return this.isReference&&ve(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,r),r):0;(!t||!t.$$)&&ve(`Cannot pass "${nn(t)}" as a ${this.name}`),t.$$.ptr||ve(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&ve(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var l=t.$$.ptrType.registeredClass;if(r=Xa(t.$$.ptr,l,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&ve("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:ve(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var p=t.clone();r=this.rawShare(r,It.toHandle(()=>p.delete())),e!==null&&e.push(this.rawDestructor,r)}break;default:ve("Unsupporting sharing policy")}return r}function co(e,t){if(t===null)return this.isReference&&ve(`null is not a valid ${this.name}`),0;t.$$||ve(`Cannot pass "${nn(t)}" as a ${this.name}`),t.$$.ptr||ve(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&ve(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass,l=Xa(t.$$.ptr,r,this.registeredClass);return l}function En(e){return this.fromWireType(D[e>>2])}var mo=()=>{Object.assign(Ia.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;(t=this.rawDestructor)===null||t===void 0||t.call(this,e)},argPackAdvance:nt,readValueFromPointer:En,deleteObject(e){e!==null&&e.delete()},fromWireType:ea})};function Ia(e,t,r,l,p,h,S,_,k,$,j){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=l,this.isSmartPointer=p,this.pointeeType=h,this.sharingPolicy=S,this.rawGetPointee=_,this.rawConstructor=k,this.rawShare=$,this.rawDestructor=j,!p&&t.baseClass===void 0?l?(this.toWireType=so,this.destructorFunction=null):(this.toWireType=co,this.destructorFunction=null):this.toWireType=uo}var wn=(e,t,r)=>{n.hasOwnProperty(e)||At("Replacing nonexistant public symbol"),n[e].overloadTable!==void 0&&r!==void 0?n[e].overloadTable[r]=t:(n[e]=t,n[e].argCount=r)},fo=(e,t,r)=>{var l=n["dynCall_"+e];return r&&r.length?l.apply(null,[t].concat(r)):l.call(null,t)},ka=[],Cn,De=e=>{var t=ka[e];return t||(e>=ka.length&&(ka.length=e+1),ka[e]=t=Cn.get(e)),t},vo=(e,t,r)=>{if(e.includes("j"))return fo(e,t,r);var l=De(t).apply(null,r);return l},po=(e,t)=>{var r=[];return function(){return r.length=0,Object.assign(r,arguments),vo(e,t,r)}},st=(e,t)=>{e=Me(e);function r(){return e.includes("j")?po(e,t):De(t)}var l=r();return typeof l!="function"&&ve(`unknown function pointer with signature ${e}: ${t}`),l},yo=(e,t)=>{var r=X(t,function(l){this.name=t,this.message=l;var p=new Error(l).stack;p!==void 0&&(this.stack=this.toString()+`
`+p.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},r},In,kn=e=>{var t=xn(e),r=Me(t);return kt(t),r},Ra=(e,t)=>{var r=[],l={};function p(h){if(!l[h]&&!Dt[h]){if(Zt[h]){Zt[h].forEach(p);return}r.push(h),l[h]=!0}}throw t.forEach(p),new In(`${e}: `+r.map(kn).join([", "]))},go=(e,t,r,l,p,h,S,_,k,$,j,ne,re)=>{j=Me(j),h=st(p,h),_&&(_=st(S,_)),$&&($=st(k,$)),re=st(ne,re);var se=ee(j);Ct(se,function(){Ra(`Cannot construct ${j} due to unbound types`,[l])}),Et([e,t,r],l?[l]:[],function(_e){_e=_e[0];var we,Ue;l?(we=_e.registeredClass,Ue=we.instancePrototype):Ue=Ke.prototype;var xe=X(j,function(){if(Object.getPrototypeOf(this)!==O)throw new Ft("Use 'new' to construct "+j);if(J.constructor_body===void 0)throw new Ft(j+" has no accessible constructor");var zn=J.constructor_body[arguments.length];if(zn===void 0)throw new Ft(`Tried to invoke ctor of ${j} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(J.constructor_body).toString()}) parameters instead!`);return zn.apply(this,arguments)}),O=Object.create(Ue,{constructor:{value:xe}});xe.prototype=O;var J=new Ze(j,xe,O,re,we,h,_,$);if(J.baseClass){var Ce,Fe;(Fe=(Ce=J.baseClass).__derivedClasses)!==null&&Fe!==void 0||(Ce.__derivedClasses=[]),J.baseClass.__derivedClasses.push(J)}var ta=new Ia(j,J,!0,!1,!1),Va=new Ia(j+"*",J,!1,!1,!1),qn=new Ia(j+" const*",J,!1,!0,!1);return U[e]={pointerType:Va,constPointerType:qn},wn(se,xe),[ta,Va,qn]})},Za=(e,t)=>{for(var r=[],l=0;l<e;l++)r.push(D[t+l*4>>2]);return r};function ho(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].destructorFunction===void 0)return!0;return!1}function en(e,t,r,l,p,h){var S=t.length;S<2&&ve("argTypes array size mismatch! Must at least get return value and 'this' types!");var _=t[1]!==null&&r!==null,k=ho(t),$=t[0].name!=="void",j=S-2,ne=new Array(j),re=[],se=[],_e=function(){arguments.length!==j&&ve(`function ${e} called with ${arguments.length} arguments, expected ${j}`),se.length=0;var we;re.length=_?2:1,re[0]=p,_&&(we=t[1].toWireType(se,this),re[1]=we);for(var Ue=0;Ue<j;++Ue)ne[Ue]=t[Ue+2].toWireType(se,arguments[Ue]),re.push(ne[Ue]);var xe=l.apply(null,re);function O(J){if(k)it(se);else for(var Ce=_?1:2;Ce<t.length;Ce++){var Fe=Ce===1?we:ne[Ce-2];t[Ce].destructorFunction!==null&&t[Ce].destructorFunction(Fe)}if($)return t[0].fromWireType(J)}return O(xe)};return X(e,_e)}var Uo=(e,t,r,l,p,h)=>{var S=Za(t,r);p=st(l,p),Et([],[e],function(_){_=_[0];var k=`constructor ${_.name}`;if(_.registeredClass.constructor_body===void 0&&(_.registeredClass.constructor_body=[]),_.registeredClass.constructor_body[t-1]!==void 0)throw new Ft(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${_.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return _.registeredClass.constructor_body[t-1]=()=>{Ra(`Cannot construct ${_.name} due to unbound types`,S)},Et([],S,$=>($.splice(1,0,null),_.registeredClass.constructor_body[t-1]=en(k,$,null,p,h),[])),[]})},Rn=e=>{e=e.trim();const t=e.indexOf("(");return t!==-1?e.substr(0,t):e},To=(e,t,r,l,p,h,S,_,k)=>{var $=Za(r,l);t=Me(t),t=Rn(t),h=st(p,h),Et([],[e],function(j){j=j[0];var ne=`${j.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),_&&j.registeredClass.pureVirtualFunctions.push(t);function re(){Ra(`Cannot call ${ne} due to unbound types`,$)}var se=j.registeredClass.instancePrototype,_e=se[t];return _e===void 0||_e.overloadTable===void 0&&_e.className!==j.name&&_e.argCount===r-2?(re.argCount=r-2,re.className=j.name,se[t]=re):(pa(se,t,ne),se[t].overloadTable[r-2]=re),Et([],$,function(we){var Ue=en(ne,we,j,h,S);return se[t].overloadTable===void 0?(Ue.argCount=r-2,se[t]=Ue):se[t].overloadTable[r-2]=Ue,[]}),[]})};function bo(){Object.assign(On.prototype,{get(e){return this.allocated[e]},has(e){return this.allocated[e]!==void 0},allocate(e){var t=this.freelist.pop()||this.allocated.length;return this.allocated[t]=e,t},free(e){this.allocated[e]=void 0,this.freelist.push(e)}})}function On(){this.allocated=[void 0],this.freelist=[]}var rt=new On,tn=e=>{e>=rt.reserved&&--rt.get(e).refcount===0&&rt.free(e)},So=()=>{for(var e=0,t=rt.reserved;t<rt.allocated.length;++t)rt.allocated[t]!==void 0&&++e;return e},_o=()=>{rt.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),rt.reserved=rt.allocated.length,n.count_emval_handles=So},It={toValue:e=>(e||ve("Cannot use deleted val. handle = "+e),rt.get(e).value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return rt.allocate({refcount:1,value:e})}}},Do=(e,t)=>{t=Me(t),at(e,{name:t,fromWireType:r=>{var l=It.toValue(r);return tn(r),l},toWireType:(r,l)=>It.toHandle(l),argPackAdvance:nt,readValueFromPointer:he,destructorFunction:null})},Ao=(e,t,r)=>{switch(t){case 1:return r?function(l){return this.fromWireType(te[l>>0])}:function(l){return this.fromWireType(x[l>>0])};case 2:return r?function(l){return this.fromWireType(q[l>>1])}:function(l){return this.fromWireType(R[l>>1])};case 4:return r?function(l){return this.fromWireType(B[l>>2])}:function(l){return this.fromWireType(D[l>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Eo=(e,t,r,l)=>{t=Me(t);function p(){}p.values={},at(e,{name:t,constructor:p,fromWireType:function(h){return this.constructor.values[h]},toWireType:(h,S)=>S.value,argPackAdvance:nt,readValueFromPointer:Ao(t,r,l),destructorFunction:null}),Ct(t,p)},an=(e,t)=>{var r=Dt[e];return r===void 0&&ve(t+" has unknown type "+kn(e)),r},wo=(e,t,r)=>{var l=an(e,"enum");t=Me(t);var p=l.constructor,h=Object.create(l.constructor.prototype,{value:{value:r},constructor:{value:X(`${l.name}_${t}`,function(){})}});p.values[r]=h,p[t]=h},nn=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},Co=(e,t)=>{switch(t){case 4:return function(r){return this.fromWireType(oe[r>>2])};case 8:return function(r){return this.fromWireType(be[r>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},Io=(e,t,r)=>{t=Me(t),at(e,{name:t,fromWireType:l=>l,toWireType:(l,p)=>p,argPackAdvance:nt,readValueFromPointer:Co(t,r),destructorFunction:null})},ko=(e,t,r,l,p,h,S)=>{var _=Za(t,r);e=Me(e),e=Rn(e),p=st(l,p),Ct(e,function(){Ra(`Cannot call ${e} due to unbound types`,_)},t-1),Et([],_,function(k){var $=[k[0],null].concat(k.slice(1));return wn(e,en(e,$,null,p,h),t-1),[]})},Ro=(e,t,r)=>{switch(t){case 1:return r?l=>te[l>>0]:l=>x[l>>0];case 2:return r?l=>q[l>>1]:l=>R[l>>1];case 4:return r?l=>B[l>>2]:l=>D[l>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Oo=(e,t,r,l,p)=>{t=Me(t);var h=j=>j;if(l===0){var S=32-8*r;h=j=>j<<S>>>S}var _=t.includes("unsigned"),k=(j,ne)=>{},$;_?$=function(j,ne){return k(ne,this.name),ne>>>0}:$=function(j,ne){return k(ne,this.name),ne},at(e,{name:t,fromWireType:h,toWireType:$,argPackAdvance:nt,readValueFromPointer:Ro(t,r,l!==0),destructorFunction:null})},Mo=(e,t,r)=>{var l=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],p=l[t];function h(S){var _=D[S>>2],k=D[S+4>>2];return new p(te.buffer,k,_)}r=Me(r),at(e,{name:r,fromWireType:h,argPackAdvance:nt,readValueFromPointer:h},{ignoreDuplicateRegistrations:!0})},Mn=(e,t,r,l)=>{if(!(l>0))return 0;for(var p=r,h=r+l-1,S=0;S<e.length;++S){var _=e.charCodeAt(S);if(_>=55296&&_<=57343){var k=e.charCodeAt(++S);_=65536+((_&1023)<<10)|k&1023}if(_<=127){if(r>=h)break;t[r++]=_}else if(_<=2047){if(r+1>=h)break;t[r++]=192|_>>6,t[r++]=128|_&63}else if(_<=65535){if(r+2>=h)break;t[r++]=224|_>>12,t[r++]=128|_>>6&63,t[r++]=128|_&63}else{if(r+3>=h)break;t[r++]=240|_>>18,t[r++]=128|_>>12&63,t[r++]=128|_>>6&63,t[r++]=128|_&63}}return t[r]=0,r-p},Vo=(e,t,r)=>Mn(e,x,t,r),Vn=e=>{for(var t=0,r=0;r<e.length;++r){var l=e.charCodeAt(r);l<=127?t++:l<=2047?t+=2:l>=55296&&l<=57343?(t+=4,++r):t+=3}return t},$n=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,$o=(e,t,r)=>{for(var l=t+r,p=t;e[p]&&!(p>=l);)++p;if(p-t>16&&e.buffer&&$n)return $n.decode(e.subarray(t,p));for(var h="";t<p;){var S=e[t++];if(!(S&128)){h+=String.fromCharCode(S);continue}var _=e[t++]&63;if((S&224)==192){h+=String.fromCharCode((S&31)<<6|_);continue}var k=e[t++]&63;if((S&240)==224?S=(S&15)<<12|_<<6|k:S=(S&7)<<18|_<<12|k<<6|e[t++]&63,S<65536)h+=String.fromCharCode(S);else{var $=S-65536;h+=String.fromCharCode(55296|$>>10,56320|$&1023)}}return h},rn=(e,t)=>e?$o(x,e,t):"",Po=(e,t)=>{t=Me(t);var r=t==="std::string";at(e,{name:t,fromWireType(l){var p=D[l>>2],h=l+4,S;if(r)for(var _=h,k=0;k<=p;++k){var $=h+k;if(k==p||x[$]==0){var j=$-_,ne=rn(_,j);S===void 0?S=ne:(S+="\0",S+=ne),_=$+1}}else{for(var re=new Array(p),k=0;k<p;++k)re[k]=String.fromCharCode(x[h+k]);S=re.join("")}return kt(l),S},toWireType(l,p){p instanceof ArrayBuffer&&(p=new Uint8Array(p));var h,S=typeof p=="string";S||p instanceof Uint8Array||p instanceof Uint8ClampedArray||p instanceof Int8Array||ve("Cannot pass non-string to std::string"),r&&S?h=Vn(p):h=p.length;var _=sn(4+h+1),k=_+4;if(D[_>>2]=h,r&&S)Vo(p,k,h+1);else if(S)for(var $=0;$<h;++$){var j=p.charCodeAt($);j>255&&(kt(k),ve("String has UTF-16 code units that do not fit in 8 bits")),x[k+$]=j}else for(var $=0;$<h;++$)x[k+$]=p[$];return l!==null&&l.push(kt,_),_},argPackAdvance:nt,readValueFromPointer:En,destructorFunction(l){kt(l)}})},Pn=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Lo=(e,t)=>{for(var r=e,l=r>>1,p=l+t/2;!(l>=p)&&R[l];)++l;if(r=l<<1,r-e>32&&Pn)return Pn.decode(x.subarray(e,r));for(var h="",S=0;!(S>=t/2);++S){var _=q[e+S*2>>1];if(_==0)break;h+=String.fromCharCode(_)}return h},Fo=(e,t,r)=>{var l;if((l=r)!==null&&l!==void 0||(r=2147483647),r<2)return 0;r-=2;for(var p=t,h=r<e.length*2?r/2:e.length,S=0;S<h;++S){var _=e.charCodeAt(S);q[t>>1]=_,t+=2}return q[t>>1]=0,t-p},No=e=>e.length*2,xo=(e,t)=>{for(var r=0,l="";!(r>=t/4);){var p=B[e+r*4>>2];if(p==0)break;if(++r,p>=65536){var h=p-65536;l+=String.fromCharCode(55296|h>>10,56320|h&1023)}else l+=String.fromCharCode(p)}return l},jo=(e,t,r)=>{var l;if((l=r)!==null&&l!==void 0||(r=2147483647),r<4)return 0;for(var p=t,h=p+r-4,S=0;S<e.length;++S){var _=e.charCodeAt(S);if(_>=55296&&_<=57343){var k=e.charCodeAt(++S);_=65536+((_&1023)<<10)|k&1023}if(B[t>>2]=_,t+=4,t+4>h)break}return B[t>>2]=0,t-p},Bo=e=>{for(var t=0,r=0;r<e.length;++r){var l=e.charCodeAt(r);l>=55296&&l<=57343&&++r,t+=4}return t},Yo=(e,t,r)=>{r=Me(r);var l,p,h,S,_;t===2?(l=Lo,p=Fo,S=No,h=()=>R,_=1):t===4&&(l=xo,p=jo,S=Bo,h=()=>D,_=2),at(e,{name:r,fromWireType:k=>{for(var $=D[k>>2],j=h(),ne,re=k+4,se=0;se<=$;++se){var _e=k+4+se*t;if(se==$||j[_e>>_]==0){var we=_e-re,Ue=l(re,we);ne===void 0?ne=Ue:(ne+="\0",ne+=Ue),re=_e+t}}return kt(k),ne},toWireType:(k,$)=>{typeof $!="string"&&ve(`Cannot pass non-string to C++ string type ${r}`);var j=S($),ne=sn(4+j+t);return D[ne>>2]=j>>_,p($,ne+4,j+t),k!==null&&k.push(kt,ne),ne},argPackAdvance:nt,readValueFromPointer:he,destructorFunction(k){kt(k)}})},Go=(e,t,r,l,p,h)=>{Je[e]={name:Me(t),rawConstructor:st(r,l),rawDestructor:st(p,h),fields:[]}},Ho=(e,t,r,l,p,h,S,_,k,$)=>{Je[e].fields.push({fieldName:Me(t),getterReturnType:r,getter:st(l,p),getterContext:h,setterArgumentType:S,setter:st(_,k),setterContext:$})},Wo=(e,t)=>{t=Me(t),at(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:(r,l)=>{}})},on=[],qo=(e,t,r,l)=>(e=on[e],t=It.toValue(t),e(null,t,r,l)),zo={},Jo=e=>{var t=zo[e];return t===void 0?Me(e):t},Ln=()=>{if(typeof globalThis=="object")return globalThis;function e(t){t.$$$embind_global$$$=t;var r=typeof $$$embind_global$$$=="object"&&t.$$$embind_global$$$==t;return r||delete t.$$$embind_global$$$,r}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&e(global)?$$$embind_global$$$=global:typeof self=="object"&&e(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},Ko=e=>e===0?It.toHandle(Ln()):(e=Jo(e),It.toHandle(Ln()[e])),Qo=e=>{var t=on.length;return on.push(e),t},Xo=(e,t)=>{for(var r=new Array(e),l=0;l<e;++l)r[l]=an(D[t+l*4>>2],"parameter "+l);return r},Zo=Reflect.construct,el=(e,t,r)=>{var l=[],p=e.toWireType(l,r);return l.length&&(D[t>>2]=It.toHandle(l)),p},tl=(e,t,r)=>{var l=Xo(e,t),p=l.shift();e--;var h=new Array(e),S=(k,$,j,ne)=>{for(var re=0,se=0;se<e;++se)h[se]=l[se].readValueFromPointer(ne+re),re+=l[se].argPackAdvance;for(var _e=r===1?Zo($,h):$.apply(k,h),se=0;se<e;++se){var we,Ue;(we=(Ue=l[se]).deleteObject)===null||we===void 0||we.call(Ue,h[se])}return el(p,j,_e)},_=`methodCaller<(${l.map(k=>k.name).join(", ")}) => ${p.name}>`;return Qo(X(_,S))},al=e=>{e>4&&(rt.get(e).refcount+=1)},nl=e=>{var t=It.toValue(e);it(t),tn(e)},rl=(e,t)=>{e=an(e,"_emval_take_value");var r=e.readValueFromPointer(t);return It.toHandle(r)},ol=()=>{Oe("")},ll=(e,t,r)=>x.copyWithin(e,t,t+r),il=()=>2147483648,sl=e=>{var t=V.buffer,r=(e-t.byteLength+65535)/65536;try{return V.grow(r),P(),1}catch{}},ul=e=>{var t=x.length;e>>>=0;var r=il();if(e>r)return!1;for(var l=(k,$)=>k+($-k%$)%$,p=1;p<=4;p*=2){var h=t*(1+.2/p);h=Math.min(h,e+100663296);var S=Math.min(r,l(Math.max(e,h),65536)),_=sl(S);if(_)return!0}return!1},ln={},dl=()=>g||"./this.program",ya=()=>{if(!ya.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:dl()};for(var r in ln)ln[r]===void 0?delete t[r]:t[r]=ln[r];var l=[];for(var r in t)l.push(`${r}=${t[r]}`);ya.strings=l}return ya.strings},cl=(e,t)=>{for(var r=0;r<e.length;++r)te[t++>>0]=e.charCodeAt(r);te[t>>0]=0},ml=(e,t)=>{var r=0;return ya().forEach((l,p)=>{var h=t+r;D[e+p*4>>2]=h,cl(l,h),r+=l.length+1}),0},fl=(e,t)=>{var r=ya();D[e>>2]=r.length;var l=0;return r.forEach(p=>l+=p.length+1),D[t>>2]=l,0},vl=e=>e,Oa=e=>e%4===0&&(e%100!==0||e%400===0),pl=(e,t)=>{for(var r=0,l=0;l<=t;r+=e[l++]);return r},Fn=[31,29,31,30,31,30,31,31,30,31,30,31],Nn=[31,28,31,30,31,30,31,31,30,31,30,31],yl=(e,t)=>{for(var r=new Date(e.getTime());t>0;){var l=Oa(r.getFullYear()),p=r.getMonth(),h=(l?Fn:Nn)[p];if(t>h-r.getDate())t-=h-r.getDate()+1,r.setDate(1),p<11?r.setMonth(p+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1));else return r.setDate(r.getDate()+t),r}return r};function gl(e,t,r){var l=Vn(e)+1,p=new Array(l);return Mn(e,p,0,p.length),p}var hl=(e,t)=>{te.set(e,t)},Ul=(e,t,r,l)=>{var p=D[l+40>>2],h={tm_sec:B[l>>2],tm_min:B[l+4>>2],tm_hour:B[l+8>>2],tm_mday:B[l+12>>2],tm_mon:B[l+16>>2],tm_year:B[l+20>>2],tm_wday:B[l+24>>2],tm_yday:B[l+28>>2],tm_isdst:B[l+32>>2],tm_gmtoff:B[l+36>>2],tm_zone:p?rn(p):""},S=rn(r),_={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var k in _)S=S.replace(new RegExp(k,"g"),_[k]);var $=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],j=["January","February","March","April","May","June","July","August","September","October","November","December"];function ne(O,J,Ce){for(var Fe=typeof O=="number"?O.toString():O||"";Fe.length<J;)Fe=Ce[0]+Fe;return Fe}function re(O,J){return ne(O,J,"0")}function se(O,J){function Ce(ta){return ta<0?-1:ta>0?1:0}var Fe;return(Fe=Ce(O.getFullYear()-J.getFullYear()))===0&&(Fe=Ce(O.getMonth()-J.getMonth()))===0&&(Fe=Ce(O.getDate()-J.getDate())),Fe}function _e(O){switch(O.getDay()){case 0:return new Date(O.getFullYear()-1,11,29);case 1:return O;case 2:return new Date(O.getFullYear(),0,3);case 3:return new Date(O.getFullYear(),0,2);case 4:return new Date(O.getFullYear(),0,1);case 5:return new Date(O.getFullYear()-1,11,31);case 6:return new Date(O.getFullYear()-1,11,30)}}function we(O){var J=yl(new Date(O.tm_year+1900,0,1),O.tm_yday),Ce=new Date(J.getFullYear(),0,4),Fe=new Date(J.getFullYear()+1,0,4),ta=_e(Ce),Va=_e(Fe);return se(ta,J)<=0?se(Va,J)<=0?J.getFullYear()+1:J.getFullYear():J.getFullYear()-1}var Ue={"%a":O=>$[O.tm_wday].substring(0,3),"%A":O=>$[O.tm_wday],"%b":O=>j[O.tm_mon].substring(0,3),"%B":O=>j[O.tm_mon],"%C":O=>{var J=O.tm_year+1900;return re(J/100|0,2)},"%d":O=>re(O.tm_mday,2),"%e":O=>ne(O.tm_mday,2," "),"%g":O=>we(O).toString().substring(2),"%G":O=>we(O),"%H":O=>re(O.tm_hour,2),"%I":O=>{var J=O.tm_hour;return J==0?J=12:J>12&&(J-=12),re(J,2)},"%j":O=>re(O.tm_mday+pl(Oa(O.tm_year+1900)?Fn:Nn,O.tm_mon-1),3),"%m":O=>re(O.tm_mon+1,2),"%M":O=>re(O.tm_min,2),"%n":()=>`
`,"%p":O=>O.tm_hour>=0&&O.tm_hour<12?"AM":"PM","%S":O=>re(O.tm_sec,2),"%t":()=>"	","%u":O=>O.tm_wday||7,"%U":O=>{var J=O.tm_yday+7-O.tm_wday;return re(Math.floor(J/7),2)},"%V":O=>{var J=Math.floor((O.tm_yday+7-(O.tm_wday+6)%7)/7);if((O.tm_wday+371-O.tm_yday-2)%7<=2&&J++,J){if(J==53){var Ce=(O.tm_wday+371-O.tm_yday)%7;Ce!=4&&(Ce!=3||!Oa(O.tm_year))&&(J=1)}}else{J=52;var Fe=(O.tm_wday+7-O.tm_yday-1)%7;(Fe==4||Fe==5&&Oa(O.tm_year%400-1))&&J++}return re(J,2)},"%w":O=>O.tm_wday,"%W":O=>{var J=O.tm_yday+7-(O.tm_wday+6)%7;return re(Math.floor(J/7),2)},"%y":O=>(O.tm_year+1900).toString().substring(2),"%Y":O=>O.tm_year+1900,"%z":O=>{var J=O.tm_gmtoff,Ce=J>=0;return J=Math.abs(J)/60,J=J/60*100+J%60,(Ce?"+":"-")+("0000"+J).slice(-4)},"%Z":O=>O.tm_zone,"%%":()=>"%"};S=S.replace(/%%/g,"\0\0");for(var k in Ue)S.includes(k)&&(S=S.replace(new RegExp(k,"g"),Ue[k](h)));S=S.replace(/\0\0/g,"%");var xe=gl(S);return xe.length>t?0:(hl(xe,e),xe.length-1)},Tl=(e,t,r,l,p)=>Ul(e,t,r,l);Da=n.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},qa(),Ft=n.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},fe(),Ka(),mo(),In=n.UnboundTypeError=yo(Error,"UnboundTypeError"),bo(),_o();var bl={s:Kt,u:lt,b:Ga,g:Xt,q:_a,J:Gt,f:Pt,V:Ha,d:_t,da:Aa,Q:Wa,_:za,ca:go,ba:Uo,w:To,Y:Do,x:Eo,h:wo,L:Io,M:ko,t:Oo,o:Mo,K:Po,C:Yo,A:Go,ea:Ho,$:Wo,R:qo,ha:tn,fa:Ko,Z:tl,N:al,O:nl,aa:rl,B:ol,X:ll,W:ul,T:ml,U:fl,E:Ll,D:El,F:Pl,n:Fl,a:Sl,e:Cl,m:Al,k:kl,H:Vl,v:Ol,G:$l,z:xl,P:Bl,l:Il,j:wl,c:Dl,p:_l,I:Ml,r:Nl,i:Rl,y:jl,ga:vl,S:Tl},Re=Jt(),kt=n._free=e=>(kt=n._free=Re.ka)(e),sn=n._malloc=e=>(sn=n._malloc=Re.la)(e),xn=e=>(xn=Re.na)(e),Se=(e,t)=>(Se=Re.oa)(e,t),ga=e=>(ga=Re.pa)(e),Ae=()=>(Ae=Re.qa)(),Ee=e=>(Ee=Re.ra)(e),jn=e=>(jn=Re.sa)(e),Bn=e=>(Bn=Re.ta)(e),Yn=(e,t,r)=>(Yn=Re.ua)(e,t,r),Gn=e=>(Gn=Re.va)(e);n.dynCall_viijii=(e,t,r,l,p,h,S)=>(n.dynCall_viijii=Re.wa)(e,t,r,l,p,h,S);var Hn=n.dynCall_jiiii=(e,t,r,l,p)=>(Hn=n.dynCall_jiiii=Re.xa)(e,t,r,l,p);n.dynCall_iiiiij=(e,t,r,l,p,h,S)=>(n.dynCall_iiiiij=Re.ya)(e,t,r,l,p,h,S),n.dynCall_iiiiijj=(e,t,r,l,p,h,S,_,k)=>(n.dynCall_iiiiijj=Re.za)(e,t,r,l,p,h,S,_,k),n.dynCall_iiiiiijj=(e,t,r,l,p,h,S,_,k,$)=>(n.dynCall_iiiiiijj=Re.Aa)(e,t,r,l,p,h,S,_,k,$);function Sl(e,t){var r=Ae();try{return De(e)(t)}catch(l){if(Ee(r),l!==l+0)throw l;Se(1,0)}}function _l(e,t,r,l){var p=Ae();try{De(e)(t,r,l)}catch(h){if(Ee(p),h!==h+0)throw h;Se(1,0)}}function Dl(e,t,r){var l=Ae();try{De(e)(t,r)}catch(p){if(Ee(l),p!==p+0)throw p;Se(1,0)}}function Al(e,t,r,l){var p=Ae();try{return De(e)(t,r,l)}catch(h){if(Ee(p),h!==h+0)throw h;Se(1,0)}}function El(e,t,r,l,p){var h=Ae();try{return De(e)(t,r,l,p)}catch(S){if(Ee(h),S!==S+0)throw S;Se(1,0)}}function wl(e,t){var r=Ae();try{De(e)(t)}catch(l){if(Ee(r),l!==l+0)throw l;Se(1,0)}}function Cl(e,t,r){var l=Ae();try{return De(e)(t,r)}catch(p){if(Ee(l),p!==p+0)throw p;Se(1,0)}}function Il(e){var t=Ae();try{De(e)()}catch(r){if(Ee(t),r!==r+0)throw r;Se(1,0)}}function kl(e,t,r,l,p){var h=Ae();try{return De(e)(t,r,l,p)}catch(S){if(Ee(h),S!==S+0)throw S;Se(1,0)}}function Rl(e,t,r,l,p,h,S,_,k,$,j){var ne=Ae();try{De(e)(t,r,l,p,h,S,_,k,$,j)}catch(re){if(Ee(ne),re!==re+0)throw re;Se(1,0)}}function Ol(e,t,r,l,p,h,S){var _=Ae();try{return De(e)(t,r,l,p,h,S)}catch(k){if(Ee(_),k!==k+0)throw k;Se(1,0)}}function Ml(e,t,r,l,p){var h=Ae();try{De(e)(t,r,l,p)}catch(S){if(Ee(h),S!==S+0)throw S;Se(1,0)}}function Vl(e,t,r,l,p,h){var S=Ae();try{return De(e)(t,r,l,p,h)}catch(_){if(Ee(S),_!==_+0)throw _;Se(1,0)}}function $l(e,t,r,l,p,h,S,_){var k=Ae();try{return De(e)(t,r,l,p,h,S,_)}catch($){if(Ee(k),$!==$+0)throw $;Se(1,0)}}function Pl(e,t,r,l){var p=Ae();try{return De(e)(t,r,l)}catch(h){if(Ee(p),h!==h+0)throw h;Se(1,0)}}function Ll(e,t,r,l){var p=Ae();try{return De(e)(t,r,l)}catch(h){if(Ee(p),h!==h+0)throw h;Se(1,0)}}function Fl(e){var t=Ae();try{return De(e)()}catch(r){if(Ee(t),r!==r+0)throw r;Se(1,0)}}function Nl(e,t,r,l,p,h,S,_){var k=Ae();try{De(e)(t,r,l,p,h,S,_)}catch($){if(Ee(k),$!==$+0)throw $;Se(1,0)}}function xl(e,t,r,l,p,h,S,_,k,$,j,ne){var re=Ae();try{return De(e)(t,r,l,p,h,S,_,k,$,j,ne)}catch(se){if(Ee(re),se!==se+0)throw se;Se(1,0)}}function jl(e,t,r,l,p,h,S,_,k,$,j,ne,re,se,_e,we){var Ue=Ae();try{De(e)(t,r,l,p,h,S,_,k,$,j,ne,re,se,_e,we)}catch(xe){if(Ee(Ue),xe!==xe+0)throw xe;Se(1,0)}}function Bl(e,t,r,l,p){var h=Ae();try{return Hn(e,t,r,l,p)}catch(S){if(Ee(h),S!==S+0)throw S;Se(1,0)}}var Ma;tt=function e(){Ma||Wn(),Ma||(tt=e)};function Wn(){if(ke>0||(ye(),ke>0))return;function e(){Ma||(Ma=!0,n.calledRun=!0,!H&&(mt(),i(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),gt()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),e()},1)):e()}if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Wn(),o.ready}})();function Ru(a){return Dn(An,a)}async function Ou(a,o){return Iu(An,a,o)}async function Mu(a,o){return ku(An,a,o)}var ha;class dn extends EventTarget{constructor(o={}){var n;super(),ou(this,ha,void 0);try{const i=(n=o==null?void 0:o.formats)==null?void 0:n.filter(m=>m!=="unknown");if((i==null?void 0:i.length)===0)throw new TypeError("Hint option provided, but is empty.");i==null||i.forEach(m=>{if(!Pa.has(m))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${m}' is not a valid enum value of type BarcodeFormat.`)}),lu(this,ha,i??[]),Ru().then(m=>{this.dispatchEvent(new CustomEvent("load",{detail:m}))}).catch(m=>{this.dispatchEvent(new CustomEvent("error",{detail:m}))})}catch(i){throw or(i,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return iu.filter(o=>o!=="unknown")}async detect(o){try{const n=await vu(o);if(n===null)return[];let i;try{Yr(n)?i=await Ou(n,{tryHarder:!0,formats:rr(this,ha).map(m=>Pa.get(m))}):i=await Mu(n,{tryHarder:!0,formats:rr(this,ha).map(m=>Pa.get(m))})}catch(m){throw console.error(m),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return i.map(m=>{const{topLeft:{x:v,y:g},topRight:{x:u,y:d},bottomLeft:{x:f,y:b},bottomRight:{x:T,y:E}}=m.position,C=Math.min(v,u,f,T),V=Math.min(g,d,b,E),H=Math.max(v,u,f,T),te=Math.max(g,d,b,E);return{boundingBox:new DOMRectReadOnly(C,V,H-C,te-V),rawValue:m.text,format:su(m.format),cornerPoints:[{x:v,y:g},{x:u,y:d},{x:T,y:E},{x:f,y:b}]}})}catch(n){throw or(n,"Failed to execute 'detect' on 'BarcodeDetector'")}}}ha=new WeakMap;const qr=(a,o,n="error")=>{let i,m;const v=new Promise((g,u)=>{i=g,m=u,a.addEventListener(o,i),a.addEventListener(n,m)});return v.finally(()=>{a.removeEventListener(o,i),a.removeEventListener(n,m)}),v},ur=a=>new Promise(o=>setTimeout(o,a));class zr extends Error{constructor(){super("this browser has no Stream API support"),this.name="StreamApiNotSupportedError"}}class Vu extends Error{constructor(){super("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."),this.name="InsecureContextError"}}class $u extends Error{constructor(){super("Loading camera stream timed out after 6 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"),this.name="StreamLoadTimeoutError"}}const Pu=a=>{let o=!1,n;return(...i)=>(o||(n=a(i),o=!0),n)};function pt(a,o){if(a===!1)throw new Error(o??"assertion failure")}function dr(a){throw new Error("this code should be unreachable")}function Lu(){return navigator.platform.toUpperCase().includes("MAC")}let Jr;async function Fu(a){if(window.BarcodeDetector===void 0)return console.debug("[vue-qrcode-reader] Native BarcodeDetector not supported. Will use polyfill."),new dn({formats:a});const o=await window.BarcodeDetector.getSupportedFormats(),n=a.filter(i=>!o.includes(i));return n.length>0?(console.debug(`[vue-qrcode-reader] Native BarcodeDetector does not support formats ${JSON.stringify(n)}. Will use polyfill.`),new dn({formats:a})):Lu()&&a.includes("pdf417")?(console.debug("[vue-qrcode-reader] Native BarcodeDetector is buggy for PDF417 codes on MacOS. Will use polyfill."),new dn({formats:a})):(console.debug("[vue-qrcode-reader] Will use native BarcodeDetector."),new window.BarcodeDetector({formats:a}))}async function Kr(a){Jr=await Fu(a)}const Nu=async(a,{detectHandler:o,locateHandler:n,minDelay:i,formats:m})=>{console.debug("[vue-qrcode-reader] start scanning"),await Kr(m);const v=g=>async u=>{if(a.readyState===0)console.debug("[vue-qrcode-reader] stop scanning: video element readyState is 0");else{const{lastScanned:d,contentBefore:f,lastScanHadContent:b}=g;if(u-d<i)window.requestAnimationFrame(v(g));else{const T=await Jr.detect(a),E=T.some(H=>!f.includes(H.rawValue));E&&o(T);const C=T.length>0;C&&n(T),!C&&b&&n(T);const V={lastScanned:u,lastScanHadContent:C,contentBefore:E?T.map(H=>H.rawValue):f};window.requestAnimationFrame(v(V))}}};v({lastScanned:performance.now(),contentBefore:[],lastScanHadContent:!1})(performance.now())};var Qr={},Qe={};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.compactObject=eo;Qe.deprecated=zu;var xu=Qe.detectBrowser=Ju;Qe.disableLog=Hu;Qe.disableWarnings=Wu;Qe.extractVersion=La;Qe.filterStats=Ku;Qe.log=qu;Qe.walkStats=Ba;Qe.wrapPeerConnectionEvent=Gu;function ju(a,o,n){return o=Bu(o),o in a?Object.defineProperty(a,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[o]=n,a}function Bu(a){var o=Yu(a,"string");return jt(o)==="symbol"?o:String(o)}function Yu(a,o){if(jt(a)!=="object"||a===null)return a;var n=a[Symbol.toPrimitive];if(n!==void 0){var i=n.call(a,o);if(jt(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(a)}function jt(a){"@babel/helpers - typeof";return jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},jt(a)}var Xr=!0,Zr=!0;function La(a,o,n){var i=a.match(o);return i&&i.length>=n&&parseInt(i[n],10)}function Gu(a,o,n){if(a.RTCPeerConnection){var i=a.RTCPeerConnection.prototype,m=i.addEventListener;i.addEventListener=function(g,u){if(g!==o)return m.apply(this,arguments);var d=function(f){var b=n(f);b&&(u.handleEvent?u.handleEvent(b):u(b))};return this._eventMap=this._eventMap||{},this._eventMap[o]||(this._eventMap[o]=new Map),this._eventMap[o].set(u,d),m.apply(this,[g,d])};var v=i.removeEventListener;i.removeEventListener=function(g,u){if(g!==o||!this._eventMap||!this._eventMap[o])return v.apply(this,arguments);if(!this._eventMap[o].has(u))return v.apply(this,arguments);var d=this._eventMap[o].get(u);return this._eventMap[o].delete(u),this._eventMap[o].size===0&&delete this._eventMap[o],Object.keys(this._eventMap).length===0&&delete this._eventMap,v.apply(this,[g,d])},Object.defineProperty(i,"on"+o,{get:function(){return this["_on"+o]},set:function(g){this["_on"+o]&&(this.removeEventListener(o,this["_on"+o]),delete this["_on"+o]),g&&this.addEventListener(o,this["_on"+o]=g)},enumerable:!0,configurable:!0})}}function Hu(a){return typeof a!="boolean"?new Error("Argument type: "+jt(a)+". Please use a boolean."):(Xr=a,a?"adapter.js logging disabled":"adapter.js logging enabled")}function Wu(a){return typeof a!="boolean"?new Error("Argument type: "+jt(a)+". Please use a boolean."):(Zr=!a,"adapter.js deprecation warnings "+(a?"disabled":"enabled"))}function qu(){if((typeof window>"u"?"undefined":jt(window))==="object"){if(Xr)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function zu(a,o){Zr&&console.warn(a+" is deprecated, please use "+o+" instead.")}function Ju(a){var o={browser:null,version:null};if(typeof a>"u"||!a.navigator||!a.navigator.userAgent)return o.browser="Not a browser.",o;var n=a.navigator;if(n.mozGetUserMedia)o.browser="firefox",o.version=La(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||a.isSecureContext===!1&&a.webkitRTCPeerConnection)o.browser="chrome",o.version=La(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(a.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))o.browser="safari",o.version=La(n.userAgent,/AppleWebKit\/(\d+)\./,1),o.supportsUnifiedPlan=a.RTCRtpTransceiver&&"currentDirection"in a.RTCRtpTransceiver.prototype;else return o.browser="Not a supported browser.",o;return o}function cr(a){return Object.prototype.toString.call(a)==="[object Object]"}function eo(a){return cr(a)?Object.keys(a).reduce(function(o,n){var i=cr(a[n]),m=i?eo(a[n]):a[n],v=i&&!Object.keys(m).length;return m===void 0||v?o:Object.assign(o,ju({},n,m))},{}):a}function Ba(a,o,n){!o||n.has(o.id)||(n.set(o.id,o),Object.keys(o).forEach(function(i){i.endsWith("Id")?Ba(a,a.get(o[i]),n):i.endsWith("Ids")&&o[i].forEach(function(m){Ba(a,a.get(m),n)})}))}function Ku(a,o,n){var i=n?"outbound-rtp":"inbound-rtp",m=new Map;if(o===null)return m;var v=[];return a.forEach(function(g){g.type==="track"&&g.trackIdentifier===o.id&&v.push(g)}),v.forEach(function(g){a.forEach(function(u){u.type===i&&u.trackId===g.id&&Ba(a,u,m)})}),m}Object.defineProperty(Qr,"__esModule",{value:!0});var Qu=Qr.shimGetUserMedia=ed,Xu=Zu(Qe);function to(a){if(typeof WeakMap!="function")return null;var o=new WeakMap,n=new WeakMap;return(to=function(i){return i?n:o})(a)}function Zu(a,o){if(a&&a.__esModule)return a;if(a===null||xt(a)!=="object"&&typeof a!="function")return{default:a};var n=to(o);if(n&&n.has(a))return n.get(a);var i={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in a)if(v!=="default"&&Object.prototype.hasOwnProperty.call(a,v)){var g=m?Object.getOwnPropertyDescriptor(a,v):null;g&&(g.get||g.set)?Object.defineProperty(i,v,g):i[v]=a[v]}return i.default=a,n&&n.set(a,i),i}function xt(a){"@babel/helpers - typeof";return xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},xt(a)}var mr=Xu.log;function ed(a,o){var n=a&&a.navigator;if(n.mediaDevices){var i=function(d){if(xt(d)!=="object"||d.mandatory||d.optional)return d;var f={};return Object.keys(d).forEach(function(b){if(!(b==="require"||b==="advanced"||b==="mediaSource")){var T=xt(d[b])==="object"?d[b]:{ideal:d[b]};T.exact!==void 0&&typeof T.exact=="number"&&(T.min=T.max=T.exact);var E=function(V,H){return V?V+H.charAt(0).toUpperCase()+H.slice(1):H==="deviceId"?"sourceId":H};if(T.ideal!==void 0){f.optional=f.optional||[];var C={};typeof T.ideal=="number"?(C[E("min",b)]=T.ideal,f.optional.push(C),C={},C[E("max",b)]=T.ideal,f.optional.push(C)):(C[E("",b)]=T.ideal,f.optional.push(C))}T.exact!==void 0&&typeof T.exact!="number"?(f.mandatory=f.mandatory||{},f.mandatory[E("",b)]=T.exact):["min","max"].forEach(function(V){T[V]!==void 0&&(f.mandatory=f.mandatory||{},f.mandatory[E(V,b)]=T[V])})}}),d.advanced&&(f.optional=(f.optional||[]).concat(d.advanced)),f},m=function(d,f){if(o.version>=61)return f(d);if(d=JSON.parse(JSON.stringify(d)),d&&xt(d.audio)==="object"){var b=function(V,H,te){H in V&&!(te in V)&&(V[te]=V[H],delete V[H])};d=JSON.parse(JSON.stringify(d)),b(d.audio,"autoGainControl","googAutoGainControl"),b(d.audio,"noiseSuppression","googNoiseSuppression"),d.audio=i(d.audio)}if(d&&xt(d.video)==="object"){var T=d.video.facingMode;T=T&&(xt(T)==="object"?T:{ideal:T});var E=o.version<66;if(T&&(T.exact==="user"||T.exact==="environment"||T.ideal==="user"||T.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!E)){delete d.video.facingMode;var C;if(T.exact==="environment"||T.ideal==="environment"?C=["back","rear"]:(T.exact==="user"||T.ideal==="user")&&(C=["front"]),C)return n.mediaDevices.enumerateDevices().then(function(V){V=V.filter(function(te){return te.kind==="videoinput"});var H=V.find(function(te){return C.some(function(x){return te.label.toLowerCase().includes(x)})});return!H&&V.length&&C.includes("back")&&(H=V[V.length-1]),H&&(d.video.deviceId=T.exact?{exact:H.deviceId}:{ideal:H.deviceId}),d.video=i(d.video),mr("chrome: "+JSON.stringify(d)),f(d)})}d.video=i(d.video)}return mr("chrome: "+JSON.stringify(d)),f(d)},v=function(d){return o.version>=64?d:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[d.name]||d.name,message:d.message,constraint:d.constraint||d.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},g=function(d,f,b){m(d,function(T){n.webkitGetUserMedia(T,f,function(E){b&&b(v(E))})})};if(n.getUserMedia=g.bind(n),n.mediaDevices.getUserMedia){var u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(d){return m(d,function(f){return u(f).then(function(b){if(f.audio&&!b.getAudioTracks().length||f.video&&!b.getVideoTracks().length)throw b.getTracks().forEach(function(T){T.stop()}),new DOMException("","NotFoundError");return b},function(b){return Promise.reject(v(b))})})}}}}var ao={};Object.defineProperty(ao,"__esModule",{value:!0});var td=ao.shimGetUserMedia=rd,ad=nd(Qe);function no(a){if(typeof WeakMap!="function")return null;var o=new WeakMap,n=new WeakMap;return(no=function(i){return i?n:o})(a)}function nd(a,o){if(a&&a.__esModule)return a;if(a===null||oa(a)!=="object"&&typeof a!="function")return{default:a};var n=no(o);if(n&&n.has(a))return n.get(a);var i={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in a)if(v!=="default"&&Object.prototype.hasOwnProperty.call(a,v)){var g=m?Object.getOwnPropertyDescriptor(a,v):null;g&&(g.get||g.set)?Object.defineProperty(i,v,g):i[v]=a[v]}return i.default=a,n&&n.set(a,i),i}function oa(a){"@babel/helpers - typeof";return oa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},oa(a)}function rd(a,o){var n=a&&a.navigator,i=a&&a.MediaStreamTrack;if(n.getUserMedia=function(d,f,b){ad.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(d).then(f,b)},!(o.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var m=function(d,f,b){f in d&&!(b in d)&&(d[b]=d[f],delete d[f])},v=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(d){return oa(d)==="object"&&oa(d.audio)==="object"&&(d=JSON.parse(JSON.stringify(d)),m(d.audio,"autoGainControl","mozAutoGainControl"),m(d.audio,"noiseSuppression","mozNoiseSuppression")),v(d)},i&&i.prototype.getSettings){var g=i.prototype.getSettings;i.prototype.getSettings=function(){var d=g.apply(this,arguments);return m(d,"mozAutoGainControl","autoGainControl"),m(d,"mozNoiseSuppression","noiseSuppression"),d}}if(i&&i.prototype.applyConstraints){var u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(d){return this.kind==="audio"&&oa(d)==="object"&&(d=JSON.parse(JSON.stringify(d)),m(d,"autoGainControl","mozAutoGainControl"),m(d,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[d])}}}}var yt={};Object.defineProperty(yt,"__esModule",{value:!0});yt.shimAudioContext=vd;yt.shimCallbacksAPI=ud;yt.shimConstraints=lo;yt.shimCreateOfferLegacy=fd;var od=yt.shimGetUserMedia=dd;yt.shimLocalStreamsAPI=id;yt.shimRTCIceServerUrls=cd;yt.shimRemoteStreamsAPI=sd;yt.shimTrackEventTransceiver=md;var ro=ld(Qe);function oo(a){if(typeof WeakMap!="function")return null;var o=new WeakMap,n=new WeakMap;return(oo=function(i){return i?n:o})(a)}function ld(a,o){if(a&&a.__esModule)return a;if(a===null||Bt(a)!=="object"&&typeof a!="function")return{default:a};var n=oo(o);if(n&&n.has(a))return n.get(a);var i={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in a)if(v!=="default"&&Object.prototype.hasOwnProperty.call(a,v)){var g=m?Object.getOwnPropertyDescriptor(a,v):null;g&&(g.get||g.set)?Object.defineProperty(i,v,g):i[v]=a[v]}return i.default=a,n&&n.set(a,i),i}function Bt(a){"@babel/helpers - typeof";return Bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Bt(a)}function id(a){if(!(Bt(a)!=="object"||!a.RTCPeerConnection)){if("getLocalStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in a.RTCPeerConnection.prototype)){var o=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addStream=function(n){var i=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(function(m){return o.call(i,m,n)}),n.getVideoTracks().forEach(function(m){return o.call(i,m,n)})},a.RTCPeerConnection.prototype.addTrack=function(n){for(var i=this,m=arguments.length,v=new Array(m>1?m-1:0),g=1;g<m;g++)v[g-1]=arguments[g];return v&&v.forEach(function(u){i._localStreams?i._localStreams.includes(u)||i._localStreams.push(u):i._localStreams=[u]}),o.apply(this,arguments)}}"removeStream"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.removeStream=function(n){var i=this;this._localStreams||(this._localStreams=[]);var m=this._localStreams.indexOf(n);if(m!==-1){this._localStreams.splice(m,1);var v=n.getTracks();this.getSenders().forEach(function(g){v.includes(g.track)&&i.removeTrack(g)})}})}}function sd(a){if(!(Bt(a)!=="object"||!a.RTCPeerConnection)&&("getRemoteStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in a.RTCPeerConnection.prototype))){Object.defineProperty(a.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(n){var i=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=function(m){m.streams.forEach(function(v){if(i._remoteStreams||(i._remoteStreams=[]),!i._remoteStreams.includes(v)){i._remoteStreams.push(v);var g=new Event("addstream");g.stream=v,i.dispatchEvent(g)}})})}});var o=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(function(m){if(n._remoteStreams||(n._remoteStreams=[]),!(n._remoteStreams.indexOf(m)>=0)){n._remoteStreams.push(m);var v=new Event("addstream");v.stream=m,n.dispatchEvent(v)}})}),o.apply(n,arguments)}}}function ud(a){if(!(Bt(a)!=="object"||!a.RTCPeerConnection)){var o=a.RTCPeerConnection.prototype,n=o.createOffer,i=o.createAnswer,m=o.setLocalDescription,v=o.setRemoteDescription,g=o.addIceCandidate;o.createOffer=function(d,f){var b=arguments.length>=2?arguments[2]:arguments[0],T=n.apply(this,[b]);return f?(T.then(d,f),Promise.resolve()):T},o.createAnswer=function(d,f){var b=arguments.length>=2?arguments[2]:arguments[0],T=i.apply(this,[b]);return f?(T.then(d,f),Promise.resolve()):T};var u=function(d,f,b){var T=m.apply(this,[d]);return b?(T.then(f,b),Promise.resolve()):T};o.setLocalDescription=u,u=function(d,f,b){var T=v.apply(this,[d]);return b?(T.then(f,b),Promise.resolve()):T},o.setRemoteDescription=u,u=function(d,f,b){var T=g.apply(this,[d]);return b?(T.then(f,b),Promise.resolve()):T},o.addIceCandidate=u}}function dd(a){var o=a&&a.navigator;if(o.mediaDevices&&o.mediaDevices.getUserMedia){var n=o.mediaDevices,i=n.getUserMedia.bind(n);o.mediaDevices.getUserMedia=function(m){return i(lo(m))}}!o.getUserMedia&&o.mediaDevices&&o.mediaDevices.getUserMedia&&(o.getUserMedia=(function(m,v,g){o.mediaDevices.getUserMedia(m).then(v,g)}).bind(o))}function lo(a){return a&&a.video!==void 0?Object.assign({},a,{video:ro.compactObject(a.video)}):a}function cd(a){if(a.RTCPeerConnection){var o=a.RTCPeerConnection;a.RTCPeerConnection=function(n,i){if(n&&n.iceServers){for(var m=[],v=0;v<n.iceServers.length;v++){var g=n.iceServers[v];g.urls===void 0&&g.url?(ro.deprecated("RTCIceServer.url","RTCIceServer.urls"),g=JSON.parse(JSON.stringify(g)),g.urls=g.url,delete g.url,m.push(g)):m.push(n.iceServers[v])}n.iceServers=m}return new o(n,i)},a.RTCPeerConnection.prototype=o.prototype,"generateCertificate"in o&&Object.defineProperty(a.RTCPeerConnection,"generateCertificate",{get:function(){return o.generateCertificate}})}}function md(a){Bt(a)==="object"&&a.RTCTrackEvent&&"receiver"in a.RTCTrackEvent.prototype&&!("transceiver"in a.RTCTrackEvent.prototype)&&Object.defineProperty(a.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function fd(a){var o=a.RTCPeerConnection.prototype.createOffer;a.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);var i=this.getTransceivers().find(function(v){return v.receiver.track.kind==="audio"});n.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):n.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);var m=this.getTransceivers().find(function(v){return v.receiver.track.kind==="video"});n.offerToReceiveVideo===!1&&m?m.direction==="sendrecv"?m.setDirection?m.setDirection("sendonly"):m.direction="sendonly":m.direction==="recvonly"&&(m.setDirection?m.setDirection("inactive"):m.direction="inactive"):n.offerToReceiveVideo===!0&&!m&&this.addTransceiver("video",{direction:"recvonly"})}return o.apply(this,arguments)}}function vd(a){Bt(a)!=="object"||a.AudioContext||(a.AudioContext=a.webkitAudioContext)}const pd=Pu(()=>{const a=xu(window);switch(a.browser){case"chrome":Qu(window,a);break;case"firefox":td(window,a);break;case"safari":od(window,a);break;default:throw new zr}});let la=Promise.resolve({type:"stop",data:{}});async function fr(a,o,n){var i,m,v;if(console.debug("[vue-qrcode-reader] starting camera with constraints: ",JSON.stringify(o)),window.isSecureContext!==!0)throw new Vu;if(((i=navigator==null?void 0:navigator.mediaDevices)==null?void 0:i.getUserMedia)===void 0)throw new zr;pd(),console.debug("[vue-qrcode-reader] calling getUserMedia");const g=await navigator.mediaDevices.getUserMedia({audio:!1,video:o});a.srcObject!==void 0?a.srcObject=g:a.mozSrcObject!==void 0?a.mozSrcObject=g:window.URL.createObjectURL?a.src=window.URL.createObjectURL(g):window.webkitURL?a.src=window.webkitURL.createObjectURL(g):a.src=g.id,a.play(),console.debug("[vue-qrcode-reader] waiting for video element to load"),await Promise.race([qr(a,"loadeddata"),ur(6e3).then(()=>{throw new $u})]),console.debug("[vue-qrcode-reader] video element loaded"),await ur(500);const[u]=g.getVideoTracks(),d=(v=(m=u==null?void 0:u.getCapabilities)==null?void 0:m.call(u))!=null?v:{};let f=!1;return n&&d.torch&&(await u.applyConstraints({advanced:[{torch:!0}]}),f=!0),console.debug("[vue-qrcode-reader] camera ready"),{type:"start",data:{videoEl:a,stream:g,capabilities:d,constraints:o,isTorchOn:f}}}async function yd(a,{constraints:o,torch:n,restart:i=!1}){la=la.then(v=>{if(v.type==="start"){const{data:{videoEl:g,stream:u,constraints:d,isTorchOn:f}}=v;return!i&&a===g&&o===d&&n===f?v:io(g,u,f).then(()=>fr(a,o,n))}else if(v.type==="stop"||v.type==="failed")return fr(a,o,n);dr()}).catch(v=>(console.debug(`[vue-qrcode-reader] starting camera failed with "${v}"`),{type:"failed",error:v}));const m=await la;if(m.type==="stop")throw new Error("Something went wrong with the camera task queue (start task).");if(m.type==="failed")throw m.error;if(m.type==="start")return m.data.capabilities;dr()}async function io(a,o,n){console.debug("[vue-qrcode-reader] stopping camera"),a.src="",a.srcObject=null,a.load(),await qr(a,"error");for(const i of o.getTracks())n!=null||await i.applyConstraints({advanced:[{torch:!1}]}),o.removeTrack(i),i.stop();return{type:"stop",data:{}}}async function $a(){if(la=la.then(a=>{if(a.type==="stop"||a.type==="failed")return a;const{data:{videoEl:o,stream:n,isTorchOn:i}}=a;return io(o,n,i)}),(await la).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")}const gd=Be({__name:"QrcodeStream",props:{constraints:{default:()=>({facingMode:"environment"})},formats:{default:()=>["qr_code"]},paused:{type:Boolean,default:!1},torch:{type:Boolean,default:!1},track:{type:Function,default:void 0}},emits:["detect","camera-on","camera-off","error"],setup(a,{emit:o}){const n=a,i=o,m=M(n.constraints),v=M(n.formats);qe(()=>n.constraints,(R,B)=>{JSON.stringify(R)!==JSON.stringify(B)&&(m.value=R)},{deep:!0}),qe(()=>n.formats,(R,B)=>{JSON.stringify(R)!==JSON.stringify(B)&&(v.value=R)},{deep:!0});const g=M(),u=M(),d=M(),f=M(!1),b=M(!1);gr(()=>{b.value=!0}),zl(()=>{$a()});const T=ra(()=>({torch:n.torch,constraints:m.value,shouldStream:b.value&&!n.paused}));qe(T,async R=>{const B=d.value;pt(B!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined.");const D=g.value;pt(D!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined.");const oe=D.getContext("2d");if(pt(oe!==null,"if cavnas is defined, canvas 2d context should also be non-null"),R.shouldStream){$a(),f.value=!1;try{const be=await yd(B,R);b.value?(f.value=!0,i("camera-on",be)):await $a()}catch(be){i("error",be)}}else D.width=B.videoWidth,D.height=B.videoHeight,oe.drawImage(B,0,0,B.videoWidth,B.videoHeight),$a(),f.value=!1,i("camera-off")},{deep:!0}),qe(v,async R=>{b.value&&await Kr(R)});const E=ra(()=>T.value.shouldStream&&f.value);qe(E,R=>{if(R){pt(g.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"),C(g.value),pt(u.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"),C(u.value);const B=()=>n.track===void 0?500:40;pt(d.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"),Nu(d.value,{detectHandler:D=>i("detect",D),formats:v.value,locateHandler:V,minDelay:B()})}});const C=R=>{const B=R.getContext("2d");pt(B!==null,"canvas 2d context should always be non-null"),B.clearRect(0,0,R.width,R.height)},V=R=>{const B=u.value;pt(B!==void 0,"onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined.");const D=d.value;if(pt(D!==void 0,"onLocate handler should only be called when component is mounted. Thus video element is always defined."),R.length===0||n.track===void 0)C(B);else{const oe=D.offsetWidth,be=D.offsetHeight,P=D.videoWidth,w=D.videoHeight,G=Math.max(oe/P,be/w),me=P*G,ye=w*G,mt=me/P,gt=ye/w,Pe=(oe-me)/2,ht=(be-ye)/2,ot=({x:Ye,y:Oe})=>({x:Math.floor(Ye*mt),y:Math.floor(Oe*gt)}),ke=({x:Ye,y:Oe})=>({x:Math.floor(Ye+Pe),y:Math.floor(Oe+ht)}),tt=R.map(Ye=>{const{boundingBox:Oe,cornerPoints:Mt}=Ye,{x:Ut,y:He}=ke(ot({x:Oe.x,y:Oe.y})),{x:qt,y:Vt}=ot({x:Oe.width,y:Oe.height});return{...Ye,cornerPoints:Mt.map(Tt=>ke(ot(Tt))),boundingBox:DOMRectReadOnly.fromRect({x:Ut,y:He,width:qt,height:Vt})}});B.width=D.offsetWidth,B.height=D.offsetHeight;const ft=B.getContext("2d");pt(ft!==null,"canvas 2d context should always be non-null"),n.track(tt,ft)}},H={width:"100%",height:"100%",position:"relative","z-index":"0"},te={width:"100%",height:"100%",position:"absolute",top:"0",left:"0"},x={width:"100%",height:"100%","object-fit":"cover"},q=ra(()=>E.value?x:{...x,visibility:"hidden",position:"absolute"});return(R,B)=>(A(),W("div",{style:H},[ue("video",{ref_key:"videoRef",ref:d,style:Kl(q.value),autoplay:"",muted:"",playsinline:""},null,4),Jl(ue("canvas",{id:"qrcode-stream-pause-frame",ref_key:"pauseFrameRef",ref:g,style:x},null,512),[[Ql,!E.value]]),ue("canvas",{id:"qrcode-stream-tracking-layer",ref_key:"trackingLayerRef",ref:u,style:te},null,512),ue("div",{style:te},[Xl(R.$slots,"default")])]))}}),hd=Be({__name:"QRCodeReader",emits:["scan"],setup(a,{emit:o}){const n=o,i=Zl("inputBox"),m=M("keyboard"),v=M({facingMode:"environment"}),g=[{label:"Rear Camera",constraints:{facingMode:"environment"}},{label:"Front Camera",constraints:{facingMode:"user"}}],u=M(g),d=M({aztec:!0,code_128:!0,code_39:!0,code_93:!0,codabar:!0,databar:!0,databar_expanded:!0,data_matrix:!0,dx_film_edge:!0,ean_13:!0,ean_8:!0,itf:!0,maxi_code:!0,micro_qr_code:!0,pdf417:!0,qr_code:!0,rm_qr_code:!0,upc_a:!0,upc_e:!0,linear_codes:!0,matrix_codes:!0}),f=V=>{V.length>=1&&n("scan",V[0].rawValue)},b=async()=>{const H=(await navigator.mediaDevices.enumerateDevices()).filter(({kind:te})=>te==="videoinput");u.value=[...g,...H.map(({deviceId:te,label:x})=>({label:`${x}`,constraints:{deviceId:te}}))]},T=ra(()=>Object.keys(d.value).filter(V=>d.value[V])),E=M(""),C=V=>{V.key==="Enter"?(n("scan",E.value),E.value=""):V.key.length===1&&(E.value+=V.key)};return pr(()=>{window.removeEventListener("keydown",C)}),window.addEventListener("keydown",C),gr(()=>{i.value&&i.value.focus()}),(V,H)=>m.value==="keyboard"?(A(),W(de,{key:0},[ue("input",{ref_key:"inputBox",ref:i,type:"text",class:"opacity-0 w-0 h-0"},null,512),s(ge,null,{default:c(()=>[s(Y,{class:"text-center"},{default:c(()=>[s(Sn,{icon:"mdi:mdi-qrcode-scan",size:"150"})]),_:1})]),_:1}),s(ge,null,{default:c(()=>[E.value?(A(),N(Y,{key:0,class:"text-center"},{default:c(()=>[Z(ie(E.value),1)]),_:1})):(A(),N(Y,{key:1,class:"text-center"},{default:c(()=>H[3]||(H[3]=[ue("small",null,"(Awaiting Input)",-1)])),_:1}))]),_:1}),s(ge,null,{default:c(()=>[s(Y,{class:"text-center"},{default:c(()=>[s(ce,{onClick:H[0]||(H[0]=te=>m.value="camera"),color:"primary"},{default:c(()=>H[4]||(H[4]=[Z(" Use Camera ")])),_:1})]),_:1})]),_:1})],64)):m.value==="camera"?(A(),W(de,{key:1},[s(ge,null,{default:c(()=>[s(Y,{class:"text-center"},{default:c(()=>[s(F(gd),{onDetect:f,onCameraOn:b,constraints:v.value,formats:T.value,style:{"max-width":"400px"}},null,8,["constraints","formats"])]),_:1})]),_:1}),s(ge,null,{default:c(()=>[s(Y,null,{default:c(()=>[s(Te,{modelValue:v.value,"onUpdate:modelValue":H[1]||(H[1]=te=>v.value=te),items:u.value,"item-title":"label","item-value":"constraints",label:"Select Camera","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1}),s(ge,null,{default:c(()=>[s(Y,{class:"text-center"},{default:c(()=>[s(ce,{onClick:H[2]||(H[2]=te=>m.value="keyboard"),color:"primary"},{default:c(()=>H[5]||(H[5]=[Z(" Cancel ")])),_:1})]),_:1})]),_:1})],64)):ae("",!0)}});function Ud(a){return new Promise((o,n)=>{var v;if(!a.target.files||a.target.files.length==0){n("No files selected");return}const i=(v=a.target)==null?void 0:v.files[0],m=new FileReader;m.onload=g=>{var f;const d=((f=g.target)==null?void 0:f.result).split(/[\s,\n\r]+/);o(d.filter(b=>b.length>0).sort((b,T)=>{const E=Number(b),C=Number(T),V=!isNaN(E),H=!isNaN(C);return V&&H?E-C:b.localeCompare(T,void 0,{numeric:!0,sensitivity:"base"})}).join(`
`))},m.readAsText(i)})}const vr=Be({__name:"MultiRegistrationInput",props:{modelValue:{},modelModifiers:{}},emits:$e(["change","input","click:clear"],["update:modelValue"]),setup(a,{emit:o}){const n=M(!1),i=M(""),m=o,v=ze(a,"modelValue"),g=()=>v.value?mn.isArray(v.value)?v.value.length>1?"List":v.value[0]:mn.isString(v.value)?v.value:"":"",u=M(g());qe(v,()=>{u.value=g()});const d=async E=>{i.value=await Ud(E)},f=E=>{n.value=!1,v.value=i.value.split(`
`),u.value="List",m("input",E)},b=E=>{v.value=u.value,m("input",E)},T=E=>{v.value="",u.value=g(),m("click:clear",E)};return(E,C)=>(A(),W("div",null,[s(Ne,gn({modelValue:u.value,"onUpdate:modelValue":C[0]||(C[0]=V=>u.value=V)},E.$attrs,{"append-inner-icon":"mdi:mdi-clipboard-list-outline","onClick:appendInner":C[1]||(C[1]=V=>n.value=!0),"onClick:clear":T,onInput:b}),null,16,["modelValue"]),s(ja,{modelValue:n.value,"onUpdate:modelValue":C[5]||(C[5]=V=>n.value=V)},{default:c(()=>[s(Wt,{class:"rounded-xl"},{default:c(()=>[s(ba,null,{default:c(()=>[s(Sa,{class:"d-flex justify-space-between align-center"},{default:c(()=>[C[6]||(C[6]=ue("div",{class:"text-h5 text-medium-emphasis"}," Registration Number List ",-1)),s(ce,{icon:"mdi:mdi-close",variant:"text",onClick:C[2]||(C[2]=V=>n.value=!1)})]),_:1}),s(Cr,null,{default:c(()=>C[7]||(C[7]=[Z("Provide a list of registration numbers, you may also upload a file of numbers.")])),_:1})]),_:1}),s(sa,{color:"white"},{default:c(()=>[s(Or,{modelValue:i.value,"onUpdate:modelValue":C[3]||(C[3]=V=>i.value=V),label:"Registration Numbers"},null,8,["modelValue"]),s(Yi,{label:"File Upload",onChange:d})]),_:1}),s(_n,null,{default:c(()=>[s(ce,{onClick:C[4]||(C[4]=V=>i.value="")},{default:c(()=>C[8]||(C[8]=[Z("Clear")])),_:1}),s(na),s(ce,{onClick:f},{default:c(()=>C[9]||(C[9]=[Z("Apply")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),Td=["colspan"],Vc=Be({__name:"RegistrationsView",emits:["pageTitle"],async setup(a,{emit:o}){var Ca,ma,fa;let n,i;const m=Di(),{getConvention:v}=Vi();o("pageTitle","Registration Manager");const u=ei(),d=yr(),f=M(!1);let b=((Ca=u.params.convention)==null?void 0:Ca.toString())||"";const T=M();T.value=([n,i]=Jn(()=>v()),n=await n,i(),n);const E=Yt(),C=Fa.getInstance(),{getLinkedFields:V}=Ci(),H=M([]),te=M({ID:0,AdminLayoutUUID:Ot(),ConventionID:((ma=T.value)==null?void 0:ma.ID)||0,ConventionUUID:((fa=T.value)==null?void 0:fa.ConventionUUID)||et,Name:"Registration Table",RunnerLayoutUUID:et,Type:ut.ADMIN_LAYOUT_TABLE,Panels:[]}),x=M([]),q=M([]),R=M([]),B=M([]),D=M([]),oe=M([]),be=M(1),P=M(10),w=M([]),G=M(0),me=M([]),ye=M(!1),mt=M(!1),gt=M(!1),Pe=M(""),ht=M(""),ot=M(""),ke=M(""),tt=M(""),ft=M(""),Ye=([n,i]=Jn(()=>{var U;return V(((U=T.value)==null?void 0:U.ConventionUUID)||et)}),n=await n,i(),n),Oe=M({FieldUUID:Ye.badge_name||et,Value:""}),Mt=M({FieldUUID:Ye.forename||et,Value:""}),Ut=M({FieldUUID:Ye.surname||et,Value:""}),He=M({FieldUUID:Ye.dob||et,Value:""}),qt=M(new Map([[Ye.badge_name||et,Oe.value],[Ye.forename||et,Mt.value],[Ye.surname||et,Ut.value],[Ye.dob||et,He.value]])),Vt=M(""),Tt=M(""),zt=M([]),Jt=M([]),$t=M([]),bt=M([]),St=M([]),Kt=M([]),Ge=M([]),lt=M(0),Le=M(),_t=M(!1),Qt=M(!1),Ga=M(!1),Xt=M(),_a=M(),Gt=M(),Pt=M(!1),Ha=Ya(),Je=M(""),it=M(!1),he=Xn(()=>{Je.value="";const U=oe.value.find(y=>y.uuid===Pe.value);U&&U.challenge||(ht.value=Date.now().toString())}),Lt=Xn(()=>{it.value=!1,ht.value=Date.now().toString()});qe(Pe,U=>{const y=oe.value.find(I=>I.uuid===U);if(y){const I=y.headers.find(L=>L.defaultSort===!0);I&&(w.value=[{key:I.key,order:"asc"}],zt.value=[{key:I.key,order:"asc"}]),y.challenge&&(y.items=[])}At({page:1,itemsPerPage:P.value,sortBy:zt.value})}),qe(lt,U=>{U===8&&Aa()}),qe(Vt,()=>{he()}),qe(Tt,()=>{he()});const Dt=()=>{if(x.value=[],R.value=[],B.value=[],oe.value=[],!!T.value){try{E.getConventionAdminLayoutByName(T.value.ConventionUUID,"Registration Table").then(U=>{if(lt.value+=1,U)te.value=U;else{if(!T.value)return;te.value.ConventionID=T.value.ID,te.value.ConventionUUID=T.value.ConventionUUID}})}catch{te.value.ConventionID=T.value.ID,te.value.ConventionUUID=T.value.ConventionUUID}try{E.getConventionAdminLayouts(T.value.ConventionUUID).then(U=>{lt.value+=1,U&&(U.forEach(y=>{y.Panels.sort((I,L)=>I.Order>L.Order?1:I.Order===L.Order?0:-1),y.Panels.forEach(I=>{I.Items.sort((L,z)=>L.Order>z.Order?1:L.Order===z.Order?0:-1)})}),R.value=U)})}catch{}try{E.getConventionForms(T.value.ConventionUUID).then(U=>{lt.value+=1,U&&(x.value=U)})}catch{}try{E.getConventionAccommodation(T.value.ConventionUUID).then(U=>{lt.value+=1,U&&(Jt.value=U)})}catch{}try{E.getConventionVenues(T.value.ConventionUUID).then(U=>{lt.value+=1,U&&(Kt.value=U)})}catch{}try{E.getConventionExtras(T.value.ConventionUUID).then(U=>{lt.value+=1,U&&($t.value=U)})}catch{}try{E.getConventionInterests(T.value.ConventionUUID).then(U=>{lt.value+=1,U&&(bt.value=U)})}catch{}try{E.getConventionTickets(T.value.ConventionUUID).then(U=>{lt.value+=1,U&&(St.value=U)})}catch{}try{E.getConventionGroups(T.value.ConventionUUID).then(U=>{U&&(q.value=U.sort((y,I)=>y.Name.localeCompare(I.Name)))})}catch{}try{E.getConventionTags(T.value.ConventionUUID).then(U=>{U&&(D.value=U.sort((y,I)=>y.Title.localeCompare(I.Title)).map(y=>(y.Title=`${y.Title} [${y.Key}]`,y)))})}catch{}}},Zt=(U,y,I,L,z)=>{const le={Direction:L,Limit:I,Offset:(y-1)*I,Order:z};return U&&(le.PanelUUID=U==null?void 0:U.layout.LayoutPanelUUID),(U==null?void 0:U.layout.RequiredFormType)===Ie.FORM_TYPE_ADDITIONAL&&(le.Additional=!0),(U==null?void 0:U.layout.RequiredFormType)===Ie.FORM_TYPE_ADMIN&&(le.AdminForm=!0),(U==null?void 0:U.layout.RequiredFormType)===Ie.FORM_TYPE_ACCOMMODATION&&(le.Accommodation=!0),(U==null?void 0:U.layout.RequiredFormType)===Ie.FORM_TYPE_BADGE&&(le.Badge=!0),(U==null?void 0:U.layout.RequiredFormType)===Ie.FORM_TYPE_DEALER&&(le.Dealer=!0),(U==null?void 0:U.layout.RequiredFormType)===Ie.FORM_TYPE_REGISTRATION&&(le.Registration=!0),le.GroupUUID=Vt.value||et,le.TagUUID=Tt.value||et,le.Email=tt.value,mn.isArray(ke.value)?le.Reference=ke.value:ke.value.length?le.Reference=[ke.value]:le.Reference=[],ot.value&&(le.RegistrationUUID=ot.value),ft.value&&(le.BadgeSerialNumber=ft.value),le.FieldValues=Array.from(qt.value.values()),le},Da=(U,y)=>{let I="",L="";const z=y==null?void 0:y.layout.Items;if(U&&z&&U.length>=1){const le=z.find(Xe=>Xe.LayoutItemUUID==U[0].key);switch(L=U[0].order||"asc",le==null?void 0:le.MetaField){case pe.META_DATA_SOURCE_ACCOMMODATION_FORM:I="submission.status";break;case pe.META_DATA_SOURCE_ADDITIONAL_FORM:I="submission.status";break;case pe.META_DATA_SOURCE_ADMIN_FORM:I="submission.status";break;case pe.META_DATA_SOURCE_BADGE_FORM:I="submission.status";break;case pe.META_DATA_SOURCE_DEALER_FORM:I="submission.status";break;case pe.META_DATA_SOURCE_REGISTRATION_FORM:I="submission.status";break;case pe.META_DATA_SOURCE_REGISTRATION_REFERENCE:I="reference";break;case pe.META_DATA_SOURCE_SUBMISSION_DATE:I="created";break;case pe.META_DATA_SOURCE_SUBMISSION_STATUS:I="submission.status";break}switch(le==null?void 0:le.UserField){case Ve.USER_DATA_SOURCE_DISPLAY_NAME:I="user.display_name";break;case Ve.USER_DATA_SOURCE_EMAIL:I="user.email";break;case Ve.USER_DATA_SOURCE_FIRST_NAME:I="user.firstname";break;case Ve.USER_DATA_SOURCE_HANDLE:I="user.handle";break;case Ve.USER_DATA_SOURCE_LAST_NAME:I="user.lastname";break}}return{sortByStr:I,directionStr:L}},At=({page:U,itemsPerPage:y,sortBy:I})=>{if(!T.value)return;be.value=U,w.value=I;const L=oe.value.find(Xe=>Xe.uuid==Pe.value);if(L&&L.challenge&&Je.value.trim().length<3)return;f.value=!0;let{sortByStr:z,directionStr:le}=Da(I,L);try{const Xe=Zt(L,U,y,le,z);ot.value="",ft.value="";const Ka=ht.value;E.searchConventionRegistrations(T.value.ConventionUUID,Xe,Je.value).then(vt=>{vt&&Ka===ht.value&&(G.value=vt.Total,B.value=vt.Registrations,me.value=vt.IDs,oe.value.forEach(va=>{const Qa=va.layout;va.items=B.value.map(K=>{const ea=[];let We;K.Leader?We=K:We=K.Primary,ea.push({Name:We.User.DisplayName,UUID:We.UserUUID,UserUUID:We.User.UserUUID,IsLeader:!0,Reference:We.Reference,Paid:We.Paid,Total:We.Total}),ea.push(...We.Members.map(Ke=>({Name:Ke.User.DisplayName,UUID:Ke.UserUUID,UserUUID:Ke.User.UserUUID,IsLeader:!1,Reference:Ke.Reference,Paid:Ke.Paid,Total:Ke.Total})));const fe={};return va.headers.forEach(Ke=>{var pa;const X=Qa.Items.find(Ct=>Ct.LayoutItemUUID===Ke.key);if(X){if(X.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&X.SectionField)K.Submissions.forEach(Ct=>{const Nt=Ct.Data.find(Q=>Q.SectionFieldUUID===X.SectionFieldUUID);if(Nt){Ke.type===hr.ACCOMMODATION?fe[X.LayoutItemUUID]={Data:Nt.Data,Registration:K}:fe[X.LayoutItemUUID]=Nt.Data;return}});else if(X.SourceType==="LAYOUT_ITEM_SOURCE_USER"&&X.UserField)switch(X.UserField){case Ve.USER_DATA_SOURCE_AVATAR:fe[X.LayoutItemUUID]=m.GetProfileImageURL(K.UserUUID);break;case Ve.USER_DATA_SOURCE_CONTACTS:fe[X.LayoutItemUUID]={},console.log(K.User.Generated),K.User.Generated&&K.User.Generated.telegram_handle&&(fe[X.LayoutItemUUID].telegram=`@${K.User.Generated.telegram_handle}`),K.User.Generated&&K.User.Generated.contact_emails&&(fe[X.LayoutItemUUID].email=K.User.Generated.contact_emails);break;case Ve.USER_DATA_SOURCE_DISPLAY_NAME:fe[X.LayoutItemUUID]=K.User.DisplayName;break;case Ve.USER_DATA_SOURCE_EMAIL:fe[X.LayoutItemUUID]=K.User.Additional.Email;break;case Ve.USER_DATA_SOURCE_HANDLE:fe[X.LayoutItemUUID]=K.User.Handle;break;case Ve.USER_DATA_SOURCE_DATE_OF_BIRTH:fe[X.LayoutItemUUID]=K.User.Additional.DOB;break;case Ve.USER_DATA_SOURCE_FIRST_NAME:fe[X.LayoutItemUUID]=K.User.Additional.FirstName;break;case Ve.USER_DATA_SOURCE_LAST_NAME:fe[X.LayoutItemUUID]=K.User.Additional.LastName;break;case Ve.USER_DATA_SOURCE_TELEGRAM:K.User.Generated&&K.User.Generated.telegram_handle?fe[X.LayoutItemUUID]=`@${K.User.Generated.telegram_handle}`:fe[X.LayoutItemUUID]="";break}else if(X.SourceType==="LAYOUT_ITEM_SOURCE_META"&&X.MetaField){const Ct=(pa=x.value.find(Q=>Q.Type===Ie.FORM_TYPE_REGISTRATION))==null?void 0:pa.FormUUID,Nt=K.Submissions.find(Q=>Q.FormUUID===Ct);switch(X.MetaField){case pe.META_DATA_SOURCE_REGISTRATION_ACTIONS:fe[X.LayoutItemUUID]=K;break;case pe.META_DATA_SOURCE_REGISTRATION_GROUP:fe[X.LayoutItemUUID]=ea;break;case pe.META_DATA_SOURCE_REGISTRATION_REFERENCE:fe[X.LayoutItemUUID]=K.Reference;break;case pe.META_DATA_SOURCE_SUBMISSION_DATE:if(Nt){const Q=new Date(Nt.CreatedAt||"");fe[X.LayoutItemUUID]=`${Q.getFullYear()}-${(Q.getMonth()+1).toString().padStart(2,"0")}-${Q.getDate().toString().padStart(2,"0")} ${Q.getHours().toString().padStart(2,"0")}:${Q.getMinutes().toString().padStart(2,"0")}:${Q.getSeconds().toString().padStart(2,"0")}`}else{const Q=new Date(K.CreatedAt||"");fe[X.LayoutItemUUID]=`${Q.getFullYear()}-${(Q.getMonth()+1).toString().padStart(2,"0")}-${Q.getDate().toString().padStart(2,"0")} ${Q.getHours().toString().padStart(2,"0")}:${Q.getMinutes().toString().padStart(2,"0")}:${Q.getSeconds().toString().padStart(2,"0")}`}break;case pe.META_DATA_SOURCE_ACCOMMODATION_FORM:fe[X.LayoutItemUUID]=K.Submissions.map(Q=>{const ee=x.value.find(Ze=>Ze.FormUUID===Q.FormUUID);return{Heading:ee==null?void 0:ee.Heading,Form:ee,Submission:Q,Registration:K}}).filter(Q=>{var ee;return((ee=Q.Form)==null?void 0:ee.Type)===Ie.FORM_TYPE_ACCOMMODATION});break;case pe.META_DATA_SOURCE_ADMIN_FORM:fe[X.LayoutItemUUID]=K.Submissions.map(Q=>{const ee=x.value.find(Ze=>Ze.FormUUID===Q.FormUUID);return{Heading:ee==null?void 0:ee.Heading,Form:ee,Submission:Q,Registration:K}}).filter(Q=>{var ee;return((ee=Q.Form)==null?void 0:ee.Type)===Ie.FORM_TYPE_ADMIN});break;case pe.META_DATA_SOURCE_ADDITIONAL_FORM:fe[X.LayoutItemUUID]=K.Submissions.map(Q=>{const ee=x.value.find(Ze=>Ze.FormUUID===Q.FormUUID);return{Heading:ee==null?void 0:ee.Heading,Form:ee,Submission:Q,Registration:K}}).filter(Q=>{var ee;return((ee=Q.Form)==null?void 0:ee.Type)===Ie.FORM_TYPE_ADDITIONAL});break;case pe.META_DATA_SOURCE_BADGE_FORM:fe[X.LayoutItemUUID]=K.Submissions.map(Q=>{const ee=x.value.find(Ze=>Ze.FormUUID===Q.FormUUID);return{Heading:ee==null?void 0:ee.Heading,Form:ee,Submission:Q,Registration:K}}).filter(Q=>{var ee;return((ee=Q.Form)==null?void 0:ee.Type)===Ie.FORM_TYPE_BADGE});break;case pe.META_DATA_SOURCE_DEALER_FORM:fe[X.LayoutItemUUID]=K.Submissions.map(Q=>{const ee=x.value.find(Ze=>Ze.FormUUID===Q.FormUUID);return{Heading:ee==null?void 0:ee.Heading,Form:ee,Submission:Q,Registration:K}}).filter(Q=>{var ee;return((ee=Q.Form)==null?void 0:ee.Type)===Ie.FORM_TYPE_DEALER});break;case pe.META_DATA_SOURCE_PAYMENT_STATUS:if(K.Paid===0&&K.Total)fe[X.LayoutItemUUID]="REQUIRED";else if(K.Total>K.Paid)fe[X.LayoutItemUUID]="ADDITIONAL_REQUIRED";else{const Q=ea.find(ee=>ee.Paid===0&&(ee.Total||0)>0);if(Q){K.Total===0&&Q.Total===0?fe[X.LayoutItemUUID]="NOT_REQUIRED":K.Total>0&&Q.Total===0?fe[X.LayoutItemUUID]="MISSING_REQUIRED":K.Paid>=K.Total?fe[X.LayoutItemUUID]="AWAITING_PARTNER":fe[X.LayoutItemUUID]="ALL_REQUIRED";break}else K.Total===0?fe[X.LayoutItemUUID]="NOT_REQUIRED":fe[X.LayoutItemUUID]="COMPLETE"}break;case pe.META_DATA_SOURCE_SUBMISSION_STATUS:_i(K.Submissions,x.value),fe[X.LayoutItemUUID]=K.Submissions.map(Q=>{const ee=x.value.find(Ze=>Ze.FormUUID===Q.FormUUID);return{Heading:ee==null?void 0:ee.Heading,Form:ee,Submission:Q,Registration:K}});break;case pe.META_DATA_SOURCE_DATA_LAYOUT:fe[X.LayoutItemUUID]={Registration:K,Layouts:R.value.filter(Q=>{if(X.Meta&&X.Meta.LayoutUUID&&Array.isArray(X.Meta.LayoutUUID))return X.Meta.LayoutUUID.includes(Q.AdminLayoutUUID)})};break}}}}),{key:K.RegistrationUUID,registration:K,...fe}})}),f.value=!1)})}catch{}},Et=U=>{ye.value=!1,U&&(te.value=U,Aa())},Aa=()=>{Mr(te.value.Panels,x.value),te.value.Panels.length>0&&(oe.value=[],te.value.Panels.forEach(U=>{const y={uuid:Ot(),order:U.Order,name:U.Name,headers:[],items:[],layout:U,challenge:U.Meta&&!!U.Meta.challenge};U.Items.sort((I,L)=>I.Order>L.Order?1:I.Order==L.Order?0:-1),y.headers=U.Items.filter(I=>I.SourceType!=Rt.LAYOUT_ITEM_SOURCE_META||I.MetaField!=pe.META_DATA_SOURCE_REGISTRATION_TOOLS_DROP).map(I=>{var L,z;return{key:I.LayoutItemUUID,title:I.Label||((z=(L=I.SectionField)==null?void 0:L.Field)==null?void 0:z.Label)||"",align:I.Align==="end"?"end":"start",sortable:Ea(I),type:Wa(I),defaultSort:I.DefaultSort,meta:I.Meta}}),oe.value.push(y)}),oe.value=oe.value.sort((U,y)=>U.order>y.order?1:U.order==y.order?0:-1)),(Pe.value==null||Pe.value=="")&&oe.value.length>0&&(Pe.value=oe.value[0].uuid)};b?E.getConvention(b).then(U=>{U&&(T.value=U,te.value.ConventionID=T.value.ID,te.value.ConventionUUID=T.value.ConventionUUID,Dt())}).catch(()=>{d.push("/")}):d.push("/");const Wa=U=>{var y,I;if(U.SourceType===Rt.LAYOUT_ITEM_SOURCE_META)return`${U.SourceType}.${U.MetaField}`;if(U.SourceType===Rt.LAYOUT_ITEM_SOURCE_FORM)return(I=(y=U.SectionField)==null?void 0:y.Field)==null?void 0:I.Type;if(U.SourceType===Rt.LAYOUT_ITEM_SOURCE_USER)return`${U.SourceType}.${U.UserField}`},qa=()=>{const U=oe.value.find(y=>y.uuid===Pe.value);return U?!!U.layout.Items.find(y=>y.SourceType==Rt.LAYOUT_ITEM_SOURCE_META&&y.MetaField==pe.META_DATA_SOURCE_REGISTRATION_TOOLS_DROP):!1},Ea=U=>{const y=[pe.META_DATA_SOURCE_ACCOMMODATION_FORM,pe.META_DATA_SOURCE_BADGE_FORM,pe.META_DATA_SOURCE_DEALER_FORM,pe.META_DATA_SOURCE_REGISTRATION_FORM,pe.META_DATA_SOURCE_REGISTRATION_REFERENCE,pe.META_DATA_SOURCE_SUBMISSION_DATE,pe.META_DATA_SOURCE_SUBMISSION_STATUS],I=[Ve.USER_DATA_SOURCE_DISPLAY_NAME,Ve.USER_DATA_SOURCE_EMAIL,Ve.USER_DATA_SOURCE_HANDLE,Ve.USER_DATA_SOURCE_DATE_OF_BIRTH,Ve.USER_DATA_SOURCE_FIRST_NAME,Ve.USER_DATA_SOURCE_LAST_NAME];return y.includes(U.MetaField)||I.includes(U.UserField)},Me=U=>{Le.value=U,_t.value=!0},Ft=U=>{Le.value=U,Qt.value=!0},ve=U=>{Le.value=U,Ga.value=!0};qe(_t,U=>{U||(Le.value=void 0)}),qe(Qt,U=>{U||(Le.value=void 0)});const da=async(U="")=>{_a.value=await E.getRegistrationGroup(U)},at=({registration:U,form:y})=>{const I={FormUUID:y.FormUUID,Limit:1,RegistrationUUID:U.RegistrationUUID};switch(y.Type){case Ie.FORM_TYPE_ACCOMMODATION:I.Accommodation=!0;break;case Ie.FORM_TYPE_ADDITIONAL:I.Additional=!0;break;case Ie.FORM_TYPE_ADMIN:I.AdminForm=!0;break;case Ie.FORM_TYPE_BADGE:I.Badge=!0;break;case Ie.FORM_TYPE_DEALER:I.Dealer=!0;break;case Ie.FORM_TYPE_REGISTRATION:I.Registration=!0;break}E.searchConventionRegistrations(U.ConventionUUID,I).then(L=>{if(L&&L.Total>0){if(Le.value=L.Registrations[0],!Le.value)return;da(U.RegistrationUUID).then(()=>{var z,le;Le.value&&((z=Le.value)!=null&&z.Submissions)&&(Gt.value=(le=Le.value)==null?void 0:le.Submissions.find(Xe=>Xe.FormUUID===y.FormUUID)),Gt.value||(Gt.value=nt(y,U)),Xt.value=y,Pt.value=!0})}})},nt=(U,y)=>({ID:0,SubmissionUUID:Ot(),FormID:U.ID,FormUUID:U.FormUUID,Form:U,UserID:y.UserID,UserUUID:y.UserUUID,RegistrationID:y.ID,RegistrationUUID:y.RegistrationUUID,Registration:y,Data:[],Status:Ui.SUBMISSION_STATUS_NULL}),za=U=>{wt(),ft.value=U,gt.value=!1;const y=oe.value.find(I=>I.uuid===Pe.value);y&&y.challenge?it.value=!0:he()},Ja=U=>{E.switchUser(U.UserUUID).then(y=>{y&&Ri(y.tokens,y.user,d,!1)}).catch(y=>{console.error(y)})},ca=U=>{Wi(U)?(wt(),ot.value=U,mt.value=!1,he()):isNaN(parseInt(U))||(wt(),ke.value=U,mt.value=!1,he())},wt=()=>{ft.value="",ot.value="",ke.value="",Oe.value.Value="",tt.value="",Mt.value.Value="",Ut.value.Value="",He.value.Value=""},wa=()=>{Ge.value=me.value};return C.on("registration.group.leave",U=>{E.leaveRegistrationGroup(U).then(y=>{y&&da(U).then(()=>{C.emit("registration.group.left",y)})})}),C.on("registration.group.remove.member",U=>{E.leaveRegistrationGroup(U).then(y=>{y&&da(U).then(()=>{C.emit("registration.group.left",y)})})}),C.on("checkin-saved",()=>{wt()}),(U,y)=>T.value?(A(),N(Zn,{key:0},{default:c(()=>[s(er,{color:"blue-darken-4"},{default:c(()=>[s(_r,{modelValue:Pe.value,"onUpdate:modelValue":y[0]||(y[0]=I=>Pe.value=I),"show-arrows":""},{default:c(()=>[(A(!0),W(de,null,je(oe.value,I=>(A(),N(Dr,{key:I.uuid,value:I.uuid},{default:c(()=>[Z(ie(I.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),s(na),s(au),s(ce,{icon:"mdi:mdi-cog-outline",onClick:y[1]||(y[1]=I=>ye.value=!0)})]),_:1}),s(Ar,{modelValue:Pe.value,"onUpdate:modelValue":y[32]||(y[32]=I=>Pe.value=I),disabled:!0,touch:!1},{default:c(()=>[(A(!0),W(de,null,je(oe.value,I=>(A(),N(Ht,{key:I.uuid,value:I.uuid},{default:c(()=>[I.uuid===Pe.value?(A(),N(Wt,{key:0,class:"pa-2"},{default:c(()=>[s(Oi,{modelValue:Ge.value,"onUpdate:modelValue":y[25]||(y[25]=L=>Ge.value=L),expanded:H.value,"onUpdate:expanded":y[26]||(y[26]=L=>H.value=L),page:be.value,"onUpdate:page":y[27]||(y[27]=L=>be.value=L),"items-per-page":P.value,"onUpdate:itemsPerPage":y[28]||(y[28]=L=>P.value=L),"sort-by":zt.value,"onUpdate:sortBy":y[29]||(y[29]=L=>zt.value=L),headers:I.headers,"items-length":G.value,items:I.items,"item-value":"key",loading:f.value,search:ht.value,"onUpdate:options":At,"show-expand":qa(),"show-select":""},xa({top:c(()=>[s(Rr,{class:"mb-3"},{default:c(()=>[s(vn,null,{default:c(()=>[s(pn,{color:"secondary",class:"font-weight-bold pb-0 pt-0"},{default:c(()=>{var L;return[s(Y,{class:"py-0 pl-0 pr-2 text-left flex-grow-0 flex-shrink-1 text-no-wrap"},{default:c(()=>[y[45]||(y[45]=Z(" Search Criteria ")),s(Sn,{class:"pl-5",icon:"mdi:mdi-credit-card-search-outline"})]),_:1}),s(Y,{class:"d-none d-sm-block py-0 px-2 flex-grow-1 flex-sm-grow-0",sm:"3",md:"2"},{default:c(()=>[s(vr,{modelValue:ke.value,"onUpdate:modelValue":y[2]||(y[2]=z=>ke.value=z),label:"Badge No.",clearable:!0,"hide-details":"",variant:"plain",onClick:y[3]||(y[3]=dt(()=>{},["stop"])),"onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{class:"d-none d-md-block py-0 px-2",md:"3"},{default:c(()=>[s(Ne,{modelValue:Oe.value.Value,"onUpdate:modelValue":y[4]||(y[4]=z=>Oe.value.Value=z),label:"Furry Name",clearable:!0,"hide-details":"",variant:"plain",onClick:y[5]||(y[5]=dt(()=>{},["stop"])),"onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{class:"d-none d-md-block py-0 px-2",md:"3"},{default:c(()=>[s(Ne,{modelValue:He.value.Value,"onUpdate:modelValue":y[6]||(y[6]=z=>He.value.Value=z),type:"date",label:"Date of Birth",clearable:!0,"hide-details":"",variant:"plain","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(na,{class:"d-none d-sm-block"}),s(ce,{icon:"mdi:mdi-eraser",variant:"text",title:"Clear Primary Search Values",onClick:y[7]||(y[7]=dt(z=>{wt(),F(he)()},["stop"]))}),s(ce,{icon:"mdi:mdi-nfc",variant:"text",title:"Scan NFC Badge (not iPhone)",onClick:y[8]||(y[8]=dt(z=>gt.value=!0,["stop"]))}),s(ce,{icon:"mdi:mdi-qrcode-scan",variant:"text",title:"Scan Code",onClick:y[9]||(y[9]=dt(z=>mt.value=!0,["stop"]))}),(L=oe.value.find(z=>z.uuid===Pe.value))!=null&&L.challenge?(A(),N(ce,{key:0,icon:"mdi:mdi-magnify",variant:"text",title:"Search",onClick:y[10]||(y[10]=dt(z=>{Je.value="",it.value=!0},["stop"]))})):ae("",!0)]}),_:1}),s(yn,{class:"pt-2"},{default:c(()=>{var L;return[s(ge,null,{default:c(()=>[s(Y,{cols:"12",sm:"6",md:"3",lg:"2",xl:"1"},{default:c(()=>[s(vr,{modelValue:ke.value,"onUpdate:modelValue":y[11]||(y[11]=z=>ke.value=z),label:"Badge No.",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{cols:"12",sm:"6",md:"4",lg:"5",xl:"2"},{default:c(()=>[s(Ne,{modelValue:Oe.value.Value,"onUpdate:modelValue":y[12]||(y[12]=z=>Oe.value.Value=z),label:"Furry Name",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{cols:"12",sm:"12",md:"5",lg:"5",xl:"3"},{default:c(()=>[s(Ne,{modelValue:tt.value,"onUpdate:modelValue":y[13]||(y[13]=z=>tt.value=z),label:"E-mail",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{cols:"12",sm:"6",md:"4",lg:"4",xl:"2"},{default:c(()=>[s(Ne,{modelValue:Mt.value.Value,"onUpdate:modelValue":y[14]||(y[14]=z=>Mt.value.Value=z),label:"Legal Forename",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{cols:"12",sm:"6",md:"4",lg:"4",xl:"2"},{default:c(()=>[s(Ne,{modelValue:Ut.value.Value,"onUpdate:modelValue":y[15]||(y[15]=z=>Ut.value.Value=z),label:"Legal Surname",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{cols:"12",sm:"12",md:"4",lg:"4",xl:"2"},{default:c(()=>[s(Ne,{modelValue:He.value.Value,"onUpdate:modelValue":y[16]||(y[16]=z=>He.value.Value=z),type:"date",label:"Date of Birth",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"},{default:c(()=>[s(Te,{modelValue:Vt.value,"onUpdate:modelValue":y[17]||(y[17]=z=>Vt.value=z),label:"Permission Groups",clearable:!0,"hide-details":"",variant:"outlined",items:q.value,"item-value":"GroupUUID","item-title":"Name"},null,8,["modelValue","items"])]),_:1}),s(Y,{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"},{default:c(()=>[s(Te,{modelValue:Tt.value,"onUpdate:modelValue":y[18]||(y[18]=z=>Tt.value=z),label:"Tags",clearable:!0,"hide-details":"",variant:"outlined",items:D.value,"item-value":"TagUUID","item-title":"Title"},null,8,["modelValue","items"])]),_:1})]),_:1}),(L=oe.value.find(z=>z.uuid===Pe.value))!=null&&L.challenge?(A(),N(ge,{key:0},{default:c(()=>[s(Y,{class:"text-right"},{default:c(()=>[s(ce,{"prepend-icon":"mdi:mdi-magnify",title:"Search",color:"success",onClick:y[19]||(y[19]=dt(z=>{Je.value="",it.value=!0},["stop"]))},{default:c(()=>y[46]||(y[46]=[Z(" Run Search ")])),_:1})]),_:1})]),_:1})):ae("",!0)]}),_:1})]),_:1})]),_:1})]),"expanded-row":c(({columns:L,internalItem:z})=>[ue("tr",null,[ue("td",{colspan:L.length},[s(nr,{modelValue:_t.value,"onUpdate:modelValue":y[21]||(y[21]=le=>_t.value=le),registration:z.raw.registration,"onUpdate:registration":le=>z.raw.registration=le,accommodations:Jt.value,convention:T.value,extras:$t.value,forms:x.value,interests:bt.value,tickets:St.value,title:`Registration Controls (#${z.raw.registration.Reference} ${z.raw.registration.User.DisplayName})`,"use-dialog":!1,venues:Kt.value,style:{"max-width":"calc(100vw - 48px)"},class:"ml-auto mr-0"},null,8,["modelValue","registration","onUpdate:registration","accommodations","convention","extras","forms","interests","tickets","title","venues"])],8,Td)])]),"item.data-table-expand":c(({internalItem:L})=>[H.value.findIndex(z=>z===L.key)>=0?(A(),N(ce,{key:0,"append-icon":"mdi:mdi-chevron-up",size:"xs",variant:"flat",onClick:z=>H.value.splice(H.value.findIndex(le=>le===L.key),1)},{default:c(()=>[L.raw.registration.Notes&&L.raw.registration.Notes.length>0?(A(),W(de,{key:0},[Z(ie(L.raw.registration.Notes.length),1)],64)):ae("",!0)]),_:2},1032,["onClick"])):(A(),N(ce,{key:1,"append-icon":"mdi:mdi-chevron-down",size:"xs",variant:"flat",onClick:z=>H.value.push(L.key)},{default:c(()=>[L.raw.registration.Notes&&L.raw.registration.Notes.length>0?(A(),W(de,{key:0},[Z(ie(L.raw.registration.Notes.length),1)],64)):ae("",!0)]),_:2},1032,["onClick"]))]),bottom:c(()=>[s(ru,{"current-page":be.value,"onUpdate:currentPage":y[22]||(y[22]=L=>be.value=L),"items-per-page":P.value,"onUpdate:itemsPerPage":y[23]||(y[23]=L=>P.value=L),"item-total":G.value},null,8,["current-page","items-per-page","item-total"]),ue("div",null,[s(ce,{variant:"text",color:"primary",onClick:wa},{default:c(()=>y[47]||(y[47]=[Z(" (Select all on every page) ")])),_:1}),s(ce,{variant:"text",color:"primary",onClick:y[24]||(y[24]=L=>Ge.value=[])},{default:c(()=>y[48]||(y[48]=[Z(" (Unselect all on every page) ")])),_:1})])]),_:2},[je(I.headers,L=>({name:`item.${L.key}`,fn:c(({internalItem:z,index:le})=>[s(ss,{header:L,item:z,accommodations:Jt.value,convention:T.value,extras:$t.value,forms:x.value,interests:bt.value,tickets:St.value,user:F(Ha),venues:Kt.value,modelValue:I.items[le],"onUpdate:modelValue":Xe=>I.items[le]=Xe,onOpenActions:Me,onOpenPayments:Ft,onOpenTags:ve,onReload:y[20]||(y[20]=Xe=>At({page:be.value,itemsPerPage:P.value,sortBy:w.value})),onSwitchUser:Ja,onShowForm:at},null,8,["header","item","accommodations","convention","extras","forms","interests","tickets","user","venues","modelValue","onUpdate:modelValue"])])}))]),1032,["modelValue","expanded","page","items-per-page","sort-by","headers","items-length","items","loading","search","show-expand"]),s(Bi,{modelValue:Ge.value,"onUpdate:modelValue":y[30]||(y[30]=L=>Ge.value=L),details:I.items,"onUpdate:details":L=>I.items=L,"model-type":"registration",convention:T.value,"onUpdate:convention":y[31]||(y[31]=L=>T.value=L),custom:""},null,8,["modelValue","details","onUpdate:details","convention"])]),_:2},1024)):ae("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),mt.value?(A(),N(Ta,{key:0,modelValue:mt.value,"onUpdate:modelValue":y[33]||(y[33]=I=>mt.value=I),title:"Scan Code",width:"auto","card-class":"px-2 px-sm-6"},{default:c(()=>[s(hd,{onScan:ca})]),_:1},8,["modelValue"])):ae("",!0),gt.value?(A(),N(Ta,{key:1,modelValue:gt.value,"onUpdate:modelValue":y[34]||(y[34]=I=>gt.value=I),title:"Scan Code",width:"auto","card-class":"px-2 px-sm-6"},{default:c(()=>[s(pi,{onScan:za})]),_:1},8,["modelValue"])):ae("",!0),ye.value?(A(),N(eu,{key:2,title:"Edit Layouts",modelValue:ye.value,"onUpdate:modelValue":y[35]||(y[35]=I=>ye.value=I),convention:T.value,onSave:Et},null,8,["modelValue","convention"])):ae("",!0),Le.value?(A(),W(de,{key:3},[_t.value?(A(),N(nr,{key:0,modelValue:_t.value,"onUpdate:modelValue":y[36]||(y[36]=I=>_t.value=I),registration:Le.value,"onUpdate:registration":y[37]||(y[37]=I=>Le.value=I),accommodations:Jt.value,convention:T.value,extras:$t.value,forms:x.value,interests:bt.value,tickets:St.value,title:`Registration Controls (#${Le.value.Reference} ${Le.value.User.DisplayName})`,"use-dialog":!0,venues:Kt.value},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","title","venues"])):ae("",!0)],64)):ae("",!0),Pt.value&&Gt.value&&Xt.value?(A(),N(ja,{key:4,modelValue:Pt.value,"onUpdate:modelValue":y[41]||(y[41]=I=>Pt.value=I),scrollable:!0,fullscreen:!0},{default:c(()=>[s(Wt,{class:"bg-red-darken-4"},{default:c(()=>[s(er,{color:"error"},{default:c(()=>[s(Gi,null,{default:c(()=>y[49]||(y[49]=[Z("Submission Editor - Admin Mode")])),_:1}),s(na),s(Si,null,{default:c(()=>[s(ce,{icon:"mdi:mdi-window-close",onClick:y[38]||(y[38]=I=>Pt.value=!1)})]),_:1})]),_:1}),s(sa,{class:"pa-0"},{default:c(()=>[s(yi,{modelValue:Xt.value,"onUpdate:modelValue":y[39]||(y[39]=I=>Xt.value=I),admin:!0,convention:T.value,data:Gt.value,editable:!0,"registration-group":_a.value,onClose:y[40]||(y[40]=I=>{Pt.value=!1,At({page:be.value,itemsPerPage:P.value,sortBy:w.value})})},null,8,["modelValue","convention","data","registration-group"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):ae("",!0),s(ja,{modelValue:it.value,"onUpdate:modelValue":y[44]||(y[44]=I=>it.value=I)},{default:c(()=>[s(Wt,{class:"rounded-xl"},{default:c(()=>[s(ba,null,{default:c(()=>[s(Sa,{class:"px-0"},{default:c(()=>y[50]||(y[50]=[Z("Search Challenge")])),_:1}),s(Cr,null,{default:c(()=>y[51]||(y[51]=[Z("Please provide the reason for this search. If it relates to an open case, enter the relevant identifiers.")])),_:1})]),_:1}),s(sa,{color:"white"},{default:c(()=>[s(Or,{modelValue:Je.value,"onUpdate:modelValue":y[42]||(y[42]=I=>Je.value=I),label:"Reason"},null,8,["modelValue"])]),_:1}),s(_n,null,{default:c(()=>[s(ce,{onClick:y[43]||(y[43]=I=>{Je.value="",it.value=!1})},{default:c(()=>y[52]||(y[52]=[Z("Cancel")])),_:1}),s(na),s(ce,{onClick:F(Lt),disabled:Je.value.length<3},{default:c(()=>y[53]||(y[53]=[Z("Search")])),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):(A(),N(Zn,{key:1},{default:c(()=>y[54]||(y[54]=[Z(" Convention Not Found ")])),_:1}))}});export{Vc as default};
