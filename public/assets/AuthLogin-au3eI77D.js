import{i as f,r as h,D as g,G as r,y as d,az as A,H as D,R as E,O as L,Q as R,n as _}from"./index-BQtVy5Zl.js";import{G as k}from"./userData-BOpE00fL.js";import{S as v}from"./setupLogin-D3jysZz4.js";import{E as B}from"./emailFormVariant-DbFKH7n9.js";const N=f({__name:"AuthLogin",props:{variant:{default:()=>B.COMBINED}},setup(n){const u=E(),a=h(u.params.method),i=L(),t=new URL(location.href),s=R(),c=t.searchParams.get("code")||"",m=t.searchParams.get("token")||"",l=t.searchParams.get("state")||"";return i.oAuthLogin(a.value,c,m,l).then(({created:o,tokens:e,user:p})=>{v(e,p,s,o)}),k()&&n.variant!=="ADD_CREDENTIAL"&&s.push("/"),(o,e)=>(_(),g(D,null,[r("p",null,d(A(a.value)),1),e[0]||(e[0]=r("p",null,"Authorising...",-1))],64))}});export{N as default};
