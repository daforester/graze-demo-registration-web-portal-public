import{c as Z,b as $,d as ee,e as ae,u as te,p as oe,f as le,g as re,h as se,i as ue,j as de,k as ne,l as w,m as B,n as I,o as ie,q as ce,r as me}from"./VDataTable-C_5TnxS_.js";import{d as ve,p as ge,a9 as be,c as p,t as r,aa as pe,h as o,m as k,H,ab as fe}from"./index-DJ0RbLYI.js";import{V as R}from"./VTable-Csq1wBkz.js";import{b as Pe}from"./VList-Y6thXV28.js";import{u as ye}from"./VGrid-BFfj_YI8.js";const he=ge({itemsLength:{type:[Number,String],required:!0},...me(),...ce(),...ie()},"VDataTableServer"),we=ve()({name:"VDataTableServer",props:he(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,c){let{attrs:d,slots:a}=c;const{groupBy:l}=Z(e),{sortBy:s,multiSort:m,mustSort:v}=$(e),{page:n,itemsPerPage:g}=ee(e),{disableSort:F}=be(e),G=p(()=>parseInt(e.itemsLength,10)),{columns:f,headers:E}=ae(e,{groupBy:l,showSelect:r(()=>e.showSelect),showExpand:r(()=>e.showExpand)}),{items:i}=te(e,f),{toggleSort:P}=ne({sortBy:s,multiSort:m,mustSort:v,page:n}),{opened:N,isGroupOpen:_,toggleGroup:C,extractRows:L}=oe({groupBy:l,sortBy:s,disableSort:F}),{pageCount:q,setItemsPerPage:O}=le({page:n,itemsPerPage:g,itemsLength:G}),{flatItems:y}=re(i,l,N),{isSelected:j,select:A,selectAll:W,toggleSelect:z,someSelected:J,allSelected:K}=se(e,{allItems:i,currentPage:i}),{isExpanded:M,toggleExpand:Q}=ue(e),h=p(()=>L(i.value));de({page:n,itemsPerPage:g,sortBy:s,groupBy:l,search:r(()=>e.search)}),fe("v-data-table",{toggleSort:P,sortBy:s}),pe({VDataTableRows:{hideNoData:r(()=>e.hideNoData),noDataText:r(()=>e.noDataText),loading:r(()=>e.loading),loadingText:r(()=>e.loadingText)}});const t=p(()=>({page:n.value,itemsPerPage:g.value,sortBy:s.value,pageCount:q.value,toggleSort:P,setItemsPerPage:O,someSelected:J.value,allSelected:K.value,isSelected:j,select:A,selectAll:W,toggleSelect:z,isExpanded:M,toggleExpand:Q,isGroupOpen:_,toggleGroup:C,items:h.value.map(b=>b.raw),internalItems:h.value,groupedItems:y.value,columns:f.value,headers:E.value}));ye(()=>{const b=w.filterProps(e),U=B.filterProps(e),X=I.filterProps(e),Y=R.filterProps(e);return o(R,k({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},Y,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var u;return(u=a.top)==null?void 0:u.call(a,t.value)},default:()=>{var u,D,T,S,x,V;return a.default?a.default(t.value):o(H,null,[(u=a.colgroup)==null?void 0:u.call(a,t.value),!e.hideDefaultHeader&&o("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[o(B,U,a)]),(D=a.thead)==null?void 0:D.call(a,t.value),!e.hideDefaultBody&&o("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[(T=a["body.prepend"])==null?void 0:T.call(a,t.value),a.body?a.body(t.value):o(I,k(d,X,{items:y.value}),a),(S=a["body.append"])==null?void 0:S.call(a,t.value)]),(x=a.tbody)==null?void 0:x.call(a,t.value),(V=a.tfoot)==null?void 0:V.call(a,t.value)])},bottom:()=>a.bottom?a.bottom(t.value):!e.hideDefaultFooter&&o(H,null,[o(Pe,null,null),o(w,b,{prepend:a["footer.prepend"]})])})})}}),Be=(e,c=500,d=!1)=>{let a;return(...l)=>{const m=function(){a=void 0,d||e.apply(void 0,l)},v=d&&!a;clearTimeout(a),a=setTimeout(m,c),v&&e.apply(void 0,l)}};export{we as V,Be as u};
