import{i as je,M as $e,N as ze,r as R,E as Fa,D as J,n as A,l as N,A as ne,q as d,H as fe,Q as Ye,h as s,v as Z,x as ie,O as Yt,G as ue,F,a1 as Yl,m as gn,k as Na,w as qe,X as Ua,c as ra,P as xa,a2 as Hl,a3 as Gl,T as Wl,a4 as ql,b as pr,L as yr,y as dt,o as gr,a5 as zl,a6 as Jl,a7 as Kl,a8 as Ql,Y as Xl,$ as Zl,R as ei,C as Jn,U as et}from"./index-BpJ7dbUk.js";import{_ as ti,D as ai,a as ni,b as ri,c as oi,d as li,e as ii,f as si,g as ui,h as di,i as ci,L as hn,M as Un,U as Tn,j as Rt,A as ut,u as un,k as mi,P as fi,l as Kn,m as pe,n as vi,o as Ve,p as pi}from"./runner-CgrWmj4O.js";import{a as hr,b as yi}from"./FormRenderer.vue_vue_type_style_index_0_lang-DfGNUtCd.js";import{F as we,a as gi}from"./form-Cqw16b_M.js";import{b as hi,c as Ur,d as Qn,S as Ui}from"./submission-DAi9v6uc.js";import{C as Ti}from"./canManageGlobalUsers-CgPK5PVJ.js";import{_ as Ta}from"./ModelDialog.vue_vue_type_script_setup_true_lang-hlBNEbZT.js";import{V as bn,a as ia,d as Tr,c as bi}from"./VList-C8CMXUXU.js";import{V as de,d as Sn}from"./VGrid-tDDB7E2Q.js";import{V as br,b as Si}from"./forwardRefs-C9HeOJ9B.js";import{s as _i}from"./sortSubmissions-BLiX_qgz.js";import{u as Di}from"./useStoreAPI-DRJkRfgT.js";import{u as Sr}from"./useModel-ENcdjAs9.js";import{a as _r,V as Dr,e as Ar,d as Gt}from"./VTabs-KiKx2YLh.js";import{u as Ai,P as Ei}from"./useDisplayTransactions-DiglOSZJ.js";import{C as Er,G as Cr}from"./canDo-Casce9zr.js";import{G as Ya}from"./userData-CZc3PRbB.js";import{e as Wt,V as ba,a as Sa,c as sa,d as _n,b as Ir}from"./VCard-uFgMAL5M.js";import{V as ge,a as Y}from"./VRow-Cn460e1h.js";import{_ as wr}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as cn,a as Ci,l as mn}from"./SaveButton.vue_vue_type_script_setup_true_lang-DbizR6CA.js";import{V as Te}from"./VSelect-CzUrhV16.js";import{_ as kr,a as fn,u as Ii}from"./useLinkedFields-LLdBDePf.js";import{V as wi,a as ki}from"./VAlert-TjE8G7YE.js";import{V as aa}from"./VCheckbox-D0vViFp1.js";import{V as ct}from"./VContainer-9WAozZGp.js";import{S as Ri}from"./setupLogin-Dcyd3p0n.js";import{u as Xn,V as Oi}from"./debounce-uu71jDxR.js";import{b as Mi,u as Vi}from"./useConventionSlug-6FC0IMQz.js";import{_ as $i}from"./SelectGroups.vue_vue_type_script_setup_true_lang-Dawa0Kxr.js";import{_ as Pi}from"./DeleteDialog.vue_vue_type_script_setup_true_lang-eZnW8lBK.js";import{v as Ot}from"./v4-CtRu48qb.js";import{u as Li}from"./useAdvancedMode-B8DD41Bf.js";import{V as Ne}from"./VTextField-D3G1Ugnl.js";import{V as Rr,a as vn,b as pn,c as yn}from"./VExpansionPanels-BSnY88rB.js";import{V as ja}from"./VDialog-D1nK3AI_.js";import{c as Fi}from"./copyToClipboard-BtcEYe2-.js";import{u as Ni}from"./useAvatar-C0DsyetB.js";import{i as xi}from"./index.esm-BTm5LQXI.js";import{V as na}from"./VSpacer-B8RFaRV2.js";import{a as ji}from"./VDataTable-DpPj8P6O.js";import{_ as Bi}from"./EmailControl.vue_vue_type_script_setup_true_lang-DT3ZDrNm.js";import{V as Or}from"./VTextarea-B5w2hyw0.js";import{V as Yi}from"./VFileInput-C0kEf-n7.js";import{V as Zn}from"./VSheet-Diu4IGda.js";import{V as er,a as Hi}from"./VToolbar-BXWf7tTu.js";import"./date-DgbCHIwC.js";import"./canEditRegistrations-D-K8gspt.js";import"./ticket-DqurB3v3.js";import"./VAutocomplete-SKGVfFLu.js";import"./filter-BvwnAsWX.js";import"./form-CYisX1Ky.js";import"./VCheckboxBtn-D5DrnD-z.js";import"./VChip-E273QADF.js";import"./VForm-Betulg6r.js";import"./VNavigationDrawer-Dm3IOWM5.js";import"./scopeId-d2776hvl.js";import"./index-zHJ-1AxG.js";import"./VTooltip-2xid1FMk.js";import"./VOverlay-Dro8Bah-.js";import"./createSimpleFunctional-CdEwYX_5.js";import"./VToolbarItems-DHhukGNk.js";import"./useConventionConfig-aL_mboHV.js";import"./VTable-KWGhzbry.js";import"./EmailEditor.vue_vue_type_script_setup_true_lang-K6_dl-dG.js";import"./permission-Ba-8wP-4.js";import"./useConventionForms-COWfwB0B.js";const Gi=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Wi(a){return typeof a=="string"&&Gi.test(a)}const qi=()=>({ID:0,UserUUID:"",DisplayName:"",Handle:"",Credentials:[],Additional:{FirstName:"",LastName:"",DOB:"",Email:""},Data:"",Groups:[],Tags:[]}),zi=je({__name:"DataTableItemPanel",props:$e({accommodations:{},cardClass:{},convention:{},extras:{},forms:{},interests:{},tickets:{},venues:{},layouts:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:$e(["openActions","showForm"],["update:modelValue"]),setup(a,{emit:o}){const n=Fa.getInstance(),i=o,m=ze(a,"modelValue"),v=R(),g=Yt(),u=R(),c=R(!1),f=E=>{const I={AdminLayoutUUID:E.AdminLayoutUUID,Limit:1,RegistrationUUID:m.value.RegistrationUUID};g.searchConventionRegistrations(m.value.ConventionUUID,I).then(V=>{V&&V.Total>0&&(v.value=V.Registrations[0],u.value=E,c.value=!0)})},b=E=>{i("openActions",E)},T=(E,I,V)=>{i("showForm",E,I,V)};return n.on("checkin-saved",()=>{c.value=!1}),(E,I)=>(A(),J("div",null,[E.layouts?(A(),N(bn,{key:0},{default:d(()=>[(A(!0),J(fe,null,Ye(E.layouts,V=>(A(),N(ia,{key:V.AdminLayoutUUID,class:"d-block pa-0 ma-0"},{default:d(()=>[s(Tr,{style:{"text-overflow":"inherit"},class:"overflow-visible text-wrap"},{default:d(()=>[s(de,{"prepend-icon":"mdi:mdi-page-layout-body",variant:"flat",onClick:G=>f(V)},{default:d(()=>[Z(ie(V.Name),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):ne("",!0),c.value&&u.value&&v.value?(A(),N(Ta,{key:1,modelValue:c.value,"onUpdate:modelValue":I[2]||(I[2]=V=>c.value=V),"hide-extension":!0,fullscreen:!0,title:`#${v.value.Reference} ${v.value.User.DisplayName} - ${u.value.Name} `,scrollable:!0,"card-class":"pa-0"},{default:d(()=>[s(ti,{accommodations:E.accommodations,convention:E.convention,extras:E.extras,forms:E.forms,interests:E.interests,tickets:E.tickets,venues:E.venues,layout:u.value,"onUpdate:layout":I[0]||(I[0]=V=>u.value=V),modelValue:v.value,"onUpdate:modelValue":I[1]||(I[1]=V=>v.value=V),onOpenActions:b,onShowForm:T},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","layout","modelValue"])]),_:1},8,["modelValue","title"])):ne("",!0)]))}}),Ji={key:0},Ki={class:"text-grey-lighten-1"},Qi={key:0,class:"mb-2"},Xi={key:1,class:"mb-2"},Zi={key:0,class:"text-blue text-center"},es={key:1,class:"text-red text-center"},ts={key:2,class:"text-orange text-center"},as={key:3,class:"text-orange text-center"},ns={key:4,class:"text-orange text-center"},rs={key:5,class:"text-orange text-center"},os={key:6,class:"text-green text-center"},ls={key:0},is={key:0},ss=je({__name:"RegListRow",props:$e({header:{},accommodations:{},convention:{},extras:{},forms:{},interests:{},item:{},tickets:{},user:{},venues:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:$e(["openActions","openPayments","openTags","reload","showForm","switchUser"],["update:modelValue"]),setup(a,{emit:o}){const n=o,i=ze(a,"modelValue"),m=(u,c)=>{n("showForm",{registration:u,form:c})},v=u=>{n("openActions",u)},g=u=>{n("switchUser",u)};return(u,c)=>u.header.type==="ACCOMMODATION"&&u.accommodations.length>0&&u.item.raw[u.header.key]?(A(),N(ai,{key:0,value:u.item.raw[u.header.key].Data,accommodations:u.accommodations,convention:u.convention,forms:u.forms,tickets:u.tickets,venues:u.venues,registration:u.item.raw[u.header.key].Registration},null,8,["value","accommodations","convention","forms","tickets","venues","registration"])):u.header.type==="EXTRAS"&&u.extras.length>0?(A(),N(ni,{key:1,value:u.item.raw[u.header.key],extras:u.extras},null,8,["value","extras"])):u.header.type==="INTERESTS"&&u.interests.length>0?(A(),N(ri,{key:2,value:u.item.raw[u.header.key],interests:u.interests},null,8,["value","interests"])):u.header.type==="TICKET"&&u.tickets.length>0?(A(),N(oi,{key:3,value:u.item.raw[u.header.key],tickets:u.tickets},null,8,["value","tickets"])):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_CHECKIN_STATUS"?(A(),N(li,{key:4,convention:u.convention,"show-controls":!1,modelValue:u.item.raw.registration,"onUpdate:modelValue":c[0]||(c[0]=f=>u.item.raw.registration=f)},null,8,["convention","modelValue"])):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_SUBMISSION_STATUS"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ACCOMMODATION_FORM"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ADDITIONAL_FORM"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ADMIN_FORM"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DEALER_FORM"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_BADGE_FORM"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_FORM"?(A(),J(fe,{key:5},[["LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_SUBMISSION_STATUS","LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ADMIN_FORM"].includes(u.header.type)?(A(),J("ul",Ji,[(A(!0),J(fe,null,Ye(u.forms.filter(f=>f.Type===F(we).FORM_TYPE_ADMIN&&u.item.raw[u.header.key].findIndex(b=>b.Form.ID===f.ID)<0),f=>(A(),J("li",{key:f.Heading},[ue("strong",Ki,ie(f.Heading),1),s(de,{class:"text-grey-lighten-1",icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:b=>m(u.item.raw.registration,f)},null,8,["onClick"])]))),128))])):ne("",!0),ue("ul",null,[(A(!0),J(fe,null,Ye(u.item.raw[u.header.key],f=>(A(),J("li",{key:f.Heading},[ue("strong",null,[Z(ie(f.Heading),1),f.Form.Type!==F(we).FORM_TYPE_ADMIN?(A(),J(fe,{key:0},[Z(": ")],64)):ne("",!0)]),f.Form.Type!==F(we).FORM_TYPE_ADMIN?(A(),J("span",{key:0,class:Yl(F(hi)(f.Submission.Status))},ie(F(Ur)(f.Submission.Status)),3)):ne("",!0),s(de,{icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:b=>m(f.Registration,f.Form)},null,8,["onClick"])]))),128))])],64)):u.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_AVATAR"?(A(),N(br,{key:6,class:"rounded-circle",src:u.item.raw[u.header.key],height:"32",width:"32"},null,8,["src"])):u.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_CONTACTS"?(A(),J(fe,{key:7},[u.item.raw[u.header.key].email?(A(),J("p",Qi,[c[4]||(c[4]=ue("strong",null,"Email",-1)),c[5]||(c[5]=ue("br",null,null,-1)),Z(ie(u.item.raw[u.header.key].email),1)])):ne("",!0),u.item.raw[u.header.key].telegram?(A(),J("p",Xi,[c[6]||(c[6]=ue("strong",null,"Telegram",-1)),c[7]||(c[7]=ue("br",null,null,-1)),Z(ie(u.item.raw[u.header.key].telegram),1)])):ne("",!0)],64)):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_PAYMENT_STATUS"?(A(),J(fe,{key:8},[u.item.raw[u.header.key]=="NOT_REQUIRED"?(A(),J("div",Zi,"No Payment Requested")):u.item.raw[u.header.key]=="MISSING_REQUIRED"?(A(),J("div",es,"Partner Payment Not Requested")):u.item.raw[u.header.key]=="AWAITING_PARTNER"?(A(),J("div",ts,"Awaiting Partner Payment")):u.item.raw[u.header.key]=="ALL_REQUIRED"?(A(),J("div",as,"Awaiting Payments")):u.item.raw[u.header.key]=="REQUIRED"?(A(),J("div",ns,"Awaiting Payment")):u.item.raw[u.header.key]=="ADDITIONAL_REQUIRED"?(A(),J("div",rs,"Awaiting Additional Payments")):(A(),J("div",os,"Completed"))],64)):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_ACTIONS"?(A(),J(fe,{key:9},[s(de,{icon:"mdi:mdi-briefcase",variant:"flat",onClick:c[1]||(c[1]=f=>v(u.item.raw[u.header.key]))}),F(Ti)(u.user)?(A(),N(de,{key:0,icon:"mdi:mdi-account-switch-outline",variant:"flat",onClick:c[2]||(c[2]=f=>g(u.item.raw[u.header.key]))})):ne("",!0)],64)):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_GROUP"?(A(),J(fe,{key:10},[u.item.raw[u.header.key].length===1?(A(),J("em",ls," Not in a group ")):(A(),J(fe,{key:1},[ue("ul",null,[(A(!0),J(fe,null,Ye(u.item.raw[u.header.key],f=>(A(),J("li",{key:f.UUID,class:"ml-0"},[Z(" #"+ie(f.Reference)+" : "+ie(f.Name)+" ",1),f.IsLeader?(A(),J("strong",is,"(Leader)")):ne("",!0)]))),128))]),c[8]||(c[8]=ue("strong",null,"Total:",-1)),Z(" "+ie(u.item.raw[u.header.key].length),1)],64))],64)):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_TAGS"?(A(),N(ii,{key:11,registration:u.item.raw.registration,meta:u.header.meta},null,8,["registration","meta"])):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DATA_LAYOUT"?(A(),J(fe,{key:12},[i.value.registration?(A(),N(zi,{key:0,accommodations:u.accommodations,convention:u.convention,extras:u.extras,forms:u.forms,interests:u.interests,tickets:u.tickets,venues:u.venues,layouts:u.item.raw[u.header.key].Layouts,modelValue:i.value.registration,"onUpdate:modelValue":c[3]||(c[3]=f=>i.value.registration=f),onOpenActions:v,onShowForm:m},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","layouts","modelValue"])):ne("",!0)],64)):(A(),J(fe,{key:13},[Z(ie(u.item.raw[u.header.key]),1)],64))}}),tr=je({__name:"RegistrationActionTabs",props:$e({alignTabs:{},class:{},fixedTabs:{type:Boolean},showArrows:{type:[String,Boolean]},tabs:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=a,n=ze(a,"modelValue");return(i,m)=>(A(),N(_r,gn({modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=v=>n.value=v)},o),{default:d(()=>[(A(!0),J(fe,null,Ye(i.tabs,v=>(A(),N(Dr,{value:v.value,key:v.value},{default:d(()=>[Z(ie(v.label),1)]),_:2},1032,["value"]))),128))]),_:1},16,["modelValue"]))}}),us=(a=void 0,o)=>a===void 0?!1:Er(a,Cr.GROUP_TYPE_CONVENTION,o.ConventionUUID,o).EditPaymentTransactions,ds={class:"mb-4"},cs={class:"v-row"},ms={key:0,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},fs={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},vs={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},ps={class:"v-col v-col-2 align-self-end text-right py-1 text-no-wrap"},ys={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},gs={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},hs={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},Us={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},Ts=je({__name:"PaymentActions",props:$e({forms:{},title:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=R(!1),n=R(),i=R([]),m=R(new Date().getTime()),v=R(!1),g=ze(a,"modelValue"),u=R(Na(g.value));qe(g,()=>{u.value=Na(g.value)});const c=Yt();c.getConvention(g.value.ConventionUUID).then(E=>{E&&(v.value=us(Ya(),E))});const f=()=>{c.generateRegistrationCharges(g.value.RegistrationUUID,!1).then(E=>{E&&(i.value=E.PaymentTransactions,n.value=E.Registration,m.value=new Date().getTime())}).catch(()=>{})};f();const b=()=>{c.generateRegistrationCharges(g.value.RegistrationUUID,!0).then(E=>{E&&(i.value=E.PaymentTransactions,n.value=E.Registration,m.value=new Date().getTime())})},{totalCharges:T}=Ai();return(E,I)=>(A(),N(Wt,null,{default:d(()=>[s(ba,null,{default:d(()=>[s(Sa,null,{default:d(()=>[Z(" Payments (#"+ie(g.value.Reference)+" "+ie(g.value.User.DisplayName)+") ",1)]),_:1})]),_:1}),s(sa,null,{default:d(()=>[n.value?(A(),J(fe,{key:0},[ue("h3",ds,"#"+ie(n.value.Reference)+" "+ie(n.value.User.DisplayName),1),ue("dl",cs,[(A(!0),J(fe,null,Ye(i.value,V=>(A(),J(fe,{key:V.PaymentTransactionUUID},[V.Type===F(Ei).PAYMENT_TRANSACTION_TYPE_CHARGE?(A(),J("dt",ms,[ue("div",fs,ie(V.Description.split(":")[0])+": ",1),ue("div",vs,ie(V.Description.split(":")[1]),1)])):ne("",!0),ue("dd",ps," £"+ie(V.Amount),1)],64))),128)),I[2]||(I[2]=ue("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Total Charges ",-1)),ue("dd",ys," £"+ie(F(T)(i.value)),1),I[3]||(I[3]=ue("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Applied Total ",-1)),ue("dd",gs," £"+ie(n.value.Total),1),I[4]||(I[4]=ue("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Currently Paid ",-1)),ue("dd",hs," £"+ie(n.value.Paid),1),I[5]||(I[5]=ue("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Balance ",-1)),ue("dd",Us," £"+ie(n.value.Total-n.value.Paid),1)]),s(ge,{class:"flex-row-reverse"},{default:d(()=>[s(Y,{class:"text-right"},{default:d(()=>[s(de,{color:"primary",onClick:b},{default:d(()=>I[6]||(I[6]=[Z("Apply Charges")])),_:1})]),_:1}),!o.value&&v.value?(A(),N(Y,{key:0},{default:d(()=>[s(de,{color:"secondary",onClick:I[0]||(I[0]=V=>o.value=!0)},{default:d(()=>I[7]||(I[7]=[Z("Transaction Entry")])),_:1})]),_:1})):ne("",!0)]),_:1})],64)):ne("",!0),s(si,{"can-edit":v.value,registration:g.value,"show-editor":o.value,onCloseEditor:I[1]||(I[1]=V=>o.value=!1),updated:m.value,onChange:f},null,8,["can-edit","registration","show-editor","updated"])]),_:1})]),_:1}))}}),bs=wr(Ts,[["__scopeId","data-v-8af8174d"]]),Ss=je({__name:"RegistrationFormStatus",props:$e({forms:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=Yt(),n=ze(a,"modelValue"),i=(m,v)=>{const g=n.value.Submissions.find(u=>u.SubmissionUUID==v);if(!g){m&&m("Submission not found");return}o.setSubmissionStatus(v,g.Status).then(u=>{u?(n.value.Submissions.forEach((c,f)=>{n.value.Submissions[f].Status=c.Status}),m&&m("Status Saved")):m&&m("Status not saved")}).catch(()=>{m&&m("Status not saved")})};return(m,v)=>(A(),N(Wt,null,{default:d(()=>[s(ba,null,{default:d(()=>[s(Sa,null,{default:d(()=>[Z("Status (#"+ie(n.value.Reference)+" "+ie(n.value.User.DisplayName)+")",1)]),_:1})]),_:1}),s(sa,null,{default:d(()=>[s(bn,null,{default:d(()=>[(A(!0),J(fe,null,Ye(n.value.Submissions,g=>(A(),N(ia,{key:g.SubmissionUUID,class:"pa-0"},{default:d(()=>[s(ge,{class:"py-2 align-center"},{default:d(()=>[s(Y,{cols:"9",sm:"10",md:"10",lg:"9"},{default:d(()=>{var u;return[s(Te,{modelValue:g.Status,"onUpdate:modelValue":c=>g.Status=c,items:F(Qn),"item-text":"title","item-value":"value",variant:"outlined","hide-details":"",label:((u=m.forms.find(c=>c.FormUUID==g.FormUUID))==null?void 0:u.Name)||""},{selection:d(()=>[s(Sn,{class:"mr-4 d-none d-sm-inline"},{default:d(()=>{var c;return[Z(ie((c=F(Qn).find(f=>f.value===g.Status))==null?void 0:c.icon),1)]}),_:2},1024),Z(" "+ie(F(Ur)(g.Status)),1)]),item:d(({item:c,props:{onClick:f}})=>[s(ia,{title:c.title,"prepend-icon":c.raw.icon,onClick:f},null,8,["title","prepend-icon","onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","items","label"])]}),_:2},1024),s(Y,{cols:"3",sm:"2",md:"2",lg:"1"},{default:d(()=>[s(cn,{class:"d-none d-sm-inline-flex",title:"Save","prepend-icon":"mdi:mdi-content-save",color:"warning",onClick:u=>i(u.callback,g.SubmissionUUID)},null,8,["onClick"]),s(cn,{class:"d-sm-none",size:"35",icon:"mdi:mdi-content-save",color:"warning",onClick:u=>i(u.callback,g.SubmissionUUID)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),_s={class:"mb-4"},Ds=je({__name:"RegistrationTags",props:$e({title:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=Yt(),n=ze(a,"modelValue"),i=R(Na(n.value)),m=R(!1),v=R(i.value.Tags);qe(n,()=>{i.value=Na(n.value)});const g=({callback:u})=>{const c=[],f=[];i.value.Tags.forEach(b=>{v.value.find(E=>E.TagUUID===b.TagUUID)||c.push(b.TagUUID)}),v.value.forEach(b=>{i.value.Tags.find(E=>b.TagUUID===E.TagUUID)||f.push(b.TagUUID)}),o.updateRegistrationTags(c,f,i.value.RegistrationUUID).then(b=>{b?u&&(u("Tags Saved"),n.value.Tags=b.Tags):u&&u("Error Saving Tags")}).catch(()=>{u&&u("Error Saving Tags")})};return(u,c)=>(A(),N(Wt,null,{default:d(()=>[s(ba,null,{default:d(()=>[s(Sa,null,{default:d(()=>[Z("Tags (#"+ie(i.value.Reference)+" "+ie(i.value.User.DisplayName)+")",1)]),_:1})]),_:1}),s(sa,null,{default:d(()=>[s(wi,{class:"my-4"},{default:d(()=>[s(ki,null,{default:d(()=>c[2]||(c[2]=[Z("Caution")])),_:1}),c[3]||(c[3]=ue("p",null,"Any tags controlled through registration form fields will be reset when the applicable form is saved. If you don't know what you're doing here, don't touch!",-1))]),_:1}),ue("h3",_s,"#"+ie(i.value.Reference)+" "+ie(i.value.User.DisplayName),1),s(kr,{modelValue:i.value.Tags,"onUpdate:modelValue":c[0]||(c[0]=f=>i.value.Tags=f),convention:i.value.ConventionUUID,"show-key":!0,chips:!0,"show-uuid":m.value},null,8,["modelValue","convention","show-uuid"])]),_:1}),s(_n,{class:"px-4 align-start"},{default:d(()=>[s(aa,{label:"Show UUID",modelValue:m.value,"onUpdate:modelValue":c[1]||(c[1]=f=>m.value=f)},null,8,["modelValue"]),s(cn,{onClick:g,variant:"flat"})]),_:1})]),_:1}))}}),As=wr(Ds,[["__scopeId","data-v-7d39acf0"]]),ar=je({__name:"RegistrationActionWindows",props:$e({accommodations:{},convention:{},extras:{},forms:{},interests:{},registration:{},tickets:{},venues:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:$e(["update:registration"],["update:modelValue"]),setup(a,{emit:o}){const n=a,i=ze(a,"modelValue"),v=Sr(n,o,void 0,void 0,"registration");return(g,u)=>(A(),N(Ar,{modelValue:i.value,"onUpdate:modelValue":u[3]||(u[3]=c=>i.value=c),disabled:!0,touch:!1},{default:d(()=>[s(Gt,{value:"badges"},{default:d(()=>[i.value=="badges"?(A(),N(ct,{key:0,class:"pa-0 mx-0",fluid:!0},{default:d(()=>[s(ui,{convention:g.convention,registration:F(v)},null,8,["convention","registration"])]),_:1})):ne("",!0)]),_:1}),s(Gt,{value:"emails"},{default:d(()=>[i.value=="emails"?(A(),N(ct,{key:0,class:"pa-0 mx-0",fluid:!0},{default:d(()=>[s(di,{registration:F(v)},null,8,["registration"])]),_:1})):ne("",!0)]),_:1}),s(Gt,{value:"notes"},{default:d(()=>[i.value=="notes"?(A(),N(ct,{key:0,class:"pa-0 mx-0",fluid:!0},{default:d(()=>[s(ci,{convention:g.convention,expanded:!1,registration:F(v)},null,8,["convention","registration"])]),_:1})):ne("",!0)]),_:1}),s(Gt,{value:"payments"},{default:d(()=>[i.value=="payments"?(A(),N(ct,{key:0,class:"pa-0 mx-0",fluid:!0},{default:d(()=>[s(bs,{modelValue:F(v),"onUpdate:modelValue":u[0]||(u[0]=c=>Ua(v)?v.value=c:null),forms:g.forms,title:"Registration Payments"},null,8,["modelValue","forms"])]),_:1})):ne("",!0)]),_:1}),s(Gt,{value:"status"},{default:d(()=>[i.value=="status"?(A(),N(ct,{key:0,class:"pa-0 mx-0",fluid:!0},{default:d(()=>[s(Ss,{modelValue:F(v),"onUpdate:modelValue":u[1]||(u[1]=c=>Ua(v)?v.value=c:null),forms:g.forms},null,8,["modelValue","forms"])]),_:1})):ne("",!0)]),_:1}),s(Gt,{value:"tags"},{default:d(()=>[i.value=="tags"?(A(),N(ct,{key:0,class:"pa-0 mx-0",fluid:!0},{default:d(()=>[s(As,{modelValue:F(v),"onUpdate:modelValue":u[2]||(u[2]=c=>Ua(v)?v.value=c:null),title:"Registration Tags"},null,8,["modelValue"])]),_:1})):ne("",!0)]),_:1})]),_:1},8,["modelValue"]))}}),Es=(a,o)=>a===void 0?!1:Er(a,Cr.GROUP_TYPE_CONVENTION,o.ConventionUUID,o).ViewPaymentTransactions,Cs={key:0},Is={key:1},nr=je({__name:"RegistrationActions",props:$e({accommodations:{},convention:{},extras:{},forms:{},interests:{},registration:{},tickets:{},title:{},useDialog:{type:Boolean},venues:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:$e(["update:registration"],["update:modelValue"]),setup(a,{emit:o}){const n=a,i=ze(a,"modelValue"),v=Sr(n,o,void 0,void 0,"registration"),g=R("notes"),u=Ya(),c=[{label:"Badge",value:"badges"},{label:"Emails",value:"emails"},{label:"Notes",value:"notes"},{label:"Status",value:"status"},{label:"Tags",value:"tags"}];return Es(u,n.convention)&&c.splice(2,0,{label:"Payments",value:"payments"}),(f,b)=>f.useDialog?(A(),J("div",Cs,[s(Ta,{modelValue:i.value,"onUpdate:modelValue":b[3]||(b[3]=T=>i.value=T),title:f.title,"show-close-action":!0,color:"primary","close-action-label":"Close",persistent:!0,"retain-focus":!1,scrollable:!0,fullscreen:"","card-class":"ma-0 pa-0"},{extension:d(()=>[s(tr,{modelValue:g.value,"onUpdate:modelValue":b[0]||(b[0]=T=>g.value=T),tabs:c,"show-arrows":!0},null,8,["modelValue"])]),default:d(()=>[s(ar,{modelValue:g.value,"onUpdate:modelValue":b[1]||(b[1]=T=>g.value=T),registration:F(v),"onUpdate:registration":b[2]||(b[2]=T=>Ua(v)?v.value=T:null),accommodations:f.accommodations,convention:f.convention,extras:f.extras,forms:f.forms,interests:f.interests,tabs:c,tickets:f.tickets,venues:f.venues},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])]),_:1},8,["modelValue","title"])])):(A(),J("div",Is,[s(tr,{modelValue:g.value,"onUpdate:modelValue":b[4]||(b[4]=T=>g.value=T),tabs:c,"show-arrows":!0},null,8,["modelValue"]),s(ar,{modelValue:g.value,"onUpdate:modelValue":b[5]||(b[5]=T=>g.value=T),registration:F(v),"onUpdate:registration":b[6]||(b[6]=T=>Ua(v)?v.value=T:null),accommodations:f.accommodations,convention:f.convention,extras:f.extras,forms:f.forms,interests:f.interests,tabs:c,tickets:f.tickets,venues:f.venues},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])]))}}),Mr=(a,o)=>{a.forEach(n=>{n.Items.forEach(i=>{(i.SectionField==null||i.SectionField.Field==null)&&o.find(m=>{m.Sections.find(v=>{if(v.Fields){const g=v.Fields.find(u=>u.SectionFieldUUID===i.SectionFieldUUID);if(g)return i.SectionField=g,!0}})})})})},ws={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},ks={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},Rs={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},Os={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},Ms={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},Vs={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},$s={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},Ps={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},Ls={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},Fs={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},Ns={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},xs={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},js={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},Bs={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},Ys={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},Hs={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},Gs={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},Ws={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},qs={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},zs={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},Js={red:ws,pink:ks,purple:Rs,deepPurple:Os,indigo:Ms,blue:Vs,lightBlue:$s,cyan:Ps,teal:Ls,green:Fs,lightGreen:Ns,lime:xs,yellow:js,amber:Bs,orange:Ys,deepOrange:Hs,brown:Gs,blueGrey:Ws,grey:qs,shades:zs},Ks=je({__name:"EditAdminLayoutSearch",props:$e({formOptions:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=a,n=ze(a,"modelValue");n.value.Search||(n.value.Search=[]);const i=R(o.formOptions),m=()=>{n.value.Search.push({ID:0,LayoutItemUUID:Ot(),LayoutPanelID:n.value.AdminLayoutID,LayoutPanelUUID:n.value.AdminLayoutUUID,Label:"",SourceType:Rt.LAYOUT_ITEM_SOURCE_FORM,Align:"",Order:n.value.Search.length,DefaultSort:!1,Meta:{}})},v=u=>{const c=n.value.Search.findIndex(f=>f.LayoutItemUUID===u.LayoutItemUUID);c!=-1&&n.value.Search.splice(c,1)},g=u=>{const c=i.value.find(f=>f.value===u.SectionFieldUUID);c&&(u.SectionFieldID=c.object.ID,u.SectionField=c.object)};return(u,c)=>(A(),J(fe,null,[(A(!0),J(fe,null,Ye(n.value.Search,f=>(A(),N(ge,{key:f.LayoutItemUUID},{default:d(()=>[s(Y,{cols:"12",sm:"6"},{default:d(()=>[s(Te,{modelValue:f.SourceType,"onUpdate:modelValue":b=>f.SourceType=b,label:"Source Type",items:F(hn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),s(Y,null,{default:d(()=>[f.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(A(),N(Te,{key:0,modelValue:f.SectionFieldUUID,"onUpdate:modelValue":b=>f.SectionFieldUUID=b,label:"Form Data",items:i.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:b=>g(f)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):f.SourceType==="LAYOUT_ITEM_SOURCE_META"?(A(),N(Te,{key:1,modelValue:f.MetaField,"onUpdate:modelValue":b=>f.MetaField=b,label:"Miscellaneous Data",items:F(Un),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):f.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(A(),N(Te,{key:2,modelValue:f.UserField,"onUpdate:modelValue":b=>f.UserField=b,label:"User Profile Data",items:F(Tn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):ne("",!0)]),_:2},1024),s(Y,null,{default:d(()=>[s(de,{icon:"mdi:mdi-delete",onClick:b=>v(f)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),s(de,{onClick:m,color:"primary"},{default:d(()=>c[0]||(c[0]=[Z(" Add Search Item ")])),_:1})],64))}}),Qs=je({__name:"EditAdminLayoutFilter",props:$e({formOptions:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=a,n=ze(a,"modelValue");n.value.Filter||(n.value.Filter=[]);const i=R(o.formOptions),m=()=>{n.value.Filter.push({ID:0,LayoutItemUUID:Ot(),LayoutPanelID:n.value.AdminLayoutID,LayoutPanelUUID:n.value.AdminLayoutUUID,Label:"",SourceType:Rt.LAYOUT_ITEM_SOURCE_FORM,Align:"",Order:n.value.Filter.length,DefaultSort:!1,Meta:{}})},v=u=>{const c=n.value.Filter.findIndex(f=>f.LayoutItemUUID===u.LayoutItemUUID);c!=-1&&n.value.Filter.splice(c,1)},g=u=>{const c=i.value.find(f=>f.value===u.SectionFieldUUID);c&&(u.SectionFieldID=c.object.ID,u.SectionField=c.object)};return(u,c)=>(A(),J(fe,null,[(A(!0),J(fe,null,Ye(n.value.Filter,f=>(A(),N(ge,{key:f.LayoutItemUUID},{default:d(()=>[s(Y,{cols:"12",sm:"6"},{default:d(()=>[s(Te,{modelValue:f.SourceType,"onUpdate:modelValue":b=>f.SourceType=b,label:"Source Type",items:F(hn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),s(Y,null,{default:d(()=>[f.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(A(),N(Te,{key:0,modelValue:f.SectionFieldUUID,"onUpdate:modelValue":b=>f.SectionFieldUUID=b,label:"Form Data",items:i.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:b=>g(f)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):f.SourceType==="LAYOUT_ITEM_SOURCE_META"?(A(),N(Te,{key:1,modelValue:f.MetaField,"onUpdate:modelValue":b=>f.MetaField=b,label:"Miscellaneous Data",items:F(Un),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):f.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(A(),N(Te,{key:2,modelValue:f.UserField,"onUpdate:modelValue":b=>f.UserField=b,label:"User Profile Data",items:F(Tn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):ne("",!0)]),_:2},1024),s(Y,null,{default:d(()=>[s(de,{icon:"mdi:mdi-delete",onClick:b=>v(f)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),s(de,{onClick:m,color:"primary"},{default:d(()=>c[0]||(c[0]=[Z(" Add Filter Item ")])),_:1})],64))}}),Xs={key:0,class:"text-warning text-right pl-1"},Zs=je({__name:"EditAdminLayout",props:$e({convention:{},layouts:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:$e(["change","delete"],["update:modelValue"]),setup(a,{emit:o}){const n=Li(),i=ze(a,"modelValue"),m=R([]),v=Yt(),g=o,u=R(Object.assign({},...a.layouts.map(x=>x.Panels.map(W=>W.Items.map(O=>{if(!O.Meta)return{};const B={};return Object.entries(O.Meta).forEach(D=>{Array.isArray(D[1])?(B[`${O.LayoutItemUUID}.${D[0]}`]=[],D[1].forEach(oe=>{B[`${O.LayoutItemUUID}.${D[0]}`].push(oe.toString())})):D[1]!==void 0&&D[1]!==null&&(B[`${O.LayoutItemUUID}.${D[0]}`]=[D[1].toString()])}),B}))).flat(2))),c=R(`
Are you sure you wish to delete this layout? All panels relating to it will be
removed and can not be recovered. This action can not be undone once saved.
You will have to create a new layout.
`),f=R(!1),b=R([]);v.getConventionTags(a.convention.ConventionUUID).then(x=>{x&&(b.value=x)}).catch(()=>{});const T=()=>({ID:0,LayoutPanelUUID:Ot(),AdminLayoutID:i.value.ID,AdminLayoutUUID:i.value.AdminLayoutUUID,Name:"",Order:i.value.Panels.length+1,Items:[],Search:[],Filter:[],PanelStyle:Kn.PANEL_STYLE_FLEX,RequiredFormType:we.FORM_TYPE_NIL,RequiredGroupMemberships:[],RequiredRegistrationTags:[],Meta:{}}),E=x=>()=>({ID:0,LayoutItemUUID:Ot(),LayoutPanelID:x.ID,LayoutPanelUUID:x.LayoutPanelUUID,Label:"",SourceType:Rt.LAYOUT_ITEM_SOURCE_FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:x.Items.length+1,DefaultSort:!1,Meta:{}}),I=(x,W)=>{x.Meta[W]=u.value[`${x.LayoutItemUUID}.${W}`]},V=x=>{const W=m.value.find(O=>O.value===x.SectionFieldUUID);W&&(x.SectionFieldID=W.object.ID,x.SectionField=W.object)};v.getConventionForms(i.value.ConventionUUID).then(x=>{x&&(x.forEach(W=>W.Sections.forEach(O=>O.Fields&&m.value.push(...O.Fields.map(B=>{var oe;return{title:`${W.Name} - ${O.Name} - ${(oe=B.Field)==null?void 0:oe.Name}`,value:B.SectionFieldUUID,object:B}})))),m.value.sort(Mi("title")),Mr(i.value.Panels,x))});const G=ra(()=>{switch(i.value.Type){case ut.ADMIN_LAYOUT_PANELS:return"Panels";case ut.ADMIN_LAYOUT_TABLE:return"Tabs"}return"Unknown"});qe(i,()=>{g("change")},{deep:!0});const te=ra(()=>{const x=/([a-zA-Z]+)(\d+)/;return Object.entries(Js).map(([W,O])=>Object.entries(O).map(([B,D])=>{const oe=x.exec(B);return!oe||oe.length<3?void 0:{Title:`${un(W).split(/(?=[A-Z])/).join(" ")} ${un(oe[1])} ${un(oe[2])}`,CSSName:`${W}-${oe[1]}-${oe[2]}`,Value:D}})).flat().filter(W=>!!W).sort((W,O)=>W.Title>O.Title?1:W.Title==O.Title?0:-1)});return(x,W)=>(A(),N(ct,{class:"px-0 mx-0",fluid:!0},{default:d(()=>[s(ge,null,{default:d(()=>[s(Y,{cols:"12",sm:"6"},{default:d(()=>[s(Ne,{modelValue:i.value.Name,"onUpdate:modelValue":W[0]||(W[0]=O=>i.value.Name=O),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),s(Y,{cols:"12",sm:"6"},{default:d(()=>[s(Te,{modelValue:i.value.Type,"onUpdate:modelValue":W[1]||(W[1]=O=>i.value.Type=O),label:"Layout Type",items:F(mi),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),i.value.Type==F(ut).ADMIN_LAYOUT_PANELS?(A(),N(Y,{key:0,cols:"12",sm:"6"},{default:d(()=>[s(Te,{modelValue:i.value.RunnerLayoutUUID,"onUpdate:modelValue":W[2]||(W[2]=O=>i.value.RunnerLayoutUUID=O),clearable:!0,items:x.layouts.filter(O=>O.Type===F(ut).ADMIN_LAYOUT_PANELS)||[],multiple:!1,label:"Runner Display (Optional)","item-title":"Name","item-value":"AdminLayoutUUID",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})):ne("",!0)]),_:1}),s(ge,null,{default:d(()=>[s(Y,null,{default:d(()=>[s(fn,{modelValue:i.value.Panels,"onUpdate:modelValue":W[3]||(W[3]=O=>i.value.Panels=O),"new-item":T,closeable:!1,title:G.value,label:"Name","slot-name-prefix":"panel"},xa({_:2},[Ye(i.value.Panels,(O,B)=>({name:`panel_${B}`,fn:d(()=>[s(ct,{class:"px-0 mx-0",fluid:!0},{default:d(()=>[s(ge,null,{default:d(()=>[s(Y,{cols:"12",sm:"6"},{default:d(()=>[s(Ne,{modelValue:O.Name,"onUpdate:modelValue":D=>O.Name=D,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),i.value.Type===F(ut).ADMIN_LAYOUT_PANELS?(A(),N(Y,{key:0,cols:"12",sm:"6"},{default:d(()=>[s(Te,{modelValue:O.PanelStyle,"onUpdate:modelValue":D=>O.PanelStyle=D,items:F(fi),clearable:!0,label:"Panel Style",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)):ne("",!0),s(Y,{cols:"12",sm:"6"},{default:d(()=>[s(Te,{modelValue:O.RequiredFormType,"onUpdate:modelValue":D=>O.RequiredFormType=D,items:F(gi),clearable:!0,label:"Required Form",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),s(Y,{cols:"12",sm:"6"},{default:d(()=>[s($i,{label:"Required Groups",variant:"outlined",modelValue:O.RequiredGroupMemberships,"onUpdate:modelValue":D=>O.RequiredGroupMemberships=D,convention:i.value.ConventionUUID,chips:"",clearable:"",hint:"Groups that a user must be in to see this panel. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024),s(Y,{cols:"12",sm:"6"},{default:d(()=>[s(kr,{label:"Registration Tags",variant:"outlined",modelValue:O.RequiredRegistrationTags,"onUpdate:modelValue":D=>O.RequiredRegistrationTags=D,convention:i.value.ConventionUUID,chips:"",clearable:"",hint:"Tags that a registration must have to appear in results. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024)]),_:2},1024),F(n)?(A(),N(ge,{key:0},{default:d(()=>[s(Y,null,{default:d(()=>[s(Rr,{variant:"accordion"},{default:d(()=>[s(vn,null,{default:d(()=>[s(pn,null,{default:d(()=>W[7]||(W[7]=[Z(" Filters ")])),_:1}),s(yn,null,{default:d(()=>[W[8]||(W[8]=ue("p",null," Fixed search settings to pre-filter results by ",-1)),s(Qs,{modelValue:i.value.Panels[B],"onUpdate:modelValue":D=>i.value.Panels[B]=D,"form-options":m.value},null,8,["modelValue","onUpdate:modelValue","form-options"])]),_:2},1024)]),_:2},1024),s(vn,null,{default:d(()=>[s(pn,null,{default:d(()=>W[9]||(W[9]=[Z(" Search Options ")])),_:1}),s(yn,null,{default:d(()=>[W[10]||(W[10]=ue("p",null," Dynamic search options ",-1)),s(Ks,{modelValue:i.value.Panels[B],"onUpdate:modelValue":D=>i.value.Panels[B]=D,"form-options":m.value},null,8,["modelValue","onUpdate:modelValue","form-options"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):ne("",!0),i.value.Type===F(ut).ADMIN_LAYOUT_TABLE?(A(),N(ge,{key:1},{default:d(()=>[s(Y,null,{default:d(()=>[s(aa,{modelValue:O.Meta.challenge,"onUpdate:modelValue":D=>O.Meta.challenge=D,label:"Require challenge on search"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):ne("",!0),i.value.Type===F(ut).ADMIN_LAYOUT_PANELS&&O.PanelStyle===F(Kn).PANEL_STYLE_FLEX?(A(),N(ge,{key:2},{default:d(()=>[s(Y,{cols:"12",class:"py-0 my-0"},{default:d(()=>W[11]||(W[11]=[ue("h4",null,"Grid Size (Max 12)",-1)])),_:1}),s(Y,{cols:"6",sm:"4",lg:"2"},{default:d(()=>[s(Ne,{modelValue:O.Meta.cols,"onUpdate:modelValue":D=>O.Meta.cols=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"Default",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"6",sm:"4",lg:"2"},{default:d(()=>[s(Ne,{modelValue:O.Meta.cols_xs,"onUpdate:modelValue":D=>O.Meta.cols_xs=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"XS",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"6",sm:"4",lg:"2"},{default:d(()=>[s(Ne,{modelValue:O.Meta.cols_sm,"onUpdate:modelValue":D=>O.Meta.cols_sm=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"SM",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"6",sm:"4",lg:"2"},{default:d(()=>[s(Ne,{modelValue:O.Meta.cols_md,"onUpdate:modelValue":D=>O.Meta.cols_md=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"MD",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"6",sm:"4",lg:"2"},{default:d(()=>[s(Ne,{modelValue:O.Meta.cols_lg,"onUpdate:modelValue":D=>O.Meta.cols_lg=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"LG",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"6",sm:"4",lg:"2"},{default:d(()=>[s(Ne,{modelValue:O.Meta.cols_xl,"onUpdate:modelValue":D=>O.Meta.cols_xl=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"XL",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):ne("",!0)]),_:2},1024),s(fn,{modelValue:O.Items,"onUpdate:modelValue":D=>O.Items=D,"new-item":E(O),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},xa({_:2},[Ye(O.Items,(D,oe)=>({name:`item_${oe}`,fn:d(()=>[s(ct,{class:"px-0 mx-0",fluid:!0},{default:d(()=>{var be,P;return[s(ge,null,{default:d(()=>[s(Y,{cols:"12",sm:"6"},{default:d(()=>[s(Ne,{modelValue:D.Label,"onUpdate:modelValue":C=>D.Label=C,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),s(ge,null,{default:d(()=>[s(Y,{cols:"12",sm:"6"},{default:d(()=>[s(Te,{modelValue:D.SourceType,"onUpdate:modelValue":C=>D.SourceType=C,label:"Source Type",items:F(hn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),s(Y,{cols:"12",sm:"6"},{default:d(()=>[D.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(A(),N(Te,{key:0,modelValue:D.SectionFieldUUID,"onUpdate:modelValue":C=>D.SectionFieldUUID=C,label:"Form Data",items:m.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:C=>V(D)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):D.SourceType==="LAYOUT_ITEM_SOURCE_META"?(A(),N(Te,{key:1,modelValue:D.MetaField,"onUpdate:modelValue":C=>D.MetaField=C,label:"Miscellaneous Data",items:F(Un),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):D.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(A(),N(Te,{key:2,modelValue:D.UserField,"onUpdate:modelValue":C=>D.UserField=C,label:"User Profile Data",items:F(Tn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):ne("",!0)]),_:2},1024)]),_:2},1024),x.layouts&&D.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&((P=(be=D.SectionField)==null?void 0:be.Field)==null?void 0:P.Type)===F(hr).TEXT?(A(),N(ge,{key:0},{default:d(()=>[s(Y,{cols:"12",xs:"6",sm:"6",lg:"3"},{default:d(()=>[s(aa,{modelValue:D.Meta.DirectEdit,"onUpdate:modelValue":C=>D.Meta.DirectEdit=C,label:"Direct Edit","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"12",xs:"6",sm:"6",lg:"3"},{default:d(()=>[s(Te,{modelValue:D.Meta.DirectEditPermission,"onUpdate:modelValue":C=>D.Meta.DirectEditPermission=C,label:"Minimum Permission Required",items:["View","Edit"],"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):ne("",!0),x.layouts&&D.SourceType==="LAYOUT_ITEM_SOURCE_META"&&D.MetaField===F(pe).META_DATA_SOURCE_BADGE_DISPLAY?(A(),N(ge,{key:1},{default:d(()=>[s(Y,{cols:"6",sm:"4",lg:"2"},{default:d(()=>[s(aa,{modelValue:D.Meta.HideDownloadButton,"onUpdate:modelValue":C=>D.Meta.HideDownloadButton=C,label:"Hide Download Button"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(Y,{cols:"6",sm:"4",lg:"2"},{default:d(()=>[s(aa,{modelValue:D.Meta.HideNFCButton,"onUpdate:modelValue":C=>D.Meta.HideNFCButton=C,label:"Hide NFC Button"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):ne("",!0),x.layouts&&D.SourceType==="LAYOUT_ITEM_SOURCE_META"&&D.MetaField===F(pe).META_DATA_SOURCE_DATA_LAYOUT?(A(),N(ge,{key:2},{default:d(()=>[s(Y,{cols:"6",sm:"4",lg:"2"},{default:d(()=>[s(Te,{modelValue:u.value[`${D.LayoutItemUUID}.LayoutUUID`],"onUpdate:modelValue":[C=>u.value[`${D.LayoutItemUUID}.LayoutUUID`]=C,C=>I(D,"LayoutUUID")],clearable:!0,items:x.layouts.filter(C=>C.Type===F(ut).ADMIN_LAYOUT_PANELS)||[],multiple:!0,label:"Data Display","item-title":"Name","item-value":"AdminLayoutUUID",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)):ne("",!0),x.layouts&&D.SourceType==="LAYOUT_ITEM_SOURCE_META"&&D.MetaField===F(pe).META_DATA_SOURCE_TAGS?(A(),N(ge,{key:3},{default:d(()=>[s(Y,{cols:"6",sm:"6",md:"6",lg:"6"},{default:d(()=>[s(Te,{modelValue:u.value[`${D.LayoutItemUUID}.Tags`],"onUpdate:modelValue":[C=>u.value[`${D.LayoutItemUUID}.Tags`]=C,C=>I(D,"Tags")],clearable:!0,items:b.value||[],multiple:!0,chips:!0,label:"Tags to Display","item-title":"Title","item-value":"TagUUID",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"]),!u.value[D.LayoutItemUUID]||u.value[D.LayoutItemUUID].length===0?(A(),J("small",Xs," Will show all tags ")):ne("",!0)]),_:2},1024),s(Y,{cols:"6"},{default:d(()=>[s(Te,{modelValue:D.Meta.TagColour,"onUpdate:modelValue":C=>D.Meta.TagColour=C,items:te.value,label:"Colour","item-title":"Title","item-value":"Value",variant:"outlined","hide-details":""},{selection:d(({item:C})=>[s(de,{size:"x-small",color:C.raw.Value,class:"mr-2"},null,8,["color"]),Z(" "+ie(C.title),1)]),item:d(({props:C,item:H})=>[s(ia,Hl(Gl(C)),{prepend:d(()=>[s(de,{size:"x-small",color:H.raw.Value,class:"mr-2"},null,8,["color"])]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)):ne("",!0),i.value.Type===F(ut).ADMIN_LAYOUT_TABLE&&(D.SourceType!==F(Rt).LAYOUT_ITEM_SOURCE_META||D.MetaField!==F(pe).META_DATA_SOURCE_DATA_LAYOUT)?(A(),N(ge,{key:4},{default:d(()=>[s(Y,null,{default:d(()=>[s(aa,{modelValue:D.DefaultSort,"onUpdate:modelValue":C=>D.DefaultSort=C,label:"Default Sort","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):ne("",!0)]}),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue","title"])]),_:1})]),_:1}),s(ge,null,{default:d(()=>[s(Y,null,{default:d(()=>[s(de,{onClick:W[4]||(W[4]=O=>f.value=!0),"prepend-icon":"mdi:mdi-delete",color:"red-darken-4"},{default:d(()=>W[12]||(W[12]=[Z("Delete Layout")])),_:1})]),_:1})]),_:1}),f.value?(A(),N(Pi,{key:0,modelValue:f.value,"onUpdate:modelValue":W[5]||(W[5]=O=>f.value=O),message:c.value,title:"Delete Layout",subtitle:"Removes this layout and all it's panels",onDelete:W[6]||(W[6]=O=>g("delete"))},null,8,["modelValue","message"])):ne("",!0)]),_:1}))}}),eu=je({__name:"EditAdminLayouts",props:$e({title:{},convention:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:$e(["save"],["update:modelValue"]),setup(a,{emit:o}){const n=ze(a,"modelValue"),i=o,m=R([]),v=R([]),g=R([]),u=Yt(),c=()=>({ID:0,AdminLayoutUUID:Ot(),ConventionID:a.convention.ID,ConventionUUID:a.convention.ConventionUUID,Name:"New Layout",Type:ut.ADMIN_LAYOUT_PANELS,Panels:[]}),f=()=>{let T=!1;[...new Set(g.value)].forEach(I=>{const V=m.value.findIndex(G=>G.AdminLayoutUUID===I);V<0||V>=m.value.length||(u.saveAdminLayout(m.value[V]).then(G=>{G&&m.value.splice(V,1,G)}).catch(()=>{}),T=!0)}),v.value.forEach(I=>{u.deleteAdminLayout(I).catch(()=>{})}),v.value=[],g.value=[],T&&i("save")},b=T=>{const E=m.value.findIndex(I=>I.AdminLayoutUUID===T.AdminLayoutUUID);E<0||E>=m.value.length||(m.value[E].ID>0&&v.value.push(T.AdminLayoutUUID),m.value.splice(E,1))};return u.getConventionAdminLayouts(a.convention.ConventionUUID).then(T=>{T&&(m.value=T)}).catch(()=>[]),(T,E)=>(A(),N(ja,{modelValue:n.value,"onUpdate:modelValue":E[2]||(E[2]=I=>n.value=I),scrollable:!0,"retain-focus":!0,persistent:!0,fullscreen:!0},{default:d(()=>[s(fn,{modelValue:m.value,"onUpdate:modelValue":E[0]||(E[0]=I=>m.value=I),"new-item":c,closeable:!0,"show-delete":!1,"show-save":!0,"has-order":!1,title:T.title,label:"Name","slot-name-prefix":"panel",onClose:E[1]||(E[1]=I=>n.value=!1),onSave:f},xa({_:2},[Ye(m.value,(I,V)=>({name:`panel_${V}`,fn:d(()=>[s(ct,{class:"px-0 mx-0",fluid:!0},{default:d(()=>[s(ge,null,{default:d(()=>[s(Y,{cols:"12"},{default:d(()=>[s(Zs,{modelValue:m.value[V],"onUpdate:modelValue":G=>m.value[V]=G,convention:T.convention,layouts:m.value,onChange:G=>g.value.push(I.AdminLayoutUUID),onDelete:G=>b(I)},null,8,["modelValue","onUpdate:modelValue","convention","layouts","onChange","onDelete"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","title"])]),_:1},8,["modelValue"]))}}),tu=["href","onClick"],au=je({__name:"OperatorSocket",setup(a){const o=Yt(),n=Fa.getInstance(),i=Ya(),m=Ni(),v=R(!1),g=vi({wsUri:o.getRunnerSocketURL()}),u=Wl.getInstance(),c=R(!1),f=R(!1),b=R([]),T=yr(),E=R("Connecting"),I=R([{title:"- Select Duration -",value:-1},{title:"No Expiry",value:0},{title:"5 Minutes",value:5*60*1e3},{title:"30 Minutes",value:30*60*1e3},{title:"1 Hour",value:60*60*1e3},{title:"1.5 Hours",value:90*60*1e3},{title:"2 Hours",value:120*60*1e3},{title:"3 Hours",value:180*60*1e3},{title:"4 Hours",value:240*60*1e3},{title:"5 Hours",value:300*60*1e3},{title:"6 Hours",value:360*60*1e3}]),V=P=>{if(P.editing=!1,P.timer&&clearTimeout(P.timer),!P.selectedDuration){P.expires=void 0,P.timer=void 0;return}const C=new Date;C.setTime(new Date().getTime()+P.selectedDuration),P.expires=C,G(P),B()},G=P=>{if(P.expires){if(P.timer&&clearTimeout(P.timer),typeof P.expires=="number"){const C=new Date;C.setTime(P.expires),P.expires=C}P.expires&&"getTime"in P.expires&&(P.timer=setTimeout(()=>{P.timer&&clearTimeout(P.timer),W(P)},P.expires.getTime()-Date.now()))}};g.on("authenticated",()=>{c.value=!0;const P={Key:"",Mode:"host",UserUUID:(i==null?void 0:i.UserUUID)||""},C={Command:"SET_MODE",Params:new Map,Data:JSON.stringify(P)};g.JSON(C)}),g.on("auth_failed",()=>{c.value=!1,E.value="Access Denied"}),g.on("badge_serial_update",P=>{n.emit("badge_serial_update",P)}),g.on("close",()=>{E.value="Disconnected"}),g.on("open",()=>{const P=u.getTokenByService("GrazeAPI");E.value="Authenticating",g.send(`AUTH ${P==null?void 0:P.AccessToken}`)}),g.on("runner_connected",P=>{const C=P,H=b.value.find(ye=>ye.key==C.Key);if(!H){te(C.Key,C.UserUUID);return}const ce=qi();ce.DisplayName=C.DisplayName,ce.UserUUID=C.UserUUID,H.users.find(ye=>ye.UserUUID==ce.UserUUID)||H.users.push(ce)}),g.on("runner_disconnected",P=>{const C=P,H=b.value.find(ye=>ye.key==C.Key);if(!H)return;const ce=H.users.findIndex(ye=>ye.UserUUID==C.UserUUID);ce<0||H.users.splice(ce,1)}),g.on("started",()=>{b.value.forEach(P=>{const C={Key:P.key},H={Command:"ADD_KEY",Params:new Map,Data:JSON.stringify(C)};g.JSON(H)}),E.value="Connected"}),ql(()=>{O(),Fa.getInstance().on("layout_opened",C=>{const H=C;if(!g||!c.value||!H||!H.AdminLayoutUUID||!H.RegistrationUUID)return;const ce={Command:"OPEN_LAYOUT",Params:new Map,Data:JSON.stringify(H)};g.JSON(ce)})}),pr(()=>{g.destroy()});const te=(P,C)=>{const ce={Command:"KICK_RUNNER",Params:new Map,Data:JSON.stringify({DisplayName:"",Key:P,UserUUID:C})};g.JSON(ce)},x=()=>{const P=Ot(),H={Command:"ADD_KEY",Params:new Map,Data:JSON.stringify({Key:P})};g.JSON(H),b.value.push({key:P,name:"New Session",users:[]}),B()},W=P=>{const C=b.value.findIndex(ye=>ye==P);if(C<0)return;const H={Key:P.key},ce={Command:"REMOVE_KEY",Params:new Map,Data:JSON.stringify(H)};g.JSON(ce),b.value.splice(C,1),B()},O=()=>{const P=sessionStorage.getItem("collaboration.sessions");P&&(b.value=JSON.parse(P),b.value.forEach(C=>{typeof C.expires!="number"&&(C.expires=0),G(C)}))},B=()=>{const P=[];b.value.forEach(C=>{P.push({name:C.name,expires:typeof C.expires=="number"?C.expires:C.expires?C.expires.getTime():0,key:C.key,users:[]})}),sessionStorage.setItem("collaboration.sessions",JSON.stringify(P))},D=P=>{const C=T.resolve({name:"RunnerView",params:{user:i==null?void 0:i.UserUUID,session:P.key}}),H=new URL(location.href);return H.pathname=C.href,H.toString()},oe=P=>{const C=D(P);return Fi(C),f.value=!0,C},be=P=>{if(typeof P=="number"){const ye=new Date;ye.setTime(P),P=ye}const C=P.getTime()-Date.now(),H=Math.floor(C/(1e3*60*60)),ce=Math.floor(C%(1e3*60*60)/(1e3*60));return H==0&&ce==0?`${Math.floor(C%6e4/1e3)}s`:`${H}hr${H!=1?"s":""} ${ce}min${ce!=1?"s":""}`};return(P,C)=>c.value?(A(),J(fe,{key:0},[s(de,{icon:"mdi:mdi-link-variant",onClick:C[0]||(C[0]=H=>v.value=!0)}),s(Ta,{modelValue:v.value,"onUpdate:modelValue":C[4]||(C[4]=H=>v.value=H),"hide-extension":!0,"show-save-action":!1,"show-delete-action":!1,"show-reset-action":!1,title:"Collaboration",subtitle:`Connection Status: ${E.value}`},{actions:d(()=>[s(na),s(de,{color:"primary",variant:"flat","prepend-icon":"mdi:mdi-link-variant-plus",onClick:x},{default:d(()=>C[5]||(C[5]=[Z(" Create Session ")])),_:1})]),default:d(()=>[s(bn,null,{default:d(()=>[(A(!0),J(fe,null,Ye(b.value,H=>(A(),J(fe,{key:H.key},[s(bi,{value:H.key},{activator:d(({props:ce})=>[s(ia,gn({ref_for:!0},ce),{default:d(()=>[s(Tr,null,{default:d(()=>[s(ge,null,{default:d(()=>[s(Y,{style:{"max-width":"84px"}},{default:d(()=>[ue("a",{href:oe(H),onClick:dt(ye=>oe(H),["prevent","stop"]),class:"text-white text-decoration-none"},[s(de,{variant:"flat",size:"x-small",icon:"mdi:mdi-link-variant",color:"success",class:"mr-2",title:"Copy Link"})],8,tu),s(de,{variant:"flat",size:"x-small",icon:"mdi:mdi-link-variant-remove",color:"error",class:"mr-2",title:"Terminate",onClick:dt(ye=>W(H),["stop"])},null,8,["onClick"])]),_:2},1024),s(Y,null,{default:d(()=>[s(Ne,{modelValue:H.name,"onUpdate:modelValue":ye=>H.name=ye,"hide-details":"",variant:"plain",density:"compact",onChange:B,onClick:C[1]||(C[1]=dt(()=>{},["stop"])),onKeydown:C[2]||(C[2]=dt(()=>{},["stop"]))},{append:d(()=>[Z(ie(H.users.length),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),default:d(()=>[H.editing?(A(),N(Te,{key:0,label:"Duration",items:I.value,density:"compact","hide-details":!0,modelValue:H.selectedDuration,"onUpdate:modelValue":[ce=>H.selectedDuration=ce,ce=>V(H)],modelModifiers:{number:!0}},null,8,["items","modelValue","onUpdate:modelValue"])):H.expires?(A(),J(fe,{key:1},[ue("small",null,[C[6]||(C[6]=ue("strong",null,"Expires:",-1)),Z(" "+ie(be(H.expires)),1)]),s(de,{onClick:ce=>{H.selectedDuration=-1,H.editing=!0},variant:"text",color:"primary",density:"compact",size:"small"},{default:d(()=>C[7]||(C[7]=[Z(" (Change Expiry) ")])),_:2},1032,["onClick"])],64)):(A(),N(de,{key:2,onClick:ce=>{H.selectedDuration=-1,H.editing=!0},variant:"text",color:"primary",density:"compact",size:"small"},{default:d(()=>C[8]||(C[8]=[Z(" (Set Expiry) ")])),_:2},1032,["onClick"])),(A(!0),J(fe,null,Ye(H.users,ce=>(A(),N(ia,{key:`${H.key}.${ce.UserUUID}`},{append:d(()=>[s(de,{variant:"flat",size:"small",icon:"mdi:mdi-account-network-off",title:"Disconnect User",onClick:ye=>te(H.key,ce.UserUUID)},null,8,["onClick"])]),prepend:d(()=>[s(br,{src:F(m)(ce.UserUUID),class:"rounded-circle mr-2 pt-4 d-inline-block",height:"32",width:"32"},null,8,["src"])]),default:d(()=>[Z(" "+ie(ce.DisplayName),1)]),_:2},1024))),128))]),_:2},1032,["value"]),s(F(xi),{value:oe(H),width:"200"},null,8,["value"])],64))),128))]),_:1}),s(Ci,{modelValue:f.value,"onUpdate:modelValue":C[3]||(C[3]=H=>f.value=H),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"])]),_:1},8,["modelValue","subtitle"])],64)):ne("",!0)}}),nu={style:{opacity:"var(--v-medium-emphasis-opacity)"}},ru=je({__name:"Paginator",props:$e({itemTotal:{}},{currentPage:{required:!0},currentPageModifiers:{},itemsPerPage:{required:!0},itemsPerPageModifiers:{}}),emits:["update:currentPage","update:itemsPerPage"],setup(a){const o=ze(a,"currentPage"),n=ze(a,"itemsPerPage");return(i,m)=>(A(),N(ct,{fluid:!0},{default:d(()=>[s(ge,{class:"align-center"},{default:d(()=>[s(Y,{cols:"12",lg:"7","order-lg":"3",xl:"8"},{default:d(()=>[s(ji,{modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=v=>o.value=v),modelModifiers:{number:!0},length:Math.ceil(i.itemTotal/n.value)},null,8,["modelValue","length"])]),_:1}),s(Y,{cols:"6",sm:"4",md:"2",lg:"2",xl:"1","order-lg":"1"},{default:d(()=>[s(Te,{modelValue:n.value,"onUpdate:modelValue":m[1]||(m[1]=v=>n.value=v),density:"compact","hide-details":"","item-title":"title","item-value":"value",label:"Items per page",min:"-1",max:"100",type:"number",variant:"outlined",items:[{title:"10",value:10},{title:"25",value:25},{title:"50",value:50},{title:"100",value:100},{title:"All",value:-1}]},null,8,["modelValue"])]),_:1}),s(Y,{cols:"6",sm:"3",md:"2",lg:"1",xl:"1","order-lg":"2"},{default:d(()=>[s(Ne,{modelValue:o.value,"onUpdate:modelValue":m[2]||(m[2]=v=>o.value=v),modelModifiers:{number:!0},density:"compact","hide-details":"",label:"Page",min:"1",max:Math.ceil(i.itemTotal/n.value),type:"number",variant:"outlined"},null,8,["modelValue","max"])]),_:1}),s(Y,{class:"text-right",cols:"12",sm:"5",md:"8",lg:"2",xl:"2","order-lg":"4"},{default:d(()=>[ue("span",nu,[n.value===-1?(A(),J(fe,{key:0},[Z(" 1-"+ie(i.itemTotal)+" of "+ie(i.itemTotal),1)],64)):(A(),J(fe,{key:1},[Z(ie((o.value-1)*n.value+1)+" - "+ie(o.value*n.value>=i.itemTotal?i.itemTotal:o.value*n.value)+" of "+ie(i.itemTotal),1)],64))])]),_:1})]),_:1})]),_:1}))}});var Vr=(a,o,n)=>{if(!o.has(a))throw TypeError("Cannot "+n)},rr=(a,o,n)=>(Vr(a,o,"read from private field"),n?n.call(a):o.get(a)),ou=(a,o,n)=>{if(o.has(a))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(a):o.set(a,n)},lu=(a,o,n,i)=>(Vr(a,o,"write to private field"),o.set(a,n),n);const $r=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"]],iu=[...$r,["unknown"]].map(a=>a[0]),Pa=new Map($r);function su(a){for(const[o,n]of Pa)if(a===n)return o;return"unknown"}function uu(a){if(Pr(a))return{width:a.naturalWidth,height:a.naturalHeight};if(Lr(a))return{width:a.width.baseVal.value,height:a.height.baseVal.value};if(Fr(a))return{width:a.videoWidth,height:a.videoHeight};if(xr(a))return{width:a.width,height:a.height};if(Br(a))return{width:a.displayWidth,height:a.displayHeight};if(Nr(a))return{width:a.width,height:a.height};if(jr(a))return{width:a.width,height:a.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function Pr(a){try{return a instanceof HTMLImageElement}catch{return!1}}function Lr(a){try{return a instanceof SVGImageElement}catch{return!1}}function Fr(a){try{return a instanceof HTMLVideoElement}catch{return!1}}function Nr(a){try{return a instanceof HTMLCanvasElement}catch{return!1}}function xr(a){try{return a instanceof ImageBitmap}catch{return!1}}function jr(a){try{return a instanceof OffscreenCanvas}catch{return!1}}function Br(a){try{return a instanceof VideoFrame}catch{return!1}}function Yr(a){try{return a instanceof Blob}catch{return!1}}function du(a){try{return a instanceof ImageData}catch{return!1}}function cu(a,o){try{const n=new OffscreenCanvas(a,o);if(n.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return n;throw void 0}catch{const i=document.createElement("canvas");return i.width=a,i.height=o,i}}async function Hr(a){if(Pr(a)&&!await pu(a))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(Lr(a)&&!await yu(a))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(Br(a)&&gu(a))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(Fr(a)&&(a.readyState===0||a.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(xr(a)&&Uu(a))throw new DOMException("The image source is detached.","InvalidStateError");const{width:o,height:n}=uu(a);if(o===0||n===0)return null;const i=cu(o,n).getContext("2d");i.drawImage(a,0,0);try{return i.getImageData(0,0,o,n)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function mu(a){let o;try{if(globalThis.createImageBitmap)o=await createImageBitmap(a);else if(globalThis.Image){o=new Image;let n="";try{n=URL.createObjectURL(a),o.src=n,await o.decode()}finally{URL.revokeObjectURL(n)}}else return a}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await Hr(o)}function fu(a){const{width:o,height:n}=a;if(o===0||n===0)return null;const i=a.getContext("2d");try{return i.getImageData(0,0,o,n)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function vu(a){if(Yr(a))return await mu(a);if(du(a)){if(hu(a))throw new DOMException("The image data has been detached.","InvalidStateError");return a}return Nr(a)||jr(a)?fu(a):await Hr(a)}async function pu(a){try{return await a.decode(),!0}catch{return!1}}async function yu(a){var o;try{return await((o=a.decode)==null?void 0:o.call(a)),!0}catch{return!1}}function gu(a){return a.format===null}function hu(a){return a.data.buffer.byteLength===0}function Uu(a){return a.width===0&&a.height===0}function or(a,o){return a instanceof DOMException?new DOMException(`${o}: ${a.message}`,a.name):a instanceof Error?new a.constructor(`${o}: ${a.message}`):new Error(`${o}: ${a}`)}const lr=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","DXFilmEdge","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","rMQRCode","UPC-A","UPC-E"];function Tu(a){return a.join("|")}function bu(a){const o=ir(a);let n=0,i=lr.length-1;for(;n<=i;){const m=Math.floor((n+i)/2),v=lr[m],g=ir(v);if(g===o)return v;g<o?n=m+1:i=m-1}return"None"}function ir(a){return a.toLowerCase().replace(/_-\[\]/g,"")}function Su(a,o){return a.Binarizer[o]}function _u(a,o){return a.CharacterSet[o]}const Du=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function Au(a){return Du[a.value]}function Eu(a,o){return a.EanAddOnSymbol[o]}function Cu(a,o){return a.TextMode[o]}const ua={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function Gr(a,o){return{...o,formats:Tu(o.formats),binarizer:Su(a,o.binarizer),eanAddOnSymbol:Eu(a,o.eanAddOnSymbol),textMode:Cu(a,o.textMode),characterSet:_u(a,o.characterSet)}}function Wr(a){return{...a,format:bu(a.format),eccLevel:a.eccLevel,contentType:Au(a.contentType)}}const Iu={locateFile:(a,o)=>{const n=a.match(/_(.+?)\.wasm$/);return n?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.1.3/dist/${n[1]}/${a}`:o+a}};let sr=new WeakMap;function Dn(a,o){var n;const i=sr.get(a);if(i!=null&&i.modulePromise&&o===void 0)return i.modulePromise;const m=(n=i==null?void 0:i.moduleOverrides)!=null?n:Iu,v=a({...m});return sr.set(a,{moduleOverrides:m,modulePromise:v}),v}async function wu(a,o,n=ua){const i={...ua,...n},m=await Dn(a),{size:v}=o,g=new Uint8Array(await o.arrayBuffer()),u=m._malloc(v);m.HEAPU8.set(g,u);const c=m.readBarcodesFromImage(u,v,Gr(m,i));m._free(u);const f=[];for(let b=0;b<c.size();++b)f.push(Wr(c.get(b)));return f}async function ku(a,o,n=ua){const i={...ua,...n},m=await Dn(a),{data:v,width:g,height:u,data:{byteLength:c}}=o,f=m._malloc(c);m.HEAPU8.set(v,f);const b=m.readBarcodesFromPixmap(f,g,u,Gr(m,i));m._free(f);const T=[];for(let E=0;E<b.size();++E)T.push(Wr(b.get(E)));return T}({...ua,formats:[...ua.formats]});var An=(()=>{var a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(o={}){var n=o,i,m;n.ready=new Promise((e,t)=>{i=e,m=t});var v=Object.assign({},n),g="./this.program",u=typeof window=="object",c=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var f="";function b(e){return n.locateFile?n.locateFile(e,f):f+e}var T;(u||c)&&(c?f=self.location.href:typeof document<"u"&&document.currentScript&&(f=document.currentScript.src),a&&(f=a),f.indexOf("blob:")!==0?f=f.substr(0,f.replace(/[?#].*/,"").lastIndexOf("/")+1):f="",c&&(T=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)})),n.print||console.log.bind(console);var E=n.printErr||console.error.bind(console);Object.assign(n,v),v=null,n.arguments&&n.arguments,n.thisProgram&&(g=n.thisProgram),n.quit&&n.quit;var I;n.wasmBinary&&(I=n.wasmBinary),typeof WebAssembly!="object"&&Oe("no native wasm support detected");var V,G=!1,te,x,W,O,B,D,oe,be;function P(){var e=V.buffer;n.HEAP8=te=new Int8Array(e),n.HEAP16=W=new Int16Array(e),n.HEAPU8=x=new Uint8Array(e),n.HEAPU16=O=new Uint16Array(e),n.HEAP32=B=new Int32Array(e),n.HEAPU32=D=new Uint32Array(e),n.HEAPF32=oe=new Float32Array(e),n.HEAPF64=be=new Float64Array(e)}var C=[],H=[],ce=[];function ye(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)Pe(n.preRun.shift());$t(C)}function mt(){$t(H)}function gt(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)ot(n.postRun.shift());$t(ce)}function Pe(e){C.unshift(e)}function ht(e){H.unshift(e)}function ot(e){ce.unshift(e)}var ke=0,tt=null;function ft(e){var t;ke++,(t=n.monitorRunDependencies)===null||t===void 0||t.call(n,ke)}function Be(e){var t;if(ke--,(t=n.monitorRunDependencies)===null||t===void 0||t.call(n,ke),ke==0&&tt){var r=tt;tt=null,r()}}function Oe(e){var t;(t=n.onAbort)===null||t===void 0||t.call(n,e),e="Aborted("+e+")",E(e),G=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw m(r),r}var Mt="data:application/octet-stream;base64,",Ut=e=>e.startsWith(Mt),Ge;Ge="zxing_reader.wasm",Ut(Ge)||(Ge=b(Ge));function qt(e){if(e==Ge&&I)return new Uint8Array(I);if(T)return T(e);throw"both async and sync fetching of the wasm failed"}function Vt(e){return!I&&(u||c)&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>qt(e)):Promise.resolve().then(()=>qt(e))}function Tt(e,t,r){return Vt(e).then(l=>WebAssembly.instantiate(l,t)).then(l=>l).then(r,l=>{E(`failed to asynchronously prepare wasm: ${l}`),Oe(l)})}function zt(e,t,r,l){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!Ut(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(p=>{var h=WebAssembly.instantiateStreaming(p,r);return h.then(l,function(S){return E(`wasm streaming compile failed: ${S}`),E("falling back to ArrayBuffer instantiation"),Tt(t,r,l)})}):Tt(t,r,l)}function Jt(){var e={a:bl};function t(l,p){return Re=l.exports,V=Re.ia,P(),In=Re.ma,ht(Re.ja),Be(),Re}ft();function r(l){t(l.instance)}if(n.instantiateWasm)try{return n.instantiateWasm(e,t)}catch(l){E(`Module.instantiateWasm callback failed with error: ${l}`),m(l)}return zt(I,Ge,e,r).catch(m),{}}var $t=e=>{for(;e.length>0;)e.shift()(n)};n.noExitRuntime;var bt=[],St=0,Kt=e=>{var t=new Le(e);return t.get_caught()||(t.set_caught(!0),St--),t.set_rethrown(!1),bt.push(t),Bn(t.excPtr),t.get_exception_ptr()},He=0,lt=()=>{Se(0,0);var e=bt.pop();jn(e.excPtr),He=0};function Le(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(t){D[this.ptr+4>>2]=t},this.get_type=function(){return D[this.ptr+4>>2]},this.set_destructor=function(t){D[this.ptr+8>>2]=t},this.get_destructor=function(){return D[this.ptr+8>>2]},this.set_caught=function(t){t=t?1:0,te[this.ptr+12>>0]=t},this.get_caught=function(){return te[this.ptr+12>>0]!=0},this.set_rethrown=function(t){t=t?1:0,te[this.ptr+13>>0]=t},this.get_rethrown=function(){return te[this.ptr+13>>0]!=0},this.init=function(t,r){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(r)},this.set_adjusted_ptr=function(t){D[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return D[this.ptr+16>>2]},this.get_exception_ptr=function(){var t=Hn(this.get_type());if(t)return D[this.excPtr>>2];var r=this.get_adjusted_ptr();return r!==0?r:this.excPtr}}var _t=e=>{throw He||(He=e),He},Qt=e=>{var t=He;if(!t)return ga(0),0;var r=new Le(t);r.set_adjusted_ptr(t);var l=r.get_type();if(!l)return ga(0),t;for(var p in e){var h=e[p];if(h===0||h===l)break;var S=r.ptr+16;if(Yn(h,l,S))return ga(h),t}return ga(l),t},Ha=()=>Qt([]),Xt=e=>Qt([e]),_a=(e,t)=>Qt([e,t]),Ht=()=>{var e=bt.pop();e||Oe("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(bt.push(e),e.set_rethrown(!0),e.set_caught(!1),St++),He=t,He},Pt=(e,t,r)=>{var l=new Le(e);throw l.init(t,r),He=e,St++,He},Ga=()=>St,Je={},it=e=>{for(;e.length;){var t=e.pop(),r=e.pop();r(t)}};function he(e){return this.fromWireType(B[e>>2])}var Lt={},Dt={},Zt={},Da,At=e=>{throw new Da(e)},Et=(e,t,r)=>{e.forEach(function(_){Zt[_]=t});function l(_){var k=r(_);k.length!==e.length&&At("Mismatched type converter count");for(var $=0;$<e.length;++$)at(e[$],k[$])}var p=new Array(t.length),h=[],S=0;t.forEach((_,k)=>{Dt.hasOwnProperty(_)?p[k]=Dt[_]:(h.push(_),Lt.hasOwnProperty(_)||(Lt[_]=[]),Lt[_].push(()=>{p[k]=Dt[_],++S,S===h.length&&l(p)}))}),h.length===0&&l(p)},Aa=e=>{var t=Je[e];delete Je[e];var r=t.rawConstructor,l=t.rawDestructor,p=t.fields,h=p.map(S=>S.getterReturnType).concat(p.map(S=>S.setterArgumentType));Et([e],h,S=>{var _={};return p.forEach((k,$)=>{var j=k.fieldName,ae=S[$],re=k.getter,se=k.getterContext,_e=S[$+p.length],Ce=k.setter,Ue=k.setterContext;_[j]={read:xe=>ae.fromWireType(re(se,xe)),write:(xe,M)=>{var z=[];Ce(Ue,xe,_e.toWireType(z,M)),it(z)}}}),[{name:t.name,fromWireType:k=>{var $={};for(var j in _)$[j]=_[j].read(k);return l(k),$},toWireType:(k,$)=>{for(var j in _)if(!(j in $))throw new TypeError(`Missing field: "${j}"`);var ae=r();for(j in _)_[j].write(ae,$[j]);return k!==null&&k.push(l,ae),ae},argPackAdvance:nt,readValueFromPointer:he,destructorFunction:l}]})},Wa=(e,t,r,l,p)=>{},qa=()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Ea=e},Ea,Me=e=>{for(var t="",r=e;x[r];)t+=Ea[x[r++]];return t},Ft,ve=e=>{throw new Ft(e)};function da(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var l=t.name;if(e||ve(`type "${l}" must have a positive integer typeid pointer`),Dt.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;ve(`Cannot register type '${l}' twice`)}if(Dt[e]=t,delete Zt[e],Lt.hasOwnProperty(e)){var p=Lt[e];delete Lt[e],p.forEach(h=>h())}}function at(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");return da(e,t,r)}var nt=8,za=(e,t,r,l)=>{t=Me(t),at(e,{name:t,fromWireType:function(p){return!!p},toWireType:function(p,h){return h?r:l},argPackAdvance:nt,readValueFromPointer:function(p){return this.fromWireType(x[p])},destructorFunction:null})},Ja=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),ca=e=>{function t(r){return r.$$.ptrType.registeredClass.name}ve(t(e)+" instance already deleted")},Ct=!1,Ca=e=>{},Ia=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},ma=e=>{e.count.value-=1;var t=e.count.value===0;t&&Ia(e)},fa=(e,t,r)=>{if(t===r)return e;if(r.baseClass===void 0)return null;var l=fa(e,t,r.baseClass);return l===null?null:r.downcast(l)},U={},y=()=>Object.keys(vt).length,w=()=>{var e=[];for(var t in vt)vt.hasOwnProperty(t)&&e.push(vt[t]);return e},L=[],q=()=>{for(;L.length;){var e=L.pop();e.$$.deleteScheduled=!1,e.delete()}},le,Xe=e=>{le=e,L.length&&le&&le(q)},Ka=()=>{n.getInheritedInstanceCount=y,n.getLiveInheritedInstances=w,n.flushPendingDeletes=q,n.setDelayFunction=Xe},vt={},va=(e,t)=>{for(t===void 0&&ve("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},Qa=(e,t)=>(t=va(e,t),vt[t]),X=(e,t)=>{(!t.ptrType||!t.ptr)&&At("makeClassHandle requires ptr and ptrType");var r=!!t.smartPtrType,l=!!t.smartPtr;return r!==l&&At("Both smartPtrType and smartPtr must be specified"),t.count={value:1},We(Object.create(e,{$$:{value:t,writable:!0}}))};function ea(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=Qa(this.registeredClass,t);if(r!==void 0){if(r.$$.count.value===0)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var l=r.clone();return this.destructor(e),l}function p(){return this.isSmartPointer?X(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):X(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var h=this.registeredClass.getActualType(t),S=U[h];if(!S)return p.call(this);var _;this.isConst?_=S.constPointerType:_=S.pointerType;var k=fa(t,this.registeredClass,_.registeredClass);return k===null?p.call(this):this.isSmartPointer?X(_.registeredClass.instancePrototype,{ptrType:_,ptr:k,smartPtrType:this,smartPtr:e}):X(_.registeredClass.instancePrototype,{ptrType:_,ptr:k})}var We=e=>typeof FinalizationRegistry>"u"?(We=t=>t,e):(Ct=new FinalizationRegistry(t=>{ma(t.$$)}),We=t=>{var r=t.$$,l=!!r.smartPtr;if(l){var p={$$:r};Ct.register(t,p,t)}return t},Ca=t=>Ct.unregister(t),We(e)),me=()=>{Object.assign(Ke.prototype,{isAliasOf(e){if(!(this instanceof Ke)||!(e instanceof Ke))return!1;var t=this.$$.ptrType.registeredClass,r=this.$$.ptr;e.$$=e.$$;for(var l=e.$$.ptrType.registeredClass,p=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;l.baseClass;)p=l.upcast(p),l=l.baseClass;return t===l&&r===p},clone(){if(this.$$.ptr||ca(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=We(Object.create(Object.getPrototypeOf(this),{$$:{value:Ja(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||ca(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ve("Object already scheduled for deletion"),Ca(this),ma(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||ca(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ve("Object already scheduled for deletion"),L.push(this),L.length===1&&le&&le(q),this.$$.deleteScheduled=!0,this}})};function Ke(){}var Q=(e,t)=>Object.defineProperty(t,"name",{value:e}),pa=(e,t,r)=>{if(e[t].overloadTable===void 0){var l=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||ve(`Function '${r}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[l.argCount]=l}},It=(e,t,r)=>{n.hasOwnProperty(e)?((r===void 0||n[e].overloadTable!==void 0&&n[e].overloadTable[r]!==void 0)&&ve(`Cannot register public name '${e}' twice`),pa(n,e,e),n.hasOwnProperty(r)&&ve(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),n[e].overloadTable[r]=t):(n[e]=t,r!==void 0&&(n[e].numArguments=r))},Nt=48,K=57,ee=e=>{if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Nt&&t<=K?`_${e}`:e};function Ze(e,t,r,l,p,h,S,_){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=l,this.baseClass=p,this.getActualType=h,this.upcast=S,this.downcast=_,this.pureVirtualFunctions=[]}var Xa=(e,t,r)=>{for(;t!==r;)t.upcast||ve(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function so(e,t){if(t===null)return this.isReference&&ve(`null is not a valid ${this.name}`),0;t.$$||ve(`Cannot pass "${nn(t)}" as a ${this.name}`),t.$$.ptr||ve(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass,l=Xa(t.$$.ptr,r,this.registeredClass);return l}function uo(e,t){var r;if(t===null)return this.isReference&&ve(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,r),r):0;(!t||!t.$$)&&ve(`Cannot pass "${nn(t)}" as a ${this.name}`),t.$$.ptr||ve(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&ve(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var l=t.$$.ptrType.registeredClass;if(r=Xa(t.$$.ptr,l,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&ve("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:ve(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var p=t.clone();r=this.rawShare(r,wt.toHandle(()=>p.delete())),e!==null&&e.push(this.rawDestructor,r)}break;default:ve("Unsupporting sharing policy")}return r}function co(e,t){if(t===null)return this.isReference&&ve(`null is not a valid ${this.name}`),0;t.$$||ve(`Cannot pass "${nn(t)}" as a ${this.name}`),t.$$.ptr||ve(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&ve(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass,l=Xa(t.$$.ptr,r,this.registeredClass);return l}function En(e){return this.fromWireType(D[e>>2])}var mo=()=>{Object.assign(wa.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;(t=this.rawDestructor)===null||t===void 0||t.call(this,e)},argPackAdvance:nt,readValueFromPointer:En,deleteObject(e){e!==null&&e.delete()},fromWireType:ea})};function wa(e,t,r,l,p,h,S,_,k,$,j){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=l,this.isSmartPointer=p,this.pointeeType=h,this.sharingPolicy=S,this.rawGetPointee=_,this.rawConstructor=k,this.rawShare=$,this.rawDestructor=j,!p&&t.baseClass===void 0?l?(this.toWireType=so,this.destructorFunction=null):(this.toWireType=co,this.destructorFunction=null):this.toWireType=uo}var Cn=(e,t,r)=>{n.hasOwnProperty(e)||At("Replacing nonexistant public symbol"),n[e].overloadTable!==void 0&&r!==void 0?n[e].overloadTable[r]=t:(n[e]=t,n[e].argCount=r)},fo=(e,t,r)=>{var l=n["dynCall_"+e];return r&&r.length?l.apply(null,[t].concat(r)):l.call(null,t)},ka=[],In,De=e=>{var t=ka[e];return t||(e>=ka.length&&(ka.length=e+1),ka[e]=t=In.get(e)),t},vo=(e,t,r)=>{if(e.includes("j"))return fo(e,t,r);var l=De(t).apply(null,r);return l},po=(e,t)=>{var r=[];return function(){return r.length=0,Object.assign(r,arguments),vo(e,t,r)}},st=(e,t)=>{e=Me(e);function r(){return e.includes("j")?po(e,t):De(t)}var l=r();return typeof l!="function"&&ve(`unknown function pointer with signature ${e}: ${t}`),l},yo=(e,t)=>{var r=Q(t,function(l){this.name=t,this.message=l;var p=new Error(l).stack;p!==void 0&&(this.stack=this.toString()+`
`+p.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},r},wn,kn=e=>{var t=xn(e),r=Me(t);return kt(t),r},Ra=(e,t)=>{var r=[],l={};function p(h){if(!l[h]&&!Dt[h]){if(Zt[h]){Zt[h].forEach(p);return}r.push(h),l[h]=!0}}throw t.forEach(p),new wn(`${e}: `+r.map(kn).join([", "]))},go=(e,t,r,l,p,h,S,_,k,$,j,ae,re)=>{j=Me(j),h=st(p,h),_&&(_=st(S,_)),$&&($=st(k,$)),re=st(ae,re);var se=ee(j);It(se,function(){Ra(`Cannot construct ${j} due to unbound types`,[l])}),Et([e,t,r],l?[l]:[],function(_e){_e=_e[0];var Ce,Ue;l?(Ce=_e.registeredClass,Ue=Ce.instancePrototype):Ue=Ke.prototype;var xe=Q(j,function(){if(Object.getPrototypeOf(this)!==M)throw new Ft("Use 'new' to construct "+j);if(z.constructor_body===void 0)throw new Ft(j+" has no accessible constructor");var zn=z.constructor_body[arguments.length];if(zn===void 0)throw new Ft(`Tried to invoke ctor of ${j} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(z.constructor_body).toString()}) parameters instead!`);return zn.apply(this,arguments)}),M=Object.create(Ue,{constructor:{value:xe}});xe.prototype=M;var z=new Ze(j,xe,M,re,Ce,h,_,$);if(z.baseClass){var Ie,Fe;(Fe=(Ie=z.baseClass).__derivedClasses)!==null&&Fe!==void 0||(Ie.__derivedClasses=[]),z.baseClass.__derivedClasses.push(z)}var ta=new wa(j,z,!0,!1,!1),Va=new wa(j+"*",z,!1,!1,!1),qn=new wa(j+" const*",z,!1,!0,!1);return U[e]={pointerType:Va,constPointerType:qn},Cn(se,xe),[ta,Va,qn]})},Za=(e,t)=>{for(var r=[],l=0;l<e;l++)r.push(D[t+l*4>>2]);return r};function ho(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].destructorFunction===void 0)return!0;return!1}function en(e,t,r,l,p,h){var S=t.length;S<2&&ve("argTypes array size mismatch! Must at least get return value and 'this' types!");var _=t[1]!==null&&r!==null,k=ho(t),$=t[0].name!=="void",j=S-2,ae=new Array(j),re=[],se=[],_e=function(){arguments.length!==j&&ve(`function ${e} called with ${arguments.length} arguments, expected ${j}`),se.length=0;var Ce;re.length=_?2:1,re[0]=p,_&&(Ce=t[1].toWireType(se,this),re[1]=Ce);for(var Ue=0;Ue<j;++Ue)ae[Ue]=t[Ue+2].toWireType(se,arguments[Ue]),re.push(ae[Ue]);var xe=l.apply(null,re);function M(z){if(k)it(se);else for(var Ie=_?1:2;Ie<t.length;Ie++){var Fe=Ie===1?Ce:ae[Ie-2];t[Ie].destructorFunction!==null&&t[Ie].destructorFunction(Fe)}if($)return t[0].fromWireType(z)}return M(xe)};return Q(e,_e)}var Uo=(e,t,r,l,p,h)=>{var S=Za(t,r);p=st(l,p),Et([],[e],function(_){_=_[0];var k=`constructor ${_.name}`;if(_.registeredClass.constructor_body===void 0&&(_.registeredClass.constructor_body=[]),_.registeredClass.constructor_body[t-1]!==void 0)throw new Ft(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${_.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return _.registeredClass.constructor_body[t-1]=()=>{Ra(`Cannot construct ${_.name} due to unbound types`,S)},Et([],S,$=>($.splice(1,0,null),_.registeredClass.constructor_body[t-1]=en(k,$,null,p,h),[])),[]})},Rn=e=>{e=e.trim();const t=e.indexOf("(");return t!==-1?e.substr(0,t):e},To=(e,t,r,l,p,h,S,_,k)=>{var $=Za(r,l);t=Me(t),t=Rn(t),h=st(p,h),Et([],[e],function(j){j=j[0];var ae=`${j.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),_&&j.registeredClass.pureVirtualFunctions.push(t);function re(){Ra(`Cannot call ${ae} due to unbound types`,$)}var se=j.registeredClass.instancePrototype,_e=se[t];return _e===void 0||_e.overloadTable===void 0&&_e.className!==j.name&&_e.argCount===r-2?(re.argCount=r-2,re.className=j.name,se[t]=re):(pa(se,t,ae),se[t].overloadTable[r-2]=re),Et([],$,function(Ce){var Ue=en(ae,Ce,j,h,S);return se[t].overloadTable===void 0?(Ue.argCount=r-2,se[t]=Ue):se[t].overloadTable[r-2]=Ue,[]}),[]})};function bo(){Object.assign(On.prototype,{get(e){return this.allocated[e]},has(e){return this.allocated[e]!==void 0},allocate(e){var t=this.freelist.pop()||this.allocated.length;return this.allocated[t]=e,t},free(e){this.allocated[e]=void 0,this.freelist.push(e)}})}function On(){this.allocated=[void 0],this.freelist=[]}var rt=new On,tn=e=>{e>=rt.reserved&&--rt.get(e).refcount===0&&rt.free(e)},So=()=>{for(var e=0,t=rt.reserved;t<rt.allocated.length;++t)rt.allocated[t]!==void 0&&++e;return e},_o=()=>{rt.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),rt.reserved=rt.allocated.length,n.count_emval_handles=So},wt={toValue:e=>(e||ve("Cannot use deleted val. handle = "+e),rt.get(e).value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return rt.allocate({refcount:1,value:e})}}},Do=(e,t)=>{t=Me(t),at(e,{name:t,fromWireType:r=>{var l=wt.toValue(r);return tn(r),l},toWireType:(r,l)=>wt.toHandle(l),argPackAdvance:nt,readValueFromPointer:he,destructorFunction:null})},Ao=(e,t,r)=>{switch(t){case 1:return r?function(l){return this.fromWireType(te[l>>0])}:function(l){return this.fromWireType(x[l>>0])};case 2:return r?function(l){return this.fromWireType(W[l>>1])}:function(l){return this.fromWireType(O[l>>1])};case 4:return r?function(l){return this.fromWireType(B[l>>2])}:function(l){return this.fromWireType(D[l>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Eo=(e,t,r,l)=>{t=Me(t);function p(){}p.values={},at(e,{name:t,constructor:p,fromWireType:function(h){return this.constructor.values[h]},toWireType:(h,S)=>S.value,argPackAdvance:nt,readValueFromPointer:Ao(t,r,l),destructorFunction:null}),It(t,p)},an=(e,t)=>{var r=Dt[e];return r===void 0&&ve(t+" has unknown type "+kn(e)),r},Co=(e,t,r)=>{var l=an(e,"enum");t=Me(t);var p=l.constructor,h=Object.create(l.constructor.prototype,{value:{value:r},constructor:{value:Q(`${l.name}_${t}`,function(){})}});p.values[r]=h,p[t]=h},nn=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},Io=(e,t)=>{switch(t){case 4:return function(r){return this.fromWireType(oe[r>>2])};case 8:return function(r){return this.fromWireType(be[r>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},wo=(e,t,r)=>{t=Me(t),at(e,{name:t,fromWireType:l=>l,toWireType:(l,p)=>p,argPackAdvance:nt,readValueFromPointer:Io(t,r),destructorFunction:null})},ko=(e,t,r,l,p,h,S)=>{var _=Za(t,r);e=Me(e),e=Rn(e),p=st(l,p),It(e,function(){Ra(`Cannot call ${e} due to unbound types`,_)},t-1),Et([],_,function(k){var $=[k[0],null].concat(k.slice(1));return Cn(e,en(e,$,null,p,h),t-1),[]})},Ro=(e,t,r)=>{switch(t){case 1:return r?l=>te[l>>0]:l=>x[l>>0];case 2:return r?l=>W[l>>1]:l=>O[l>>1];case 4:return r?l=>B[l>>2]:l=>D[l>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Oo=(e,t,r,l,p)=>{t=Me(t);var h=j=>j;if(l===0){var S=32-8*r;h=j=>j<<S>>>S}var _=t.includes("unsigned"),k=(j,ae)=>{},$;_?$=function(j,ae){return k(ae,this.name),ae>>>0}:$=function(j,ae){return k(ae,this.name),ae},at(e,{name:t,fromWireType:h,toWireType:$,argPackAdvance:nt,readValueFromPointer:Ro(t,r,l!==0),destructorFunction:null})},Mo=(e,t,r)=>{var l=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],p=l[t];function h(S){var _=D[S>>2],k=D[S+4>>2];return new p(te.buffer,k,_)}r=Me(r),at(e,{name:r,fromWireType:h,argPackAdvance:nt,readValueFromPointer:h},{ignoreDuplicateRegistrations:!0})},Mn=(e,t,r,l)=>{if(!(l>0))return 0;for(var p=r,h=r+l-1,S=0;S<e.length;++S){var _=e.charCodeAt(S);if(_>=55296&&_<=57343){var k=e.charCodeAt(++S);_=65536+((_&1023)<<10)|k&1023}if(_<=127){if(r>=h)break;t[r++]=_}else if(_<=2047){if(r+1>=h)break;t[r++]=192|_>>6,t[r++]=128|_&63}else if(_<=65535){if(r+2>=h)break;t[r++]=224|_>>12,t[r++]=128|_>>6&63,t[r++]=128|_&63}else{if(r+3>=h)break;t[r++]=240|_>>18,t[r++]=128|_>>12&63,t[r++]=128|_>>6&63,t[r++]=128|_&63}}return t[r]=0,r-p},Vo=(e,t,r)=>Mn(e,x,t,r),Vn=e=>{for(var t=0,r=0;r<e.length;++r){var l=e.charCodeAt(r);l<=127?t++:l<=2047?t+=2:l>=55296&&l<=57343?(t+=4,++r):t+=3}return t},$n=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,$o=(e,t,r)=>{for(var l=t+r,p=t;e[p]&&!(p>=l);)++p;if(p-t>16&&e.buffer&&$n)return $n.decode(e.subarray(t,p));for(var h="";t<p;){var S=e[t++];if(!(S&128)){h+=String.fromCharCode(S);continue}var _=e[t++]&63;if((S&224)==192){h+=String.fromCharCode((S&31)<<6|_);continue}var k=e[t++]&63;if((S&240)==224?S=(S&15)<<12|_<<6|k:S=(S&7)<<18|_<<12|k<<6|e[t++]&63,S<65536)h+=String.fromCharCode(S);else{var $=S-65536;h+=String.fromCharCode(55296|$>>10,56320|$&1023)}}return h},rn=(e,t)=>e?$o(x,e,t):"",Po=(e,t)=>{t=Me(t);var r=t==="std::string";at(e,{name:t,fromWireType(l){var p=D[l>>2],h=l+4,S;if(r)for(var _=h,k=0;k<=p;++k){var $=h+k;if(k==p||x[$]==0){var j=$-_,ae=rn(_,j);S===void 0?S=ae:(S+="\0",S+=ae),_=$+1}}else{for(var re=new Array(p),k=0;k<p;++k)re[k]=String.fromCharCode(x[h+k]);S=re.join("")}return kt(l),S},toWireType(l,p){p instanceof ArrayBuffer&&(p=new Uint8Array(p));var h,S=typeof p=="string";S||p instanceof Uint8Array||p instanceof Uint8ClampedArray||p instanceof Int8Array||ve("Cannot pass non-string to std::string"),r&&S?h=Vn(p):h=p.length;var _=sn(4+h+1),k=_+4;if(D[_>>2]=h,r&&S)Vo(p,k,h+1);else if(S)for(var $=0;$<h;++$){var j=p.charCodeAt($);j>255&&(kt(k),ve("String has UTF-16 code units that do not fit in 8 bits")),x[k+$]=j}else for(var $=0;$<h;++$)x[k+$]=p[$];return l!==null&&l.push(kt,_),_},argPackAdvance:nt,readValueFromPointer:En,destructorFunction(l){kt(l)}})},Pn=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Lo=(e,t)=>{for(var r=e,l=r>>1,p=l+t/2;!(l>=p)&&O[l];)++l;if(r=l<<1,r-e>32&&Pn)return Pn.decode(x.subarray(e,r));for(var h="",S=0;!(S>=t/2);++S){var _=W[e+S*2>>1];if(_==0)break;h+=String.fromCharCode(_)}return h},Fo=(e,t,r)=>{var l;if((l=r)!==null&&l!==void 0||(r=2147483647),r<2)return 0;r-=2;for(var p=t,h=r<e.length*2?r/2:e.length,S=0;S<h;++S){var _=e.charCodeAt(S);W[t>>1]=_,t+=2}return W[t>>1]=0,t-p},No=e=>e.length*2,xo=(e,t)=>{for(var r=0,l="";!(r>=t/4);){var p=B[e+r*4>>2];if(p==0)break;if(++r,p>=65536){var h=p-65536;l+=String.fromCharCode(55296|h>>10,56320|h&1023)}else l+=String.fromCharCode(p)}return l},jo=(e,t,r)=>{var l;if((l=r)!==null&&l!==void 0||(r=2147483647),r<4)return 0;for(var p=t,h=p+r-4,S=0;S<e.length;++S){var _=e.charCodeAt(S);if(_>=55296&&_<=57343){var k=e.charCodeAt(++S);_=65536+((_&1023)<<10)|k&1023}if(B[t>>2]=_,t+=4,t+4>h)break}return B[t>>2]=0,t-p},Bo=e=>{for(var t=0,r=0;r<e.length;++r){var l=e.charCodeAt(r);l>=55296&&l<=57343&&++r,t+=4}return t},Yo=(e,t,r)=>{r=Me(r);var l,p,h,S,_;t===2?(l=Lo,p=Fo,S=No,h=()=>O,_=1):t===4&&(l=xo,p=jo,S=Bo,h=()=>D,_=2),at(e,{name:r,fromWireType:k=>{for(var $=D[k>>2],j=h(),ae,re=k+4,se=0;se<=$;++se){var _e=k+4+se*t;if(se==$||j[_e>>_]==0){var Ce=_e-re,Ue=l(re,Ce);ae===void 0?ae=Ue:(ae+="\0",ae+=Ue),re=_e+t}}return kt(k),ae},toWireType:(k,$)=>{typeof $!="string"&&ve(`Cannot pass non-string to C++ string type ${r}`);var j=S($),ae=sn(4+j+t);return D[ae>>2]=j>>_,p($,ae+4,j+t),k!==null&&k.push(kt,ae),ae},argPackAdvance:nt,readValueFromPointer:he,destructorFunction(k){kt(k)}})},Ho=(e,t,r,l,p,h)=>{Je[e]={name:Me(t),rawConstructor:st(r,l),rawDestructor:st(p,h),fields:[]}},Go=(e,t,r,l,p,h,S,_,k,$)=>{Je[e].fields.push({fieldName:Me(t),getterReturnType:r,getter:st(l,p),getterContext:h,setterArgumentType:S,setter:st(_,k),setterContext:$})},Wo=(e,t)=>{t=Me(t),at(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:(r,l)=>{}})},on=[],qo=(e,t,r,l)=>(e=on[e],t=wt.toValue(t),e(null,t,r,l)),zo={},Jo=e=>{var t=zo[e];return t===void 0?Me(e):t},Ln=()=>{if(typeof globalThis=="object")return globalThis;function e(t){t.$$$embind_global$$$=t;var r=typeof $$$embind_global$$$=="object"&&t.$$$embind_global$$$==t;return r||delete t.$$$embind_global$$$,r}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&e(global)?$$$embind_global$$$=global:typeof self=="object"&&e(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},Ko=e=>e===0?wt.toHandle(Ln()):(e=Jo(e),wt.toHandle(Ln()[e])),Qo=e=>{var t=on.length;return on.push(e),t},Xo=(e,t)=>{for(var r=new Array(e),l=0;l<e;++l)r[l]=an(D[t+l*4>>2],"parameter "+l);return r},Zo=Reflect.construct,el=(e,t,r)=>{var l=[],p=e.toWireType(l,r);return l.length&&(D[t>>2]=wt.toHandle(l)),p},tl=(e,t,r)=>{var l=Xo(e,t),p=l.shift();e--;var h=new Array(e),S=(k,$,j,ae)=>{for(var re=0,se=0;se<e;++se)h[se]=l[se].readValueFromPointer(ae+re),re+=l[se].argPackAdvance;for(var _e=r===1?Zo($,h):$.apply(k,h),se=0;se<e;++se){var Ce,Ue;(Ce=(Ue=l[se]).deleteObject)===null||Ce===void 0||Ce.call(Ue,h[se])}return el(p,j,_e)},_=`methodCaller<(${l.map(k=>k.name).join(", ")}) => ${p.name}>`;return Qo(Q(_,S))},al=e=>{e>4&&(rt.get(e).refcount+=1)},nl=e=>{var t=wt.toValue(e);it(t),tn(e)},rl=(e,t)=>{e=an(e,"_emval_take_value");var r=e.readValueFromPointer(t);return wt.toHandle(r)},ol=()=>{Oe("")},ll=(e,t,r)=>x.copyWithin(e,t,t+r),il=()=>2147483648,sl=e=>{var t=V.buffer,r=(e-t.byteLength+65535)/65536;try{return V.grow(r),P(),1}catch{}},ul=e=>{var t=x.length;e>>>=0;var r=il();if(e>r)return!1;for(var l=(k,$)=>k+($-k%$)%$,p=1;p<=4;p*=2){var h=t*(1+.2/p);h=Math.min(h,e+100663296);var S=Math.min(r,l(Math.max(e,h),65536)),_=sl(S);if(_)return!0}return!1},ln={},dl=()=>g||"./this.program",ya=()=>{if(!ya.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:dl()};for(var r in ln)ln[r]===void 0?delete t[r]:t[r]=ln[r];var l=[];for(var r in t)l.push(`${r}=${t[r]}`);ya.strings=l}return ya.strings},cl=(e,t)=>{for(var r=0;r<e.length;++r)te[t++>>0]=e.charCodeAt(r);te[t>>0]=0},ml=(e,t)=>{var r=0;return ya().forEach((l,p)=>{var h=t+r;D[e+p*4>>2]=h,cl(l,h),r+=l.length+1}),0},fl=(e,t)=>{var r=ya();D[e>>2]=r.length;var l=0;return r.forEach(p=>l+=p.length+1),D[t>>2]=l,0},vl=e=>e,Oa=e=>e%4===0&&(e%100!==0||e%400===0),pl=(e,t)=>{for(var r=0,l=0;l<=t;r+=e[l++]);return r},Fn=[31,29,31,30,31,30,31,31,30,31,30,31],Nn=[31,28,31,30,31,30,31,31,30,31,30,31],yl=(e,t)=>{for(var r=new Date(e.getTime());t>0;){var l=Oa(r.getFullYear()),p=r.getMonth(),h=(l?Fn:Nn)[p];if(t>h-r.getDate())t-=h-r.getDate()+1,r.setDate(1),p<11?r.setMonth(p+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1));else return r.setDate(r.getDate()+t),r}return r};function gl(e,t,r){var l=Vn(e)+1,p=new Array(l);return Mn(e,p,0,p.length),p}var hl=(e,t)=>{te.set(e,t)},Ul=(e,t,r,l)=>{var p=D[l+40>>2],h={tm_sec:B[l>>2],tm_min:B[l+4>>2],tm_hour:B[l+8>>2],tm_mday:B[l+12>>2],tm_mon:B[l+16>>2],tm_year:B[l+20>>2],tm_wday:B[l+24>>2],tm_yday:B[l+28>>2],tm_isdst:B[l+32>>2],tm_gmtoff:B[l+36>>2],tm_zone:p?rn(p):""},S=rn(r),_={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var k in _)S=S.replace(new RegExp(k,"g"),_[k]);var $=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],j=["January","February","March","April","May","June","July","August","September","October","November","December"];function ae(M,z,Ie){for(var Fe=typeof M=="number"?M.toString():M||"";Fe.length<z;)Fe=Ie[0]+Fe;return Fe}function re(M,z){return ae(M,z,"0")}function se(M,z){function Ie(ta){return ta<0?-1:ta>0?1:0}var Fe;return(Fe=Ie(M.getFullYear()-z.getFullYear()))===0&&(Fe=Ie(M.getMonth()-z.getMonth()))===0&&(Fe=Ie(M.getDate()-z.getDate())),Fe}function _e(M){switch(M.getDay()){case 0:return new Date(M.getFullYear()-1,11,29);case 1:return M;case 2:return new Date(M.getFullYear(),0,3);case 3:return new Date(M.getFullYear(),0,2);case 4:return new Date(M.getFullYear(),0,1);case 5:return new Date(M.getFullYear()-1,11,31);case 6:return new Date(M.getFullYear()-1,11,30)}}function Ce(M){var z=yl(new Date(M.tm_year+1900,0,1),M.tm_yday),Ie=new Date(z.getFullYear(),0,4),Fe=new Date(z.getFullYear()+1,0,4),ta=_e(Ie),Va=_e(Fe);return se(ta,z)<=0?se(Va,z)<=0?z.getFullYear()+1:z.getFullYear():z.getFullYear()-1}var Ue={"%a":M=>$[M.tm_wday].substring(0,3),"%A":M=>$[M.tm_wday],"%b":M=>j[M.tm_mon].substring(0,3),"%B":M=>j[M.tm_mon],"%C":M=>{var z=M.tm_year+1900;return re(z/100|0,2)},"%d":M=>re(M.tm_mday,2),"%e":M=>ae(M.tm_mday,2," "),"%g":M=>Ce(M).toString().substring(2),"%G":M=>Ce(M),"%H":M=>re(M.tm_hour,2),"%I":M=>{var z=M.tm_hour;return z==0?z=12:z>12&&(z-=12),re(z,2)},"%j":M=>re(M.tm_mday+pl(Oa(M.tm_year+1900)?Fn:Nn,M.tm_mon-1),3),"%m":M=>re(M.tm_mon+1,2),"%M":M=>re(M.tm_min,2),"%n":()=>`
`,"%p":M=>M.tm_hour>=0&&M.tm_hour<12?"AM":"PM","%S":M=>re(M.tm_sec,2),"%t":()=>"	","%u":M=>M.tm_wday||7,"%U":M=>{var z=M.tm_yday+7-M.tm_wday;return re(Math.floor(z/7),2)},"%V":M=>{var z=Math.floor((M.tm_yday+7-(M.tm_wday+6)%7)/7);if((M.tm_wday+371-M.tm_yday-2)%7<=2&&z++,z){if(z==53){var Ie=(M.tm_wday+371-M.tm_yday)%7;Ie!=4&&(Ie!=3||!Oa(M.tm_year))&&(z=1)}}else{z=52;var Fe=(M.tm_wday+7-M.tm_yday-1)%7;(Fe==4||Fe==5&&Oa(M.tm_year%400-1))&&z++}return re(z,2)},"%w":M=>M.tm_wday,"%W":M=>{var z=M.tm_yday+7-(M.tm_wday+6)%7;return re(Math.floor(z/7),2)},"%y":M=>(M.tm_year+1900).toString().substring(2),"%Y":M=>M.tm_year+1900,"%z":M=>{var z=M.tm_gmtoff,Ie=z>=0;return z=Math.abs(z)/60,z=z/60*100+z%60,(Ie?"+":"-")+("0000"+z).slice(-4)},"%Z":M=>M.tm_zone,"%%":()=>"%"};S=S.replace(/%%/g,"\0\0");for(var k in Ue)S.includes(k)&&(S=S.replace(new RegExp(k,"g"),Ue[k](h)));S=S.replace(/\0\0/g,"%");var xe=gl(S);return xe.length>t?0:(hl(xe,e),xe.length-1)},Tl=(e,t,r,l,p)=>Ul(e,t,r,l);Da=n.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},qa(),Ft=n.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},me(),Ka(),mo(),wn=n.UnboundTypeError=yo(Error,"UnboundTypeError"),bo(),_o();var bl={s:Kt,u:lt,b:Ha,g:Xt,q:_a,J:Ht,f:Pt,V:Ga,d:_t,da:Aa,Q:Wa,_:za,ca:go,ba:Uo,w:To,Y:Do,x:Eo,h:Co,L:wo,M:ko,t:Oo,o:Mo,K:Po,C:Yo,A:Ho,ea:Go,$:Wo,R:qo,ha:tn,fa:Ko,Z:tl,N:al,O:nl,aa:rl,B:ol,X:ll,W:ul,T:ml,U:fl,E:Ll,D:El,F:Pl,n:Fl,a:Sl,e:Il,m:Al,k:kl,H:Vl,v:Ol,G:$l,z:xl,P:Bl,l:wl,j:Cl,c:Dl,p:_l,I:Ml,r:Nl,i:Rl,y:jl,ga:vl,S:Tl},Re=Jt(),kt=n._free=e=>(kt=n._free=Re.ka)(e),sn=n._malloc=e=>(sn=n._malloc=Re.la)(e),xn=e=>(xn=Re.na)(e),Se=(e,t)=>(Se=Re.oa)(e,t),ga=e=>(ga=Re.pa)(e),Ae=()=>(Ae=Re.qa)(),Ee=e=>(Ee=Re.ra)(e),jn=e=>(jn=Re.sa)(e),Bn=e=>(Bn=Re.ta)(e),Yn=(e,t,r)=>(Yn=Re.ua)(e,t,r),Hn=e=>(Hn=Re.va)(e);n.dynCall_viijii=(e,t,r,l,p,h,S)=>(n.dynCall_viijii=Re.wa)(e,t,r,l,p,h,S);var Gn=n.dynCall_jiiii=(e,t,r,l,p)=>(Gn=n.dynCall_jiiii=Re.xa)(e,t,r,l,p);n.dynCall_iiiiij=(e,t,r,l,p,h,S)=>(n.dynCall_iiiiij=Re.ya)(e,t,r,l,p,h,S),n.dynCall_iiiiijj=(e,t,r,l,p,h,S,_,k)=>(n.dynCall_iiiiijj=Re.za)(e,t,r,l,p,h,S,_,k),n.dynCall_iiiiiijj=(e,t,r,l,p,h,S,_,k,$)=>(n.dynCall_iiiiiijj=Re.Aa)(e,t,r,l,p,h,S,_,k,$);function Sl(e,t){var r=Ae();try{return De(e)(t)}catch(l){if(Ee(r),l!==l+0)throw l;Se(1,0)}}function _l(e,t,r,l){var p=Ae();try{De(e)(t,r,l)}catch(h){if(Ee(p),h!==h+0)throw h;Se(1,0)}}function Dl(e,t,r){var l=Ae();try{De(e)(t,r)}catch(p){if(Ee(l),p!==p+0)throw p;Se(1,0)}}function Al(e,t,r,l){var p=Ae();try{return De(e)(t,r,l)}catch(h){if(Ee(p),h!==h+0)throw h;Se(1,0)}}function El(e,t,r,l,p){var h=Ae();try{return De(e)(t,r,l,p)}catch(S){if(Ee(h),S!==S+0)throw S;Se(1,0)}}function Cl(e,t){var r=Ae();try{De(e)(t)}catch(l){if(Ee(r),l!==l+0)throw l;Se(1,0)}}function Il(e,t,r){var l=Ae();try{return De(e)(t,r)}catch(p){if(Ee(l),p!==p+0)throw p;Se(1,0)}}function wl(e){var t=Ae();try{De(e)()}catch(r){if(Ee(t),r!==r+0)throw r;Se(1,0)}}function kl(e,t,r,l,p){var h=Ae();try{return De(e)(t,r,l,p)}catch(S){if(Ee(h),S!==S+0)throw S;Se(1,0)}}function Rl(e,t,r,l,p,h,S,_,k,$,j){var ae=Ae();try{De(e)(t,r,l,p,h,S,_,k,$,j)}catch(re){if(Ee(ae),re!==re+0)throw re;Se(1,0)}}function Ol(e,t,r,l,p,h,S){var _=Ae();try{return De(e)(t,r,l,p,h,S)}catch(k){if(Ee(_),k!==k+0)throw k;Se(1,0)}}function Ml(e,t,r,l,p){var h=Ae();try{De(e)(t,r,l,p)}catch(S){if(Ee(h),S!==S+0)throw S;Se(1,0)}}function Vl(e,t,r,l,p,h){var S=Ae();try{return De(e)(t,r,l,p,h)}catch(_){if(Ee(S),_!==_+0)throw _;Se(1,0)}}function $l(e,t,r,l,p,h,S,_){var k=Ae();try{return De(e)(t,r,l,p,h,S,_)}catch($){if(Ee(k),$!==$+0)throw $;Se(1,0)}}function Pl(e,t,r,l){var p=Ae();try{return De(e)(t,r,l)}catch(h){if(Ee(p),h!==h+0)throw h;Se(1,0)}}function Ll(e,t,r,l){var p=Ae();try{return De(e)(t,r,l)}catch(h){if(Ee(p),h!==h+0)throw h;Se(1,0)}}function Fl(e){var t=Ae();try{return De(e)()}catch(r){if(Ee(t),r!==r+0)throw r;Se(1,0)}}function Nl(e,t,r,l,p,h,S,_){var k=Ae();try{De(e)(t,r,l,p,h,S,_)}catch($){if(Ee(k),$!==$+0)throw $;Se(1,0)}}function xl(e,t,r,l,p,h,S,_,k,$,j,ae){var re=Ae();try{return De(e)(t,r,l,p,h,S,_,k,$,j,ae)}catch(se){if(Ee(re),se!==se+0)throw se;Se(1,0)}}function jl(e,t,r,l,p,h,S,_,k,$,j,ae,re,se,_e,Ce){var Ue=Ae();try{De(e)(t,r,l,p,h,S,_,k,$,j,ae,re,se,_e,Ce)}catch(xe){if(Ee(Ue),xe!==xe+0)throw xe;Se(1,0)}}function Bl(e,t,r,l,p){var h=Ae();try{return Gn(e,t,r,l,p)}catch(S){if(Ee(h),S!==S+0)throw S;Se(1,0)}}var Ma;tt=function e(){Ma||Wn(),Ma||(tt=e)};function Wn(){if(ke>0||(ye(),ke>0))return;function e(){Ma||(Ma=!0,n.calledRun=!0,!G&&(mt(),i(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),gt()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),e()},1)):e()}if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Wn(),o.ready}})();function Ru(a){return Dn(An,a)}async function Ou(a,o){return wu(An,a,o)}async function Mu(a,o){return ku(An,a,o)}var ha;class dn extends EventTarget{constructor(o={}){var n;super(),ou(this,ha,void 0);try{const i=(n=o==null?void 0:o.formats)==null?void 0:n.filter(m=>m!=="unknown");if((i==null?void 0:i.length)===0)throw new TypeError("Hint option provided, but is empty.");i==null||i.forEach(m=>{if(!Pa.has(m))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${m}' is not a valid enum value of type BarcodeFormat.`)}),lu(this,ha,i??[]),Ru().then(m=>{this.dispatchEvent(new CustomEvent("load",{detail:m}))}).catch(m=>{this.dispatchEvent(new CustomEvent("error",{detail:m}))})}catch(i){throw or(i,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return iu.filter(o=>o!=="unknown")}async detect(o){try{const n=await vu(o);if(n===null)return[];let i;try{Yr(n)?i=await Ou(n,{tryHarder:!0,formats:rr(this,ha).map(m=>Pa.get(m))}):i=await Mu(n,{tryHarder:!0,formats:rr(this,ha).map(m=>Pa.get(m))})}catch(m){throw console.error(m),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return i.map(m=>{const{topLeft:{x:v,y:g},topRight:{x:u,y:c},bottomLeft:{x:f,y:b},bottomRight:{x:T,y:E}}=m.position,I=Math.min(v,u,f,T),V=Math.min(g,c,b,E),G=Math.max(v,u,f,T),te=Math.max(g,c,b,E);return{boundingBox:new DOMRectReadOnly(I,V,G-I,te-V),rawValue:m.text,format:su(m.format),cornerPoints:[{x:v,y:g},{x:u,y:c},{x:T,y:E},{x:f,y:b}]}})}catch(n){throw or(n,"Failed to execute 'detect' on 'BarcodeDetector'")}}}ha=new WeakMap;const qr=(a,o,n="error")=>{let i,m;const v=new Promise((g,u)=>{i=g,m=u,a.addEventListener(o,i),a.addEventListener(n,m)});return v.finally(()=>{a.removeEventListener(o,i),a.removeEventListener(n,m)}),v},ur=a=>new Promise(o=>setTimeout(o,a));class zr extends Error{constructor(){super("this browser has no Stream API support"),this.name="StreamApiNotSupportedError"}}class Vu extends Error{constructor(){super("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."),this.name="InsecureContextError"}}class $u extends Error{constructor(){super("Loading camera stream timed out after 6 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"),this.name="StreamLoadTimeoutError"}}const Pu=a=>{let o=!1,n;return(...i)=>(o||(n=a(i),o=!0),n)};function pt(a,o){if(a===!1)throw new Error(o??"assertion failure")}function dr(a){throw new Error("this code should be unreachable")}function Lu(){return navigator.platform.toUpperCase().includes("MAC")}let Jr;async function Fu(a){if(window.BarcodeDetector===void 0)return console.debug("[vue-qrcode-reader] Native BarcodeDetector not supported. Will use polyfill."),new dn({formats:a});const o=await window.BarcodeDetector.getSupportedFormats(),n=a.filter(i=>!o.includes(i));return n.length>0?(console.debug(`[vue-qrcode-reader] Native BarcodeDetector does not support formats ${JSON.stringify(n)}. Will use polyfill.`),new dn({formats:a})):Lu()&&a.includes("pdf417")?(console.debug("[vue-qrcode-reader] Native BarcodeDetector is buggy for PDF417 codes on MacOS. Will use polyfill."),new dn({formats:a})):(console.debug("[vue-qrcode-reader] Will use native BarcodeDetector."),new window.BarcodeDetector({formats:a}))}async function Kr(a){Jr=await Fu(a)}const Nu=async(a,{detectHandler:o,locateHandler:n,minDelay:i,formats:m})=>{console.debug("[vue-qrcode-reader] start scanning"),await Kr(m);const v=g=>async u=>{if(a.readyState===0)console.debug("[vue-qrcode-reader] stop scanning: video element readyState is 0");else{const{lastScanned:c,contentBefore:f,lastScanHadContent:b}=g;if(u-c<i)window.requestAnimationFrame(v(g));else{const T=await Jr.detect(a),E=T.some(G=>!f.includes(G.rawValue));E&&o(T);const I=T.length>0;I&&n(T),!I&&b&&n(T);const V={lastScanned:u,lastScanHadContent:I,contentBefore:E?T.map(G=>G.rawValue):f};window.requestAnimationFrame(v(V))}}};v({lastScanned:performance.now(),contentBefore:[],lastScanHadContent:!1})(performance.now())};var Qr={},Qe={};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.compactObject=eo;Qe.deprecated=zu;var xu=Qe.detectBrowser=Ju;Qe.disableLog=Gu;Qe.disableWarnings=Wu;Qe.extractVersion=La;Qe.filterStats=Ku;Qe.log=qu;Qe.walkStats=Ba;Qe.wrapPeerConnectionEvent=Hu;function ju(a,o,n){return o=Bu(o),o in a?Object.defineProperty(a,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[o]=n,a}function Bu(a){var o=Yu(a,"string");return jt(o)==="symbol"?o:String(o)}function Yu(a,o){if(jt(a)!=="object"||a===null)return a;var n=a[Symbol.toPrimitive];if(n!==void 0){var i=n.call(a,o);if(jt(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(a)}function jt(a){"@babel/helpers - typeof";return jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},jt(a)}var Xr=!0,Zr=!0;function La(a,o,n){var i=a.match(o);return i&&i.length>=n&&parseInt(i[n],10)}function Hu(a,o,n){if(a.RTCPeerConnection){var i=a.RTCPeerConnection.prototype,m=i.addEventListener;i.addEventListener=function(g,u){if(g!==o)return m.apply(this,arguments);var c=function(f){var b=n(f);b&&(u.handleEvent?u.handleEvent(b):u(b))};return this._eventMap=this._eventMap||{},this._eventMap[o]||(this._eventMap[o]=new Map),this._eventMap[o].set(u,c),m.apply(this,[g,c])};var v=i.removeEventListener;i.removeEventListener=function(g,u){if(g!==o||!this._eventMap||!this._eventMap[o])return v.apply(this,arguments);if(!this._eventMap[o].has(u))return v.apply(this,arguments);var c=this._eventMap[o].get(u);return this._eventMap[o].delete(u),this._eventMap[o].size===0&&delete this._eventMap[o],Object.keys(this._eventMap).length===0&&delete this._eventMap,v.apply(this,[g,c])},Object.defineProperty(i,"on"+o,{get:function(){return this["_on"+o]},set:function(g){this["_on"+o]&&(this.removeEventListener(o,this["_on"+o]),delete this["_on"+o]),g&&this.addEventListener(o,this["_on"+o]=g)},enumerable:!0,configurable:!0})}}function Gu(a){return typeof a!="boolean"?new Error("Argument type: "+jt(a)+". Please use a boolean."):(Xr=a,a?"adapter.js logging disabled":"adapter.js logging enabled")}function Wu(a){return typeof a!="boolean"?new Error("Argument type: "+jt(a)+". Please use a boolean."):(Zr=!a,"adapter.js deprecation warnings "+(a?"disabled":"enabled"))}function qu(){if((typeof window>"u"?"undefined":jt(window))==="object"){if(Xr)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function zu(a,o){Zr&&console.warn(a+" is deprecated, please use "+o+" instead.")}function Ju(a){var o={browser:null,version:null};if(typeof a>"u"||!a.navigator||!a.navigator.userAgent)return o.browser="Not a browser.",o;var n=a.navigator;if(n.mozGetUserMedia)o.browser="firefox",o.version=La(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||a.isSecureContext===!1&&a.webkitRTCPeerConnection)o.browser="chrome",o.version=La(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(a.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))o.browser="safari",o.version=La(n.userAgent,/AppleWebKit\/(\d+)\./,1),o.supportsUnifiedPlan=a.RTCRtpTransceiver&&"currentDirection"in a.RTCRtpTransceiver.prototype;else return o.browser="Not a supported browser.",o;return o}function cr(a){return Object.prototype.toString.call(a)==="[object Object]"}function eo(a){return cr(a)?Object.keys(a).reduce(function(o,n){var i=cr(a[n]),m=i?eo(a[n]):a[n],v=i&&!Object.keys(m).length;return m===void 0||v?o:Object.assign(o,ju({},n,m))},{}):a}function Ba(a,o,n){!o||n.has(o.id)||(n.set(o.id,o),Object.keys(o).forEach(function(i){i.endsWith("Id")?Ba(a,a.get(o[i]),n):i.endsWith("Ids")&&o[i].forEach(function(m){Ba(a,a.get(m),n)})}))}function Ku(a,o,n){var i=n?"outbound-rtp":"inbound-rtp",m=new Map;if(o===null)return m;var v=[];return a.forEach(function(g){g.type==="track"&&g.trackIdentifier===o.id&&v.push(g)}),v.forEach(function(g){a.forEach(function(u){u.type===i&&u.trackId===g.id&&Ba(a,u,m)})}),m}Object.defineProperty(Qr,"__esModule",{value:!0});var Qu=Qr.shimGetUserMedia=ed,Xu=Zu(Qe);function to(a){if(typeof WeakMap!="function")return null;var o=new WeakMap,n=new WeakMap;return(to=function(i){return i?n:o})(a)}function Zu(a,o){if(a&&a.__esModule)return a;if(a===null||xt(a)!=="object"&&typeof a!="function")return{default:a};var n=to(o);if(n&&n.has(a))return n.get(a);var i={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in a)if(v!=="default"&&Object.prototype.hasOwnProperty.call(a,v)){var g=m?Object.getOwnPropertyDescriptor(a,v):null;g&&(g.get||g.set)?Object.defineProperty(i,v,g):i[v]=a[v]}return i.default=a,n&&n.set(a,i),i}function xt(a){"@babel/helpers - typeof";return xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},xt(a)}var mr=Xu.log;function ed(a,o){var n=a&&a.navigator;if(n.mediaDevices){var i=function(c){if(xt(c)!=="object"||c.mandatory||c.optional)return c;var f={};return Object.keys(c).forEach(function(b){if(!(b==="require"||b==="advanced"||b==="mediaSource")){var T=xt(c[b])==="object"?c[b]:{ideal:c[b]};T.exact!==void 0&&typeof T.exact=="number"&&(T.min=T.max=T.exact);var E=function(V,G){return V?V+G.charAt(0).toUpperCase()+G.slice(1):G==="deviceId"?"sourceId":G};if(T.ideal!==void 0){f.optional=f.optional||[];var I={};typeof T.ideal=="number"?(I[E("min",b)]=T.ideal,f.optional.push(I),I={},I[E("max",b)]=T.ideal,f.optional.push(I)):(I[E("",b)]=T.ideal,f.optional.push(I))}T.exact!==void 0&&typeof T.exact!="number"?(f.mandatory=f.mandatory||{},f.mandatory[E("",b)]=T.exact):["min","max"].forEach(function(V){T[V]!==void 0&&(f.mandatory=f.mandatory||{},f.mandatory[E(V,b)]=T[V])})}}),c.advanced&&(f.optional=(f.optional||[]).concat(c.advanced)),f},m=function(c,f){if(o.version>=61)return f(c);if(c=JSON.parse(JSON.stringify(c)),c&&xt(c.audio)==="object"){var b=function(V,G,te){G in V&&!(te in V)&&(V[te]=V[G],delete V[G])};c=JSON.parse(JSON.stringify(c)),b(c.audio,"autoGainControl","googAutoGainControl"),b(c.audio,"noiseSuppression","googNoiseSuppression"),c.audio=i(c.audio)}if(c&&xt(c.video)==="object"){var T=c.video.facingMode;T=T&&(xt(T)==="object"?T:{ideal:T});var E=o.version<66;if(T&&(T.exact==="user"||T.exact==="environment"||T.ideal==="user"||T.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!E)){delete c.video.facingMode;var I;if(T.exact==="environment"||T.ideal==="environment"?I=["back","rear"]:(T.exact==="user"||T.ideal==="user")&&(I=["front"]),I)return n.mediaDevices.enumerateDevices().then(function(V){V=V.filter(function(te){return te.kind==="videoinput"});var G=V.find(function(te){return I.some(function(x){return te.label.toLowerCase().includes(x)})});return!G&&V.length&&I.includes("back")&&(G=V[V.length-1]),G&&(c.video.deviceId=T.exact?{exact:G.deviceId}:{ideal:G.deviceId}),c.video=i(c.video),mr("chrome: "+JSON.stringify(c)),f(c)})}c.video=i(c.video)}return mr("chrome: "+JSON.stringify(c)),f(c)},v=function(c){return o.version>=64?c:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[c.name]||c.name,message:c.message,constraint:c.constraint||c.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},g=function(c,f,b){m(c,function(T){n.webkitGetUserMedia(T,f,function(E){b&&b(v(E))})})};if(n.getUserMedia=g.bind(n),n.mediaDevices.getUserMedia){var u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return m(c,function(f){return u(f).then(function(b){if(f.audio&&!b.getAudioTracks().length||f.video&&!b.getVideoTracks().length)throw b.getTracks().forEach(function(T){T.stop()}),new DOMException("","NotFoundError");return b},function(b){return Promise.reject(v(b))})})}}}}var ao={};Object.defineProperty(ao,"__esModule",{value:!0});var td=ao.shimGetUserMedia=rd,ad=nd(Qe);function no(a){if(typeof WeakMap!="function")return null;var o=new WeakMap,n=new WeakMap;return(no=function(i){return i?n:o})(a)}function nd(a,o){if(a&&a.__esModule)return a;if(a===null||oa(a)!=="object"&&typeof a!="function")return{default:a};var n=no(o);if(n&&n.has(a))return n.get(a);var i={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in a)if(v!=="default"&&Object.prototype.hasOwnProperty.call(a,v)){var g=m?Object.getOwnPropertyDescriptor(a,v):null;g&&(g.get||g.set)?Object.defineProperty(i,v,g):i[v]=a[v]}return i.default=a,n&&n.set(a,i),i}function oa(a){"@babel/helpers - typeof";return oa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},oa(a)}function rd(a,o){var n=a&&a.navigator,i=a&&a.MediaStreamTrack;if(n.getUserMedia=function(c,f,b){ad.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(c).then(f,b)},!(o.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var m=function(c,f,b){f in c&&!(b in c)&&(c[b]=c[f],delete c[f])},v=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(c){return oa(c)==="object"&&oa(c.audio)==="object"&&(c=JSON.parse(JSON.stringify(c)),m(c.audio,"autoGainControl","mozAutoGainControl"),m(c.audio,"noiseSuppression","mozNoiseSuppression")),v(c)},i&&i.prototype.getSettings){var g=i.prototype.getSettings;i.prototype.getSettings=function(){var c=g.apply(this,arguments);return m(c,"mozAutoGainControl","autoGainControl"),m(c,"mozNoiseSuppression","noiseSuppression"),c}}if(i&&i.prototype.applyConstraints){var u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(c){return this.kind==="audio"&&oa(c)==="object"&&(c=JSON.parse(JSON.stringify(c)),m(c,"autoGainControl","mozAutoGainControl"),m(c,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[c])}}}}var yt={};Object.defineProperty(yt,"__esModule",{value:!0});yt.shimAudioContext=vd;yt.shimCallbacksAPI=ud;yt.shimConstraints=lo;yt.shimCreateOfferLegacy=fd;var od=yt.shimGetUserMedia=dd;yt.shimLocalStreamsAPI=id;yt.shimRTCIceServerUrls=cd;yt.shimRemoteStreamsAPI=sd;yt.shimTrackEventTransceiver=md;var ro=ld(Qe);function oo(a){if(typeof WeakMap!="function")return null;var o=new WeakMap,n=new WeakMap;return(oo=function(i){return i?n:o})(a)}function ld(a,o){if(a&&a.__esModule)return a;if(a===null||Bt(a)!=="object"&&typeof a!="function")return{default:a};var n=oo(o);if(n&&n.has(a))return n.get(a);var i={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in a)if(v!=="default"&&Object.prototype.hasOwnProperty.call(a,v)){var g=m?Object.getOwnPropertyDescriptor(a,v):null;g&&(g.get||g.set)?Object.defineProperty(i,v,g):i[v]=a[v]}return i.default=a,n&&n.set(a,i),i}function Bt(a){"@babel/helpers - typeof";return Bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Bt(a)}function id(a){if(!(Bt(a)!=="object"||!a.RTCPeerConnection)){if("getLocalStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in a.RTCPeerConnection.prototype)){var o=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addStream=function(n){var i=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(function(m){return o.call(i,m,n)}),n.getVideoTracks().forEach(function(m){return o.call(i,m,n)})},a.RTCPeerConnection.prototype.addTrack=function(n){for(var i=this,m=arguments.length,v=new Array(m>1?m-1:0),g=1;g<m;g++)v[g-1]=arguments[g];return v&&v.forEach(function(u){i._localStreams?i._localStreams.includes(u)||i._localStreams.push(u):i._localStreams=[u]}),o.apply(this,arguments)}}"removeStream"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.removeStream=function(n){var i=this;this._localStreams||(this._localStreams=[]);var m=this._localStreams.indexOf(n);if(m!==-1){this._localStreams.splice(m,1);var v=n.getTracks();this.getSenders().forEach(function(g){v.includes(g.track)&&i.removeTrack(g)})}})}}function sd(a){if(!(Bt(a)!=="object"||!a.RTCPeerConnection)&&("getRemoteStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in a.RTCPeerConnection.prototype))){Object.defineProperty(a.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(n){var i=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=function(m){m.streams.forEach(function(v){if(i._remoteStreams||(i._remoteStreams=[]),!i._remoteStreams.includes(v)){i._remoteStreams.push(v);var g=new Event("addstream");g.stream=v,i.dispatchEvent(g)}})})}});var o=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(function(m){if(n._remoteStreams||(n._remoteStreams=[]),!(n._remoteStreams.indexOf(m)>=0)){n._remoteStreams.push(m);var v=new Event("addstream");v.stream=m,n.dispatchEvent(v)}})}),o.apply(n,arguments)}}}function ud(a){if(!(Bt(a)!=="object"||!a.RTCPeerConnection)){var o=a.RTCPeerConnection.prototype,n=o.createOffer,i=o.createAnswer,m=o.setLocalDescription,v=o.setRemoteDescription,g=o.addIceCandidate;o.createOffer=function(c,f){var b=arguments.length>=2?arguments[2]:arguments[0],T=n.apply(this,[b]);return f?(T.then(c,f),Promise.resolve()):T},o.createAnswer=function(c,f){var b=arguments.length>=2?arguments[2]:arguments[0],T=i.apply(this,[b]);return f?(T.then(c,f),Promise.resolve()):T};var u=function(c,f,b){var T=m.apply(this,[c]);return b?(T.then(f,b),Promise.resolve()):T};o.setLocalDescription=u,u=function(c,f,b){var T=v.apply(this,[c]);return b?(T.then(f,b),Promise.resolve()):T},o.setRemoteDescription=u,u=function(c,f,b){var T=g.apply(this,[c]);return b?(T.then(f,b),Promise.resolve()):T},o.addIceCandidate=u}}function dd(a){var o=a&&a.navigator;if(o.mediaDevices&&o.mediaDevices.getUserMedia){var n=o.mediaDevices,i=n.getUserMedia.bind(n);o.mediaDevices.getUserMedia=function(m){return i(lo(m))}}!o.getUserMedia&&o.mediaDevices&&o.mediaDevices.getUserMedia&&(o.getUserMedia=(function(m,v,g){o.mediaDevices.getUserMedia(m).then(v,g)}).bind(o))}function lo(a){return a&&a.video!==void 0?Object.assign({},a,{video:ro.compactObject(a.video)}):a}function cd(a){if(a.RTCPeerConnection){var o=a.RTCPeerConnection;a.RTCPeerConnection=function(n,i){if(n&&n.iceServers){for(var m=[],v=0;v<n.iceServers.length;v++){var g=n.iceServers[v];g.urls===void 0&&g.url?(ro.deprecated("RTCIceServer.url","RTCIceServer.urls"),g=JSON.parse(JSON.stringify(g)),g.urls=g.url,delete g.url,m.push(g)):m.push(n.iceServers[v])}n.iceServers=m}return new o(n,i)},a.RTCPeerConnection.prototype=o.prototype,"generateCertificate"in o&&Object.defineProperty(a.RTCPeerConnection,"generateCertificate",{get:function(){return o.generateCertificate}})}}function md(a){Bt(a)==="object"&&a.RTCTrackEvent&&"receiver"in a.RTCTrackEvent.prototype&&!("transceiver"in a.RTCTrackEvent.prototype)&&Object.defineProperty(a.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function fd(a){var o=a.RTCPeerConnection.prototype.createOffer;a.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);var i=this.getTransceivers().find(function(v){return v.receiver.track.kind==="audio"});n.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):n.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);var m=this.getTransceivers().find(function(v){return v.receiver.track.kind==="video"});n.offerToReceiveVideo===!1&&m?m.direction==="sendrecv"?m.setDirection?m.setDirection("sendonly"):m.direction="sendonly":m.direction==="recvonly"&&(m.setDirection?m.setDirection("inactive"):m.direction="inactive"):n.offerToReceiveVideo===!0&&!m&&this.addTransceiver("video",{direction:"recvonly"})}return o.apply(this,arguments)}}function vd(a){Bt(a)!=="object"||a.AudioContext||(a.AudioContext=a.webkitAudioContext)}const pd=Pu(()=>{const a=xu(window);switch(a.browser){case"chrome":Qu(window,a);break;case"firefox":td(window,a);break;case"safari":od(window,a);break;default:throw new zr}});let la=Promise.resolve({type:"stop",data:{}});async function fr(a,o,n){var i,m,v;if(console.debug("[vue-qrcode-reader] starting camera with constraints: ",JSON.stringify(o)),window.isSecureContext!==!0)throw new Vu;if(((i=navigator==null?void 0:navigator.mediaDevices)==null?void 0:i.getUserMedia)===void 0)throw new zr;pd(),console.debug("[vue-qrcode-reader] calling getUserMedia");const g=await navigator.mediaDevices.getUserMedia({audio:!1,video:o});a.srcObject!==void 0?a.srcObject=g:a.mozSrcObject!==void 0?a.mozSrcObject=g:window.URL.createObjectURL?a.src=window.URL.createObjectURL(g):window.webkitURL?a.src=window.webkitURL.createObjectURL(g):a.src=g.id,a.play(),console.debug("[vue-qrcode-reader] waiting for video element to load"),await Promise.race([qr(a,"loadeddata"),ur(6e3).then(()=>{throw new $u})]),console.debug("[vue-qrcode-reader] video element loaded"),await ur(500);const[u]=g.getVideoTracks(),c=(v=(m=u==null?void 0:u.getCapabilities)==null?void 0:m.call(u))!=null?v:{};let f=!1;return n&&c.torch&&(await u.applyConstraints({advanced:[{torch:!0}]}),f=!0),console.debug("[vue-qrcode-reader] camera ready"),{type:"start",data:{videoEl:a,stream:g,capabilities:c,constraints:o,isTorchOn:f}}}async function yd(a,{constraints:o,torch:n,restart:i=!1}){la=la.then(v=>{if(v.type==="start"){const{data:{videoEl:g,stream:u,constraints:c,isTorchOn:f}}=v;return!i&&a===g&&o===c&&n===f?v:io(g,u,f).then(()=>fr(a,o,n))}else if(v.type==="stop"||v.type==="failed")return fr(a,o,n);dr()}).catch(v=>(console.debug(`[vue-qrcode-reader] starting camera failed with "${v}"`),{type:"failed",error:v}));const m=await la;if(m.type==="stop")throw new Error("Something went wrong with the camera task queue (start task).");if(m.type==="failed")throw m.error;if(m.type==="start")return m.data.capabilities;dr()}async function io(a,o,n){console.debug("[vue-qrcode-reader] stopping camera"),a.src="",a.srcObject=null,a.load(),await qr(a,"error");for(const i of o.getTracks())n!=null||await i.applyConstraints({advanced:[{torch:!1}]}),o.removeTrack(i),i.stop();return{type:"stop",data:{}}}async function $a(){if(la=la.then(a=>{if(a.type==="stop"||a.type==="failed")return a;const{data:{videoEl:o,stream:n,isTorchOn:i}}=a;return io(o,n,i)}),(await la).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")}const gd=je({__name:"QrcodeStream",props:{constraints:{default:()=>({facingMode:"environment"})},formats:{default:()=>["qr_code"]},paused:{type:Boolean,default:!1},torch:{type:Boolean,default:!1},track:{type:Function,default:void 0}},emits:["detect","camera-on","camera-off","error"],setup(a,{emit:o}){const n=a,i=o,m=R(n.constraints),v=R(n.formats);qe(()=>n.constraints,(O,B)=>{JSON.stringify(O)!==JSON.stringify(B)&&(m.value=O)},{deep:!0}),qe(()=>n.formats,(O,B)=>{JSON.stringify(O)!==JSON.stringify(B)&&(v.value=O)},{deep:!0});const g=R(),u=R(),c=R(),f=R(!1),b=R(!1);gr(()=>{b.value=!0}),zl(()=>{$a()});const T=ra(()=>({torch:n.torch,constraints:m.value,shouldStream:b.value&&!n.paused}));qe(T,async O=>{const B=c.value;pt(B!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined.");const D=g.value;pt(D!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined.");const oe=D.getContext("2d");if(pt(oe!==null,"if cavnas is defined, canvas 2d context should also be non-null"),O.shouldStream){$a(),f.value=!1;try{const be=await yd(B,O);b.value?(f.value=!0,i("camera-on",be)):await $a()}catch(be){i("error",be)}}else D.width=B.videoWidth,D.height=B.videoHeight,oe.drawImage(B,0,0,B.videoWidth,B.videoHeight),$a(),f.value=!1,i("camera-off")},{deep:!0}),qe(v,async O=>{b.value&&await Kr(O)});const E=ra(()=>T.value.shouldStream&&f.value);qe(E,O=>{if(O){pt(g.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"),I(g.value),pt(u.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"),I(u.value);const B=()=>n.track===void 0?500:40;pt(c.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"),Nu(c.value,{detectHandler:D=>i("detect",D),formats:v.value,locateHandler:V,minDelay:B()})}});const I=O=>{const B=O.getContext("2d");pt(B!==null,"canvas 2d context should always be non-null"),B.clearRect(0,0,O.width,O.height)},V=O=>{const B=u.value;pt(B!==void 0,"onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined.");const D=c.value;if(pt(D!==void 0,"onLocate handler should only be called when component is mounted. Thus video element is always defined."),O.length===0||n.track===void 0)I(B);else{const oe=D.offsetWidth,be=D.offsetHeight,P=D.videoWidth,C=D.videoHeight,H=Math.max(oe/P,be/C),ce=P*H,ye=C*H,mt=ce/P,gt=ye/C,Pe=(oe-ce)/2,ht=(be-ye)/2,ot=({x:Be,y:Oe})=>({x:Math.floor(Be*mt),y:Math.floor(Oe*gt)}),ke=({x:Be,y:Oe})=>({x:Math.floor(Be+Pe),y:Math.floor(Oe+ht)}),tt=O.map(Be=>{const{boundingBox:Oe,cornerPoints:Mt}=Be,{x:Ut,y:Ge}=ke(ot({x:Oe.x,y:Oe.y})),{x:qt,y:Vt}=ot({x:Oe.width,y:Oe.height});return{...Be,cornerPoints:Mt.map(Tt=>ke(ot(Tt))),boundingBox:DOMRectReadOnly.fromRect({x:Ut,y:Ge,width:qt,height:Vt})}});B.width=D.offsetWidth,B.height=D.offsetHeight;const ft=B.getContext("2d");pt(ft!==null,"canvas 2d context should always be non-null"),n.track(tt,ft)}},G={width:"100%",height:"100%",position:"relative","z-index":"0"},te={width:"100%",height:"100%",position:"absolute",top:"0",left:"0"},x={width:"100%",height:"100%","object-fit":"cover"},W=ra(()=>E.value?x:{...x,visibility:"hidden",position:"absolute"});return(O,B)=>(A(),J("div",{style:G},[ue("video",{ref_key:"videoRef",ref:c,style:Kl(W.value),autoplay:"",muted:"",playsinline:""},null,4),Jl(ue("canvas",{id:"qrcode-stream-pause-frame",ref_key:"pauseFrameRef",ref:g,style:x},null,512),[[Ql,!E.value]]),ue("canvas",{id:"qrcode-stream-tracking-layer",ref_key:"trackingLayerRef",ref:u,style:te},null,512),ue("div",{style:te},[Xl(O.$slots,"default")])]))}}),hd=je({__name:"QRCodeReader",emits:["scan"],setup(a,{emit:o}){const n=o,i=Zl("inputBox"),m=R("keyboard"),v=R({facingMode:"environment"}),g=[{label:"Rear Camera",constraints:{facingMode:"environment"}},{label:"Front Camera",constraints:{facingMode:"user"}}],u=R(g),c=R({aztec:!0,code_128:!0,code_39:!0,code_93:!0,codabar:!0,databar:!0,databar_expanded:!0,data_matrix:!0,dx_film_edge:!0,ean_13:!0,ean_8:!0,itf:!0,maxi_code:!0,micro_qr_code:!0,pdf417:!0,qr_code:!0,rm_qr_code:!0,upc_a:!0,upc_e:!0,linear_codes:!0,matrix_codes:!0}),f=V=>{V.length>=1&&n("scan",V[0].rawValue)},b=async()=>{const G=(await navigator.mediaDevices.enumerateDevices()).filter(({kind:te})=>te==="videoinput");u.value=[...g,...G.map(({deviceId:te,label:x})=>({label:`${x}`,constraints:{deviceId:te}}))]},T=ra(()=>Object.keys(c.value).filter(V=>c.value[V])),E=R(""),I=V=>{V.key==="Enter"?(n("scan",E.value),E.value=""):V.key.length===1&&(E.value+=V.key)};return pr(()=>{window.removeEventListener("keydown",I)}),window.addEventListener("keydown",I),gr(()=>{i.value&&i.value.focus()}),(V,G)=>m.value==="keyboard"?(A(),J(fe,{key:0},[ue("input",{ref_key:"inputBox",ref:i,type:"text",class:"opacity-0 w-0 h-0"},null,512),s(ge,null,{default:d(()=>[s(Y,{class:"text-center"},{default:d(()=>[s(Sn,{icon:"mdi:mdi-qrcode-scan",size:"150"})]),_:1})]),_:1}),s(ge,null,{default:d(()=>[E.value?(A(),N(Y,{key:0,class:"text-center"},{default:d(()=>[Z(ie(E.value),1)]),_:1})):(A(),N(Y,{key:1,class:"text-center"},{default:d(()=>G[3]||(G[3]=[ue("small",null,"(Awaiting Input)",-1)])),_:1}))]),_:1}),s(ge,null,{default:d(()=>[s(Y,{class:"text-center"},{default:d(()=>[s(de,{onClick:G[0]||(G[0]=te=>m.value="camera"),color:"primary"},{default:d(()=>G[4]||(G[4]=[Z(" Use Camera ")])),_:1})]),_:1})]),_:1})],64)):m.value==="camera"?(A(),J(fe,{key:1},[s(ge,null,{default:d(()=>[s(Y,{class:"text-center"},{default:d(()=>[s(F(gd),{onDetect:f,onCameraOn:b,constraints:v.value,formats:T.value,style:{"max-width":"400px"}},null,8,["constraints","formats"])]),_:1})]),_:1}),s(ge,null,{default:d(()=>[s(Y,null,{default:d(()=>[s(Te,{modelValue:v.value,"onUpdate:modelValue":G[1]||(G[1]=te=>v.value=te),items:u.value,"item-title":"label","item-value":"constraints",label:"Select Camera","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1}),s(ge,null,{default:d(()=>[s(Y,{class:"text-center"},{default:d(()=>[s(de,{onClick:G[2]||(G[2]=te=>m.value="keyboard"),color:"primary"},{default:d(()=>G[5]||(G[5]=[Z(" Cancel ")])),_:1})]),_:1})]),_:1})],64)):ne("",!0)}});function Ud(a){return new Promise((o,n)=>{var v;if(!a.target.files||a.target.files.length==0){n("No files selected");return}const i=(v=a.target)==null?void 0:v.files[0],m=new FileReader;m.onload=g=>{var f;const c=((f=g.target)==null?void 0:f.result).split(/[\s,\n\r]+/);o(c.filter(b=>b.length>0).sort((b,T)=>{const E=Number(b),I=Number(T),V=!isNaN(E),G=!isNaN(I);return V&&G?E-I:b.localeCompare(T,void 0,{numeric:!0,sensitivity:"base"})}).join(`
`))},m.readAsText(i)})}const vr=je({__name:"MultiRegistrationInput",props:{modelValue:{},modelModifiers:{}},emits:$e(["change","input","click:clear"],["update:modelValue"]),setup(a,{emit:o}){const n=R(!1),i=R(""),m=o,v=ze(a,"modelValue"),g=()=>v.value?mn.isArray(v.value)?v.value.length>1?"List":v.value[0]:mn.isString(v.value)?v.value:"":"",u=R(g());qe(v,()=>{u.value=g()});const c=async E=>{i.value=await Ud(E)},f=E=>{n.value=!1,v.value=i.value.split(`
`),u.value="List",m("input",E)},b=E=>{v.value=u.value,m("input",E)},T=E=>{v.value="",u.value=g(),m("click:clear",E)};return(E,I)=>(A(),J("div",null,[s(Ne,gn({modelValue:u.value,"onUpdate:modelValue":I[0]||(I[0]=V=>u.value=V)},E.$attrs,{"append-inner-icon":"mdi:mdi-clipboard-list-outline","onClick:appendInner":I[1]||(I[1]=V=>n.value=!0),"onClick:clear":T,onInput:b}),null,16,["modelValue"]),s(ja,{modelValue:n.value,"onUpdate:modelValue":I[5]||(I[5]=V=>n.value=V)},{default:d(()=>[s(Wt,{class:"rounded-xl"},{default:d(()=>[s(ba,null,{default:d(()=>[s(Sa,{class:"d-flex justify-space-between align-center"},{default:d(()=>[I[6]||(I[6]=ue("div",{class:"text-h5 text-medium-emphasis"}," Registration Number List ",-1)),s(de,{icon:"mdi:mdi-close",variant:"text",onClick:I[2]||(I[2]=V=>n.value=!1)})]),_:1}),s(Ir,null,{default:d(()=>I[7]||(I[7]=[Z("Provide a list of registration numbers, you may also upload a file of numbers.")])),_:1})]),_:1}),s(sa,{color:"white"},{default:d(()=>[s(Or,{modelValue:i.value,"onUpdate:modelValue":I[3]||(I[3]=V=>i.value=V),label:"Registration Numbers"},null,8,["modelValue"]),s(Yi,{label:"File Upload",onChange:c})]),_:1}),s(_n,null,{default:d(()=>[s(de,{onClick:I[4]||(I[4]=V=>i.value="")},{default:d(()=>I[8]||(I[8]=[Z("Clear")])),_:1}),s(na),s(de,{onClick:f},{default:d(()=>I[9]||(I[9]=[Z("Apply")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),Td=["colspan"],Vc=je({__name:"RegistrationsView",emits:["pageTitle"],async setup(a,{emit:o}){var Ia,ma,fa;let n,i;const m=Di(),{getConvention:v}=Vi();o("pageTitle","Registration Manager");const u=ei(),c=yr(),f=R(!1);let b=((Ia=u.params.convention)==null?void 0:Ia.toString())||"";const T=R();T.value=([n,i]=Jn(()=>v()),n=await n,i(),n);const E=Yt(),I=Fa.getInstance(),{getLinkedFields:V}=Ii(),G=R([]),te=R({ID:0,AdminLayoutUUID:Ot(),ConventionID:((ma=T.value)==null?void 0:ma.ID)||0,ConventionUUID:((fa=T.value)==null?void 0:fa.ConventionUUID)||et,Name:"Registration Table",RunnerLayoutUUID:et,Type:ut.ADMIN_LAYOUT_TABLE,Panels:[]}),x=R([]),W=R([]),O=R([]),B=R([]),D=R([]),oe=R([]),be=R(1),P=R(10),C=R([]),H=R(0),ce=R([]),ye=R(!1),mt=R(!1),gt=R(!1),Pe=R(""),ht=R(""),ot=R(""),ke=R("");R("");const tt=R(""),ft=R(""),Be=([n,i]=Jn(()=>{var U;return V(((U=T.value)==null?void 0:U.ConventionUUID)||et)}),n=await n,i(),n),Oe=R({FieldUUID:Be.badge_name||et,Value:""}),Mt=R({FieldUUID:Be.forename||et,Value:""}),Ut=R({FieldUUID:Be.surname||et,Value:""}),Ge=R({FieldUUID:Be.dob||et,Value:""}),qt=R(new Map([[Be.badge_name||et,Oe.value],[Be.forename||et,Mt.value],[Be.surname||et,Ut.value],[Be.dob||et,Ge.value]])),Vt=R(""),Tt=R(""),zt=R([]),Jt=R([]),$t=R([]),bt=R([]),St=R([]),Kt=R([]),He=R([]),lt=R(0),Le=R(),_t=R(!1),Qt=R(!1),Ha=R(!1),Xt=R(),_a=R(),Ht=R(),Pt=R(!1),Ga=Ya(),Je=R(""),it=R(!1);R(!1);const he=Xn(()=>{Je.value="";const U=oe.value.find(y=>y.uuid===Pe.value);U&&U.challenge||(ht.value=Date.now().toString())}),Lt=Xn(()=>{it.value=!1,ht.value=Date.now().toString()});qe(Pe,U=>{const y=oe.value.find(w=>w.uuid===U);if(y){const w=y.headers.find(L=>L.defaultSort===!0);w&&(C.value=[{key:w.key,order:"asc"}],zt.value=[{key:w.key,order:"asc"}]),y.challenge&&(y.items=[])}At({page:1,itemsPerPage:P.value,sortBy:zt.value})}),qe(lt,U=>{U===8&&Aa()}),qe(Vt,()=>{he()}),qe(Tt,()=>{he()});const Dt=()=>{if(x.value=[],O.value=[],B.value=[],oe.value=[],!!T.value){try{E.getConventionAdminLayoutByName(T.value.ConventionUUID,"Registration Table").then(U=>{if(lt.value+=1,U)te.value=U;else{if(!T.value)return;te.value.ConventionID=T.value.ID,te.value.ConventionUUID=T.value.ConventionUUID}})}catch{te.value.ConventionID=T.value.ID,te.value.ConventionUUID=T.value.ConventionUUID}try{E.getConventionAdminLayouts(T.value.ConventionUUID).then(U=>{lt.value+=1,U&&(U.forEach(y=>{y.Panels.sort((w,L)=>w.Order>L.Order?1:w.Order===L.Order?0:-1),y.Panels.forEach(w=>{w.Items.sort((L,q)=>L.Order>q.Order?1:L.Order===q.Order?0:-1)})}),O.value=U)})}catch{}try{E.getConventionForms(T.value.ConventionUUID).then(U=>{lt.value+=1,U&&(x.value=U)})}catch{}try{E.getConventionAccommodation(T.value.ConventionUUID).then(U=>{lt.value+=1,U&&(Jt.value=U)})}catch{}try{E.getConventionVenues(T.value.ConventionUUID).then(U=>{lt.value+=1,U&&(Kt.value=U)})}catch{}try{E.getConventionExtras(T.value.ConventionUUID).then(U=>{lt.value+=1,U&&($t.value=U)})}catch{}try{E.getConventionInterests(T.value.ConventionUUID).then(U=>{lt.value+=1,U&&(bt.value=U)})}catch{}try{E.getConventionTickets(T.value.ConventionUUID).then(U=>{lt.value+=1,U&&(St.value=U)})}catch{}try{E.getConventionGroups(T.value.ConventionUUID).then(U=>{U&&(W.value=U.sort((y,w)=>y.Name.localeCompare(w.Name)))})}catch{}try{E.getConventionTags(T.value.ConventionUUID).then(U=>{U&&(D.value=U.sort((y,w)=>y.Title.localeCompare(w.Title)).map(y=>(y.Title=`${y.Title} [${y.Key}]`,y)))})}catch{}}},Zt=(U,y,w,L,q)=>{const le={Direction:L,Limit:w,Offset:(y-1)*w,Order:q};return U&&(le.PanelUUID=U==null?void 0:U.layout.LayoutPanelUUID),(U==null?void 0:U.layout.RequiredFormType)===we.FORM_TYPE_ADDITIONAL&&(le.Additional=!0),(U==null?void 0:U.layout.RequiredFormType)===we.FORM_TYPE_ADMIN&&(le.AdminForm=!0),(U==null?void 0:U.layout.RequiredFormType)===we.FORM_TYPE_ACCOMMODATION&&(le.Accommodation=!0),(U==null?void 0:U.layout.RequiredFormType)===we.FORM_TYPE_BADGE&&(le.Badge=!0),(U==null?void 0:U.layout.RequiredFormType)===we.FORM_TYPE_DEALER&&(le.Dealer=!0),(U==null?void 0:U.layout.RequiredFormType)===we.FORM_TYPE_REGISTRATION&&(le.Registration=!0),le.GroupUUID=Vt.value||et,le.TagUUID=Tt.value||et,le.Email=tt.value,mn.isArray(ke.value)?le.Reference=ke.value:ke.value.length?le.Reference=[ke.value]:le.Reference=[],ot.value&&(le.RegistrationUUID=ot.value),ft.value&&(le.BadgeSerialNumber=ft.value),le.FieldValues=Array.from(qt.value.values()),le},Da=(U,y)=>{let w="",L="";const q=y==null?void 0:y.layout.Items;if(U&&q&&U.length>=1){const le=q.find(Xe=>Xe.LayoutItemUUID==U[0].key);switch(L=U[0].order||"asc",le==null?void 0:le.MetaField){case pe.META_DATA_SOURCE_ACCOMMODATION_FORM:w="submission.status";break;case pe.META_DATA_SOURCE_ADDITIONAL_FORM:w="submission.status";break;case pe.META_DATA_SOURCE_ADMIN_FORM:w="submission.status";break;case pe.META_DATA_SOURCE_BADGE_FORM:w="submission.status";break;case pe.META_DATA_SOURCE_DEALER_FORM:w="submission.status";break;case pe.META_DATA_SOURCE_REGISTRATION_FORM:w="submission.status";break;case pe.META_DATA_SOURCE_REGISTRATION_REFERENCE:w="reference";break;case pe.META_DATA_SOURCE_SUBMISSION_DATE:w="created";break;case pe.META_DATA_SOURCE_SUBMISSION_STATUS:w="submission.status";break}switch(le==null?void 0:le.UserField){case Ve.USER_DATA_SOURCE_DISPLAY_NAME:w="user.display_name";break;case Ve.USER_DATA_SOURCE_EMAIL:w="user.email";break;case Ve.USER_DATA_SOURCE_FIRST_NAME:w="user.firstname";break;case Ve.USER_DATA_SOURCE_HANDLE:w="user.handle";break;case Ve.USER_DATA_SOURCE_LAST_NAME:w="user.lastname";break}}return{sortByStr:w,directionStr:L}},At=({page:U,itemsPerPage:y,sortBy:w})=>{if(!T.value)return;be.value=U,C.value=w;const L=oe.value.find(Xe=>Xe.uuid==Pe.value);if(L&&L.challenge&&Je.value.trim().length<3)return;f.value=!0;let{sortByStr:q,directionStr:le}=Da(w,L);try{const Xe=Zt(L,U,y,le,q);ot.value="",ft.value="";const Ka=ht.value;E.searchConventionRegistrations(T.value.ConventionUUID,Xe,Je.value).then(vt=>{vt&&Ka===ht.value&&(H.value=vt.Total,B.value=vt.Registrations,ce.value=vt.IDs,oe.value.forEach(va=>{const Qa=va.layout;va.items=B.value.map(X=>{const ea=[];let We;X.Leader?We=X:We=X.Primary,ea.push({Name:We.User.DisplayName,UUID:We.UserUUID,UserUUID:We.User.UserUUID,IsLeader:!0,Reference:We.Reference,Paid:We.Paid,Total:We.Total}),ea.push(...We.Members.map(Ke=>({Name:Ke.User.DisplayName,UUID:Ke.UserUUID,UserUUID:Ke.User.UserUUID,IsLeader:!1,Reference:Ke.Reference,Paid:Ke.Paid,Total:Ke.Total})));const me={};return va.headers.forEach(Ke=>{var pa;const Q=Qa.Items.find(It=>It.LayoutItemUUID===Ke.key);if(Q){if(Q.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&Q.SectionField)X.Submissions.forEach(It=>{const Nt=It.Data.find(K=>K.SectionFieldUUID===Q.SectionFieldUUID);if(Nt){Ke.type===hr.ACCOMMODATION?me[Q.LayoutItemUUID]={Data:Nt.Data,Registration:X}:me[Q.LayoutItemUUID]=Nt.Data;return}});else if(Q.SourceType==="LAYOUT_ITEM_SOURCE_USER"&&Q.UserField)switch(Q.UserField){case Ve.USER_DATA_SOURCE_AVATAR:me[Q.LayoutItemUUID]=m.GetProfileImageURL(X.UserUUID);break;case Ve.USER_DATA_SOURCE_CONTACTS:me[Q.LayoutItemUUID]={},X.User.Generated&&X.User.Generated.telegram_handle&&(me[Q.LayoutItemUUID].telegram=`@${X.User.Generated.telegram_handle}`),me[Q.LayoutItemUUID].email=X.User.Additional.Email;break;case Ve.USER_DATA_SOURCE_DISPLAY_NAME:me[Q.LayoutItemUUID]=X.User.DisplayName;break;case Ve.USER_DATA_SOURCE_EMAIL:me[Q.LayoutItemUUID]=X.User.Additional.Email;break;case Ve.USER_DATA_SOURCE_HANDLE:me[Q.LayoutItemUUID]=X.User.Handle;break;case Ve.USER_DATA_SOURCE_DATE_OF_BIRTH:me[Q.LayoutItemUUID]=X.User.Additional.DOB;break;case Ve.USER_DATA_SOURCE_FIRST_NAME:me[Q.LayoutItemUUID]=X.User.Additional.FirstName;break;case Ve.USER_DATA_SOURCE_LAST_NAME:me[Q.LayoutItemUUID]=X.User.Additional.LastName;break;case Ve.USER_DATA_SOURCE_TELEGRAM:X.User.Generated&&X.User.Generated.telegram_handle?me[Q.LayoutItemUUID]=`@${X.User.Generated.telegram_handle}`:me[Q.LayoutItemUUID]="";break}else if(Q.SourceType==="LAYOUT_ITEM_SOURCE_META"&&Q.MetaField){const It=(pa=x.value.find(K=>K.Type===we.FORM_TYPE_REGISTRATION))==null?void 0:pa.FormUUID,Nt=X.Submissions.find(K=>K.FormUUID===It);switch(Q.MetaField){case pe.META_DATA_SOURCE_REGISTRATION_ACTIONS:me[Q.LayoutItemUUID]=X;break;case pe.META_DATA_SOURCE_REGISTRATION_GROUP:me[Q.LayoutItemUUID]=ea;break;case pe.META_DATA_SOURCE_REGISTRATION_REFERENCE:me[Q.LayoutItemUUID]=X.Reference;break;case pe.META_DATA_SOURCE_SUBMISSION_DATE:if(Nt){const K=new Date(Nt.CreatedAt||"");me[Q.LayoutItemUUID]=`${K.getFullYear()}-${(K.getMonth()+1).toString().padStart(2,"0")}-${K.getDate().toString().padStart(2,"0")} ${K.getHours().toString().padStart(2,"0")}:${K.getMinutes().toString().padStart(2,"0")}:${K.getSeconds().toString().padStart(2,"0")}`}else{const K=new Date(X.CreatedAt||"");me[Q.LayoutItemUUID]=`${K.getFullYear()}-${(K.getMonth()+1).toString().padStart(2,"0")}-${K.getDate().toString().padStart(2,"0")} ${K.getHours().toString().padStart(2,"0")}:${K.getMinutes().toString().padStart(2,"0")}:${K.getSeconds().toString().padStart(2,"0")}`}break;case pe.META_DATA_SOURCE_ACCOMMODATION_FORM:me[Q.LayoutItemUUID]=X.Submissions.map(K=>{const ee=x.value.find(Ze=>Ze.FormUUID===K.FormUUID);return{Heading:ee==null?void 0:ee.Heading,Form:ee,Submission:K,Registration:X}}).filter(K=>{var ee;return((ee=K.Form)==null?void 0:ee.Type)===we.FORM_TYPE_ACCOMMODATION});break;case pe.META_DATA_SOURCE_ADMIN_FORM:me[Q.LayoutItemUUID]=X.Submissions.map(K=>{const ee=x.value.find(Ze=>Ze.FormUUID===K.FormUUID);return{Heading:ee==null?void 0:ee.Heading,Form:ee,Submission:K,Registration:X}}).filter(K=>{var ee;return((ee=K.Form)==null?void 0:ee.Type)===we.FORM_TYPE_ADMIN});break;case pe.META_DATA_SOURCE_ADDITIONAL_FORM:me[Q.LayoutItemUUID]=X.Submissions.map(K=>{const ee=x.value.find(Ze=>Ze.FormUUID===K.FormUUID);return{Heading:ee==null?void 0:ee.Heading,Form:ee,Submission:K,Registration:X}}).filter(K=>{var ee;return((ee=K.Form)==null?void 0:ee.Type)===we.FORM_TYPE_ADDITIONAL});break;case pe.META_DATA_SOURCE_BADGE_FORM:me[Q.LayoutItemUUID]=X.Submissions.map(K=>{const ee=x.value.find(Ze=>Ze.FormUUID===K.FormUUID);return{Heading:ee==null?void 0:ee.Heading,Form:ee,Submission:K,Registration:X}}).filter(K=>{var ee;return((ee=K.Form)==null?void 0:ee.Type)===we.FORM_TYPE_BADGE});break;case pe.META_DATA_SOURCE_DEALER_FORM:me[Q.LayoutItemUUID]=X.Submissions.map(K=>{const ee=x.value.find(Ze=>Ze.FormUUID===K.FormUUID);return{Heading:ee==null?void 0:ee.Heading,Form:ee,Submission:K,Registration:X}}).filter(K=>{var ee;return((ee=K.Form)==null?void 0:ee.Type)===we.FORM_TYPE_DEALER});break;case pe.META_DATA_SOURCE_PAYMENT_STATUS:if(X.Paid===0&&X.Total)me[Q.LayoutItemUUID]="REQUIRED";else if(X.Total>X.Paid)me[Q.LayoutItemUUID]="ADDITIONAL_REQUIRED";else{const K=ea.find(ee=>ee.Paid===0&&(ee.Total||0)>0);if(K){X.Total===0&&K.Total===0?me[Q.LayoutItemUUID]="NOT_REQUIRED":X.Total>0&&K.Total===0?me[Q.LayoutItemUUID]="MISSING_REQUIRED":X.Paid>=X.Total?me[Q.LayoutItemUUID]="AWAITING_PARTNER":me[Q.LayoutItemUUID]="ALL_REQUIRED";break}else X.Total===0?me[Q.LayoutItemUUID]="NOT_REQUIRED":me[Q.LayoutItemUUID]="COMPLETE"}break;case pe.META_DATA_SOURCE_SUBMISSION_STATUS:_i(X.Submissions,x.value),me[Q.LayoutItemUUID]=X.Submissions.map(K=>{const ee=x.value.find(Ze=>Ze.FormUUID===K.FormUUID);return{Heading:ee==null?void 0:ee.Heading,Form:ee,Submission:K,Registration:X}});break;case pe.META_DATA_SOURCE_DATA_LAYOUT:me[Q.LayoutItemUUID]={Registration:X,Layouts:O.value.filter(K=>{if(Q.Meta&&Q.Meta.LayoutUUID&&Array.isArray(Q.Meta.LayoutUUID))return Q.Meta.LayoutUUID.includes(K.AdminLayoutUUID)})};break}}}}),{key:X.RegistrationUUID,registration:X,...me}})}),f.value=!1)})}catch{}},Et=U=>{ye.value=!1,U&&(te.value=U,Aa())},Aa=()=>{Mr(te.value.Panels,x.value),te.value.Panels.length>0&&(oe.value=[],te.value.Panels.forEach(U=>{const y={uuid:Ot(),order:U.Order,name:U.Name,headers:[],items:[],layout:U,challenge:U.Meta&&!!U.Meta.challenge};U.Items.sort((w,L)=>w.Order>L.Order?1:w.Order==L.Order?0:-1),y.headers=U.Items.filter(w=>w.SourceType!=Rt.LAYOUT_ITEM_SOURCE_META||w.MetaField!=pe.META_DATA_SOURCE_REGISTRATION_TOOLS_DROP).map(w=>{var L,q;return{key:w.LayoutItemUUID,title:w.Label||((q=(L=w.SectionField)==null?void 0:L.Field)==null?void 0:q.Label)||"",align:w.Align==="end"?"end":"start",sortable:Ea(w),type:Wa(w),defaultSort:w.DefaultSort,meta:w.Meta}}),oe.value.push(y)}),oe.value=oe.value.sort((U,y)=>U.order>y.order?1:U.order==y.order?0:-1)),(Pe.value==null||Pe.value=="")&&oe.value.length>0&&(Pe.value=oe.value[0].uuid)};b?E.getConvention(b).then(U=>{U&&(T.value=U,te.value.ConventionID=T.value.ID,te.value.ConventionUUID=T.value.ConventionUUID,Dt())}).catch(()=>{c.push("/")}):c.push("/");const Wa=U=>{var y,w;if(U.SourceType===Rt.LAYOUT_ITEM_SOURCE_META)return`${U.SourceType}.${U.MetaField}`;if(U.SourceType===Rt.LAYOUT_ITEM_SOURCE_FORM)return(w=(y=U.SectionField)==null?void 0:y.Field)==null?void 0:w.Type;if(U.SourceType===Rt.LAYOUT_ITEM_SOURCE_USER)return`${U.SourceType}.${U.UserField}`},qa=()=>{const U=oe.value.find(y=>y.uuid===Pe.value);return U?!!U.layout.Items.find(y=>y.SourceType==Rt.LAYOUT_ITEM_SOURCE_META&&y.MetaField==pe.META_DATA_SOURCE_REGISTRATION_TOOLS_DROP):!1},Ea=U=>{const y=[pe.META_DATA_SOURCE_ACCOMMODATION_FORM,pe.META_DATA_SOURCE_BADGE_FORM,pe.META_DATA_SOURCE_DEALER_FORM,pe.META_DATA_SOURCE_REGISTRATION_FORM,pe.META_DATA_SOURCE_REGISTRATION_REFERENCE,pe.META_DATA_SOURCE_SUBMISSION_DATE,pe.META_DATA_SOURCE_SUBMISSION_STATUS],w=[Ve.USER_DATA_SOURCE_DISPLAY_NAME,Ve.USER_DATA_SOURCE_EMAIL,Ve.USER_DATA_SOURCE_HANDLE,Ve.USER_DATA_SOURCE_DATE_OF_BIRTH,Ve.USER_DATA_SOURCE_FIRST_NAME,Ve.USER_DATA_SOURCE_LAST_NAME];return y.includes(U.MetaField)||w.includes(U.UserField)},Me=U=>{Le.value=U,_t.value=!0},Ft=U=>{Le.value=U,Qt.value=!0},ve=U=>{Le.value=U,Ha.value=!0};qe(_t,U=>{U||(Le.value=void 0)}),qe(Qt,U=>{U||(Le.value=void 0)});const da=async(U="")=>{_a.value=await E.getRegistrationGroup(U)},at=({registration:U,form:y})=>{const w={FormUUID:y.FormUUID,Limit:1,RegistrationUUID:U.RegistrationUUID};switch(y.Type){case we.FORM_TYPE_ACCOMMODATION:w.Accommodation=!0;break;case we.FORM_TYPE_ADDITIONAL:w.Additional=!0;break;case we.FORM_TYPE_ADMIN:w.AdminForm=!0;break;case we.FORM_TYPE_BADGE:w.Badge=!0;break;case we.FORM_TYPE_DEALER:w.Dealer=!0;break;case we.FORM_TYPE_REGISTRATION:w.Registration=!0;break}E.searchConventionRegistrations(U.ConventionUUID,w).then(L=>{if(L&&L.Total>0){if(Le.value=L.Registrations[0],!Le.value)return;da(U.RegistrationUUID).then(()=>{var q,le;Le.value&&((q=Le.value)!=null&&q.Submissions)&&(Ht.value=(le=Le.value)==null?void 0:le.Submissions.find(Xe=>Xe.FormUUID===y.FormUUID)),Ht.value||(Ht.value=nt(y,U)),Xt.value=y,Pt.value=!0})}})},nt=(U,y)=>({ID:0,SubmissionUUID:Ot(),FormID:U.ID,FormUUID:U.FormUUID,Form:U,UserID:y.UserID,UserUUID:y.UserUUID,RegistrationID:y.ID,RegistrationUUID:y.RegistrationUUID,Registration:y,Data:[],Status:Ui.SUBMISSION_STATUS_NULL}),za=U=>{Ct(),ft.value=U,gt.value=!1;const y=oe.value.find(w=>w.uuid===Pe.value);y&&y.challenge?it.value=!0:he()},Ja=U=>{E.switchUser(U.UserUUID).then(y=>{y&&Ri(y.tokens,y.user,c,!1)}).catch(y=>{console.error(y)})},ca=U=>{Wi(U)?(Ct(),ot.value=U,mt.value=!1,he()):isNaN(parseInt(U))||(Ct(),ke.value=U,mt.value=!1,he())},Ct=()=>{ft.value="",ot.value="",ke.value="",Oe.value.Value="",tt.value="",Mt.value.Value="",Ut.value.Value="",Ge.value.Value=""},Ca=()=>{He.value=ce.value};return I.on("registration.group.leave",U=>{E.leaveRegistrationGroup(U).then(y=>{y&&da(U).then(()=>{I.emit("registration.group.left",y)})})}),I.on("registration.group.remove.member",U=>{E.leaveRegistrationGroup(U).then(y=>{y&&da(U).then(()=>{I.emit("registration.group.left",y)})})}),I.on("checkin-saved",()=>{Ct()}),(U,y)=>T.value?(A(),N(Zn,{key:0},{default:d(()=>[s(er,{color:"blue-darken-4"},{default:d(()=>[s(_r,{modelValue:Pe.value,"onUpdate:modelValue":y[0]||(y[0]=w=>Pe.value=w),"show-arrows":""},{default:d(()=>[(A(!0),J(fe,null,Ye(oe.value,w=>(A(),N(Dr,{key:w.uuid,value:w.uuid},{default:d(()=>[Z(ie(w.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),s(na),s(au),s(de,{icon:"mdi:mdi-cog-outline",onClick:y[1]||(y[1]=w=>ye.value=!0)})]),_:1}),s(Ar,{modelValue:Pe.value,"onUpdate:modelValue":y[32]||(y[32]=w=>Pe.value=w),disabled:!0,touch:!1},{default:d(()=>[(A(!0),J(fe,null,Ye(oe.value,w=>(A(),N(Gt,{key:w.uuid,value:w.uuid},{default:d(()=>[w.uuid===Pe.value?(A(),N(Wt,{key:0,class:"pa-2"},{default:d(()=>[s(Oi,{modelValue:He.value,"onUpdate:modelValue":y[25]||(y[25]=L=>He.value=L),expanded:G.value,"onUpdate:expanded":y[26]||(y[26]=L=>G.value=L),page:be.value,"onUpdate:page":y[27]||(y[27]=L=>be.value=L),"items-per-page":P.value,"onUpdate:itemsPerPage":y[28]||(y[28]=L=>P.value=L),"sort-by":zt.value,"onUpdate:sortBy":y[29]||(y[29]=L=>zt.value=L),headers:w.headers,"items-length":H.value,items:w.items,"item-value":"key",loading:f.value,search:ht.value,"onUpdate:options":At,"show-expand":qa(),"show-select":""},xa({top:d(()=>[s(Rr,{class:"mb-3"},{default:d(()=>[s(vn,null,{default:d(()=>[s(pn,{color:"secondary",class:"font-weight-bold pb-0 pt-0"},{default:d(()=>{var L;return[s(Y,{class:"py-0 pl-0 pr-2 text-left flex-grow-0 flex-shrink-1 text-no-wrap"},{default:d(()=>[y[45]||(y[45]=Z(" Search Criteria ")),s(Sn,{class:"pl-5",icon:"mdi:mdi-credit-card-search-outline"})]),_:1}),s(Y,{class:"d-none d-sm-block py-0 px-2 flex-grow-1 flex-sm-grow-0",sm:"3",md:"2"},{default:d(()=>[s(vr,{modelValue:ke.value,"onUpdate:modelValue":y[2]||(y[2]=q=>ke.value=q),label:"Badge No.",clearable:!0,"hide-details":"",variant:"plain",onClick:y[3]||(y[3]=dt(()=>{},["stop"])),"onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{class:"d-none d-md-block py-0 px-2",md:"3"},{default:d(()=>[s(Ne,{modelValue:Oe.value.Value,"onUpdate:modelValue":y[4]||(y[4]=q=>Oe.value.Value=q),label:"Furry Name",clearable:!0,"hide-details":"",variant:"plain",onClick:y[5]||(y[5]=dt(()=>{},["stop"])),"onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{class:"d-none d-md-block py-0 px-2",md:"3"},{default:d(()=>[s(Ne,{modelValue:Ge.value.Value,"onUpdate:modelValue":y[6]||(y[6]=q=>Ge.value.Value=q),type:"date",label:"Date of Birth",clearable:!0,"hide-details":"",variant:"plain","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(na,{class:"d-none d-sm-block"}),s(de,{icon:"mdi:mdi-eraser",variant:"text",title:"Clear Primary Search Values",onClick:y[7]||(y[7]=dt(q=>{Ct(),F(he)()},["stop"]))}),s(de,{icon:"mdi:mdi-nfc",variant:"text",title:"Scan NFC Badge (not iPhone)",onClick:y[8]||(y[8]=dt(q=>gt.value=!0,["stop"]))}),s(de,{icon:"mdi:mdi-qrcode-scan",variant:"text",title:"Scan Code",onClick:y[9]||(y[9]=dt(q=>mt.value=!0,["stop"]))}),(L=oe.value.find(q=>q.uuid===Pe.value))!=null&&L.challenge?(A(),N(de,{key:0,icon:"mdi:mdi-magnify",variant:"text",title:"Search",onClick:y[10]||(y[10]=dt(q=>{Je.value="",it.value=!0},["stop"]))})):ne("",!0)]}),_:1}),s(yn,{class:"pt-2"},{default:d(()=>{var L;return[s(ge,null,{default:d(()=>[s(Y,{cols:"12",sm:"6",md:"3",lg:"2",xl:"1"},{default:d(()=>[s(vr,{modelValue:ke.value,"onUpdate:modelValue":y[11]||(y[11]=q=>ke.value=q),label:"Badge No.",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{cols:"12",sm:"6",md:"4",lg:"5",xl:"2"},{default:d(()=>[s(Ne,{modelValue:Oe.value.Value,"onUpdate:modelValue":y[12]||(y[12]=q=>Oe.value.Value=q),label:"Furry Name",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{cols:"12",sm:"12",md:"5",lg:"5",xl:"3"},{default:d(()=>[s(Ne,{modelValue:tt.value,"onUpdate:modelValue":y[13]||(y[13]=q=>tt.value=q),label:"E-mail",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{cols:"12",sm:"6",md:"4",lg:"4",xl:"2"},{default:d(()=>[s(Ne,{modelValue:Mt.value.Value,"onUpdate:modelValue":y[14]||(y[14]=q=>Mt.value.Value=q),label:"Legal Forename",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{cols:"12",sm:"6",md:"4",lg:"4",xl:"2"},{default:d(()=>[s(Ne,{modelValue:Ut.value.Value,"onUpdate:modelValue":y[15]||(y[15]=q=>Ut.value.Value=q),label:"Legal Surname",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{cols:"12",sm:"12",md:"4",lg:"4",xl:"2"},{default:d(()=>[s(Ne,{modelValue:Ge.value.Value,"onUpdate:modelValue":y[16]||(y[16]=q=>Ge.value.Value=q),type:"date",label:"Date of Birth",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":F(he),onInput:F(he)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Y,{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"},{default:d(()=>[s(Te,{modelValue:Vt.value,"onUpdate:modelValue":y[17]||(y[17]=q=>Vt.value=q),label:"Permission Groups",clearable:!0,"hide-details":"",variant:"outlined",items:W.value,"item-value":"GroupUUID","item-title":"Name"},null,8,["modelValue","items"])]),_:1}),s(Y,{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"},{default:d(()=>[s(Te,{modelValue:Tt.value,"onUpdate:modelValue":y[18]||(y[18]=q=>Tt.value=q),label:"Tags",clearable:!0,"hide-details":"",variant:"outlined",items:D.value,"item-value":"TagUUID","item-title":"Title"},null,8,["modelValue","items"])]),_:1})]),_:1}),(L=oe.value.find(q=>q.uuid===Pe.value))!=null&&L.challenge?(A(),N(ge,{key:0},{default:d(()=>[s(Y,{class:"text-right"},{default:d(()=>[s(de,{"prepend-icon":"mdi:mdi-magnify",title:"Search",color:"success",onClick:y[19]||(y[19]=dt(q=>{Je.value="",it.value=!0},["stop"]))},{default:d(()=>y[46]||(y[46]=[Z(" Run Search ")])),_:1})]),_:1})]),_:1})):ne("",!0)]}),_:1})]),_:1})]),_:1})]),"expanded-row":d(({columns:L,internalItem:q})=>[ue("tr",null,[ue("td",{colspan:L.length},[s(nr,{modelValue:_t.value,"onUpdate:modelValue":y[21]||(y[21]=le=>_t.value=le),registration:q.raw.registration,"onUpdate:registration":le=>q.raw.registration=le,accommodations:Jt.value,convention:T.value,extras:$t.value,forms:x.value,interests:bt.value,tickets:St.value,title:`Registration Controls (#${q.raw.registration.Reference} ${q.raw.registration.User.DisplayName})`,"use-dialog":!1,venues:Kt.value,style:{"max-width":"calc(100vw - 48px)"},class:"ml-auto mr-0"},null,8,["modelValue","registration","onUpdate:registration","accommodations","convention","extras","forms","interests","tickets","title","venues"])],8,Td)])]),"item.data-table-expand":d(({internalItem:L})=>[G.value.findIndex(q=>q===L.key)>=0?(A(),N(de,{key:0,"append-icon":"mdi:mdi-chevron-up",size:"xs",variant:"flat",onClick:q=>G.value.splice(G.value.findIndex(le=>le===L.key),1)},{default:d(()=>[L.raw.registration.Notes&&L.raw.registration.Notes.length>0?(A(),J(fe,{key:0},[Z(ie(L.raw.registration.Notes.length),1)],64)):ne("",!0)]),_:2},1032,["onClick"])):(A(),N(de,{key:1,"append-icon":"mdi:mdi-chevron-down",size:"xs",variant:"flat",onClick:q=>G.value.push(L.key)},{default:d(()=>[L.raw.registration.Notes&&L.raw.registration.Notes.length>0?(A(),J(fe,{key:0},[Z(ie(L.raw.registration.Notes.length),1)],64)):ne("",!0)]),_:2},1032,["onClick"]))]),bottom:d(()=>[s(ru,{"current-page":be.value,"onUpdate:currentPage":y[22]||(y[22]=L=>be.value=L),"items-per-page":P.value,"onUpdate:itemsPerPage":y[23]||(y[23]=L=>P.value=L),"item-total":H.value},null,8,["current-page","items-per-page","item-total"]),ue("div",null,[s(de,{variant:"text",color:"primary",onClick:Ca},{default:d(()=>y[47]||(y[47]=[Z(" (Select all on every page) ")])),_:1}),s(de,{variant:"text",color:"primary",onClick:y[24]||(y[24]=L=>He.value=[])},{default:d(()=>y[48]||(y[48]=[Z(" (Unselect all on every page) ")])),_:1})])]),_:2},[Ye(w.headers,L=>({name:`item.${L.key}`,fn:d(({internalItem:q,index:le})=>[s(ss,{header:L,item:q,accommodations:Jt.value,convention:T.value,extras:$t.value,forms:x.value,interests:bt.value,tickets:St.value,user:F(Ga),venues:Kt.value,modelValue:w.items[le],"onUpdate:modelValue":Xe=>w.items[le]=Xe,onOpenActions:Me,onOpenPayments:Ft,onOpenTags:ve,onReload:y[20]||(y[20]=Xe=>At({page:be.value,itemsPerPage:P.value,sortBy:C.value})),onSwitchUser:Ja,onShowForm:at},null,8,["header","item","accommodations","convention","extras","forms","interests","tickets","user","venues","modelValue","onUpdate:modelValue"])])}))]),1032,["modelValue","expanded","page","items-per-page","sort-by","headers","items-length","items","loading","search","show-expand"]),s(Bi,{modelValue:He.value,"onUpdate:modelValue":y[30]||(y[30]=L=>He.value=L),details:w.items,"onUpdate:details":L=>w.items=L,"model-type":"registration",convention:T.value,"onUpdate:convention":y[31]||(y[31]=L=>T.value=L),custom:""},null,8,["modelValue","details","onUpdate:details","convention"])]),_:2},1024)):ne("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),mt.value?(A(),N(Ta,{key:0,modelValue:mt.value,"onUpdate:modelValue":y[33]||(y[33]=w=>mt.value=w),title:"Scan Code",width:"auto","card-class":"px-2 px-sm-6"},{default:d(()=>[s(hd,{onScan:ca})]),_:1},8,["modelValue"])):ne("",!0),gt.value?(A(),N(Ta,{key:1,modelValue:gt.value,"onUpdate:modelValue":y[34]||(y[34]=w=>gt.value=w),title:"Scan Code",width:"auto","card-class":"px-2 px-sm-6"},{default:d(()=>[s(pi,{onScan:za})]),_:1},8,["modelValue"])):ne("",!0),ye.value?(A(),N(eu,{key:2,title:"Edit Layouts",modelValue:ye.value,"onUpdate:modelValue":y[35]||(y[35]=w=>ye.value=w),convention:T.value,onSave:Et},null,8,["modelValue","convention"])):ne("",!0),Le.value?(A(),J(fe,{key:3},[_t.value?(A(),N(nr,{key:0,modelValue:_t.value,"onUpdate:modelValue":y[36]||(y[36]=w=>_t.value=w),registration:Le.value,"onUpdate:registration":y[37]||(y[37]=w=>Le.value=w),accommodations:Jt.value,convention:T.value,extras:$t.value,forms:x.value,interests:bt.value,tickets:St.value,title:`Registration Controls (#${Le.value.Reference} ${Le.value.User.DisplayName})`,"use-dialog":!0,venues:Kt.value},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","title","venues"])):ne("",!0)],64)):ne("",!0),Pt.value&&Ht.value&&Xt.value?(A(),N(ja,{key:4,modelValue:Pt.value,"onUpdate:modelValue":y[41]||(y[41]=w=>Pt.value=w),scrollable:!0,fullscreen:!0},{default:d(()=>[s(Wt,{class:"bg-red-darken-4"},{default:d(()=>[s(er,{color:"error"},{default:d(()=>[s(Hi,null,{default:d(()=>y[49]||(y[49]=[Z("Submission Editor - Admin Mode")])),_:1}),s(na),s(Si,null,{default:d(()=>[s(de,{icon:"mdi:mdi-window-close",onClick:y[38]||(y[38]=w=>Pt.value=!1)})]),_:1})]),_:1}),s(sa,{class:"pa-0"},{default:d(()=>[s(yi,{modelValue:Xt.value,"onUpdate:modelValue":y[39]||(y[39]=w=>Xt.value=w),admin:!0,convention:T.value,data:Ht.value,editable:!0,"registration-group":_a.value,onClose:y[40]||(y[40]=w=>{Pt.value=!1,At({page:be.value,itemsPerPage:P.value,sortBy:C.value})})},null,8,["modelValue","convention","data","registration-group"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):ne("",!0),s(ja,{modelValue:it.value,"onUpdate:modelValue":y[44]||(y[44]=w=>it.value=w)},{default:d(()=>[s(Wt,{class:"rounded-xl"},{default:d(()=>[s(ba,null,{default:d(()=>[s(Sa,{class:"px-0"},{default:d(()=>y[50]||(y[50]=[Z("Search Challenge")])),_:1}),s(Ir,null,{default:d(()=>y[51]||(y[51]=[Z("Please provide the reason for this search. If it relates to an open case, enter the relevant identifiers.")])),_:1})]),_:1}),s(sa,{color:"white"},{default:d(()=>[s(Or,{modelValue:Je.value,"onUpdate:modelValue":y[42]||(y[42]=w=>Je.value=w),label:"Reason"},null,8,["modelValue"])]),_:1}),s(_n,null,{default:d(()=>[s(de,{onClick:y[43]||(y[43]=w=>{Je.value="",it.value=!1})},{default:d(()=>y[52]||(y[52]=[Z("Cancel")])),_:1}),s(na),s(de,{onClick:F(Lt),disabled:Je.value.length<3},{default:d(()=>y[53]||(y[53]=[Z("Search")])),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):(A(),N(Zn,{key:1},{default:d(()=>y[54]||(y[54]=[Z(" Convention Not Found ")])),_:1}))}});export{Vc as default};
