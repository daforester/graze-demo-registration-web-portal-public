import{i as f,r as h,R as g,N as d,Q as A,D,G as r,x as E,aA as L,H as R,n as _}from"./index-CxNj4NCr.js";import{G as k}from"./userData-sbQ6wRDS.js";import{S as v}from"./setupLogin-BRoPNM7w.js";import{E as B}from"./emailFormVariant-DbFKH7n9.js";const I=f({__name:"AuthLogin",props:{variant:{default:()=>B.COMBINED}},setup(n){const u=g(),a=h(u.params.method),i=d(),t=new URL(location.href),s=A(),c=t.searchParams.get("code")||"",m=t.searchParams.get("token")||"",l=t.searchParams.get("state")||"";return i.oAuthLogin(a.value,c,m,l).then(({created:o,tokens:e,user:p})=>{v(e,p,s,o)}),k()&&n.variant!=="ADD_CREDENTIAL"&&s.push("/"),(o,e)=>(_(),D(R,null,[r("p",null,E(L(a.value)),1),e[0]||(e[0]=r("p",null,"Authorising...",-1))],64))}});export{I as default};
